var mv = Object.defineProperty;
var gv = (t, e, r) => e in t ? mv(t, e, { enumerable: !0, configurable: !0, writable: !0, value: r }) : t[e] = r;
var Zr = (t, e, r) => (gv(t, typeof e != "symbol" ? e + "" : e, r), r);
var nn = (t, e, r) => new Promise((i, s) => {
  var o = (c) => {
    try {
      l(r.next(c));
    } catch (_) {
      s(_);
    }
  }, h = (c) => {
    try {
      l(r.throw(c));
    } catch (_) {
      s(_);
    }
  }, l = (c) => c.done ? i(c.value) : Promise.resolve(c.value).then(o, h);
  l((r = r.apply(t, e)).next());
});
(function() {
  var D = !0;
  function t() {
    D || (this._$MT = null, this._$5S = null, this._$NP = 0, t._$42++, this._$5S = new vt(this));
  }
  t._$0s = 1, t._$4s = 2, t._$42 = 0, t._$62 = function(f, d) {
    try {
      if (d instanceof ArrayBuffer && (d = new DataView(d)), !(d instanceof DataView))
        throw new Yr("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");
      var x = new ft(d), L = x._$ST(), M = x._$ST(), N = x._$ST(), V;
      if (L == 109 && M == 111 && N == 99)
        V = x._$ST();
      else
        throw new Yr("_$gi _$C _$li , _$Q0 _$P0.");
      if (x._$gr(V), V > bt._$T7) {
        f._$NP |= t._$4s;
        var z = bt._$T7, k = "_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : " + z + " < _$f0 : " + V + ` )@_$SS#loadModel()
`;
        throw new Yr(k);
      }
      var q = x._$nP();
      if (V >= bt._$s7) {
        var tt = x._$9T(), et = x._$9T();
        if (tt != -30584 || et != -30584)
          throw f._$NP |= t._$0s, new Yr("_$gi _$C _$li , _$0 _$6 _$Ui.");
      }
      f._$KS(q);
      var ht = f.getModelContext();
      ht.setDrawParam(f.getDrawParam()), ht.init();
    } catch (gt) {
      h._$Rb(gt);
    }
  }, t.prototype._$KS = function(f) {
    this._$MT = f;
  }, t.prototype.getModelImpl = function() {
    return this._$MT == null && (this._$MT = new b(), this._$MT._$zP()), this._$MT;
  }, t.prototype.getCanvasWidth = function() {
    return this._$MT == null ? 0 : this._$MT.getCanvasWidth();
  }, t.prototype.getCanvasHeight = function() {
    return this._$MT == null ? 0 : this._$MT.getCanvasHeight();
  }, t.prototype.getParamFloat = function(f) {
    return typeof f != "number" && (f = this._$5S.getParamIndex(w.getID(f))), this._$5S.getParamFloat(f);
  }, t.prototype.setParamFloat = function(f, d, x) {
    typeof f != "number" && (f = this._$5S.getParamIndex(w.getID(f))), arguments.length < 3 && (x = 1), this._$5S.setParamFloat(f, this._$5S.getParamFloat(f) * (1 - x) + d * x);
  }, t.prototype.addToParamFloat = function(f, d, x) {
    typeof f != "number" && (f = this._$5S.getParamIndex(w.getID(f))), arguments.length < 3 && (x = 1), this._$5S.setParamFloat(f, this._$5S.getParamFloat(f) + d * x);
  }, t.prototype.multParamFloat = function(f, d, x) {
    typeof f != "number" && (f = this._$5S.getParamIndex(w.getID(f))), arguments.length < 3 && (x = 1), this._$5S.setParamFloat(f, this._$5S.getParamFloat(f) * (1 + (d - 1) * x));
  }, t.prototype.getParamIndex = function(f) {
    return this._$5S.getParamIndex(w.getID(f));
  }, t.prototype.loadParam = function() {
    this._$5S.loadParam();
  }, t.prototype.saveParam = function() {
    this._$5S.saveParam();
  }, t.prototype.init = function() {
    this._$5S.init();
  }, t.prototype.update = function() {
    this._$5S.update();
  }, t.prototype._$Rs = function() {
    return h._$li("_$60 _$PT _$Rs()"), -1;
  }, t.prototype._$Ds = function(f) {
    h._$li(`_$60 _$PT _$SS#_$Ds() 
`);
  }, t.prototype._$K2 = function() {
  }, t.prototype.draw = function() {
  }, t.prototype.getModelContext = function() {
    return this._$5S;
  }, t.prototype._$s2 = function() {
    return this._$NP;
  }, t.prototype._$P7 = function(f, d, x, L) {
    var M = -1, N = 0, V = this, z = 0.5, k = 0.15;
    if (x == 0) {
      for (var q = 0; q < f.length; q++) {
        var tt = f[q], et = d[q], ht = V.getParamFloat(tt) != 0;
        V.setPartsOpacity(et, ht ? 1 : 0);
      }
      return;
    } else if (f.length == 1) {
      var tt = f[0], gt = V.getParamFloat(tt) != 0, et = d[0], xt = V.getPartsOpacity(et), ut = x / L;
      gt ? (xt += ut, xt > 1 && (xt = 1)) : (xt -= ut, xt < 0 && (xt = 0)), V.setPartsOpacity(et, xt);
    } else {
      for (var q = 0; q < f.length; q++) {
        var tt = f[q], ht = V.getParamFloat(tt) != 0;
        if (ht) {
          if (M >= 0)
            break;
          M = q;
          var et = d[q];
          N = V.getPartsOpacity(et), N += x / L, N > 1 && (N = 1);
        }
      }
      M < 0 && (console.log("No _$wi _$q0/ _$U default[%s]", f[0]), M = 0, N = 1, V.loadParam(), V.setParamFloat(f[M], N), V.saveParam());
      for (var q = 0; q < f.length; q++) {
        var et = d[q];
        if (M == q)
          V.setPartsOpacity(et, N);
        else {
          var Ct = V.getPartsOpacity(et), wt;
          N < z ? wt = N * (z - 1) / z + 1 : wt = (1 - N) * z / (1 - z);
          {
            var St = (1 - wt) * (1 - N);
            St > k && (wt = 1 - k / (1 - N));
          }
          Ct > wt && (Ct = wt), V.setPartsOpacity(et, Ct);
        }
      }
    }
  }, t.prototype.setPartsOpacity = function(f, d) {
    typeof f != "number" && (f = this._$5S.getPartsDataIndex(_.getID(f))), this._$5S.setPartsOpacity(f, d);
  }, t.prototype.getPartsDataIndex = function(f) {
    return f instanceof _ || (f = _.getID(f)), this._$5S.getPartsDataIndex(f);
  }, t.prototype.getPartsOpacity = function(f) {
    return typeof f != "number" && (f = this._$5S.getPartsDataIndex(_.getID(f))), f < 0 ? 0 : this._$5S.getPartsOpacity(f);
  }, t.prototype.getDrawParam = function() {
  }, t.prototype.getDrawDataIndex = function(f) {
    return this._$5S.getDrawDataIndex(he.getID(f));
  }, t.prototype.getDrawData = function(f) {
    return this._$5S.getDrawData(f);
  }, t.prototype.getTransformedPoints = function(f) {
    var d = this._$5S._$C2(f);
    return d instanceof Mi ? d.getTransformedPoints() : null;
  }, t.prototype.getIndexArray = function(f) {
    if (f < 0 || f >= this._$5S._$aS.length)
      return null;
    var d = this._$5S._$aS[f];
    return d != null && d.getType() == Zt._$wb && d instanceof Ve ? d.getIndexArray() : null;
  };
  function e(f) {
    if (!D) {
      this.clipContextList = new Array(), this.glcontext = f.gl, this.dp_webgl = f, this.curFrameNo = 0, this.firstError_clipInNotUpdate = !0, this.colorBuffer = 0, this.isInitGLFBFunc = !1, this.tmpBoundsOnModel = new st(), yt.glContext.length > yt.frameBuffers.length && (this.curFrameNo = this.getMaskRenderTexture()), this.tmpModelToViewMatrix = new Vt(), this.tmpMatrix2 = new Vt(), this.tmpMatrixForMask = new Vt(), this.tmpMatrixForDraw = new Vt(), this.CHANNEL_COLORS = new Array();
      var d = new Et();
      d = new Et(), d.r = 0, d.g = 0, d.b = 0, d.a = 1, this.CHANNEL_COLORS.push(d), d = new Et(), d.r = 1, d.g = 0, d.b = 0, d.a = 0, this.CHANNEL_COLORS.push(d), d = new Et(), d.r = 0, d.g = 1, d.b = 0, d.a = 0, this.CHANNEL_COLORS.push(d), d = new Et(), d.r = 0, d.g = 0, d.b = 1, d.a = 0, this.CHANNEL_COLORS.push(d);
      for (var x = 0; x < this.CHANNEL_COLORS.length; x++)
        this.dp_webgl.setChannelFlagAsColor(x, this.CHANNEL_COLORS[x]);
    }
  }
  e.CHANNEL_COUNT = 4, e.RENDER_TEXTURE_USE_MIPMAP = !1, e.NOT_USED_FRAME = -100, e.prototype._$L7 = function() {
    if (this.tmpModelToViewMatrix && (this.tmpModelToViewMatrix = null), this.tmpMatrix2 && (this.tmpMatrix2 = null), this.tmpMatrixForMask && (this.tmpMatrixForMask = null), this.tmpMatrixForDraw && (this.tmpMatrixForDraw = null), this.tmpBoundsOnModel && (this.tmpBoundsOnModel = null), this.CHANNEL_COLORS) {
      for (var f = this.CHANNEL_COLORS.length - 1; f >= 0; --f)
        this.CHANNEL_COLORS.splice(f, 1);
      this.CHANNEL_COLORS = [];
    }
    this.releaseShader();
  }, e.prototype.releaseShader = function() {
    for (var f = yt.frameBuffers.length, d = 0; d < f; d++)
      this.gl.deleteFramebuffer(yt.frameBuffers[d].framebuffer);
    yt.frameBuffers = [], yt.glContext = [];
  }, e.prototype.init = function(f, d, x) {
    for (var L = 0; L < d.length; L++) {
      var M = d[L].getClipIDList();
      if (M != null) {
        var N = this.findSameClip(M);
        N == null && (N = new r(this, f, M), this.clipContextList.push(N));
        var V = d[L].getDrawDataID(), z = f.getDrawDataIndex(V);
        N.addClippedDrawData(V, z);
        var k = x[L];
        k.clipBufPre_clipContext = N;
      }
    }
  }, e.prototype.getMaskRenderTexture = function() {
    var f = null;
    return f = this.dp_webgl.createFramebuffer(), yt.frameBuffers[this.dp_webgl.glno] = f, this.dp_webgl.glno;
  }, e.prototype.setupClip = function(f, d) {
    for (var x = 0, L = 0; L < this.clipContextList.length; L++) {
      var M = this.clipContextList[L];
      this.calcClippedDrawTotalBounds(f, M), M.isUsing && x++;
    }
    if (x > 0) {
      var N = d.gl.getParameter(d.gl.FRAMEBUFFER_BINDING), V = new Array(4);
      V[0] = 0, V[1] = 0, V[2] = d.gl.canvas.width, V[3] = d.gl.canvas.height, d.gl.viewport(0, 0, yt.clippingMaskBufferSize, yt.clippingMaskBufferSize), this.setupLayoutBounds(x), d.gl.bindFramebuffer(d.gl.FRAMEBUFFER, yt.frameBuffers[this.curFrameNo].framebuffer), d.gl.clearColor(0, 0, 0, 0), d.gl.clear(d.gl.COLOR_BUFFER_BIT);
      for (var L = 0; L < this.clipContextList.length; L++) {
        var M = this.clipContextList[L], z = M.allClippedDrawRect;
        M.layoutChannelNo;
        var k = M.layoutBounds, q = 0.05;
        this.tmpBoundsOnModel._$jL(z), this.tmpBoundsOnModel.expand(z.width * q, z.height * q);
        var tt = k.width / this.tmpBoundsOnModel.width, et = k.height / this.tmpBoundsOnModel.height;
        this.tmpMatrix2.identity(), this.tmpMatrix2.translate(-1, -1, 0), this.tmpMatrix2.scale(2, 2, 1), this.tmpMatrix2.translate(k.x, k.y, 0), this.tmpMatrix2.scale(tt, et, 1), this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x, -this.tmpBoundsOnModel.y, 0), this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m), this.tmpMatrix2.identity(), this.tmpMatrix2.translate(k.x, k.y, 0), this.tmpMatrix2.scale(tt, et, 1), this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x, -this.tmpBoundsOnModel.y, 0), this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);
        for (var ht = this.tmpMatrixForMask.getArray(), gt = 0; gt < 16; gt++)
          M.matrixForMask[gt] = ht[gt];
        for (var xt = this.tmpMatrixForDraw.getArray(), gt = 0; gt < 16; gt++)
          M.matrixForDraw[gt] = xt[gt];
        for (var ut = M.clippingMaskDrawIndexList.length, Ct = 0; Ct < ut; Ct++) {
          var wt = M.clippingMaskDrawIndexList[Ct], St = f.getDrawData(wt), It = f._$C2(wt);
          d.setClipBufPre_clipContextForMask(M), St.draw(d, f, It);
        }
      }
      d.gl.bindFramebuffer(d.gl.FRAMEBUFFER, N), d.setClipBufPre_clipContextForMask(null), d.gl.viewport(V[0], V[1], V[2], V[3]);
    }
  }, e.prototype.getColorBuffer = function() {
    return this.colorBuffer;
  }, e.prototype.findSameClip = function(f) {
    for (var d = 0; d < this.clipContextList.length; d++) {
      var x = this.clipContextList[d], L = x.clipIDList.length;
      if (L == f.length) {
        for (var M = 0, N = 0; N < L; N++)
          for (var V = x.clipIDList[N], z = 0; z < L; z++)
            if (f[z] == V) {
              M++;
              break;
            }
        if (M == L)
          return x;
      }
    }
    return null;
  }, e.prototype.calcClippedDrawTotalBounds = function(f, d) {
    for (var x = f._$Ri.getModelImpl().getCanvasWidth(), L = f._$Ri.getModelImpl().getCanvasHeight(), M = x > L ? x : L, N = M, V = M, z = 0, k = 0, q = d.clippedDrawContextList.length, tt = 0; tt < q; tt++) {
      var et = d.clippedDrawContextList[tt], ht = et.drawDataIndex, gt = f._$C2(ht);
      if (gt._$yo()) {
        for (var xt = gt.getTransformedPoints(), ut = xt.length, Ct = [], wt = [], St = 0, It = at._$i2; It < ut; It += at._$No)
          Ct[St] = xt[It], wt[St] = xt[It + 1], St++;
        var re = Math.min.apply(null, Ct), Bt = Math.min.apply(null, wt), G = Math.max.apply(null, Ct), Mt = Math.max.apply(null, wt);
        re < N && (N = re), Bt < V && (V = Bt), G > z && (z = G), Mt > k && (k = Mt);
      }
    }
    if (N == M)
      d.allClippedDrawRect.x = 0, d.allClippedDrawRect.y = 0, d.allClippedDrawRect.width = 0, d.allClippedDrawRect.height = 0, d.isUsing = !1;
    else {
      var Ut = z - N, He = k - V;
      d.allClippedDrawRect.x = N, d.allClippedDrawRect.y = V, d.allClippedDrawRect.width = Ut, d.allClippedDrawRect.height = He, d.isUsing = !0;
    }
  }, e.prototype.setupLayoutBounds = function(f) {
    var d = f / e.CHANNEL_COUNT, x = f % e.CHANNEL_COUNT;
    d = ~~d, x = ~~x;
    for (var L = 0, M = 0; M < e.CHANNEL_COUNT; M++) {
      var N = d + (M < x ? 1 : 0);
      if (N != 0)
        if (N == 1) {
          var V = this.clipContextList[L++];
          V.layoutChannelNo = M, V.layoutBounds.x = 0, V.layoutBounds.y = 0, V.layoutBounds.width = 1, V.layoutBounds.height = 1;
        } else if (N == 2)
          for (var z = 0; z < N; z++) {
            var k = z % 2, q = 0;
            k = ~~k;
            var V = this.clipContextList[L++];
            V.layoutChannelNo = M, V.layoutBounds.x = k * 0.5, V.layoutBounds.y = 0, V.layoutBounds.width = 0.5, V.layoutBounds.height = 1;
          }
        else if (N <= 4)
          for (var z = 0; z < N; z++) {
            var k = z % 2, q = z / 2;
            k = ~~k, q = ~~q;
            var V = this.clipContextList[L++];
            V.layoutChannelNo = M, V.layoutBounds.x = k * 0.5, V.layoutBounds.y = q * 0.5, V.layoutBounds.width = 0.5, V.layoutBounds.height = 0.5;
          }
        else if (N <= 9)
          for (var z = 0; z < N; z++) {
            var k = z % 3, q = z / 3;
            k = ~~k, q = ~~q;
            var V = this.clipContextList[L++];
            V.layoutChannelNo = M, V.layoutBounds.x = k / 3, V.layoutBounds.y = q / 3, V.layoutBounds.width = 1 / 3, V.layoutBounds.height = 1 / 3;
          }
        else
          h._$li("_$6 _$0P mask count : %d", N);
    }
  };
  function r(f, d, x) {
    this.clipIDList = new Array(), this.clipIDList = x, this.clippingMaskDrawIndexList = new Array();
    for (var L = 0; L < x.length; L++)
      this.clippingMaskDrawIndexList.push(d.getDrawDataIndex(x[L]));
    this.clippedDrawContextList = new Array(), this.isUsing = !0, this.layoutChannelNo = 0, this.layoutBounds = new st(), this.allClippedDrawRect = new st(), this.matrixForMask = new Float32Array(16), this.matrixForDraw = new Float32Array(16), this.owner = f;
  }
  r.prototype.addClippedDrawData = function(f, d) {
    var x = new i(f, d);
    this.clippedDrawContextList.push(x);
  };
  function i(f, d) {
    this._$gP = f, this.drawDataIndex = d;
  }
  function s() {
    D || (this.color = null);
  }
  function o() {
    D || (this._$dP = null, this._$eo = null, this._$V0 = null, this._$dP = 1e3, this._$eo = 1e3, this._$V0 = 1, this._$a0());
  }
  o._$JT = function(f, d, x) {
    var L = f / d, M = x / d, N = M, V = 1 / 3, z = 2 / 3, k = 1 - (1 - M) * (1 - M), q = 1 - (1 - N) * (1 - N), tt = 0, et = (1 - M) * V * k + (N * z + (1 - N) * V) * (1 - k), ht = (N + (1 - N) * z) * q + (M * V + (1 - M) * z) * (1 - q), gt = 1, xt = gt - 3 * ht + 3 * et - tt, ut = 3 * ht - 6 * et + 3 * tt, Ct = 3 * et - 3 * tt, wt = tt;
    if (L <= 0)
      return 0;
    if (L >= 1)
      return 1;
    var St = L, It = St * St, re = St * It, Bt = xt * re + ut * It + Ct * St + wt;
    return Bt;
  }, o.prototype._$a0 = function() {
  }, o.prototype.setFadeIn = function(f) {
    this._$dP = f;
  }, o.prototype.setFadeOut = function(f) {
    this._$eo = f;
  }, o.prototype._$pT = function(f) {
    this._$V0 = f;
  }, o.prototype.getFadeOut = function() {
    return this._$eo;
  }, o.prototype._$4T = function() {
    return this._$eo;
  }, o.prototype._$mT = function() {
    return this._$V0;
  }, o.prototype.getDurationMSec = function() {
    return -1;
  }, o.prototype.getLoopDurationMSec = function() {
    return -1;
  }, o.prototype.updateParam = function(f, d) {
    if (!(!d._$AT || d._$9L)) {
      var x = Ft.getUserTimeMSec();
      if (d._$z2 < 0) {
        d._$z2 = x, d._$bs = x;
        var L = this.getDurationMSec();
        d._$Do < 0 && (d._$Do = L <= 0 ? -1 : d._$z2 + L);
      }
      var M = this._$V0, N = this._$dP == 0 ? 1 : li._$r2((x - d._$bs) / this._$dP), V = this._$eo == 0 || d._$Do < 0 ? 1 : li._$r2((d._$Do - x) / this._$eo);
      M = M * N * V, 0 <= M && M <= 1 || console.log("### assert!! ### "), this.updateParamExe(f, x, M, d), d._$Do > 0 && d._$Do < x && (d._$9L = !0);
    }
  }, o.prototype.updateParamExe = function(f, d, x, L) {
  };
  function h() {
  }
  h._$8s = 0, h._$fT = new Object(), h.start = function(f) {
    var d = h._$fT[f];
    d == null && (d = new l(), d._$r = f, h._$fT[f] = d), d._$0S = Ft.getSystemTimeMSec();
  }, h.dump = function(f) {
    var d = h._$fT[f];
    if (d != null) {
      var x = Ft.getSystemTimeMSec(), L = x - d._$0S;
      return console.log(f + " : " + L + "ms"), L;
    } else
      return -1;
  }, h.end = function(f) {
    var d = h._$fT[f];
    if (d != null) {
      var x = Ft.getSystemTimeMSec();
      return x - d._$0S;
    } else
      return -1;
  }, h._$li = function(f, d) {
  }, h._$Ji = function(f, d) {
    console.log(f, d);
  }, h._$dL = function(f, d) {
    console.log(f, d), console.log(`
`);
  }, h._$KL = function(f, d) {
    for (var x = 0; x < d; x++)
      x % 16 == 0 && x > 0 ? console.log(`
`) : x % 8 == 0 && x > 0 && console.log("  "), console.log("%02X ", f[x] & 255);
    console.log(`
`);
  }, h._$nr = function(f, d, x) {
    console.log(`%s
`, f);
    for (var L = d.length, M = 0; M < L; ++M)
      console.log("%5d", d[M]), console.log(`%s
`, x), console.log(",");
    console.log(`
`);
  }, h._$Rb = function(f) {
    console.log("dump exception : " + f), console.log("stack :: " + f.stack);
  };
  function l() {
    this._$r = null, this._$0S = null;
  }
  function c() {
    D || (this.x = null, this.y = null, this.width = null, this.height = null);
  }
  c.prototype._$8P = function() {
    return 0.5 * (this.x + this.x + this.width);
  }, c.prototype._$6P = function() {
    return 0.5 * (this.y + this.y + this.height);
  }, c.prototype._$EL = function() {
    return this.x + this.width;
  }, c.prototype._$5T = function() {
    return this.y + this.height;
  }, c.prototype._$jL = function(f, d, x, L) {
    this.x = f, this.y = d, this.width = x, this.height = L;
  }, c.prototype._$jL = function(f) {
    this.x = f.x, this.y = f.y, this.width = f.width, this.height = f.height;
  };
  function _(f) {
    D || Ur.prototype.constructor.call(this, f);
  }
  _.prototype = new Ur(), _._$tP = new Object(), _._$27 = function() {
    _._$tP.clear();
  }, _.getID = function(f) {
    var d = _._$tP[f];
    return d == null && (d = new _(f), _._$tP[f] = d), d;
  }, _.prototype._$3s = function() {
    return new _();
  };
  function y() {
  }
  function w(f) {
    D || Ur.prototype.constructor.call(this, f);
  }
  w.prototype = new Ur(), w._$tP = new Object(), w._$27 = function() {
    w._$tP.clear();
  }, w.getID = function(f) {
    var d = w._$tP[f];
    return d == null && (d = new w(f), w._$tP[f] = d), d;
  }, w.prototype._$3s = function() {
    return new w();
  };
  function b() {
    D || (this._$vo = null, this._$F2 = null, this._$ao = 400, this._$1S = 400, b._$42++);
  }
  b._$42 = 0, b.prototype._$zP = function() {
    this._$vo == null && (this._$vo = new ei()), this._$F2 == null && (this._$F2 = new Array());
  }, b.prototype.getCanvasWidth = function() {
    return this._$ao;
  }, b.prototype.getCanvasHeight = function() {
    return this._$1S;
  }, b.prototype._$F0 = function(f) {
    this._$vo = f._$nP(), this._$F2 = f._$nP(), this._$ao = f._$6L(), this._$1S = f._$6L();
  }, b.prototype._$6S = function(f) {
    this._$F2.push(f);
  }, b.prototype._$Xr = function() {
    return this._$F2;
  }, b.prototype._$E2 = function() {
    return this._$vo;
  };
  function E() {
    D || (this.p1 = new T(), this.p2 = new T(), this._$Fo = 0, this._$Db = 0, this._$L2 = 0, this._$M2 = 0, this._$ks = 0, this._$9b = 0, this._$iP = 0, this._$iT = 0, this._$lL = new Array(), this._$qP = new Array(), this.setup(0.3, 0.5, 0.1));
  }
  E.prototype.setup = function(f, d, x) {
    this._$ks = this._$Yb(), this.p2._$xT(), arguments.length == 3 && (this._$Fo = f, this._$L2 = d, this.p1._$p = x, this.p2._$p = x, this.p2.y = f, this.setup());
  }, E.prototype.getPhysicsPoint1 = function() {
    return this.p1;
  }, E.prototype.getPhysicsPoint2 = function() {
    return this.p2;
  }, E.prototype._$qr = function() {
    return this._$Db;
  }, E.prototype._$pr = function(f) {
    this._$Db = f;
  }, E.prototype._$5r = function() {
    return this._$M2;
  }, E.prototype._$Cs = function() {
    return this._$9b;
  }, E.prototype._$Yb = function() {
    return -180 * Math.atan2(this.p1.x - this.p2.x, -(this.p1.y - this.p2.y)) / Math.PI;
  }, E.prototype.addSrcParam = function(f, d, x, L) {
    var M = new O(f, d, x, L);
    this._$lL.push(M);
  }, E.prototype.addTargetParam = function(f, d, x, L) {
    var M = new Y(f, d, x, L);
    this._$qP.push(M);
  }, E.prototype.update = function(f, d) {
    if (this._$iP == 0) {
      this._$iP = this._$iT = d, this._$Fo = Math.sqrt(
        (this.p1.x - this.p2.x) * (this.p1.x - this.p2.x) + (this.p1.y - this.p2.y) * (this.p1.y - this.p2.y)
      );
      return;
    }
    var x = (d - this._$iT) / 1e3;
    if (x != 0) {
      for (var L = this._$lL.length - 1; L >= 0; --L) {
        var M = this._$lL[L];
        M._$oP(f, this);
      }
      this._$oo(f, x), this._$M2 = this._$Yb(), this._$9b = (this._$M2 - this._$ks) / x, this._$ks = this._$M2;
    }
    for (var L = this._$qP.length - 1; L >= 0; --L) {
      var N = this._$qP[L];
      N._$YS(f, this);
    }
    this._$iT = d;
  }, E.prototype._$oo = function(f, d) {
    d < 0.033 && (d = 0.033);
    var x = 1 / d;
    this.p1.vx = (this.p1.x - this.p1._$s0) * x, this.p1.vy = (this.p1.y - this.p1._$70) * x, this.p1.ax = (this.p1.vx - this.p1._$7L) * x, this.p1.ay = (this.p1.vy - this.p1._$HL) * x, this.p1.fx = this.p1.ax * this.p1._$p, this.p1.fy = this.p1.ay * this.p1._$p, this.p1._$xT();
    var L = -Math.atan2(this.p1.y - this.p2.y, this.p1.x - this.p2.x), M, N, V = Math.cos(L), z = Math.sin(L), k = 9.8 * this.p2._$p, q = this._$Db * n._$bS, tt = k * Math.cos(L - q);
    M = tt * z, N = tt * V;
    var et = -this.p1.fx * z * z, ht = -this.p1.fy * z * V, gt = -this.p2.vx * this._$L2, xt = -this.p2.vy * this._$L2;
    this.p2.fx = M + et + gt, this.p2.fy = N + ht + xt, this.p2.ax = this.p2.fx / this.p2._$p, this.p2.ay = this.p2.fy / this.p2._$p, this.p2.vx += this.p2.ax * d, this.p2.vy += this.p2.ay * d, this.p2.x += this.p2.vx * d, this.p2.y += this.p2.vy * d;
    var ut = Math.sqrt(
      (this.p1.x - this.p2.x) * (this.p1.x - this.p2.x) + (this.p1.y - this.p2.y) * (this.p1.y - this.p2.y)
    );
    this.p2.x = this.p1.x + this._$Fo * (this.p2.x - this.p1.x) / ut, this.p2.y = this.p1.y + this._$Fo * (this.p2.y - this.p1.y) / ut, this.p2.vx = (this.p2.x - this.p2._$s0) * x, this.p2.vy = (this.p2.y - this.p2._$70) * x, this.p2._$xT();
  };
  function T() {
    this._$p = 1, this.x = 0, this.y = 0, this.vx = 0, this.vy = 0, this.ax = 0, this.ay = 0, this.fx = 0, this.fy = 0, this._$s0 = 0, this._$70 = 0, this._$7L = 0, this._$HL = 0;
  }
  T.prototype._$xT = function() {
    this._$s0 = this.x, this._$70 = this.y, this._$7L = this.vx, this._$HL = this.vy;
  };
  function P(f, d, x) {
    this._$wL = null, this.scale = null, this._$V0 = null, this._$wL = f, this.scale = d, this._$V0 = x;
  }
  P.prototype._$oP = function(f, d) {
  };
  function O(f, d, x, L) {
    P.prototype.constructor.call(this, d, x, L), this._$tL = null, this._$tL = f;
  }
  O.prototype = new P(), O.prototype._$oP = function(f, d) {
    var x = this.scale * f.getParamFloat(this._$wL), L = d.getPhysicsPoint1();
    switch (this._$tL) {
      default:
      case E.Src.SRC_TO_X:
        L.x = L.x + (x - L.x) * this._$V0;
        break;
      case E.Src.SRC_TO_Y:
        L.y = L.y + (x - L.y) * this._$V0;
        break;
      case E.Src.SRC_TO_G_ANGLE:
        var M = d._$qr();
        M = M + (x - M) * this._$V0, d._$pr(M);
        break;
    }
  };
  function H(f, d, x) {
    this._$wL = null, this.scale = null, this._$V0 = null, this._$wL = f, this.scale = d, this._$V0 = x;
  }
  H.prototype._$YS = function(f, d) {
  };
  function Y(f, d, x, L) {
    H.prototype.constructor.call(this, d, x, L), this._$YP = null, this._$YP = f;
  }
  Y.prototype = new H(), Y.prototype._$YS = function(f, d) {
    switch (this._$YP) {
      default:
      case E.Target.TARGET_FROM_ANGLE:
        f.setParamFloat(this._$wL, this.scale * d._$5r(), this._$V0);
        break;
      case E.Target.TARGET_FROM_ANGLE_V:
        f.setParamFloat(this._$wL, this.scale * d._$Cs(), this._$V0);
        break;
    }
  }, E.Src = function() {
  }, E.Src.SRC_TO_X = "SRC_TO_X", E.Src.SRC_TO_Y = "SRC_TO_Y", E.Src.SRC_TO_G_ANGLE = "SRC_TO_G_ANGLE", E.Target = function() {
  }, E.Target.TARGET_FROM_ANGLE = "TARGET_FROM_ANGLE", E.Target.TARGET_FROM_ANGLE_V = "TARGET_FROM_ANGLE_V";
  function J() {
    D || (this._$fL = 0, this._$gL = 0, this._$B0 = 1, this._$z0 = 1, this._$qT = 0, this.reflectX = !1, this.reflectY = !1);
  }
  J.prototype.init = function(f) {
    this._$fL = f._$fL, this._$gL = f._$gL, this._$B0 = f._$B0, this._$z0 = f._$z0, this._$qT = f._$qT, this.reflectX = f.reflectX, this.reflectY = f.reflectY;
  }, J.prototype._$F0 = function(f) {
    this._$fL = f._$_T(), this._$gL = f._$_T(), this._$B0 = f._$_T(), this._$z0 = f._$_T(), this._$qT = f._$_T(), f.getFormatVersion() >= bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2 && (this.reflectX = f._$po(), this.reflectY = f._$po());
  }, J.prototype._$e = function() {
  };
  var it = function() {
  };
  it._$ni = function(f, d, x, L, M, N, V, z, k) {
    var q = V * N - z * M;
    if (q == 0)
      return null;
    var tt = ((f - x) * N - (d - L) * M) / q, et;
    return M != 0 ? et = (f - x - tt * V) / M : et = (d - L - tt * z) / N, isNaN(et) && (et = (f - x - tt * V) / M, isNaN(et) && (et = (d - L - tt * z) / N), isNaN(et) && (console.log("a is NaN @UtVector#_$ni() "), console.log("v1x : " + M), console.log("v1x != 0 ? " + (M != 0)))), k == null ? new Array(et, tt) : (k[0] = et, k[1] = tt, k);
  };
  function st() {
    D || (this.x = null, this.y = null, this.width = null, this.height = null);
  }
  st.prototype._$8P = function() {
    return this.x + 0.5 * this.width;
  }, st.prototype._$6P = function() {
    return this.y + 0.5 * this.height;
  }, st.prototype._$EL = function() {
    return this.x + this.width;
  }, st.prototype._$5T = function() {
    return this.y + this.height;
  }, st.prototype._$jL = function(f, d, x, L) {
    this.x = f, this.y = d, this.width = x, this.height = L;
  }, st.prototype._$jL = function(f) {
    this.x = f.x, this.y = f.y, this.width = f.width, this.height = f.height;
  }, st.prototype.contains = function(f, d) {
    return this.x <= this.x && this.y <= this.y && this.x <= this.x + this.width && this.y <= this.y + this.height;
  }, st.prototype.expand = function(f, d) {
    this.x -= f, this.y -= d, this.width += f * 2, this.height += d * 2;
  };
  function K() {
  }
  K._$Z2 = function(f, d, x, L) {
    var M = d._$Q2(f, x), N = f._$vs(), V = f._$Tr();
    if (d._$zr(N, V, M), M <= 0)
      return L[N[0]];
    if (M == 1) {
      var z = L[N[0]], k = L[N[1]], q = V[0];
      return z + (k - z) * q | 0;
    } else if (M == 2) {
      var z = L[N[0]], k = L[N[1]], tt = L[N[2]], et = L[N[3]], q = V[0], ht = V[1], gt = z + (k - z) * q | 0, xt = tt + (et - tt) * q | 0;
      return gt + (xt - gt) * ht | 0;
    } else if (M == 3) {
      var ut = L[N[0]], Ct = L[N[1]], wt = L[N[2]], St = L[N[3]], It = L[N[4]], re = L[N[5]], Bt = L[N[6]], G = L[N[7]], q = V[0], ht = V[1], Mt = V[2], z = ut + (Ct - ut) * q | 0, k = wt + (St - wt) * q | 0, tt = It + (re - It) * q | 0, et = Bt + (G - Bt) * q | 0, gt = z + (k - z) * ht | 0, xt = tt + (et - tt) * ht | 0;
      return gt + (xt - gt) * Mt | 0;
    } else if (M == 4) {
      var Ut = L[N[0]], He = L[N[1]], sr = L[N[2]], kt = L[N[3]], hr = L[N[4]], pe = L[N[5]], oe = L[N[6]], ge = L[N[7]], Ee = L[N[8]], ye = L[N[9]], Se = L[N[10]], te = L[N[11]], de = L[N[12]], Lt = L[N[13]], ie = L[N[14]], Le = L[N[15]], q = V[0], ht = V[1], Mt = V[2], pr = V[3], ut = Ut + (He - Ut) * q | 0, Ct = sr + (kt - sr) * q | 0, wt = hr + (pe - hr) * q | 0, St = oe + (ge - oe) * q | 0, It = Ee + (ye - Ee) * q | 0, re = Se + (te - Se) * q | 0, Bt = de + (Lt - de) * q | 0, G = ie + (Le - ie) * q | 0, z = ut + (Ct - ut) * ht | 0, k = wt + (St - wt) * ht | 0, tt = It + (re - It) * ht | 0, et = Bt + (G - Bt) * ht | 0, gt = z + (k - z) * Mt | 0, xt = tt + (et - tt) * Mt | 0;
      return gt + (xt - gt) * pr | 0;
    } else {
      for (var ze = 1 << M, Ne = new Float32Array(ze), je = 0; je < ze; je++) {
        for (var _t = je, Sr = 1, rr = 0; rr < M; rr++)
          Sr *= _t % 2 == 0 ? 1 - V[rr] : V[rr], _t /= 2;
        Ne[je] = Sr;
      }
      for (var Nr = new Float32Array(ze), vr = 0; vr < ze; vr++)
        Nr[vr] = L[N[vr]];
      for (var Jr = 0, vr = 0; vr < ze; vr++)
        Jr += Ne[vr] * Nr[vr];
      return Jr + 0.5 | 0;
    }
  }, K._$br = function(f, d, x, L) {
    var M = d._$Q2(f, x), N = f._$vs(), V = f._$Tr();
    if (d._$zr(N, V, M), M <= 0)
      return L[N[0]];
    if (M == 1) {
      var z = L[N[0]], k = L[N[1]], q = V[0];
      return z + (k - z) * q;
    } else if (M == 2) {
      var z = L[N[0]], k = L[N[1]], tt = L[N[2]], et = L[N[3]], q = V[0], ht = V[1];
      return (1 - ht) * (z + (k - z) * q) + ht * (tt + (et - tt) * q);
    } else if (M == 3) {
      var gt = L[N[0]], xt = L[N[1]], ut = L[N[2]], Ct = L[N[3]], wt = L[N[4]], St = L[N[5]], It = L[N[6]], re = L[N[7]], q = V[0], ht = V[1], Bt = V[2];
      return (1 - Bt) * ((1 - ht) * (gt + (xt - gt) * q) + ht * (ut + (Ct - ut) * q)) + Bt * ((1 - ht) * (wt + (St - wt) * q) + ht * (It + (re - It) * q));
    } else if (M == 4) {
      var G = L[N[0]], Mt = L[N[1]], Ut = L[N[2]], He = L[N[3]], sr = L[N[4]], kt = L[N[5]], hr = L[N[6]], pe = L[N[7]], oe = L[N[8]], ge = L[N[9]], Ee = L[N[10]], ye = L[N[11]], Se = L[N[12]], te = L[N[13]], de = L[N[14]], Lt = L[N[15]], q = V[0], ht = V[1], Bt = V[2], ie = V[3];
      return (1 - ie) * ((1 - Bt) * ((1 - ht) * (G + (Mt - G) * q) + ht * (Ut + (He - Ut) * q)) + Bt * ((1 - ht) * (sr + (kt - sr) * q) + ht * (hr + (pe - hr) * q))) + ie * ((1 - Bt) * ((1 - ht) * (oe + (ge - oe) * q) + ht * (Ee + (ye - Ee) * q)) + Bt * ((1 - ht) * (Se + (te - Se) * q) + ht * (de + (Lt - de) * q)));
    } else {
      for (var Le = 1 << M, pr = new Float32Array(Le), ze = 0; ze < Le; ze++) {
        for (var Ne = ze, je = 1, _t = 0; _t < M; _t++)
          je *= Ne % 2 == 0 ? 1 - V[_t] : V[_t], Ne /= 2;
        pr[ze] = je;
      }
      for (var Sr = new Float32Array(Le), rr = 0; rr < Le; rr++)
        Sr[rr] = L[N[rr]];
      for (var Nr = 0, rr = 0; rr < Le; rr++)
        Nr += pr[rr] * Sr[rr];
      return Nr;
    }
  }, K._$Vr = function(f, d, x, L, M, N, V, z) {
    var k = d._$Q2(f, x), q = f._$vs(), tt = f._$Tr();
    d._$zr(q, tt, k);
    var et = L * 2, ht = V;
    if (k <= 0) {
      var gt = q[0], xt = M[gt];
      if (z == 2 && V == 0)
        Ft._$jT(xt, 0, N, 0, et);
      else
        for (var ut = 0; ut < et; )
          N[ht] = xt[ut++], N[ht + 1] = xt[ut++], ht += z;
    } else if (k == 1)
      for (var xt = M[q[0]], Ct = M[q[1]], wt = tt[0], St = 1 - wt, ut = 0; ut < et; )
        N[ht] = xt[ut] * St + Ct[ut] * wt, ++ut, N[ht + 1] = xt[ut] * St + Ct[ut] * wt, ++ut, ht += z;
    else if (k == 2)
      for (var xt = M[q[0]], Ct = M[q[1]], It = M[q[2]], re = M[q[3]], wt = tt[0], Bt = tt[1], St = 1 - wt, G = 1 - Bt, Mt = G * St, Ut = G * wt, He = Bt * St, sr = Bt * wt, ut = 0; ut < et; )
        N[ht] = Mt * xt[ut] + Ut * Ct[ut] + He * It[ut] + sr * re[ut], ++ut, N[ht + 1] = Mt * xt[ut] + Ut * Ct[ut] + He * It[ut] + sr * re[ut], ++ut, ht += z;
    else if (k == 3)
      for (var kt = M[q[0]], hr = M[q[1]], pe = M[q[2]], oe = M[q[3]], ge = M[q[4]], Ee = M[q[5]], ye = M[q[6]], Se = M[q[7]], wt = tt[0], Bt = tt[1], te = tt[2], St = 1 - wt, G = 1 - Bt, de = 1 - te, Lt = de * G * St, ie = de * G * wt, Le = de * Bt * St, pr = de * Bt * wt, ze = te * G * St, Ne = te * G * wt, je = te * Bt * St, _t = te * Bt * wt, ut = 0; ut < et; )
        N[ht] = Lt * kt[ut] + ie * hr[ut] + Le * pe[ut] + pr * oe[ut] + ze * ge[ut] + Ne * Ee[ut] + je * ye[ut] + _t * Se[ut], ++ut, N[ht + 1] = Lt * kt[ut] + ie * hr[ut] + Le * pe[ut] + pr * oe[ut] + ze * ge[ut] + Ne * Ee[ut] + je * ye[ut] + _t * Se[ut], ++ut, ht += z;
    else if (k == 4)
      for (var Sr = M[q[0]], rr = M[q[1]], Nr = M[q[2]], vr = M[q[3]], Jr = M[q[4]], ui = M[q[5]], Qr = M[q[6]], ri = M[q[7]], br = M[q[8]], Ui = M[q[9]], Gi = M[q[10]], hi = M[q[11]], Di = M[q[12]], ii = M[q[13]], Ie = M[q[14]], vn = M[q[15]], wt = tt[0], Bt = tt[1], te = tt[2], fi = tt[3], St = 1 - wt, G = 1 - Bt, de = 1 - te, Pi = 1 - fi, ta = Pi * de * G * St, tn = Pi * de * G * wt, Or = Pi * de * Bt * St, Hs = Pi * de * Bt * wt, ea = Pi * te * G * St, ra = Pi * te * G * wt, zs = Pi * te * Bt * St, js = Pi * te * Bt * wt, Ws = fi * de * G * St, ps = fi * de * G * wt, Rn = fi * de * Bt * St, Sn = fi * de * Bt * wt, Nn = fi * te * G * St, Ys = fi * te * G * wt, qs = fi * te * Bt * St, Zs = fi * te * Bt * wt, ut = 0; ut < et; )
        N[ht] = ta * Sr[ut] + tn * rr[ut] + Or * Nr[ut] + Hs * vr[ut] + ea * Jr[ut] + ra * ui[ut] + zs * Qr[ut] + js * ri[ut] + Ws * br[ut] + ps * Ui[ut] + Rn * Gi[ut] + Sn * hi[ut] + Nn * Di[ut] + Ys * ii[ut] + qs * Ie[ut] + Zs * vn[ut], ++ut, N[ht + 1] = ta * Sr[ut] + tn * rr[ut] + Or * Nr[ut] + Hs * vr[ut] + ea * Jr[ut] + ra * ui[ut] + zs * Qr[ut] + js * ri[ut] + Ws * br[ut] + ps * Ui[ut] + Rn * Gi[ut] + Sn * hi[ut] + Nn * Di[ut] + Ys * ii[ut] + qs * Ie[ut] + Zs * vn[ut], ++ut, ht += z;
    else {
      for (var en = 1 << k, Ln = new Float32Array(en), On = 0; On < en; On++) {
        for (var Js = On, Bi = 1, mn = 0; mn < k; mn++)
          Bi *= Js % 2 == 0 ? 1 - tt[mn] : tt[mn], Js /= 2;
        Ln[On] = Bi;
      }
      for (var rn = new Float32Array(en), qr = 0; qr < en; qr++)
        rn[qr] = M[q[qr]];
      for (var ut = 0; ut < et; ) {
        for (var Qs = 0, ia = 0, Ks = ut + 1, qr = 0; qr < en; qr++)
          Qs += Ln[qr] * rn[qr][ut], ia += Ln[qr] * rn[qr][Ks];
        ut += 2, N[ht] = Qs, N[ht + 1] = ia, ht += z;
      }
    }
  };
  function At() {
    D || (this.x = null, this.y = null);
  }
  At.prototype._$HT = function(f, d) {
    this.x = f, this.y = d;
  }, At.prototype._$HT = function(f) {
    this.x = f.x, this.y = f.y;
  };
  function Tt() {
    D || (this._$gP = null, this._$dr = null, this._$GS = null, this._$qb = null, this._$Lb = null, this._$mS = null, this.clipID = null, this.clipIDList = new Array());
  }
  Tt._$ur = -2, Tt._$ES = 500, Tt._$wb = 2, Tt._$8S = 3, Tt._$52 = Tt._$ES, Tt._$R2 = Tt._$ES, Tt._$or = function() {
    return Tt._$52;
  }, Tt._$Pr = function() {
    return Tt._$R2;
  }, Tt.prototype.convertClipIDForV2_11 = function(f) {
    var d = [];
    return f == null || f.length == 0 ? null : /,/.test(f) ? (d = f.id.split(","), d) : (d.push(f.id), d);
  }, Tt.prototype._$F0 = function(f) {
    this._$gP = f._$nP(), this._$dr = f._$nP(), this._$GS = f._$nP(), this._$qb = f._$6L(), this._$Lb = f._$cS(), this._$mS = f._$Tb(), f.getFormatVersion() >= bt._$T7 ? (this.clipID = f._$nP(), this.clipIDList = this.convertClipIDForV2_11(this.clipID)) : this.clipIDList = [], this._$MS(this._$Lb);
  }, Tt.prototype.getClipIDList = function() {
    return this.clipIDList;
  }, Tt.prototype.init = function(f) {
  }, Tt.prototype._$Nr = function(f, d) {
    if (d._$IS[0] = !1, d._$Us = K._$Z2(f, this._$GS, d._$IS, this._$Lb), !yt._$Zs) {
      if (d._$IS[0])
        return;
    }
    d._$7s = K._$br(f, this._$GS, d._$IS, this._$mS);
  }, Tt.prototype._$2b = function(f, d) {
  }, Tt.prototype.getDrawDataID = function() {
    return this._$gP;
  }, Tt.prototype._$j2 = function(f) {
    this._$gP = f;
  }, Tt.prototype.getOpacity = function(f, d) {
    return d._$7s;
  }, Tt.prototype._$zS = function(f, d) {
    return d._$Us;
  }, Tt.prototype._$MS = function(f) {
    for (var d = f.length - 1; d >= 0; --d) {
      var x = f[d];
      x < Tt._$52 ? Tt._$52 = x : x > Tt._$R2 && (Tt._$R2 = x);
    }
  }, Tt.prototype.getTargetBaseDataID = function() {
    return this._$dr;
  }, Tt.prototype._$gs = function(f) {
    this._$dr = f;
  }, Tt.prototype._$32 = function() {
    return this._$dr != null && this._$dr != ar._$2o();
  }, Tt.prototype.preDraw = function(f, d, x) {
  }, Tt.prototype.draw = function(f, d, x) {
  }, Tt.prototype.getType = function() {
  }, Tt.prototype._$B2 = function(f, d, x) {
  };
  function dt() {
    D || (this._$Eb = dt._$ps, this._$lT = 1, this._$C0 = 1, this._$tT = 1, this._$WL = 1, this.culling = !1, this.matrix4x4 = new Float32Array(16), this.premultipliedAlpha = !1, this.anisotropy = 0, this.clippingProcess = dt.CLIPPING_PROCESS_NONE, this.clipBufPre_clipContextMask = null, this.clipBufPre_clipContextDraw = null, this.CHANNEL_COLORS = new Array());
  }
  dt._$ps = 32, dt.CLIPPING_PROCESS_NONE = 0, dt.CLIPPING_PROCESS_OVERWRITE_ALPHA = 1, dt.CLIPPING_PROCESS_MULTIPLY_ALPHA = 2, dt.CLIPPING_PROCESS_DRAW = 3, dt.CLIPPING_PROCESS_CLEAR_ALPHA = 4, dt.prototype.setChannelFlagAsColor = function(f, d) {
    this.CHANNEL_COLORS[f] = d;
  }, dt.prototype.getChannelFlagAsColor = function(f) {
    return this.CHANNEL_COLORS[f];
  }, dt.prototype._$ZT = function() {
  }, dt.prototype._$Uo = function(f, d, x, L, M, N, V) {
  }, dt.prototype._$Rs = function() {
    return -1;
  }, dt.prototype._$Ds = function(f) {
  }, dt.prototype.setBaseColor = function(f, d, x, L) {
    f < 0 ? f = 0 : f > 1 && (f = 1), d < 0 ? d = 0 : d > 1 && (d = 1), x < 0 ? x = 0 : x > 1 && (x = 1), L < 0 ? L = 0 : L > 1 && (L = 1), this._$lT = f, this._$C0 = d, this._$tT = x, this._$WL = L;
  }, dt.prototype._$WP = function(f) {
    this.culling = f;
  }, dt.prototype.setMatrix = function(f) {
    for (var d = 0; d < 16; d++)
      this.matrix4x4[d] = f[d];
  }, dt.prototype._$IT = function() {
    return this.matrix4x4;
  }, dt.prototype.setPremultipliedAlpha = function(f) {
    this.premultipliedAlpha = f;
  }, dt.prototype.isPremultipliedAlpha = function() {
    return this.premultipliedAlpha;
  }, dt.prototype.setAnisotropy = function(f) {
    this.anisotropy = f;
  }, dt.prototype.getAnisotropy = function() {
    return this.anisotropy;
  }, dt.prototype.getClippingProcess = function() {
    return this.clippingProcess;
  }, dt.prototype.setClippingProcess = function(f) {
    this.clippingProcess = f;
  }, dt.prototype.setClipBufPre_clipContextForMask = function(f) {
    this.clipBufPre_clipContextMask = f;
  }, dt.prototype.getClipBufPre_clipContextMask = function() {
    return this.clipBufPre_clipContextMask;
  }, dt.prototype.setClipBufPre_clipContextForDraw = function(f) {
    this.clipBufPre_clipContextDraw = f;
  }, dt.prototype.getClipBufPre_clipContextDraw = function() {
    return this.clipBufPre_clipContextDraw;
  };
  function Et() {
    D || (this.a = 1, this.r = 1, this.g = 1, this.b = 1, this.scale = 1, this._$ho = 1, this.blendMode = yt.L2D_COLOR_BLEND_MODE_MULT);
  }
  function Rt() {
    D || (this._$kP = null, this._$dr = null, this._$Ai = !0, this._$mS = null);
  }
  Rt._$ur = -2, Rt._$c2 = 1, Rt._$_b = 2, Rt.prototype._$F0 = function(f) {
    this._$kP = f._$nP(), this._$dr = f._$nP();
  }, Rt.prototype.readV2_opacity = function(f) {
    f.getFormatVersion() >= bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2 && (this._$mS = f._$Tb());
  }, Rt.prototype.init = function(f) {
  }, Rt.prototype._$Nr = function(f, d) {
  }, Rt.prototype.interpolateOpacity = function(f, d, x, L) {
    this._$mS == null ? x.setInterpolatedOpacity(1) : x.setInterpolatedOpacity(K._$br(f, d, L, this._$mS));
  }, Rt.prototype._$2b = function(f, d) {
  }, Rt.prototype._$nb = function(f, d, x, L, M, N, V) {
  }, Rt.prototype.getType = function() {
  }, Rt.prototype._$gs = function(f) {
    this._$dr = f;
  }, Rt.prototype._$a2 = function(f) {
    this._$kP = f;
  }, Rt.prototype.getTargetBaseDataID = function() {
    return this._$dr;
  }, Rt.prototype.getBaseDataID = function() {
    return this._$kP;
  }, Rt.prototype._$32 = function() {
    return this._$dr != null && this._$dr != ar._$2o();
  };
  function Ft() {
  }
  Ft._$W2 = 0, Ft._$CS = Ft._$W2, Ft._$Mo = function() {
    return !0;
  }, Ft._$XP = function(f) {
    try {
      for (var d = getTimeMSec(); getTimeMSec() - d < f; )
        ;
    } catch (x) {
      x._$Rb();
    }
  }, Ft.getUserTimeMSec = function() {
    return Ft._$CS == Ft._$W2 ? Ft.getSystemTimeMSec() : Ft._$CS;
  }, Ft.setUserTimeMSec = function(f) {
    Ft._$CS = f;
  }, Ft.updateUserTimeMSec = function() {
    return Ft._$CS = Ft.getSystemTimeMSec();
  }, Ft.getTimeMSec = function() {
    return new Date().getTime();
  }, Ft.getSystemTimeMSec = function() {
    return new Date().getTime();
  }, Ft._$Q = function(f) {
  }, Ft._$jT = function(f, d, x, L, M) {
    for (var N = 0; N < M; N++)
      x[L + N] = f[d + N];
  };
  function ne() {
    D || (this._$VP = 0, this._$wL = null, this._$GP = null, this._$8o = ne._$ds, this._$2r = -1, this._$O2 = 0, this._$ri = 0);
  }
  ne._$ds = -2, ne.prototype._$F0 = function(f) {
    this._$wL = f._$nP(), this._$VP = f._$6L(), this._$GP = f._$nP();
  }, ne.prototype.getParamIndex = function(f) {
    return this._$2r != f && (this._$8o = ne._$ds), this._$8o;
  }, ne.prototype._$Pb = function(f, d) {
    this._$8o = f, this._$2r = d;
  }, ne.prototype.getParamID = function() {
    return this._$wL;
  }, ne.prototype._$yP = function(f) {
    this._$wL = f;
  }, ne.prototype._$N2 = function() {
    return this._$VP;
  }, ne.prototype._$d2 = function() {
    return this._$GP;
  }, ne.prototype._$t2 = function(f, d) {
    this._$VP = f, this._$GP = d;
  }, ne.prototype._$Lr = function() {
    return this._$O2;
  }, ne.prototype._$wr = function(f) {
    this._$O2 = f;
  }, ne.prototype._$SL = function() {
    return this._$ri;
  }, ne.prototype._$AL = function(f) {
    this._$ri = f;
  };
  function ae() {
  }
  ae.startsWith = function(f, d, x) {
    var L = d + x.length;
    if (L >= f.length)
      return !1;
    for (var M = d; M < L; M++)
      if (ae.getChar(f, M) != x.charAt(M - d))
        return !1;
    return !0;
  }, ae.getChar = function(f, d) {
    return String.fromCharCode(f.getUint8(d));
  }, ae.createString = function(f, d, x) {
    for (var L = new ArrayBuffer(x * 2), M = new Uint16Array(L), N = 0; N < x; N++)
      M[N] = f.getUint8(d + N);
    return String.fromCharCode.apply(null, M);
  }, ae._$LS = function(f, d, x, L) {
    f instanceof ArrayBuffer && (f = new DataView(f));
    var M = x, N = !1, V = !1, z = 0, k = ae.getChar(f, M);
    k == "-" && (N = !0, M++);
    for (var q = !1; M < d; M++) {
      switch (k = ae.getChar(f, M), k) {
        case "0":
          z = z * 10;
          break;
        case "1":
          z = z * 10 + 1;
          break;
        case "2":
          z = z * 10 + 2;
          break;
        case "3":
          z = z * 10 + 3;
          break;
        case "4":
          z = z * 10 + 4;
          break;
        case "5":
          z = z * 10 + 5;
          break;
        case "6":
          z = z * 10 + 6;
          break;
        case "7":
          z = z * 10 + 7;
          break;
        case "8":
          z = z * 10 + 8;
          break;
        case "9":
          z = z * 10 + 9;
          break;
        case ".":
          V = !0, M++, q = !0;
          break;
        default:
          q = !0;
          break;
      }
      if (q)
        break;
    }
    if (V)
      for (var tt = 0.1, et = !1; M < d; M++) {
        switch (k = ae.getChar(f, M), k) {
          case "0":
            break;
          case "1":
            z += tt * 1;
            break;
          case "2":
            z += tt * 2;
            break;
          case "3":
            z += tt * 3;
            break;
          case "4":
            z += tt * 4;
            break;
          case "5":
            z += tt * 5;
            break;
          case "6":
            z += tt * 6;
            break;
          case "7":
            z += tt * 7;
            break;
          case "8":
            z += tt * 8;
            break;
          case "9":
            z += tt * 9;
            break;
          default:
            et = !0;
            break;
        }
        if (tt *= 0.1, et)
          break;
      }
    return N && (z = -z), L[0] = M, z;
  };
  function zt() {
    D || (this._$Ob = null);
  }
  zt.prototype._$zP = function() {
    this._$Ob = new Array();
  }, zt.prototype._$F0 = function(f) {
    this._$Ob = f._$nP();
  }, zt.prototype._$Ur = function(f) {
    if (f._$WS())
      return !0;
    for (var d = f._$v2(), x = this._$Ob.length - 1; x >= 0; --x) {
      var L = this._$Ob[x].getParamIndex(d);
      if (L == ne._$ds && (L = f.getParamIndex(this._$Ob[x].getParamID())), f._$Xb(L))
        return !0;
    }
    return !1;
  }, zt.prototype._$Q2 = function(f, d) {
    for (var x = this._$Ob.length, L = f._$v2(), M = 0, N, V, z = 0; z < x; z++) {
      var k = this._$Ob[z];
      if (N = k.getParamIndex(L), N == ne._$ds && (N = f.getParamIndex(k.getParamID()), k._$Pb(N, L)), N < 0)
        throw new Exception("err 23242 : " + k.getParamID());
      var q = N < 0 ? 0 : f.getParamFloat(N);
      V = k._$N2();
      var tt = k._$d2(), et = -1, ht = 0, gt, xt;
      if (!(V < 1))
        if (V == 1)
          gt = tt[0], gt - at._$J < q && q < gt + at._$J ? (et = 0, ht = 0) : (et = 0, d[0] = !0);
        else if (gt = tt[0], q < gt - at._$J)
          et = 0, d[0] = !0;
        else if (q < gt + at._$J)
          et = 0;
        else {
          for (var ut = !1, Ct = 1; Ct < V; ++Ct) {
            if (xt = tt[Ct], q < xt + at._$J) {
              xt - at._$J < q ? et = Ct : (et = Ct - 1, ht = (q - gt) / (xt - gt), M++), ut = !0;
              break;
            }
            gt = xt;
          }
          ut || (et = V - 1, ht = 0, d[0] = !0);
        }
      k._$wr(et), k._$AL(ht);
    }
    return M;
  }, zt.prototype._$zr = function(f, d, x) {
    var L = 1 << x;
    L + 1 > at._$Qb && console.log(`err 23245
`);
    for (var M = this._$Ob.length, N = 1, V = 1, z = 0, k = 0; k < L; ++k)
      f[k] = 0;
    for (var q = 0; q < M; ++q) {
      var tt = this._$Ob[q];
      if (tt._$SL() == 0) {
        var et = tt._$Lr() * N;
        if (et < 0 && yt._$3T)
          throw new Exception("err 23246");
        for (var k = 0; k < L; ++k)
          f[k] += et;
      } else {
        for (var et = N * tt._$Lr(), ht = N * (tt._$Lr() + 1), k = 0; k < L; ++k)
          f[k] += (k / V | 0) % 2 == 0 ? et : ht;
        d[z++] = tt._$SL(), V *= 2;
      }
      N *= tt._$N2();
    }
    f[L] = 65535, d[z] = -1;
  }, zt.prototype._$h2 = function(f, d, x) {
    for (var L = new Float32Array(d), M = 0; M < d; ++M)
      L[M] = x[M];
    var N = new ne();
    N._$yP(f), N._$t2(d, L), this._$Ob.push(N);
  }, zt.prototype._$J2 = function(f) {
    for (var d = f, x = this._$Ob.length, L = 0; L < x; ++L) {
      var M = this._$Ob[L], N = M._$N2(), V = d % M._$N2(), z = M._$d2()[V];
      console.log("%s[%d]=%7.2f / ", M.getParamID(), V, z), d /= N;
    }
    console.log(`
`);
  }, zt.prototype.getParamCount = function() {
    return this._$Ob.length;
  }, zt.prototype._$zs = function() {
    return this._$Ob;
  };
  function Vt() {
    this.m = new Float32Array(16), this.identity();
  }
  Vt.prototype.identity = function() {
    for (var f = 0; f < 16; f++)
      this.m[f] = f % 5 == 0 ? 1 : 0;
  }, Vt.prototype.getArray = function() {
    return this.m;
  }, Vt.prototype.getCopyMatrix = function() {
    return new Float32Array(this.m);
  }, Vt.prototype.setMatrix = function(f) {
    if (!(f == null || f.length != 16))
      for (var d = 0; d < 16; d++)
        this.m[d] = f[d];
  }, Vt.prototype.mult = function(f, d, x) {
    return d == null ? null : (this == d ? this.mult_safe(this.m, f.m, d.m, x) : this.mult_fast(this.m, f.m, d.m, x), d);
  }, Vt.prototype.mult_safe = function(f, d, x, L) {
    if (f == x) {
      var M = new Array(16);
      this.mult_fast(f, d, M, L);
      for (var N = 15; N >= 0; --N)
        x[N] = M[N];
    } else
      this.mult_fast(f, d, x, L);
  }, Vt.prototype.mult_fast = function(f, d, x, L) {
    L ? (x[0] = f[0] * d[0] + f[4] * d[1] + f[8] * d[2], x[4] = f[0] * d[4] + f[4] * d[5] + f[8] * d[6], x[8] = f[0] * d[8] + f[4] * d[9] + f[8] * d[10], x[12] = f[0] * d[12] + f[4] * d[13] + f[8] * d[14] + f[12], x[1] = f[1] * d[0] + f[5] * d[1] + f[9] * d[2], x[5] = f[1] * d[4] + f[5] * d[5] + f[9] * d[6], x[9] = f[1] * d[8] + f[5] * d[9] + f[9] * d[10], x[13] = f[1] * d[12] + f[5] * d[13] + f[9] * d[14] + f[13], x[2] = f[2] * d[0] + f[6] * d[1] + f[10] * d[2], x[6] = f[2] * d[4] + f[6] * d[5] + f[10] * d[6], x[10] = f[2] * d[8] + f[6] * d[9] + f[10] * d[10], x[14] = f[2] * d[12] + f[6] * d[13] + f[10] * d[14] + f[14], x[3] = x[7] = x[11] = 0, x[15] = 1) : (x[0] = f[0] * d[0] + f[4] * d[1] + f[8] * d[2] + f[12] * d[3], x[4] = f[0] * d[4] + f[4] * d[5] + f[8] * d[6] + f[12] * d[7], x[8] = f[0] * d[8] + f[4] * d[9] + f[8] * d[10] + f[12] * d[11], x[12] = f[0] * d[12] + f[4] * d[13] + f[8] * d[14] + f[12] * d[15], x[1] = f[1] * d[0] + f[5] * d[1] + f[9] * d[2] + f[13] * d[3], x[5] = f[1] * d[4] + f[5] * d[5] + f[9] * d[6] + f[13] * d[7], x[9] = f[1] * d[8] + f[5] * d[9] + f[9] * d[10] + f[13] * d[11], x[13] = f[1] * d[12] + f[5] * d[13] + f[9] * d[14] + f[13] * d[15], x[2] = f[2] * d[0] + f[6] * d[1] + f[10] * d[2] + f[14] * d[3], x[6] = f[2] * d[4] + f[6] * d[5] + f[10] * d[6] + f[14] * d[7], x[10] = f[2] * d[8] + f[6] * d[9] + f[10] * d[10] + f[14] * d[11], x[14] = f[2] * d[12] + f[6] * d[13] + f[10] * d[14] + f[14] * d[15], x[3] = f[3] * d[0] + f[7] * d[1] + f[11] * d[2] + f[15] * d[3], x[7] = f[3] * d[4] + f[7] * d[5] + f[11] * d[6] + f[15] * d[7], x[11] = f[3] * d[8] + f[7] * d[9] + f[11] * d[10] + f[15] * d[11], x[15] = f[3] * d[12] + f[7] * d[13] + f[11] * d[14] + f[15] * d[15]);
  }, Vt.prototype.translate = function(f, d, x) {
    this.m[12] = this.m[0] * f + this.m[4] * d + this.m[8] * x + this.m[12], this.m[13] = this.m[1] * f + this.m[5] * d + this.m[9] * x + this.m[13], this.m[14] = this.m[2] * f + this.m[6] * d + this.m[10] * x + this.m[14], this.m[15] = this.m[3] * f + this.m[7] * d + this.m[11] * x + this.m[15];
  }, Vt.prototype.scale = function(f, d, x) {
    this.m[0] *= f, this.m[4] *= d, this.m[8] *= x, this.m[1] *= f, this.m[5] *= d, this.m[9] *= x, this.m[2] *= f, this.m[6] *= d, this.m[10] *= x, this.m[3] *= f, this.m[7] *= d, this.m[11] *= x;
  }, Vt.prototype.rotateX = function(f) {
    var d = n.fcos(f), x = n._$9(f), L = this.m[4];
    this.m[4] = L * d + this.m[8] * x, this.m[8] = L * -x + this.m[8] * d, L = this.m[5], this.m[5] = L * d + this.m[9] * x, this.m[9] = L * -x + this.m[9] * d, L = this.m[6], this.m[6] = L * d + this.m[10] * x, this.m[10] = L * -x + this.m[10] * d, L = this.m[7], this.m[7] = L * d + this.m[11] * x, this.m[11] = L * -x + this.m[11] * d;
  }, Vt.prototype.rotateY = function(f) {
    var d = n.fcos(f), x = n._$9(f), L = this.m[0];
    this.m[0] = L * d + this.m[8] * -x, this.m[8] = L * x + this.m[8] * d, L = this.m[1], this.m[1] = L * d + this.m[9] * -x, this.m[9] = L * x + this.m[9] * d, L = m[2], this.m[2] = L * d + this.m[10] * -x, this.m[10] = L * x + this.m[10] * d, L = m[3], this.m[3] = L * d + this.m[11] * -x, this.m[11] = L * x + this.m[11] * d;
  }, Vt.prototype.rotateZ = function(f) {
    var d = n.fcos(f), x = n._$9(f), L = this.m[0];
    this.m[0] = L * d + this.m[4] * x, this.m[4] = L * -x + this.m[4] * d, L = this.m[1], this.m[1] = L * d + this.m[5] * x, this.m[5] = L * -x + this.m[5] * d, L = this.m[2], this.m[2] = L * d + this.m[6] * x, this.m[6] = L * -x + this.m[6] * d, L = this.m[3], this.m[3] = L * d + this.m[7] * x, this.m[7] = L * -x + this.m[7] * d;
  };
  function he(f) {
    D || Ur.prototype.constructor.call(this, f);
  }
  he.prototype = new Ur(), he._$tP = new Object(), he._$27 = function() {
    he._$tP.clear();
  }, he.getID = function(f) {
    var d = he._$tP[f];
    return d == null && (d = new he(f), he._$tP[f] = d), d;
  }, he.prototype._$3s = function() {
    return new he();
  };
  function Kt() {
    D || (this._$7 = 1, this._$f = 0, this._$H = 0, this._$g = 1, this._$k = 0, this._$w = 0, this._$hi = STATE_IDENTITY, this._$Z = _$pS);
  }
  Kt._$kS = -1, Kt._$pS = 0, Kt._$hb = 1, Kt.STATE_IDENTITY = 0, Kt._$gb = 1, Kt._$fo = 2, Kt._$go = 4, Kt.prototype.transform = function(f, d, x) {
    var L, M, N, V, z, k, q = 0, tt = 0;
    switch (this._$hi) {
      default:
        return;
      case Kt._$go | Kt._$fo | Kt._$gb:
        for (L = this._$7, M = this._$H, N = this._$k, V = this._$f, z = this._$g, k = this._$w; --x >= 0; ) {
          var et = f[q++], ht = f[q++];
          d[tt++] = L * et + M * ht + N, d[tt++] = V * et + z * ht + k;
        }
        return;
      case Kt._$go | Kt._$fo:
        for (L = this._$7, M = this._$H, V = this._$f, z = this._$g; --x >= 0; ) {
          var et = f[q++], ht = f[q++];
          d[tt++] = L * et + M * ht, d[tt++] = V * et + z * ht;
        }
        return;
      case Kt._$go | Kt._$gb:
        for (M = this._$H, N = this._$k, V = this._$f, k = this._$w; --x >= 0; ) {
          var et = f[q++];
          d[tt++] = M * f[q++] + N, d[tt++] = V * et + k;
        }
        return;
      case Kt._$go:
        for (M = this._$H, V = this._$f; --x >= 0; ) {
          var et = f[q++];
          d[tt++] = M * f[q++], d[tt++] = V * et;
        }
        return;
      case Kt._$fo | Kt._$gb:
        for (L = this._$7, N = this._$k, z = this._$g, k = this._$w; --x >= 0; )
          d[tt++] = L * f[q++] + N, d[tt++] = z * f[q++] + k;
        return;
      case Kt._$fo:
        for (L = this._$7, z = this._$g; --x >= 0; )
          d[tt++] = L * f[q++], d[tt++] = z * f[q++];
        return;
      case Kt._$gb:
        for (N = this._$k, k = this._$w; --x >= 0; )
          d[tt++] = f[q++] + N, d[tt++] = f[q++] + k;
        return;
      case Kt.STATE_IDENTITY:
        (f != d || q != tt) && Ft._$jT(f, q, d, tt, x * 2);
        return;
    }
  }, Kt.prototype.update = function() {
    this._$H == 0 && this._$f == 0 ? this._$7 == 1 && this._$g == 1 ? this._$k == 0 && this._$w == 0 ? (this._$hi = Kt.STATE_IDENTITY, this._$Z = Kt._$pS) : (this._$hi = Kt._$gb, this._$Z = Kt._$hb) : this._$k == 0 && this._$w == 0 ? (this._$hi = Kt._$fo, this._$Z = Kt._$kS) : (this._$hi = Kt._$fo | Kt._$gb, this._$Z = Kt._$kS) : this._$7 == 0 && this._$g == 0 ? this._$k == 0 && this._$w == 0 ? (this._$hi = Kt._$go, this._$Z = Kt._$kS) : (this._$hi = Kt._$go | Kt._$gb, this._$Z = Kt._$kS) : this._$k == 0 && this._$w == 0 ? (this._$hi = Kt._$go | Kt._$fo, this._$Z = Kt._$kS) : (this._$hi = Kt._$go | Kt._$fo | Kt._$gb, this._$Z = Kt._$kS);
  }, Kt.prototype._$RT = function(f) {
    this._$IT(f);
    var d = f[0], x = f[2], L = f[1], M = f[3], N = Math.sqrt(d * d + L * L), V = d * M - x * L;
    N == 0 ? yt._$so && console.log("affine._$RT() / rt==0") : (f[0] = N, f[1] = V / N, f[2] = (L * M + d * x) / V, f[3] = Math.atan2(L, d));
  }, Kt.prototype._$ho = function(f, d, x, L) {
    var M = new Float32Array(6), N = new Float32Array(6);
    f._$RT(M), d._$RT(N);
    var V = new Float32Array(6);
    V[0] = M[0] + (N[0] - M[0]) * x, V[1] = M[1] + (N[1] - M[1]) * x, V[2] = M[2] + (N[2] - M[2]) * x, V[3] = M[3] + (N[3] - M[3]) * x, V[4] = M[4] + (N[4] - M[4]) * x, V[5] = M[5] + (N[5] - M[5]) * x, L._$CT(V);
  }, Kt.prototype._$CT = function(f) {
    var d = Math.cos(f[3]), x = Math.sin(f[3]);
    this._$7 = f[0] * d, this._$f = f[0] * x, this._$H = f[1] * (f[2] * d - x), this._$g = f[1] * (f[2] * x + d), this._$k = f[4], this._$w = f[5], this.update();
  }, Kt.prototype._$IT = function(f) {
    f[0] = this._$7, f[1] = this._$f, f[2] = this._$H, f[3] = this._$g, f[4] = this._$k, f[5] = this._$w;
  };
  function ve() {
    D || (o.prototype.constructor.call(this), this.motions = new Array(), this._$7r = null, this._$7r = ve._$Co++, this._$D0 = 30, this._$yT = 0, this._$E = !0, this.loopFadeIn = !0, this._$AS = -1, _$a0());
  }
  ve.prototype = new o(), ve._$cs = "VISIBLE:", ve._$ar = "LAYOUT:", ve._$Co = 0, ve._$D2 = [], ve._$1T = 1, ve.loadMotion = function(f) {
    var d = new ve(), x = [0], L = f.length;
    d._$yT = 0;
    for (var M = 0; M < L; ++M) {
      var N = f[M] & 255;
      if (!(N == `
` || N == "\r")) {
        if (N == "#") {
          for (; M < L && !(f[M] == `
` || f[M] == "\r"); ++M)
            ;
          continue;
        }
        if (N == "$") {
          for (var V = M, z = -1; M < L && (N = f[M] & 255, !(N == "\r" || N == `
`)); ++M)
            if (N == "=") {
              z = M;
              break;
            }
          var k = !1;
          if (z >= 0) {
            for (z == V + 4 && f[V + 1] == "f" && f[V + 2] == "p" && f[V + 3] == "s" && (k = !0), M = z + 1; M < L && (N = f[M] & 255, !(N == "\r" || N == `
`)); ++M)
              if (!(N == "," || N == " " || N == "	")) {
                var q = ae._$LS(f, L, M, x);
                x[0] > 0 && k && 5 < q && q < 121 && (d._$D0 = q), M = x[0];
              }
          }
          for (; M < L && !(f[M] == `
` || f[M] == "\r"); ++M)
            ;
          continue;
        }
        if ("a" <= N && N <= "z" || "A" <= N && N <= "Z" || N == "_") {
          for (var V = M, z = -1; M < L && (N = f[M] & 255, !(N == "\r" || N == `
`)); ++M)
            if (N == "=") {
              z = M;
              break;
            }
          if (z >= 0) {
            var tt = new Nt();
            ae.startsWith(f, V, ve._$cs) ? (tt._$RP = Nt._$hs, tt._$4P = new String(f, V, z - V)) : ae.startsWith(f, V, ve._$ar) ? (tt._$4P = new String(f, V + 7, z - V - 7), ae.startsWith(f, V + 7, "ANCHOR_X") ? tt._$RP = Nt._$xs : ae.startsWith(f, V + 7, "ANCHOR_Y") ? tt._$RP = Nt._$us : ae.startsWith(f, V + 7, "SCALE_X") ? tt._$RP = Nt._$qs : ae.startsWith(f, V + 7, "SCALE_Y") ? tt._$RP = Nt._$Ys : ae.startsWith(f, V + 7, "X") ? tt._$RP = Nt._$ws : ae.startsWith(f, V + 7, "Y") && (tt._$RP = Nt._$Ns)) : (tt._$RP = Nt._$Fr, tt._$4P = new String(f, V, z - V)), d.motions.push(tt);
            var et = 0;
            for (ve._$D2.clear(), M = z + 1; M < L && (N = f[M] & 255, !(N == "\r" || N == `
`)); ++M)
              if (!(N == "," || N == " " || N == "	")) {
                var q = ae._$LS(f, L, M, x);
                if (x[0] > 0) {
                  ve._$D2.push(q), et++;
                  var ht = x[0];
                  if (ht < M) {
                    console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);
                    break;
                  }
                  M = ht;
                }
              }
            tt._$I0 = ve._$D2._$BL(), et > d._$yT && (d._$yT = et);
          }
        }
      }
    }
    return d._$AS = 1e3 * d._$yT / d._$D0 | 0, d;
  }, ve.prototype.getDurationMSec = function() {
    return this._$AS;
  }, ve.prototype.dump = function() {
    for (var f = 0; f < this.motions.length; f++) {
      var d = this.motions[f];
      console.log("_$wL[%s] [%d]. ", d._$4P, d._$I0.length);
      for (var x = 0; x < d._$I0.length && x < 10; x++)
        console.log("%5.2f ,", d._$I0[x]);
      console.log(`
`);
    }
  }, ve.prototype.updateParamExe = function(f, d, x, L) {
    for (var M = d - L._$z2, N = M * this._$D0 / 1e3, V = N | 0, z = N - V, k = 0; k < this.motions.length; k++) {
      var q = this.motions[k], tt = q._$I0.length, et = q._$4P;
      if (q._$RP == Nt._$hs) {
        var ht = q._$I0[V >= tt ? tt - 1 : V];
        f.setParamFloat(et, ht);
      } else if (!(Nt._$ws <= q._$RP && q._$RP <= Nt._$Ys)) {
        var gt = f.getParamFloat(et), xt = q._$I0[V >= tt ? tt - 1 : V], ut = q._$I0[V + 1 >= tt ? tt - 1 : V + 1], Ct = xt + (ut - xt) * z, wt = gt + (Ct - gt) * x;
        f.setParamFloat(et, wt);
      }
    }
    V >= this._$yT && (this._$E ? (L._$z2 = d, this.loopFadeIn && (L._$bs = d)) : L._$9L = !0);
  }, ve.prototype._$r0 = function() {
    return this._$E;
  }, ve.prototype._$aL = function(f) {
    this._$E = f;
  }, ve.prototype.isLoopFadeIn = function() {
    return this.loopFadeIn;
  }, ve.prototype.setLoopFadeIn = function(f) {
    this.loopFadeIn = f;
  }, me.prototype.clear = function() {
    this.size = 0;
  }, me.prototype.add = function(f) {
    if (this._$P.length <= this.size) {
      var d = new Float32Array(this.size * 2);
      Ft._$jT(this._$P, 0, d, 0, this.size), this._$P = d;
    }
    this._$P[this.size++] = f;
  }, me.prototype._$BL = function() {
    var f = new Float32Array(this.size);
    return Ft._$jT(this._$P, 0, f, 0, this.size), f;
  }, Nt._$Fr = 0, Nt._$hs = 1, Nt._$ws = 100, Nt._$Ns = 101, Nt._$xs = 102, Nt._$us = 103, Nt._$qs = 104, Nt._$Ys = 105;
  function at() {
  }
  at._$Ms = 1, at._$Qs = 2, at._$i2 = 0, at._$No = 2, at._$do = at._$Ms, at._$Ls = !0, at._$1r = 5, at._$Qb = 65, at._$J = 1e-4, at._$FT = 1e-3, at._$Ss = 3;
  function bt() {
  }
  bt._$o7 = 6, bt._$S7 = 7, bt._$s7 = 8, bt._$77 = 9, bt.LIVE2D_FORMAT_VERSION_V2_10_SDK2 = 10, bt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1 = 11, bt._$T7 = bt.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1, bt._$Is = -2004318072, bt._$h0 = 0, bt._$4L = 23, bt._$7P = 33, bt._$uT = function(f) {
    console.log(`_$bo :: _$6 _$mo _$E0 : %d
`, f);
  }, bt._$9o = function(f) {
    if (f < 40)
      return bt._$uT(f), null;
    if (f < 50)
      return bt._$uT(f), null;
    if (f < 60)
      return bt._$uT(f), null;
    if (f < 100)
      switch (f) {
        case 65:
          return new Ue();
        case 66:
          return new zt();
        case 67:
          return new ne();
        case 68:
          return new se();
        case 69:
          return new J();
        case 70:
          return new Ve();
        default:
          return bt._$uT(f), null;
      }
    else if (f < 150)
      switch (f) {
        case 131:
          return new Ai();
        case 133:
          return new ce();
        case 136:
          return new b();
        case 137:
          return new ei();
        case 142:
          return new Be();
      }
    return bt._$uT(f), null;
  };
  function vt(f) {
    D || (this._$QT = !0, this._$co = -1, this._$qo = 0, this._$pb = new Array(vt._$is), this._$_2 = new Float32Array(vt._$is), this._$vr = new Float32Array(vt._$is), this._$Rr = new Float32Array(vt._$is), this._$Or = new Float32Array(vt._$is), this._$fs = new Float32Array(vt._$is), this._$Js = new Array(vt._$is), this._$3S = new Array(), this._$aS = new Array(), this._$Bo = null, this._$F2 = new Array(), this._$db = new Array(), this._$8b = new Array(), this._$Hr = new Array(), this._$Ws = null, this._$Vs = null, this._$Er = null, this._$Es = new Int16Array(at._$Qb), this._$ZP = new Float32Array(at._$1r * 2), this._$Ri = f, this._$b0 = vt._$HP++, this.clipManager = null, this.dp_webgl = null);
  }
  vt._$HP = 0, vt._$_0 = !0, vt._$V2 = -1, vt._$W0 = -1, vt._$jr = !1, vt._$ZS = !0, vt._$tr = -1e6, vt._$lr = 1e6, vt._$is = 32, vt._$e = !1, vt.prototype.getDrawDataIndex = function(f) {
    for (var d = this._$aS.length - 1; d >= 0; --d)
      if (this._$aS[d] != null && this._$aS[d].getDrawDataID() == f)
        return d;
    return -1;
  }, vt.prototype.getDrawData = function(f) {
    if (f instanceof he) {
      if (this._$Bo == null) {
        this._$Bo = new Object();
        for (var d = this._$aS.length, x = 0; x < d; x++) {
          var L = this._$aS[x], M = L.getDrawDataID();
          M != null && (this._$Bo[M] = L);
        }
      }
      return this._$Bo[id];
    } else
      return f < this._$aS.length ? this._$aS[f] : null;
  }, vt.prototype.release = function() {
    this._$3S.clear(), this._$aS.clear(), this._$F2.clear(), this._$Bo != null && this._$Bo.clear(), this._$db.clear(), this._$8b.clear(), this._$Hr.clear();
  }, vt.prototype.init = function() {
    this._$co++, this._$F2.length > 0 && this.release();
    for (var f = this._$Ri.getModelImpl(), d = f._$Xr(), x = d.length, L = new Array(), M = new Array(), N = 0; N < x; ++N) {
      var V = d[N];
      this._$F2.push(V), this._$Hr.push(V.init(this));
      for (var z = V.getBaseData(), k = z.length, q = 0; q < k; ++q)
        L.push(z[q]);
      for (var q = 0; q < k; ++q) {
        var tt = z[q].init(this);
        tt._$l2(N), M.push(tt);
      }
      for (var et = V.getDrawData(), ht = et.length, q = 0; q < ht; ++q) {
        var gt = et[q], xt = gt.init(this);
        xt._$IP = N, this._$aS.push(gt), this._$8b.push(xt);
      }
    }
    for (var ut = L.length, Ct = ar._$2o(); ; ) {
      for (var wt = !1, N = 0; N < ut; ++N) {
        var St = L[N];
        if (St != null) {
          var It = St.getTargetBaseDataID();
          (It == null || It == Ct || this.getBaseDataIndex(It) >= 0) && (this._$3S.push(St), this._$db.push(M[N]), L[N] = null, wt = !0);
        }
      }
      if (!wt)
        break;
    }
    var re = f._$E2();
    if (re != null) {
      var Bt = re._$1s();
      if (Bt != null)
        for (var G = Bt.length, N = 0; N < G; ++N) {
          var Mt = Bt[N];
          Mt != null && this._$02(Mt.getParamID(), Mt.getDefaultValue(), Mt.getMinValue(), Mt.getMaxValue());
        }
    }
    this.clipManager = new e(this.dp_webgl), this.clipManager.init(this, this._$aS, this._$8b), this._$QT = !0;
  }, vt.prototype.update = function() {
    vt._$e && h.start("_$zL");
    for (var f = this._$_2.length, d = 0; d < f; d++)
      this._$_2[d] != this._$vr[d] && (this._$Js[d] = vt._$ZS, this._$vr[d] = this._$_2[d]);
    var x = !1, L = this._$3S.length, M = this._$aS.length, N = Zt._$or(), V = Zt._$Pr(), z = V - N + 1;
    (this._$Ws == null || this._$Ws.length < z) && (this._$Ws = new Int16Array(z), this._$Vs = new Int16Array(z));
    for (var d = 0; d < z; d++)
      this._$Ws[d] = vt._$V2, this._$Vs[d] = vt._$V2;
    (this._$Er == null || this._$Er.length < M) && (this._$Er = new Int16Array(M));
    for (var d = 0; d < M; d++)
      this._$Er[d] = vt._$W0;
    vt._$e && h.dump("_$zL"), vt._$e && h.start("_$UL");
    for (var k = null, q = 0; q < L; ++q) {
      var tt = this._$3S[q], et = this._$db[q];
      try {
        tt._$Nr(this, et), tt._$2b(this, et);
      } catch (St) {
        k == null && (k = St);
      }
    }
    k != null && vt._$_0 && h._$Rb(k), vt._$e && h.dump("_$UL"), vt._$e && h.start("_$DL");
    for (var ht = null, gt = 0; gt < M; ++gt) {
      var xt = this._$aS[gt], ut = this._$8b[gt];
      try {
        if (xt._$Nr(this, ut), ut._$u2())
          continue;
        xt._$2b(this, ut);
        var Ct = Math.floor(xt._$zS(this, ut) - N), wt;
        try {
          wt = this._$Vs[Ct];
        } catch (St) {
          console.log(`_$li :: %s / %s 				@@_$fS
`, St.toString(), xt.getDrawDataID().toString()), Ct = Math.floor(xt._$zS(this, ut) - N);
          continue;
        }
        wt == vt._$V2 ? this._$Ws[Ct] = gt : this._$Er[wt] = gt, this._$Vs[Ct] = gt;
      } catch (St) {
        ht == null && (ht = St, yt._$sT(yt._$H7));
      }
    }
    ht != null && vt._$_0 && h._$Rb(ht), vt._$e && h.dump("_$DL"), vt._$e && h.start("_$eL");
    for (var d = this._$Js.length - 1; d >= 0; d--)
      this._$Js[d] = vt._$jr;
    return this._$QT = !1, vt._$e && h.dump("_$eL"), x;
  }, vt.prototype.preDraw = function(f) {
    this.clipManager != null && (f._$ZT(), this.clipManager.setupClip(this, f));
  }, vt.prototype.draw = function(f) {
    if (this._$Ws == null) {
      h._$li("call _$Ri.update() before _$Ri.draw() ");
      return;
    }
    var d = this._$Ws.length;
    f._$ZT();
    for (var x = 0; x < d; ++x) {
      var L = this._$Ws[x];
      if (L != vt._$V2)
        do {
          var M = this._$aS[L], N = this._$8b[L];
          if (N._$yo()) {
            var V = N._$IP, z = this._$Hr[V];
            N._$VS = z.getPartsOpacity(), M.draw(f, this, N);
          }
          var k = this._$Er[L];
          if (k <= L || k == vt._$W0)
            break;
          L = k;
        } while (!0);
    }
  }, vt.prototype.getParamIndex = function(f) {
    for (var d = this._$pb.length - 1; d >= 0; --d)
      if (this._$pb[d] == f)
        return d;
    return this._$02(f, 0, vt._$tr, vt._$lr);
  }, vt.prototype._$BS = function(f) {
    return this.getBaseDataIndex(f);
  }, vt.prototype.getBaseDataIndex = function(f) {
    for (var d = this._$3S.length - 1; d >= 0; --d)
      if (this._$3S[d] != null && this._$3S[d].getBaseDataID() == f)
        return d;
    return -1;
  }, vt.prototype._$UT = function(f, d) {
    var x = new Float32Array(d);
    return Ft._$jT(f, 0, x, 0, f.length), x;
  }, vt.prototype._$02 = function(f, d, x, L) {
    if (this._$qo >= this._$pb.length) {
      var M = this._$pb.length, N = new Array(M * 2);
      Ft._$jT(this._$pb, 0, N, 0, M), this._$pb = N, this._$_2 = this._$UT(this._$_2, M * 2), this._$vr = this._$UT(this._$vr, M * 2), this._$Rr = this._$UT(this._$Rr, M * 2), this._$Or = this._$UT(this._$Or, M * 2);
      var V = new Array();
      Ft._$jT(this._$Js, 0, V, 0, M), this._$Js = V;
    }
    return this._$pb[this._$qo] = f, this._$_2[this._$qo] = d, this._$vr[this._$qo] = d, this._$Rr[this._$qo] = x, this._$Or[this._$qo] = L, this._$Js[this._$qo] = vt._$ZS, this._$qo++;
  }, vt.prototype._$Zo = function(f, d) {
    this._$3S[f] = d;
  }, vt.prototype.setParamFloat = function(f, d) {
    d < this._$Rr[f] && (d = this._$Rr[f]), d > this._$Or[f] && (d = this._$Or[f]), this._$_2[f] = d;
  }, vt.prototype.loadParam = function() {
    var f = this._$_2.length;
    f > this._$fs.length && (f = this._$fs.length), Ft._$jT(this._$fs, 0, this._$_2, 0, f);
  }, vt.prototype.saveParam = function() {
    var f = this._$_2.length;
    f > this._$fs.length && (this._$fs = new Float32Array(f)), Ft._$jT(this._$_2, 0, this._$fs, 0, f);
  }, vt.prototype._$v2 = function() {
    return this._$co;
  }, vt.prototype._$WS = function() {
    return this._$QT;
  }, vt.prototype._$Xb = function(f) {
    return this._$Js[f] == vt._$ZS;
  }, vt.prototype._$vs = function() {
    return this._$Es;
  }, vt.prototype._$Tr = function() {
    return this._$ZP;
  }, vt.prototype.getBaseData = function(f) {
    return this._$3S[f];
  }, vt.prototype.getParamFloat = function(f) {
    return this._$_2[f];
  }, vt.prototype.getParamMax = function(f) {
    return this._$Or[f];
  }, vt.prototype.getParamMin = function(f) {
    return this._$Rr[f];
  }, vt.prototype.setPartsOpacity = function(f, d) {
    var x = this._$Hr[f];
    x.setPartsOpacity(d);
  }, vt.prototype.getPartsOpacity = function(f) {
    var d = this._$Hr[f];
    return d.getPartsOpacity();
  }, vt.prototype.getPartsDataIndex = function(f) {
    for (var d = this._$F2.length - 1; d >= 0; --d)
      if (this._$F2[d] != null && this._$F2[d]._$p2() == f)
        return d;
    return -1;
  }, vt.prototype._$q2 = function(f) {
    return this._$db[f];
  }, vt.prototype._$C2 = function(f) {
    return this._$8b[f];
  }, vt.prototype._$Bb = function(f) {
    return this._$Hr[f];
  }, vt.prototype._$5s = function(f, d) {
    for (var x = this._$Ws.length, L = f, M = 0; M < x; ++M) {
      var N = this._$Ws[M];
      if (N != vt._$V2)
        do {
          var V = this._$8b[N];
          V._$yo() && (V._$GT()._$B2(this, V, L), L += d);
          var z = this._$Er[N];
          if (z <= N || z == vt._$W0)
            break;
          N = z;
        } while (!0);
    }
  }, vt.prototype.setDrawParam = function(f) {
    this.dp_webgl = f;
  }, vt.prototype.getDrawParam = function() {
    return this.dp_webgl;
  };
  function le() {
  }
  le._$0T = function(f) {
    return le._$0T(new _$5(f));
  }, le._$0T = function(f) {
    if (!f.exists())
      throw new _$ls(f._$3b());
    for (var d = f.length(), x = new Int8Array(d), L = new _$Xs(new _$kb(f), 8192), M, N = 0; (M = L.read(x, N, d - N)) > 0; )
      N += M;
    return x;
  }, le._$C = function(f) {
    var d = null, x = null;
    try {
      d = f instanceof Array ? f : new _$Xs(f, 8192), x = new _$js();
      for (var L = 1e3, M, N = new Int8Array(L); (M = d.read(N)) > 0; )
        x.write(N, 0, M);
      return x._$TS();
    } finally {
      f != null && f.close(), x != null && (x.flush(), x.close());
    }
  };
  function Gt() {
    D || (dt.prototype.constructor.call(this), this._$sb = new Int32Array(Gt._$As), this._$U2 = new Array(), this.transform = null, this.gl = null, Gt._$NT == null && (Gt._$NT = Gt._$9r(256), Gt._$vS = Gt._$9r(256), Gt._$no = Gt._$vb(256)));
  }
  Gt.prototype = new dt(), Gt._$As = 32, Gt._$Gr = !1, Gt._$NT = null, Gt._$vS = null, Gt._$no = null, Gt._$9r = function(f) {
    var d = new Float32Array(f);
    return d;
  }, Gt._$vb = function(f) {
    var d = new Int16Array(f);
    return d;
  }, Gt._$cr = function(f, d) {
    return f == null || f._$yL() < d.length ? (f = Gt._$9r(d.length * 2), f.put(d), f._$oT(0)) : (f.clear(), f.put(d), f._$oT(0)), f;
  }, Gt._$mb = function(f, d) {
    return f == null || f._$yL() < d.length ? (f = Gt._$vb(d.length * 2), f.put(d), f._$oT(0)) : (f.clear(), f.put(d), f._$oT(0)), f;
  }, Gt._$Hs = function() {
    return Gt._$Gr;
  }, Gt._$as = function(f) {
    Gt._$Gr = f;
  }, Gt.prototype.setGL = function(f) {
    this.gl = f;
  }, Gt.prototype.setTransform = function(f) {
    this.transform = f;
  }, Gt.prototype._$ZT = function() {
  }, Gt.prototype._$Uo = function(f, d, x, L, M, N, V, z) {
    if (!(N < 0.01)) {
      var k = this._$U2[f], q = N > 0.9 ? yt.EXPAND_W : 0;
      this.gl.drawElements(k, x, L, M, N, q, this.transform, z);
    }
  }, Gt.prototype._$Rs = function() {
    throw new Error("_$Rs");
  }, Gt.prototype._$Ds = function(f) {
    throw new Error("_$Ds");
  }, Gt.prototype._$K2 = function() {
    for (var f = 0; f < this._$sb.length; f++) {
      var d = this._$sb[f];
      d != 0 && (this.gl._$Sr(1, this._$sb, f), this._$sb[f] = 0);
    }
  }, Gt.prototype.setTexture = function(f, d) {
    this._$sb.length < f + 1 && this._$nS(f), this._$sb[f] = d;
  }, Gt.prototype.setTexture = function(f, d) {
    this._$sb.length < f + 1 && this._$nS(f), this._$U2[f] = d;
  }, Gt.prototype._$nS = function(f) {
    var d = Math.max(this._$sb.length * 2, f + 1 + 10), x = new Int32Array(d);
    Ft._$jT(this._$sb, 0, x, 0, this._$sb.length), this._$sb = x;
    var L = new Array();
    Ft._$jT(this._$U2, 0, L, 0, this._$U2.length), this._$U2 = L;
  };
  function se() {
    D || (Rt.prototype.constructor.call(this), this._$GS = null, this._$Y0 = null);
  }
  se.prototype = new Rt(), se._$Xo = new Float32Array(2), se._$io = new Float32Array(2), se._$0o = new Float32Array(2), se._$Lo = new Float32Array(2), se._$To = new Float32Array(2), se._$Po = new Float32Array(2), se._$gT = new Array(), se.prototype._$zP = function() {
    this._$GS = new zt(), this._$GS._$zP(), this._$Y0 = new Array();
  }, se.prototype.getType = function() {
    return Rt._$c2;
  }, se.prototype._$F0 = function(f) {
    Rt.prototype._$F0.call(this, f), this._$GS = f._$nP(), this._$Y0 = f._$nP(), Rt.prototype.readV2_opacity.call(this, f);
  }, se.prototype.init = function(f) {
    var d = new Pe(this);
    return d._$Yr = new J(), this._$32() && (d._$Wr = new J()), d;
  }, se.prototype._$Nr = function(f, d) {
    this != d._$GT() && console.log("### assert!! ### ");
    var x = d;
    if (this._$GS._$Ur(f)) {
      var L = se._$gT;
      L[0] = !1;
      var M = this._$GS._$Q2(f, L);
      d._$Ib(L[0]), this.interpolateOpacity(f, this._$GS, d, L);
      var N = f._$vs(), V = f._$Tr();
      if (this._$GS._$zr(N, V, M), M <= 0) {
        var Ie = this._$Y0[N[0]];
        x._$Yr.init(Ie);
      } else if (M == 1) {
        var Ie = this._$Y0[N[0]], z = this._$Y0[N[1]], k = V[0];
        x._$Yr._$fL = Ie._$fL + (z._$fL - Ie._$fL) * k, x._$Yr._$gL = Ie._$gL + (z._$gL - Ie._$gL) * k, x._$Yr._$B0 = Ie._$B0 + (z._$B0 - Ie._$B0) * k, x._$Yr._$z0 = Ie._$z0 + (z._$z0 - Ie._$z0) * k, x._$Yr._$qT = Ie._$qT + (z._$qT - Ie._$qT) * k;
      } else if (M == 2) {
        var Ie = this._$Y0[N[0]], z = this._$Y0[N[1]], q = this._$Y0[N[2]], tt = this._$Y0[N[3]], k = V[0], et = V[1], ht = Ie._$fL + (z._$fL - Ie._$fL) * k, gt = q._$fL + (tt._$fL - q._$fL) * k;
        x._$Yr._$fL = ht + (gt - ht) * et, ht = Ie._$gL + (z._$gL - Ie._$gL) * k, gt = q._$gL + (tt._$gL - q._$gL) * k, x._$Yr._$gL = ht + (gt - ht) * et, ht = Ie._$B0 + (z._$B0 - Ie._$B0) * k, gt = q._$B0 + (tt._$B0 - q._$B0) * k, x._$Yr._$B0 = ht + (gt - ht) * et, ht = Ie._$z0 + (z._$z0 - Ie._$z0) * k, gt = q._$z0 + (tt._$z0 - q._$z0) * k, x._$Yr._$z0 = ht + (gt - ht) * et, ht = Ie._$qT + (z._$qT - Ie._$qT) * k, gt = q._$qT + (tt._$qT - q._$qT) * k, x._$Yr._$qT = ht + (gt - ht) * et;
      } else if (M == 3) {
        var xt = this._$Y0[N[0]], ut = this._$Y0[N[1]], Ct = this._$Y0[N[2]], wt = this._$Y0[N[3]], St = this._$Y0[N[4]], It = this._$Y0[N[5]], re = this._$Y0[N[6]], Bt = this._$Y0[N[7]], k = V[0], et = V[1], G = V[2], ht = xt._$fL + (ut._$fL - xt._$fL) * k, gt = Ct._$fL + (wt._$fL - Ct._$fL) * k, Mt = St._$fL + (It._$fL - St._$fL) * k, Ut = re._$fL + (Bt._$fL - re._$fL) * k;
        x._$Yr._$fL = (1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et), ht = xt._$gL + (ut._$gL - xt._$gL) * k, gt = Ct._$gL + (wt._$gL - Ct._$gL) * k, Mt = St._$gL + (It._$gL - St._$gL) * k, Ut = re._$gL + (Bt._$gL - re._$gL) * k, x._$Yr._$gL = (1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et), ht = xt._$B0 + (ut._$B0 - xt._$B0) * k, gt = Ct._$B0 + (wt._$B0 - Ct._$B0) * k, Mt = St._$B0 + (It._$B0 - St._$B0) * k, Ut = re._$B0 + (Bt._$B0 - re._$B0) * k, x._$Yr._$B0 = (1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et), ht = xt._$z0 + (ut._$z0 - xt._$z0) * k, gt = Ct._$z0 + (wt._$z0 - Ct._$z0) * k, Mt = St._$z0 + (It._$z0 - St._$z0) * k, Ut = re._$z0 + (Bt._$z0 - re._$z0) * k, x._$Yr._$z0 = (1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et), ht = xt._$qT + (ut._$qT - xt._$qT) * k, gt = Ct._$qT + (wt._$qT - Ct._$qT) * k, Mt = St._$qT + (It._$qT - St._$qT) * k, Ut = re._$qT + (Bt._$qT - re._$qT) * k, x._$Yr._$qT = (1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et);
      } else if (M == 4) {
        var He = this._$Y0[N[0]], sr = this._$Y0[N[1]], kt = this._$Y0[N[2]], hr = this._$Y0[N[3]], pe = this._$Y0[N[4]], oe = this._$Y0[N[5]], ge = this._$Y0[N[6]], Ee = this._$Y0[N[7]], ye = this._$Y0[N[8]], Se = this._$Y0[N[9]], te = this._$Y0[N[10]], de = this._$Y0[N[11]], Lt = this._$Y0[N[12]], ie = this._$Y0[N[13]], Le = this._$Y0[N[14]], pr = this._$Y0[N[15]], k = V[0], et = V[1], G = V[2], ze = V[3], ht = He._$fL + (sr._$fL - He._$fL) * k, gt = kt._$fL + (hr._$fL - kt._$fL) * k, Mt = pe._$fL + (oe._$fL - pe._$fL) * k, Ut = ge._$fL + (Ee._$fL - ge._$fL) * k, Ne = ye._$fL + (Se._$fL - ye._$fL) * k, je = te._$fL + (de._$fL - te._$fL) * k, _t = Lt._$fL + (ie._$fL - Lt._$fL) * k, Sr = Le._$fL + (pr._$fL - Le._$fL) * k;
        x._$Yr._$fL = (1 - ze) * ((1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et)) + ze * ((1 - G) * (Ne + (je - Ne) * et) + G * (_t + (Sr - _t) * et)), ht = He._$gL + (sr._$gL - He._$gL) * k, gt = kt._$gL + (hr._$gL - kt._$gL) * k, Mt = pe._$gL + (oe._$gL - pe._$gL) * k, Ut = ge._$gL + (Ee._$gL - ge._$gL) * k, Ne = ye._$gL + (Se._$gL - ye._$gL) * k, je = te._$gL + (de._$gL - te._$gL) * k, _t = Lt._$gL + (ie._$gL - Lt._$gL) * k, Sr = Le._$gL + (pr._$gL - Le._$gL) * k, x._$Yr._$gL = (1 - ze) * ((1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et)) + ze * ((1 - G) * (Ne + (je - Ne) * et) + G * (_t + (Sr - _t) * et)), ht = He._$B0 + (sr._$B0 - He._$B0) * k, gt = kt._$B0 + (hr._$B0 - kt._$B0) * k, Mt = pe._$B0 + (oe._$B0 - pe._$B0) * k, Ut = ge._$B0 + (Ee._$B0 - ge._$B0) * k, Ne = ye._$B0 + (Se._$B0 - ye._$B0) * k, je = te._$B0 + (de._$B0 - te._$B0) * k, _t = Lt._$B0 + (ie._$B0 - Lt._$B0) * k, Sr = Le._$B0 + (pr._$B0 - Le._$B0) * k, x._$Yr._$B0 = (1 - ze) * ((1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et)) + ze * ((1 - G) * (Ne + (je - Ne) * et) + G * (_t + (Sr - _t) * et)), ht = He._$z0 + (sr._$z0 - He._$z0) * k, gt = kt._$z0 + (hr._$z0 - kt._$z0) * k, Mt = pe._$z0 + (oe._$z0 - pe._$z0) * k, Ut = ge._$z0 + (Ee._$z0 - ge._$z0) * k, Ne = ye._$z0 + (Se._$z0 - ye._$z0) * k, je = te._$z0 + (de._$z0 - te._$z0) * k, _t = Lt._$z0 + (ie._$z0 - Lt._$z0) * k, Sr = Le._$z0 + (pr._$z0 - Le._$z0) * k, x._$Yr._$z0 = (1 - ze) * ((1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et)) + ze * ((1 - G) * (Ne + (je - Ne) * et) + G * (_t + (Sr - _t) * et)), ht = He._$qT + (sr._$qT - He._$qT) * k, gt = kt._$qT + (hr._$qT - kt._$qT) * k, Mt = pe._$qT + (oe._$qT - pe._$qT) * k, Ut = ge._$qT + (Ee._$qT - ge._$qT) * k, Ne = ye._$qT + (Se._$qT - ye._$qT) * k, je = te._$qT + (de._$qT - te._$qT) * k, _t = Lt._$qT + (ie._$qT - Lt._$qT) * k, Sr = Le._$qT + (pr._$qT - Le._$qT) * k, x._$Yr._$qT = (1 - ze) * ((1 - G) * (ht + (gt - ht) * et) + G * (Mt + (Ut - Mt) * et)) + ze * ((1 - G) * (Ne + (je - Ne) * et) + G * (_t + (Sr - _t) * et));
      } else {
        for (var rr = Math.pow(2, M) | 0, Nr = new Float32Array(rr), vr = 0; vr < rr; vr++) {
          for (var Jr = vr, ui = 1, Qr = 0; Qr < M; Qr++)
            ui *= Jr % 2 == 0 ? 1 - V[Qr] : V[Qr], Jr /= 2;
          Nr[vr] = ui;
        }
        for (var ri = new Array(), br = 0; br < rr; br++)
          ri[br] = this._$Y0[N[br]];
        for (var Ui = 0, Gi = 0, hi = 0, Di = 0, ii = 0, br = 0; br < rr; br++)
          Ui += Nr[br] * ri[br]._$fL, Gi += Nr[br] * ri[br]._$gL, hi += Nr[br] * ri[br]._$B0, Di += Nr[br] * ri[br]._$z0, ii += Nr[br] * ri[br]._$qT;
        x._$Yr._$fL = Ui, x._$Yr._$gL = Gi, x._$Yr._$B0 = hi, x._$Yr._$z0 = Di, x._$Yr._$qT = ii;
      }
      var Ie = this._$Y0[N[0]];
      x._$Yr.reflectX = Ie.reflectX, x._$Yr.reflectY = Ie.reflectY;
    }
  }, se.prototype._$2b = function(f, d) {
    this != d._$GT() && console.log("### assert!! ### ");
    var x = d;
    if (x._$hS(!0), !this._$32())
      x.setTotalScale_notForClient(x._$Yr._$B0), x.setTotalOpacity(x.getInterpolatedOpacity());
    else {
      var L = this.getTargetBaseDataID();
      if (x._$8r == Rt._$ur && (x._$8r = f.getBaseDataIndex(L)), x._$8r < 0)
        yt._$so && h._$li("_$L _$0P _$G :: %s", L), x._$hS(!1);
      else {
        var M = f.getBaseData(x._$8r);
        if (M != null) {
          var N = f._$q2(x._$8r), V = se._$Xo;
          V[0] = x._$Yr._$fL, V[1] = x._$Yr._$gL;
          var z = se._$io;
          z[0] = 0, z[1] = -0.1;
          var k = N._$GT().getType();
          k == Rt._$c2 ? z[1] = -10 : z[1] = -0.1;
          var q = se._$0o;
          this._$Jr(f, M, N, V, z, q);
          var tt = n._$92(z, q);
          M._$nb(f, N, V, V, 1, 0, 2), x._$Wr._$fL = V[0], x._$Wr._$gL = V[1], x._$Wr._$B0 = x._$Yr._$B0, x._$Wr._$z0 = x._$Yr._$z0, x._$Wr._$qT = x._$Yr._$qT - tt * n._$NS;
          var et = N.getTotalScale();
          x.setTotalScale_notForClient(et * x._$Wr._$B0);
          var ht = N.getTotalOpacity();
          x.setTotalOpacity(ht * x.getInterpolatedOpacity()), x._$Wr.reflectX = x._$Yr.reflectX, x._$Wr.reflectY = x._$Yr.reflectY, x._$hS(N._$yo());
        } else
          x._$hS(!1);
      }
    }
  }, se.prototype._$nb = function(f, d, x, L, M, N, V) {
    this != d._$GT() && console.log("### assert!! ### ");
    for (var z = d, k = z._$Wr != null ? z._$Wr : z._$Yr, q = Math.sin(n._$bS * k._$qT), tt = Math.cos(n._$bS * k._$qT), et = z.getTotalScale(), ht = k.reflectX ? -1 : 1, gt = k.reflectY ? -1 : 1, xt = tt * et * ht, ut = -q * et * gt, Ct = q * et * ht, wt = tt * et * gt, St = k._$fL, It = k._$gL, re, Bt, G = M * V, Mt = N; Mt < G; Mt += V)
      re = x[Mt], Bt = x[Mt + 1], L[Mt] = xt * re + ut * Bt + St, L[Mt + 1] = Ct * re + wt * Bt + It;
  }, se.prototype._$Jr = function(f, d, x, L, M, N) {
    d != x._$GT() && console.log("### assert!! ### ");
    var V = se._$Lo;
    se._$Lo[0] = L[0], se._$Lo[1] = L[1], d._$nb(f, x, V, V, 1, 0, 2);
    for (var z = se._$To, k = se._$Po, q = 10, tt = 1, et = 0; et < q; et++) {
      if (k[0] = L[0] + tt * M[0], k[1] = L[1] + tt * M[1], d._$nb(f, x, k, z, 1, 0, 2), z[0] -= V[0], z[1] -= V[1], z[0] != 0 || z[1] != 0) {
        N[0] = z[0], N[1] = z[1];
        return;
      }
      if (k[0] = L[0] - tt * M[0], k[1] = L[1] - tt * M[1], d._$nb(f, x, k, z, 1, 0, 2), z[0] -= V[0], z[1] -= V[1], z[0] != 0 || z[1] != 0) {
        z[0] = -z[0], z[0] = -z[0], N[0] = z[0], N[1] = z[1];
        return;
      }
      tt *= 0.1;
    }
    yt._$so && console.log(`_$L0 to transform _$SP
`);
  };
  function Pe(f) {
    Er.prototype.constructor.call(this, f), this._$8r = Rt._$ur, this._$Yr = null, this._$Wr = null;
  }
  Pe.prototype = new Er();
  function Zt() {
    D || (Tt.prototype.constructor.call(this), this._$gP = null, this._$dr = null, this._$GS = null, this._$qb = null, this._$Lb = null, this._$mS = null);
  }
  Zt.prototype = new Tt(), Zt._$ur = -2, Zt._$ES = 500, Zt._$wb = 2, Zt._$8S = 3, Zt._$os = 4, Zt._$52 = Zt._$ES, Zt._$R2 = Zt._$ES, Zt._$Sb = function(f) {
    for (var d = f.length - 1; d >= 0; --d) {
      var x = f[d];
      x < Zt._$52 ? Zt._$52 = x : x > Zt._$R2 && (Zt._$R2 = x);
    }
  }, Zt._$or = function() {
    return Zt._$52;
  }, Zt._$Pr = function() {
    return Zt._$R2;
  }, Zt.prototype._$F0 = function(f) {
    this._$gP = f._$nP(), this._$dr = f._$nP(), this._$GS = f._$nP(), this._$qb = f._$6L(), this._$Lb = f._$cS(), this._$mS = f._$Tb(), f.getFormatVersion() >= bt._$T7 ? (this.clipID = f._$nP(), this.clipIDList = this.convertClipIDForV2_11(this.clipID)) : this.clipIDList = null, Zt._$Sb(this._$Lb);
  }, Zt.prototype.getClipIDList = function() {
    return this.clipIDList;
  }, Zt.prototype._$Nr = function(f, d) {
    if (d._$IS[0] = !1, d._$Us = K._$Z2(f, this._$GS, d._$IS, this._$Lb), !yt._$Zs) {
      if (d._$IS[0])
        return;
    }
    d._$7s = K._$br(f, this._$GS, d._$IS, this._$mS);
  }, Zt.prototype._$2b = function(f) {
  }, Zt.prototype.getDrawDataID = function() {
    return this._$gP;
  }, Zt.prototype._$j2 = function(f) {
    this._$gP = f;
  }, Zt.prototype.getOpacity = function(f, d) {
    return d._$7s;
  }, Zt.prototype._$zS = function(f, d) {
    return d._$Us;
  }, Zt.prototype.getTargetBaseDataID = function() {
    return this._$dr;
  }, Zt.prototype._$gs = function(f) {
    this._$dr = f;
  }, Zt.prototype._$32 = function() {
    return this._$dr != null && this._$dr != ar._$2o();
  }, Zt.prototype.getType = function() {
  };
  function Be() {
    D || (this._$NL = null, this._$3S = null, this._$aS = null, Be._$42++);
  }
  Be._$42 = 0, Be.prototype._$1b = function() {
    return this._$3S;
  }, Be.prototype.getDrawDataList = function() {
    return this._$aS;
  }, Be.prototype._$F0 = function(f) {
    this._$NL = f._$nP(), this._$aS = f._$nP(), this._$3S = f._$nP();
  }, Be.prototype._$kr = function(f) {
    f._$Zo(this._$3S), f._$xo(this._$aS), this._$3S = null, this._$aS = null;
  };
  function _e() {
    D || (t.prototype.constructor.call(this), this._$zo = new Gt());
  }
  _e.prototype = new t(), _e.loadModel = function(f) {
    var d = new _e();
    return t._$62(d, f), d;
  }, _e.loadModel = function(f) {
    var d = new _e();
    return t._$62(d, f), d;
  }, _e._$to = function() {
    var f = new _e();
    return f;
  }, _e._$er = function(f) {
    var d = new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");
    if (d.exists() == !1)
      throw new _$ls("_$t0 _$_ _$6 _$Ui :: " + d._$PL());
    for (var x = [
      "../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"
    ], L = _e.loadModel(d._$3b()), M = 0; M < x.length; M++) {
      var N = new _$5(x[M]);
      if (N.exists() == !1)
        throw new _$ls("_$t0 _$_ _$6 _$Ui :: " + N._$PL());
      L.setTexture(M, _$nL._$_o(f, N._$3b()));
    }
    return L;
  }, _e.prototype.setGL = function(f) {
    this._$zo.setGL(f);
  }, _e.prototype.setTransform = function(f) {
    this._$zo.setTransform(f);
  }, _e.prototype.draw = function() {
    this._$5S.draw(this._$zo);
  }, _e.prototype._$K2 = function() {
    this._$zo._$K2();
  }, _e.prototype.setTexture = function(f, d) {
    this._$zo == null && h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"), this._$zo.setTexture(f, d);
  }, _e.prototype.setTexture = function(f, d) {
    this._$zo == null && h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"), this._$zo.setTexture(f, d);
  }, _e.prototype._$Rs = function() {
    return this._$zo._$Rs();
  }, _e.prototype._$Ds = function(f) {
    this._$zo._$Ds(f);
  }, _e.prototype.getDrawParam = function() {
    return this._$zo;
  };
  function fe() {
    D || (o.prototype.constructor.call(this), this.motions = new Array(), this._$o2 = null, this._$7r = fe._$Co++, this._$D0 = 30, this._$yT = 0, this._$E = !1, this.loopFadeIn = !0, this._$rr = -1, this._$eP = 0);
  }
  fe.prototype = new o(), fe._$cs = "VISIBLE:", fe._$ar = "LAYOUT:", fe.MTN_PREFIX_FADEIN = "FADEIN:", fe.MTN_PREFIX_FADEOUT = "FADEOUT:", fe._$Co = 0, fe._$1T = 1, fe.loadMotion = function(f) {
    var d = le._$C(f), x = fe.loadMotion(d);
    return x;
  };
  function ue(f, d) {
    return String.fromCharCode(f.getUint8(d));
  }
  fe.loadMotion = function(f) {
    f instanceof ArrayBuffer && (f = new DataView(f));
    var d = new fe(), x = [0], L = f.byteLength;
    d._$yT = 0;
    for (var M = 0; M < L; ++M) {
      var N = ue(f, M), V = N.charCodeAt(0);
      if (!(N == `
` || N == "\r")) {
        if (N == "#") {
          for (; M < L && !(ue(f, M) == `
` || ue(f, M) == "\r"); ++M)
            ;
          continue;
        }
        if (N == "$") {
          for (var z = M, k = -1; M < L && (N = ue(f, M), !(N == "\r" || N == `
`)); ++M)
            if (N == "=") {
              k = M;
              break;
            }
          var q = !1;
          if (k >= 0) {
            for (k == z + 4 && ue(f, z + 1) == "f" && ue(f, z + 2) == "p" && ue(f, z + 3) == "s" && (q = !0), M = k + 1; M < L && (N = ue(f, M), !(N == "\r" || N == `
`)); ++M)
              if (!(N == "," || N == " " || N == "	")) {
                var tt = ae._$LS(f, L, M, x);
                x[0] > 0 && q && 5 < tt && tt < 121 && (d._$D0 = tt), M = x[0];
              }
          }
          for (; M < L && !(ue(f, M) == `
` || ue(f, M) == "\r"); ++M)
            ;
          continue;
        }
        if (97 <= V && V <= 122 || 65 <= V && V <= 90 || N == "_") {
          for (var z = M, k = -1; M < L && (N = ue(f, M), !(N == "\r" || N == `
`)); ++M)
            if (N == "=") {
              k = M;
              break;
            }
          if (k >= 0) {
            var et = new Nt();
            ae.startsWith(f, z, fe._$cs) ? (et._$RP = Nt._$hs, et._$4P = ae.createString(f, z, k - z)) : ae.startsWith(f, z, fe._$ar) ? (et._$4P = ae.createString(f, z + 7, k - z - 7), ae.startsWith(f, z + 7, "ANCHOR_X") ? et._$RP = Nt._$xs : ae.startsWith(f, z + 7, "ANCHOR_Y") ? et._$RP = Nt._$us : ae.startsWith(f, z + 7, "SCALE_X") ? et._$RP = Nt._$qs : ae.startsWith(f, z + 7, "SCALE_Y") ? et._$RP = Nt._$Ys : ae.startsWith(f, z + 7, "X") ? et._$RP = Nt._$ws : ae.startsWith(f, z + 7, "Y") && (et._$RP = Nt._$Ns)) : (et._$RP = Nt._$Fr, et._$4P = ae.createString(f, z, k - z)), d.motions.push(et);
            var ht = 0, gt = [];
            for (M = k + 1; M < L && (N = ue(f, M), !(N == "\r" || N == `
`)); ++M)
              if (!(N == "," || N == " " || N == "	")) {
                var tt = ae._$LS(f, L, M, x);
                if (x[0] > 0) {
                  gt.push(tt), ht++;
                  var xt = x[0];
                  if (xt < M) {
                    console.log(`_$n0 _$hi . @Live2DMotion loadMotion()
`);
                    break;
                  }
                  M = xt - 1;
                }
              }
            et._$I0 = new Float32Array(gt), ht > d._$yT && (d._$yT = ht);
          }
        }
      }
    }
    return d._$rr = 1e3 * d._$yT / d._$D0 | 0, d;
  }, fe.prototype.getDurationMSec = function() {
    return this._$E ? -1 : this._$rr;
  }, fe.prototype.getLoopDurationMSec = function() {
    return this._$rr;
  }, fe.prototype.dump = function() {
    for (var f = 0; f < this.motions.length; f++) {
      var d = this.motions[f];
      console.log("_$wL[%s] [%d]. ", d._$4P, d._$I0.length);
      for (var x = 0; x < d._$I0.length && x < 10; x++)
        console.log("%5.2f ,", d._$I0[x]);
      console.log(`
`);
    }
  }, fe.prototype.updateParamExe = function(f, d, x, L) {
    for (var M = d - L._$z2, N = M * this._$D0 / 1e3, V = N | 0, z = N - V, k = 0; k < this.motions.length; k++) {
      var q = this.motions[k], tt = q._$I0.length, et = q._$4P;
      if (q._$RP == Nt._$hs) {
        var ht = q._$I0[V >= tt ? tt - 1 : V];
        f.setParamFloat(et, ht);
      } else if (!(Nt._$ws <= q._$RP && q._$RP <= Nt._$Ys)) {
        var gt = f.getParamIndex(et), xt = f.getModelContext(), ut = xt.getParamMax(gt), Ct = xt.getParamMin(gt), wt = 0.4, St = wt * (ut - Ct), It = xt.getParamFloat(gt), re = q._$I0[V >= tt ? tt - 1 : V], Bt = q._$I0[V + 1 >= tt ? tt - 1 : V + 1], G;
        re < Bt && Bt - re > St || re > Bt && re - Bt > St ? G = re : G = re + (Bt - re) * z;
        var Mt = It + (G - It) * x;
        f.setParamFloat(et, Mt);
      }
    }
    V >= this._$yT && (this._$E ? (L._$z2 = d, this.loopFadeIn && (L._$bs = d)) : L._$9L = !0), this._$eP = x;
  }, fe.prototype._$r0 = function() {
    return this._$E;
  }, fe.prototype._$aL = function(f) {
    this._$E = f;
  }, fe.prototype._$S0 = function() {
    return this._$D0;
  }, fe.prototype._$U0 = function(f) {
    this._$D0 = f;
  }, fe.prototype.isLoopFadeIn = function() {
    return this.loopFadeIn;
  }, fe.prototype.setLoopFadeIn = function(f) {
    this.loopFadeIn = f;
  };
  function me() {
    this._$P = new Float32Array(100), this.size = 0;
  }
  me.prototype.clear = function() {
    this.size = 0;
  }, me.prototype.add = function(f) {
    if (this._$P.length <= this.size) {
      var d = new Float32Array(this.size * 2);
      Ft._$jT(this._$P, 0, d, 0, this.size), this._$P = d;
    }
    this._$P[this.size++] = f;
  }, me.prototype._$BL = function() {
    var f = new Float32Array(this.size);
    return Ft._$jT(this._$P, 0, f, 0, this.size), f;
  };
  function Nt() {
    this._$4P = null, this._$I0 = null, this._$RP = null;
  }
  Nt._$Fr = 0, Nt._$hs = 1, Nt._$ws = 100, Nt._$Ns = 101, Nt._$xs = 102, Nt._$us = 103, Nt._$qs = 104, Nt._$Ys = 105;
  function Ue() {
    D || (Rt.prototype.constructor.call(this), this._$o = 0, this._$A = 0, this._$GS = null, this._$Eo = null);
  }
  Ue.prototype = new Rt(), Ue._$gT = new Array(), Ue.prototype._$zP = function() {
    this._$GS = new zt(), this._$GS._$zP();
  }, Ue.prototype._$F0 = function(f) {
    Rt.prototype._$F0.call(this, f), this._$A = f._$6L(), this._$o = f._$6L(), this._$GS = f._$nP(), this._$Eo = f._$nP(), Rt.prototype.readV2_opacity.call(this, f);
  }, Ue.prototype.init = function(f) {
    var d = new Ke(this), x = (this._$o + 1) * (this._$A + 1);
    return d._$Cr != null && (d._$Cr = null), d._$Cr = new Float32Array(x * 2), d._$hr != null && (d._$hr = null), this._$32() ? d._$hr = new Float32Array(x * 2) : d._$hr = null, d;
  }, Ue.prototype._$Nr = function(f, d) {
    var x = d;
    if (this._$GS._$Ur(f)) {
      var L = this._$VT(), M = Ue._$gT;
      M[0] = !1, K._$Vr(f, this._$GS, M, L, this._$Eo, x._$Cr, 0, 2), d._$Ib(M[0]), this.interpolateOpacity(f, this._$GS, d, M);
    }
  }, Ue.prototype._$2b = function(f, d) {
    var x = d;
    if (x._$hS(!0), !this._$32())
      x.setTotalOpacity(x.getInterpolatedOpacity());
    else {
      var L = this.getTargetBaseDataID();
      if (x._$8r == Rt._$ur && (x._$8r = f.getBaseDataIndex(L)), x._$8r < 0)
        yt._$so && h._$li("_$L _$0P _$G :: %s", L), x._$hS(!1);
      else {
        var M = f.getBaseData(x._$8r), N = f._$q2(x._$8r);
        if (M != null && N._$yo()) {
          var V = N.getTotalScale();
          x.setTotalScale_notForClient(V);
          var z = N.getTotalOpacity();
          x.setTotalOpacity(z * x.getInterpolatedOpacity()), M._$nb(f, N, x._$Cr, x._$hr, this._$VT(), 0, 2), x._$hS(!0);
        } else
          x._$hS(!1);
      }
    }
  }, Ue.prototype._$nb = function(f, d, x, L, M, N, V) {
    {
      var z = d, k = z._$hr != null ? z._$hr : z._$Cr;
      Ue.transformPoints_sdk2(x, L, M, N, V, k, this._$o, this._$A);
    }
  }, Ue.transformPoints_sdk2 = function(f, d, x, L, M, N, V, z) {
    for (var k = x * M, q, tt, et, ht = 0, gt = 0, xt = 0, ut = 0, Ct = 0, wt = 0, St = !1, It = L; It < k; It += M) {
      var re, Bt, G, Mt;
      if (G = f[It], Mt = f[It + 1], re = G * V, Bt = Mt * z, re < 0 || Bt < 0 || V <= re || z <= Bt) {
        var Ut = V + 1;
        if (!St) {
          St = !0, ht = 0.25 * (N[(0 + 0 * Ut) * 2] + N[(V + 0 * Ut) * 2] + N[(0 + z * Ut) * 2] + N[(V + z * Ut) * 2]), gt = 0.25 * (N[(0 + 0 * Ut) * 2 + 1] + N[(V + 0 * Ut) * 2 + 1] + N[(0 + z * Ut) * 2 + 1] + N[(V + z * Ut) * 2 + 1]);
          var He = N[(V + z * Ut) * 2] - N[(0 + 0 * Ut) * 2], sr = N[(V + z * Ut) * 2 + 1] - N[(0 + 0 * Ut) * 2 + 1], kt = N[(V + 0 * Ut) * 2] - N[(0 + z * Ut) * 2], hr = N[(V + 0 * Ut) * 2 + 1] - N[(0 + z * Ut) * 2 + 1];
          xt = (He + kt) * 0.5, ut = (sr + hr) * 0.5, Ct = (He - kt) * 0.5, wt = (sr - hr) * 0.5, ht -= 0.5 * (xt + Ct), gt -= 0.5 * (ut + wt);
        }
        if (-2 < G && G < 3 && -2 < Mt && Mt < 3)
          if (G <= 0)
            if (Mt <= 0) {
              var pe = N[(0 + 0 * Ut) * 2], oe = N[(0 + 0 * Ut) * 2 + 1], ge = ht - 2 * xt, Ee = gt - 2 * ut, ye = ht - 2 * Ct, Se = gt - 2 * wt, te = ht - 2 * xt - 2 * Ct, de = gt - 2 * ut - 2 * wt, Lt = 0.5 * (G - -2), ie = 0.5 * (Mt - -2);
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            } else if (Mt >= 1) {
              var ye = N[(0 + z * Ut) * 2], Se = N[(0 + z * Ut) * 2 + 1], te = ht - 2 * xt + 1 * Ct, de = gt - 2 * ut + 1 * wt, pe = ht + 3 * Ct, oe = gt + 3 * wt, ge = ht - 2 * xt + 3 * Ct, Ee = gt - 2 * ut + 3 * wt, Lt = 0.5 * (G - -2), ie = 0.5 * (Mt - 1);
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            } else {
              var Le = Bt | 0;
              Le == z && (Le = z - 1);
              var Lt = 0.5 * (G - -2), ie = Bt - Le, pr = Le / z, ze = (Le + 1) / z, ye = N[(0 + Le * Ut) * 2], Se = N[(0 + Le * Ut) * 2 + 1], pe = N[(0 + (Le + 1) * Ut) * 2], oe = N[(0 + (Le + 1) * Ut) * 2 + 1], te = ht - 2 * xt + pr * Ct, de = gt - 2 * ut + pr * wt, ge = ht - 2 * xt + ze * Ct, Ee = gt - 2 * ut + ze * wt;
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            }
          else if (1 <= G)
            if (Mt <= 0) {
              var ge = N[(V + 0 * Ut) * 2], Ee = N[(V + 0 * Ut) * 2 + 1], pe = ht + 3 * xt, oe = gt + 3 * ut, te = ht + 1 * xt - 2 * Ct, de = gt + 1 * ut - 2 * wt, ye = ht + 3 * xt - 2 * Ct, Se = gt + 3 * ut - 2 * wt, Lt = 0.5 * (G - 1), ie = 0.5 * (Mt - -2);
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            } else if (Mt >= 1) {
              var te = N[(V + z * Ut) * 2], de = N[(V + z * Ut) * 2 + 1], ye = ht + 3 * xt + 1 * Ct, Se = gt + 3 * ut + 1 * wt, ge = ht + 1 * xt + 3 * Ct, Ee = gt + 1 * ut + 3 * wt, pe = ht + 3 * xt + 3 * Ct, oe = gt + 3 * ut + 3 * wt, Lt = 0.5 * (G - 1), ie = 0.5 * (Mt - 1);
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            } else {
              var Le = Bt | 0;
              Le == z && (Le = z - 1);
              var Lt = 0.5 * (G - 1), ie = Bt - Le, pr = Le / z, ze = (Le + 1) / z, te = N[(V + Le * Ut) * 2], de = N[(V + Le * Ut) * 2 + 1], ge = N[(V + (Le + 1) * Ut) * 2], Ee = N[(V + (Le + 1) * Ut) * 2 + 1], ye = ht + 3 * xt + pr * Ct, Se = gt + 3 * ut + pr * wt, pe = ht + 3 * xt + ze * Ct, oe = gt + 3 * ut + ze * wt;
              Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
            }
          else if (Mt <= 0) {
            var Ne = re | 0;
            Ne == V && (Ne = V - 1);
            var Lt = re - Ne, ie = 0.5 * (Mt - -2), je = Ne / V, _t = (Ne + 1) / V, ge = N[(Ne + 0 * Ut) * 2], Ee = N[(Ne + 0 * Ut) * 2 + 1], pe = N[(Ne + 1 + 0 * Ut) * 2], oe = N[(Ne + 1 + 0 * Ut) * 2 + 1], te = ht + je * xt - 2 * Ct, de = gt + je * ut - 2 * wt, ye = ht + _t * xt - 2 * Ct, Se = gt + _t * ut - 2 * wt;
            Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
          } else if (Mt >= 1) {
            var Ne = re | 0;
            Ne == V && (Ne = V - 1);
            var Lt = re - Ne, ie = 0.5 * (Mt - 1), je = Ne / V, _t = (Ne + 1) / V, te = N[(Ne + z * Ut) * 2], de = N[(Ne + z * Ut) * 2 + 1], ye = N[(Ne + 1 + z * Ut) * 2], Se = N[(Ne + 1 + z * Ut) * 2 + 1], ge = ht + je * xt + 3 * Ct, Ee = gt + je * ut + 3 * wt, pe = ht + _t * xt + 3 * Ct, oe = gt + _t * ut + 3 * wt;
            Lt + ie <= 1 ? (d[It] = te + (ye - te) * Lt + (ge - te) * ie, d[It + 1] = de + (Se - de) * Lt + (Ee - de) * ie) : (d[It] = pe + (ge - pe) * (1 - Lt) + (ye - pe) * (1 - ie), d[It + 1] = oe + (Ee - oe) * (1 - Lt) + (Se - oe) * (1 - ie));
          } else
            System.err.printf(`_$li calc : %.4f , %.4f					@@BDBoxGrid
`, G, Mt);
        else
          d[It] = ht + G * xt + Mt * Ct, d[It + 1] = gt + G * ut + Mt * wt;
      } else
        tt = re - (re | 0), et = Bt - (Bt | 0), q = 2 * ((re | 0) + (Bt | 0) * (V + 1)), tt + et < 1 ? (d[It] = N[q] * (1 - tt - et) + N[q + 2] * tt + N[q + 2 * (V + 1)] * et, d[It + 1] = N[q + 1] * (1 - tt - et) + N[q + 3] * tt + N[q + 2 * (V + 1) + 1] * et) : (d[It] = N[q + 2 * (V + 1) + 2] * (tt - 1 + et) + N[q + 2 * (V + 1)] * (1 - tt) + N[q + 2] * (1 - et), d[It + 1] = N[q + 2 * (V + 1) + 3] * (tt - 1 + et) + N[q + 2 * (V + 1) + 1] * (1 - tt) + N[q + 3] * (1 - et));
    }
  }, Ue.prototype.transformPoints_sdk1 = function(f, d, x, L, M, N, V) {
    for (var z = d, k, q, tt = this._$o, et = this._$A, ht = M * V, gt, xt, ut, Ct, wt, St = z._$hr != null ? z._$hr : z._$Cr, It = N; It < ht; It += V)
      yt._$ts ? (k = x[It], q = x[It + 1], k < 0 ? k = 0 : k > 1 && (k = 1), q < 0 ? q = 0 : q > 1 && (q = 1), k *= tt, q *= et, gt = k | 0, xt = q | 0, gt > tt - 1 && (gt = tt - 1), xt > et - 1 && (xt = et - 1), Ct = k - gt, wt = q - xt, ut = 2 * (gt + xt * (tt + 1))) : (k = x[It] * tt, q = x[It + 1] * et, Ct = k - (k | 0), wt = q - (q | 0), ut = 2 * ((k | 0) + (q | 0) * (tt + 1))), Ct + wt < 1 ? (L[It] = St[ut] * (1 - Ct - wt) + St[ut + 2] * Ct + St[ut + 2 * (tt + 1)] * wt, L[It + 1] = St[ut + 1] * (1 - Ct - wt) + St[ut + 3] * Ct + St[ut + 2 * (tt + 1) + 1] * wt) : (L[It] = St[ut + 2 * (tt + 1) + 2] * (Ct - 1 + wt) + St[ut + 2 * (tt + 1)] * (1 - Ct) + St[ut + 2] * (1 - wt), L[It + 1] = St[ut + 2 * (tt + 1) + 3] * (Ct - 1 + wt) + St[ut + 2 * (tt + 1) + 1] * (1 - Ct) + St[ut + 3] * (1 - wt));
  }, Ue.prototype._$VT = function() {
    return (this._$o + 1) * (this._$A + 1);
  }, Ue.prototype.getType = function() {
    return Rt._$_b;
  };
  function Ke(f) {
    Er.prototype.constructor.call(this, f), this._$8r = Rt._$ur, this._$Cr = null, this._$hr = null;
  }
  Ke.prototype = new Er();
  function ce() {
    D || (this.visible = !0, this._$g0 = !1, this._$NL = null, this._$3S = null, this._$aS = null, ce._$42++);
  }
  ce._$42 = 0, ce.prototype._$zP = function() {
    this._$3S = new Array(), this._$aS = new Array();
  }, ce.prototype._$F0 = function(f) {
    this._$g0 = f._$8L(), this.visible = f._$8L(), this._$NL = f._$nP(), this._$3S = f._$nP(), this._$aS = f._$nP();
  }, ce.prototype.init = function(f) {
    var d = new kr(this);
    return d.setPartsOpacity(this.isVisible() ? 1 : 0), d;
  }, ce.prototype._$6o = function(f) {
    if (this._$3S == null)
      throw new Error("_$3S _$6 _$Wo@_$6o");
    this._$3S.push(f);
  }, ce.prototype._$3o = function(f) {
    if (this._$aS == null)
      throw new Error("_$aS _$6 _$Wo@_$3o");
    this._$aS.push(f);
  }, ce.prototype._$Zo = function(f) {
    this._$3S = f;
  }, ce.prototype._$xo = function(f) {
    this._$aS = f;
  }, ce.prototype.isVisible = function() {
    return this.visible;
  }, ce.prototype._$uL = function() {
    return this._$g0;
  }, ce.prototype._$KP = function(f) {
    this.visible = f;
  }, ce.prototype._$ET = function(f) {
    this._$g0 = f;
  }, ce.prototype.getBaseData = function() {
    return this._$3S;
  }, ce.prototype.getDrawData = function() {
    return this._$aS;
  }, ce.prototype._$p2 = function() {
    return this._$NL;
  }, ce.prototype._$ob = function(f) {
    this._$NL = f;
  }, ce.prototype.getPartsID = function() {
    return this._$NL;
  }, ce.prototype._$MP = function(f) {
    this._$NL = f;
  };
  function kr(f) {
    this._$VS = null, this._$e0 = null, this._$e0 = f;
  }
  kr.prototype = new y(), kr.prototype.getPartsOpacity = function() {
    return this._$VS;
  }, kr.prototype.setPartsOpacity = function(f) {
    this._$VS = f;
  };
  function Ur(f) {
    D || (this.id = f);
  }
  Ur._$L7 = function() {
    w._$27(), ar._$27(), he._$27(), _._$27();
  }, Ur.prototype.toString = function() {
    return this.id;
  };
  function ei() {
    D || (this._$4S = null);
  }
  ei.prototype._$1s = function() {
    return this._$4S;
  }, ei.prototype._$zP = function() {
    this._$4S = new Array();
  }, ei.prototype._$F0 = function(f) {
    this._$4S = f._$nP();
  }, ei.prototype._$Ks = function(f) {
    this._$4S.push(f);
  };
  function Ze(f, d) {
    this.canvas = f, this.context = d, this.viewport = new Array(0, 0, f.width, f.height), this._$6r = 1, this._$xP = 0, this._$3r = 1, this._$uP = 0, this._$Qo = -1, this.cacheImages = {};
  }
  Ze.tr = new Vr(), Ze._$50 = new Vr(), Ze._$Ti = new Array(0, 0), Ze._$Pi = new Array(0, 0), Ze._$B = new Array(0, 0), Ze.prototype._$lP = function(f, d, x, L) {
    this.viewport = new Array(f, d, x, L);
  }, Ze.prototype._$bL = function() {
    this.context.save();
    var f = this.viewport;
    f != null && (this.context.beginPath(), this.context._$Li(f[0], f[1], f[2], f[3]), this.context.clip());
  }, Ze.prototype._$ei = function() {
    this.context.restore();
  }, Ze.prototype.drawElements = function(f, d, x, L, M, N, V, z) {
    try {
      M != this._$Qo && (this._$Qo = M, this.context.globalAlpha = M);
      for (var k = d.length, q = f.width, tt = f.height, et = this.context, ht = this._$xP, gt = this._$uP, xt = this._$6r, ut = this._$3r, Ct = Ze.tr, wt = Ze._$Ti, St = Ze._$Pi, It = Ze._$B, re = 0; re < k; re += 3) {
        et.save();
        var Bt = d[re], G = d[re + 1], Mt = d[re + 2], Ut = ht + xt * x[Bt * 2], He = gt + ut * x[Bt * 2 + 1], sr = ht + xt * x[G * 2], kt = gt + ut * x[G * 2 + 1], hr = ht + xt * x[Mt * 2], pe = gt + ut * x[Mt * 2 + 1];
        V && (V._$PS(Ut, He, It), Ut = It[0], He = It[1], V._$PS(sr, kt, It), sr = It[0], kt = It[1], V._$PS(hr, pe, It), hr = It[0], pe = It[1]);
        var oe = q * L[Bt * 2], ge = tt - tt * L[Bt * 2 + 1], Ee = q * L[G * 2], ye = tt - tt * L[G * 2 + 1], Se = q * L[Mt * 2], te = tt - tt * L[Mt * 2 + 1], de = Math.atan2(ye - ge, Ee - oe), Lt = Math.atan2(kt - He, sr - Ut), ie = sr - Ut, Le = kt - He, pr = Math.sqrt(ie * ie + Le * Le), ze = Ee - oe, Ne = ye - ge, je = Math.sqrt(ze * ze + Ne * Ne), _t = pr / je;
        it._$ni(Se, te, oe, ge, Ee - oe, ye - ge, -(ye - ge), Ee - oe, wt), it._$ni(hr, pe, Ut, He, sr - Ut, kt - He, -(kt - He), sr - Ut, St);
        var Sr = (St[0] - wt[0]) / wt[1], rr = Math.min(oe, Ee, Se), Nr = Math.max(oe, Ee, Se), vr = Math.min(ge, ye, te), Jr = Math.max(ge, ye, te), ui = Math.floor(rr), Qr = Math.floor(vr), ri = Math.ceil(Nr), br = Math.ceil(Jr);
        Ct.identity(), Ct.translate(Ut, He), Ct.rotate(Lt), Ct.scale(1, St[1] / wt[1]), Ct.shear(Sr, 0), Ct.scale(_t, _t), Ct.rotate(-de), Ct.translate(-oe, -ge), Ct.setContext(et);
        var Ui = !0, Gi = 1.2;
        if (N || (N = Ui ? Gi : 0), yt.IGNORE_EXPAND && (N = 0), yt.USE_CACHED_POLYGON_IMAGE) {
          var hi = z._$e0;
          if (hi.gl_cacheImage = hi.gl_cacheImage || {}, !hi.gl_cacheImage[re]) {
            var Di = Ze.createCanvas(ri - ui, br - Qr);
            yt.DEBUG_DATA.LDGL_CANVAS_MB = yt.DEBUG_DATA.LDGL_CANVAS_MB || 0, yt.DEBUG_DATA.LDGL_CANVAS_MB += (ri - ui) * (br - Qr) * 4;
            var ii = Di.getContext("2d");
            ii.translate(-ui, -Qr), Ze.clip(ii, Ct, N, pr, oe, ge, Ee, ye, Se, te, Ut, He, sr, kt, hr, pe), ii.drawImage(f, 0, 0), hi.gl_cacheImage[re] = { cacheCanvas: Di, cacheContext: ii };
          }
          et.drawImage(hi.gl_cacheImage[re].cacheCanvas, ui, Qr);
        } else
          yt.IGNORE_CLIP || Ze.clip(et, Ct, N, pr, oe, ge, Ee, ye, Se, te, Ut, He, sr, kt, hr, pe), yt.USE_ADJUST_TRANSLATION && (rr = 0, Nr = q, vr = 0, Jr = tt), et.drawImage(f, rr, vr, Nr - rr, Jr - vr, rr, vr, Nr - rr, Jr - vr);
        et.restore();
      }
    } catch (Ie) {
      h._$Rb(Ie);
    }
  }, Ze.clip = function(f, d, x, L, M, N, V, z, k, q, tt, et, ht, gt, xt, ut) {
    x > 0.02 ? Ze.expandClip(f, d, x, L, tt, et, ht, gt, xt, ut) : Ze.clipWithTransform(f, null, M, N, V, z, k, q);
  }, Ze.expandClip = function(f, d, x, L, M, N, V, z, k, q) {
    var tt = V - M, et = z - N, ht = k - M, gt = q - N, xt = tt * gt - et * ht > 0 ? x : -x, ut = -et, Ct = tt, wt = k - V, St = q - z, It = -St, re = wt, Bt = Math.sqrt(wt * wt + St * St), G = -gt, Mt = ht, Ut = Math.sqrt(ht * ht + gt * gt), He = M - xt * ut / L, sr = N - xt * Ct / L, kt = V - xt * ut / L, hr = z - xt * Ct / L, pe = V - xt * It / Bt, oe = z - xt * re / Bt, ge = k - xt * It / Bt, Ee = q - xt * re / Bt, ye = M + xt * G / Ut, Se = N + xt * Mt / Ut, te = k + xt * G / Ut, de = q + xt * Mt / Ut, Lt = Ze._$50, ie = d._$P2(Lt);
    return ie == null ? !1 : (Ze.clipWithTransform(f, Lt, He, sr, kt, hr, pe, oe, ge, Ee, te, de, ye, Se), !0);
  }, Ze.clipWithTransform = function(f, d, x, L, M, N, V, z) {
    if (arguments.length < 1 + 3 * 2) {
      h._$li("err : @LDGL.clip()");
      return;
    }
    if (!(arguments[1] instanceof Vr)) {
      h._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");
      return;
    }
    var k = Ze._$B, q = d, tt = arguments;
    if (f.beginPath(), q) {
      q._$PS(tt[2], tt[3], k), f.moveTo(k[0], k[1]);
      for (var et = 4; et < tt.length; et += 2)
        q._$PS(tt[et], tt[et + 1], k), f.lineTo(k[0], k[1]);
    } else {
      f.moveTo(tt[2], tt[3]);
      for (var et = 4; et < tt.length; et += 2)
        f.lineTo(tt[et], tt[et + 1]);
    }
    f.clip();
  }, Ze.createCanvas = function(f, d) {
    var x = document.createElement("canvas");
    return x.setAttribute("width", f), x.setAttribute("height", d), x || h._$li("err : " + x), x;
  }, Ze.dumpValues = function() {
    for (var f = "", d = 0; d < arguments.length; d++)
      f += "[" + d + "]= " + arguments[d].toFixed(3) + " , ";
    console.log(f);
  };
  function Ai() {
    D || (this._$TT = null, this._$LT = null, this._$FS = null, this._$wL = null);
  }
  Ai.prototype._$F0 = function(f) {
    this._$TT = f._$_T(), this._$LT = f._$_T(), this._$FS = f._$_T(), this._$wL = f._$nP();
  }, Ai.prototype.getMinValue = function() {
    return this._$TT;
  }, Ai.prototype.getMaxValue = function() {
    return this._$LT;
  }, Ai.prototype.getDefaultValue = function() {
    return this._$FS;
  }, Ai.prototype.getParamID = function() {
    return this._$wL;
  };
  function Er(f) {
    D || (this._$e0 = null, this._$IP = null, this._$JS = !1, this._$AT = !0, this._$e0 = f, this.totalScale = 1, this._$7s = 1, this.totalOpacity = 1);
  }
  Er.prototype._$yo = function() {
    return this._$AT && !this._$JS;
  }, Er.prototype._$hS = function(f) {
    this._$AT = f;
  }, Er.prototype._$GT = function() {
    return this._$e0;
  }, Er.prototype._$l2 = function(f) {
    this._$IP = f;
  }, Er.prototype.getPartsIndex = function() {
    return this._$IP;
  }, Er.prototype._$x2 = function() {
    return this._$JS;
  }, Er.prototype._$Ib = function(f) {
    this._$JS = f;
  }, Er.prototype.getTotalScale = function() {
    return this.totalScale;
  }, Er.prototype.setTotalScale_notForClient = function(f) {
    this.totalScale = f;
  }, Er.prototype.getInterpolatedOpacity = function() {
    return this._$7s;
  }, Er.prototype.setInterpolatedOpacity = function(f) {
    this._$7s = f;
  }, Er.prototype.getTotalOpacity = function(f) {
    return this.totalOpacity;
  }, Er.prototype.setTotalOpacity = function(f) {
    this.totalOpacity = f;
  };
  function yt() {
  }
  yt._$2s = "2.1.00_1", yt._$Kr = 201001e3, yt._$sP = !0, yt._$so = !0, yt._$cb = !1, yt._$3T = !0, yt._$Ts = !0, yt._$fb = !0, yt._$ts = !0, yt.L2D_DEFORMER_EXTEND = !0, yt._$Wb = !1, yt._$yr = !1, yt._$Zs = !1, yt.L2D_NO_ERROR = 0, yt._$i7 = 1e3, yt._$9s = 1001, yt._$es = 1100, yt._$r7 = 2e3, yt._$07 = 2001, yt._$b7 = 2002, yt._$H7 = 4e3, yt.L2D_COLOR_BLEND_MODE_MULT = 0, yt.L2D_COLOR_BLEND_MODE_ADD = 1, yt.L2D_COLOR_BLEND_MODE_INTERPOLATE = 2, yt._$6b = !0, yt._$cT = 0, yt.clippingMaskBufferSize = 256, yt.glContext = new Array(), yt.frameBuffers = new Array(), yt.fTexture = new Array(), yt.IGNORE_CLIP = !1, yt.IGNORE_EXPAND = !1, yt.EXPAND_W = 2, yt.USE_ADJUST_TRANSLATION = !0, yt.USE_CANVAS_TRANSFORM = !0, yt.USE_CACHED_POLYGON_IMAGE = !1, yt.DEBUG_DATA = {}, yt.PROFILE_IOS_SPEED = {
    PROFILE_NAME: "iOS Speed",
    USE_ADJUST_TRANSLATION: !0,
    USE_CACHED_POLYGON_IMAGE: !0,
    EXPAND_W: 4
  }, yt.PROFILE_IOS_QUALITY = {
    PROFILE_NAME: "iOS HiQ",
    USE_ADJUST_TRANSLATION: !0,
    USE_CACHED_POLYGON_IMAGE: !1,
    EXPAND_W: 2
  }, yt.PROFILE_IOS_DEFAULT = yt.PROFILE_IOS_QUALITY, yt.PROFILE_ANDROID = {
    PROFILE_NAME: "Android",
    USE_ADJUST_TRANSLATION: !1,
    USE_CACHED_POLYGON_IMAGE: !1,
    EXPAND_W: 2
  }, yt.PROFILE_DESKTOP = {
    PROFILE_NAME: "Desktop",
    USE_ADJUST_TRANSLATION: !1,
    USE_CACHED_POLYGON_IMAGE: !1,
    EXPAND_W: 2
  }, yt.initProfile = function() {
    Re.isIOS() ? yt.setupProfile(yt.PROFILE_IOS_DEFAULT) : Re.isAndroid() ? yt.setupProfile(yt.PROFILE_ANDROID) : yt.setupProfile(yt.PROFILE_DESKTOP);
  }, yt.setupProfile = function(f, d) {
    if (typeof f == "number")
      switch (f) {
        case 9901:
          f = yt.PROFILE_IOS_SPEED;
          break;
        case 9902:
          f = yt.PROFILE_IOS_QUALITY;
          break;
        case 9903:
          f = yt.PROFILE_IOS_DEFAULT;
          break;
        case 9904:
          f = yt.PROFILE_ANDROID;
          break;
        case 9905:
          f = yt.PROFILE_DESKTOP;
          break;
        default:
          alert("profile _$6 _$Ui : " + f);
          break;
      }
    for (var x in f)
      yt[x] = f[x];
  }, yt.init = function() {
    yt._$6b && (yt._$6b = !1, yt.initProfile());
  }, yt.getVersionStr = function() {
    return yt._$2s;
  }, yt.getVersionNo = function() {
    return yt._$Kr;
  }, yt._$sT = function(f) {
    yt._$cT = f;
  }, yt.getError = function() {
    var f = yt._$cT;
    return yt._$cT = 0, f;
  }, yt.dispose = function() {
    yt.glContext = [], yt.frameBuffers = [], yt.fTexture = [];
  }, yt.setGL = function(f, d) {
    var x = d || 0;
    yt.glContext[x] = f;
  }, yt.getGL = function(f) {
    return yt.glContext[f];
  }, yt.setClippingMaskBufferSize = function(f) {
    yt.clippingMaskBufferSize = f;
  }, yt.getClippingMaskBufferSize = function() {
    return yt.clippingMaskBufferSize;
  }, yt.deleteBuffer = function(f) {
    var d = yt.getGL(f);
    d.deleteFramebuffer(yt.frameBuffers[f].framebuffer), delete yt.frameBuffers[f], delete yt.glContext[f];
  };
  function li() {
  }
  li._$r2 = function(f) {
    return f < 0 ? 0 : f > 1 ? 1 : 0.5 - 0.5 * Math.cos(f * n.PI_F);
  };
  function Yr(f) {
    D || (this._$ib = f);
  }
  Yr._$fr = -1, Yr.prototype.toString = function() {
    return this._$ib;
  };
  function Ve() {
    D || (Zt.prototype.constructor.call(this), this._$LP = -1, this._$d0 = 0, this._$Yo = 0, this._$JP = null, this._$5P = null, this._$BP = null, this._$Eo = null, this._$Qi = null, this._$6s = Ve._$ms, this.culling = !0, this.gl_cacheImage = null, this.instanceNo = Ve._$42++);
  }
  Ve.prototype = new Zt(), Ve._$42 = 0, Ve._$Os = 30, Ve._$ms = 0, Ve._$ns = 1, Ve._$_s = 2, Ve._$gT = new Array(), Ve.prototype._$_S = function(f) {
    this._$LP = f;
  }, Ve.prototype.getTextureNo = function() {
    return this._$LP;
  }, Ve.prototype._$ZL = function() {
    return this._$Qi;
  }, Ve.prototype._$H2 = function() {
    return this._$JP;
  }, Ve.prototype.getNumPoints = function() {
    return this._$d0;
  }, Ve.prototype.getType = function() {
    return Zt._$wb;
  }, Ve.prototype._$B2 = function(f, d, x) {
    var L = d, M = L._$hr != null ? L._$hr : L._$Cr, N = at._$do;
    switch (N) {
      default:
      case at._$Ms:
        throw new Error("_$L _$ro ");
      case at._$Qs:
        for (var V = this._$d0 - 1; V >= 0; --V) {
          var z = V * at._$No;
          M[z + 4] = x;
        }
        break;
    }
  }, Ve.prototype._$zP = function() {
    this._$GS = new zt(), this._$GS._$zP();
  }, Ve.prototype._$F0 = function(f) {
    Zt.prototype._$F0.call(this, f), this._$LP = f._$6L(), this._$d0 = f._$6L(), this._$Yo = f._$6L();
    var d = f._$nP();
    this._$BP = new Int16Array(this._$Yo * 3);
    for (var x = this._$Yo * 3 - 1; x >= 0; --x)
      this._$BP[x] = d[x];
    if (this._$Eo = f._$nP(), this._$Qi = f._$nP(), f.getFormatVersion() >= bt._$s7) {
      if (this._$JP = f._$6L(), this._$JP != 0) {
        if (this._$JP & 1) {
          var L = f._$6L();
          this._$5P == null && (this._$5P = new Object()), this._$5P._$Hb = parseInt(L);
        }
        this._$JP & Ve._$Os ? this._$6s = (this._$JP & Ve._$Os) >> 1 : this._$6s = Ve._$ms, this._$JP & 32 && (this.culling = !1);
      }
    } else
      this._$JP = 0;
  }, Ve.prototype.init = function(f) {
    var d = new Mi(this), x = this._$d0 * at._$No, L = this._$32();
    d._$Cr != null && (d._$Cr = null), d._$Cr = new Float32Array(x), d._$hr != null && (d._$hr = null), d._$hr = L ? new Float32Array(x) : null;
    var M = at._$do;
    switch (M) {
      default:
      case at._$Ms:
        if (at._$Ls)
          for (var N = this._$d0 - 1; N >= 0; --N) {
            var V = N << 1;
            this._$Qi[V + 1] = 1 - this._$Qi[V + 1];
          }
        break;
      case at._$Qs:
        for (var N = this._$d0 - 1; N >= 0; --N) {
          var V = N << 1, z = N * at._$No, k = this._$Qi[V], q = this._$Qi[V + 1];
          d._$Cr[z] = k, d._$Cr[z + 1] = q, d._$Cr[z + 4] = 0, L && (d._$hr[z] = k, d._$hr[z + 1] = q, d._$hr[z + 4] = 0);
        }
        break;
    }
    return d;
  }, Ve.prototype._$Nr = function(f, d) {
    var x = d;
    if (this != x._$GT() && console.log("### assert!! ### "), !!this._$GS._$Ur(f) && (Zt.prototype._$Nr.call(this, f, x), !x._$IS[0])) {
      var L = Ve._$gT;
      L[0] = !1, K._$Vr(f, this._$GS, L, this._$d0, this._$Eo, x._$Cr, at._$i2, at._$No);
    }
  }, Ve.prototype._$2b = function(f, d) {
    try {
      this != d._$GT() && console.log("### assert!! ### ");
      var x = !1;
      d._$IS[0] && (x = !0);
      var L = d;
      if (!x && (Zt.prototype._$2b.call(this, f), this._$32())) {
        var M = this.getTargetBaseDataID();
        if (L._$8r == Zt._$ur && (L._$8r = f.getBaseDataIndex(M)), L._$8r < 0)
          yt._$so && h._$li("_$L _$0P _$G :: %s", M);
        else {
          var N = f.getBaseData(L._$8r), V = f._$q2(L._$8r);
          N != null && !V._$x2() ? (N._$nb(f, V, L._$Cr, L._$hr, this._$d0, at._$i2, at._$No), L._$AT = !0) : L._$AT = !1, L.baseOpacity = V.getTotalOpacity();
        }
      }
    } catch (z) {
      throw z;
    }
  }, Ve.prototype.draw = function(f, d, x) {
    if (this != x._$GT() && console.log("### assert!! ### "), !x._$IS[0]) {
      var L = x, M = this._$LP;
      M < 0 && (M = 1);
      var N = this.getOpacity(d, L) * x._$VS * x.baseOpacity, V = L._$hr != null ? L._$hr : L._$Cr;
      f.setClipBufPre_clipContextForDraw(x.clipBufPre_clipContext), f._$WP(this.culling), f._$Uo(M, 3 * this._$Yo, this._$BP, V, this._$Qi, N, this._$6s, L);
    }
  }, Ve.prototype.dump = function() {
    console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`, this._$LP, this._$d0, this._$Yo), console.log("  _$Oi _$di = { ");
    for (var f = 0; f < this._$BP.length; f++)
      console.log("%5d ,", this._$BP[f]);
    console.log(`
  _$5i _$30`);
    for (var f = 0; f < this._$Eo.length; f++) {
      console.log(`
    _$30[%d] = `, f);
      for (var d = this._$Eo[f], x = 0; x < d.length; x++)
        console.log("%6.2f, ", d[x]);
    }
    console.log(`
`);
  }, Ve.prototype._$72 = function(f) {
    return this._$5P == null ? null : this._$5P[f];
  }, Ve.prototype.getIndexArray = function() {
    return this._$BP;
  };
  function Mi(f) {
    we.prototype.constructor.call(this, f), this._$8r = Zt._$ur, this._$Cr = null, this._$hr = null;
  }
  Mi.prototype = new we(), Mi.prototype.getTransformedPoints = function() {
    return this._$hr != null ? this._$hr : this._$Cr;
  };
  function qt() {
    D || (this.x = null, this.y = null);
  }
  qt.prototype._$HT = function(f) {
    this.x = f.x, this.y = f.y;
  }, qt.prototype._$HT = function(f, d) {
    this.x = f, this.y = d;
  };
  function cr(f) {
    D || (t.prototype.constructor.call(this), this.drawParamWebGL = new nt(f), this.drawParamWebGL.setGL(yt.getGL(f)));
  }
  cr.prototype = new t(), cr.loadModel = function(f) {
    var d = new cr();
    return t._$62(d, f), d;
  }, cr.loadModel = function(f, d) {
    var x = d || 0, L = new cr(x);
    return t._$62(L, f), L;
  }, cr._$to = function() {
    var f = new cr();
    return f;
  }, cr._$er = function(f) {
    var d = new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");
    if (d.exists() == !1)
      throw new _$ls("_$t0 _$_ _$6 _$Ui :: " + d._$PL());
    for (var x = [
      "../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1",
      "../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"
    ], L = cr.loadModel(d._$3b()), M = 0; M < x.length; M++) {
      var N = new _$5(x[M]);
      if (N.exists() == !1)
        throw new _$ls("_$t0 _$_ _$6 _$Ui :: " + N._$PL());
      L.setTexture(M, _$nL._$_o(f, N._$3b()));
    }
    return L;
  }, cr.prototype.setGL = function(f) {
    yt.setGL(f);
  }, cr.prototype.setTransform = function(f) {
    this.drawParamWebGL.setTransform(f);
  }, cr.prototype.update = function() {
    this._$5S.update(), this._$5S.preDraw(this.drawParamWebGL);
  }, cr.prototype.draw = function() {
    this._$5S.draw(this.drawParamWebGL);
  }, cr.prototype._$K2 = function() {
    this.drawParamWebGL._$K2();
  }, cr.prototype.setTexture = function(f, d) {
    this.drawParamWebGL == null && h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"), this.drawParamWebGL.setTexture(f, d);
  }, cr.prototype.setTexture = function(f, d) {
    this.drawParamWebGL == null && h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"), this.drawParamWebGL.setTexture(f, d);
  }, cr.prototype._$Rs = function() {
    return this.drawParamWebGL._$Rs();
  }, cr.prototype._$Ds = function(f) {
    this.drawParamWebGL._$Ds(f);
  }, cr.prototype.getDrawParam = function() {
    return this.drawParamWebGL;
  }, cr.prototype.setMatrix = function(f) {
    this.drawParamWebGL.setMatrix(f);
  }, cr.prototype.setPremultipliedAlpha = function(f) {
    this.drawParamWebGL.setPremultipliedAlpha(f);
  }, cr.prototype.isPremultipliedAlpha = function() {
    return this.drawParamWebGL.isPremultipliedAlpha();
  }, cr.prototype.setAnisotropy = function(f) {
    this.drawParamWebGL.setAnisotropy(f);
  }, cr.prototype.getAnisotropy = function() {
    return this.drawParamWebGL.getAnisotropy();
  };
  function wi() {
    D || (this.motions = null, this._$eb = !1, this.motions = new Array());
  }
  wi.prototype._$tb = function() {
    return this.motions;
  }, wi.prototype.startMotion = function(f, d) {
    for (var x = null, L = this.motions.length, M = 0; M < L; ++M)
      x = this.motions[M], x != null && (x._$qS(x._$w0.getFadeOut()), this._$eb && h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`, L, x._$sr));
    if (f == null)
      return -1;
    x = new pn(), x._$w0 = f, this.motions.push(x);
    var N = x._$sr;
    return this._$eb && h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`, L, N), N;
  }, wi.prototype.updateParam = function(f) {
    try {
      for (var d = !1, x = 0; x < this.motions.length; x++) {
        var L = this.motions[x];
        if (L == null) {
          this.motions.splice(x, 1), x--;
          continue;
        }
        var M = L._$w0;
        if (M == null) {
          this.motions = this.motions.splice(x, 1), x--;
          continue;
        }
        M.updateParam(f, L), d = !0, L.isFinished() && (this._$eb && h._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`, this.motions.length - 1, L._$sr), this.motions.splice(x, 1), x--);
      }
      return d;
    } catch (N) {
      return h._$li(N), !0;
    }
  }, wi.prototype.isFinished = function(f) {
    if (arguments.length >= 1) {
      for (var d = 0; d < this.motions.length; d++) {
        var x = this.motions[d];
        if (x != null && x._$sr == f && !x.isFinished())
          return !1;
      }
      return !0;
    } else {
      for (var d = 0; d < this.motions.length; d++) {
        var x = this.motions[d];
        if (x == null) {
          this.motions.splice(d, 1), d--;
          continue;
        }
        var L = x._$w0;
        if (L == null) {
          this.motions.splice(d, 1), d--;
          continue;
        }
        if (!x.isFinished())
          return !1;
      }
      return !0;
    }
  }, wi.prototype.stopAllMotions = function() {
    for (var f = 0; f < this.motions.length; f++) {
      var d = this.motions[f];
      if (d == null) {
        this.motions.splice(f, 1), f--;
        continue;
      }
      var x = d._$w0;
      if (x == null) {
        this.motions.splice(f, 1), f--;
        continue;
      }
      this.motions.splice(f, 1), f--;
    }
  }, wi.prototype._$Zr = function(f) {
    this._$eb = f;
  }, wi.prototype._$e = function() {
    console.log(`-- _$R --
`);
    for (var f = 0; f < this.motions.length; f++) {
      var d = this.motions[f], x = d._$w0;
      console.log(`MotionQueueEnt[%d] :: %s
`, this.motions.length, x.toString());
    }
  };
  function pn() {
    this._$w0 = null, this._$AT = !0, this._$9L = !1, this._$z2 = -1, this._$bs = -1, this._$Do = -1, this._$sr = null, this._$sr = pn._$Gs++;
  }
  pn._$Gs = 0, pn.prototype.isFinished = function() {
    return this._$9L;
  }, pn.prototype._$qS = function(f) {
    var d = Ft.getUserTimeMSec(), x = d + f;
    (this._$Do < 0 || x < this._$Do) && (this._$Do = x);
  }, pn.prototype._$Bs = function() {
    return this._$sr;
  };
  function Vr() {
    this.m = new Array(1, 0, 0, 0, 1, 0, 0, 0, 1);
  }
  Vr.prototype.setContext = function(f) {
    var d = this.m;
    f.transform(d[0], d[1], d[3], d[4], d[6], d[7]);
  }, Vr.prototype.toString = function() {
    for (var f = "LDTransform { ", d = 0; d < 9; d++)
      f += this.m[d].toFixed(2) + " ,";
    return f += " }", f;
  }, Vr.prototype.identity = function() {
    var f = this.m;
    f[0] = f[4] = f[8] = 1, f[1] = f[2] = f[3] = f[5] = f[6] = f[7] = 0;
  }, Vr.prototype._$PS = function(f, d, x) {
    x == null && (x = new Array(0, 0));
    var L = this.m;
    return x[0] = L[0] * f + L[3] * d + L[6], x[1] = L[1] * f + L[4] * d + L[7], x;
  }, Vr.prototype._$P2 = function(f) {
    f || (f = new Vr());
    var d = this.m, x = d[0], L = d[1], M = d[2], N = d[3], V = d[4], z = d[5], k = d[6], q = d[7], tt = d[8], et = x * V * tt + L * z * k + M * N * q - x * z * q - M * V * k - L * N * tt;
    if (et == 0)
      return null;
    var ht = 1 / et;
    return f.m[0] = ht * (V * tt - q * z), f.m[1] = ht * (q * M - L * tt), f.m[2] = ht * (L * z - V * M), f.m[3] = ht * (k * z - N * tt), f.m[4] = ht * (x * tt - k * M), f.m[5] = ht * (N * M - x * z), f.m[6] = ht * (N * q - k * V), f.m[7] = ht * (k * L - x * q), f.m[8] = ht * (x * V - N * L), f;
  }, Vr.prototype.transform = function(f, d, x) {
    x == null && (x = new Array(0, 0));
    var L = this.m;
    return x[0] = L[0] * f + L[3] * d + L[6], x[1] = L[1] * f + L[4] * d + L[7], x;
  }, Vr.prototype.translate = function(f, d) {
    var x = this.m;
    x[6] = x[0] * f + x[3] * d + x[6], x[7] = x[1] * f + x[4] * d + x[7], x[8] = x[2] * f + x[5] * d + x[8];
  }, Vr.prototype.scale = function(f, d) {
    var x = this.m;
    x[0] *= f, x[1] *= f, x[2] *= f, x[3] *= d, x[4] *= d, x[5] *= d;
  }, Vr.prototype.shear = function(f, d) {
    var x = this.m, L = x[0] + x[3] * d, M = x[1] + x[4] * d, N = x[2] + x[5] * d;
    x[3] = x[0] * f + x[3], x[4] = x[1] * f + x[4], x[5] = x[2] * f + x[5], x[0] = L, x[1] = M, x[2] = N;
  }, Vr.prototype.rotate = function(f) {
    var d = this.m, x = Math.cos(f), L = Math.sin(f), M = d[0] * x + d[3] * L, N = d[1] * x + d[4] * L, V = d[2] * x + d[5] * L;
    d[3] = -d[0] * L + d[3] * x, d[4] = -d[1] * L + d[4] * x, d[5] = -d[2] * L + d[5] * x, d[0] = M, d[1] = N, d[2] = V;
  }, Vr.prototype.concatenate = function(f) {
    var d = this.m, x = f.m, L = d[0] * x[0] + d[3] * x[1] + d[6] * x[2], M = d[1] * x[0] + d[4] * x[1] + d[7] * x[2], N = d[2] * x[0] + d[5] * x[1] + d[8] * x[2], V = d[0] * x[3] + d[3] * x[4] + d[6] * x[5], z = d[1] * x[3] + d[4] * x[4] + d[7] * x[5], k = d[2] * x[3] + d[5] * x[4] + d[8] * x[5], q = d[0] * x[6] + d[3] * x[7] + d[6] * x[8], tt = d[1] * x[6] + d[4] * x[7] + d[7] * x[8], et = d[2] * x[6] + d[5] * x[7] + d[8] * x[8];
    m[0] = L, m[1] = M, m[2] = N, m[3] = V, m[4] = z, m[5] = k, m[6] = q, m[7] = tt, m[8] = et;
  };
  function ar(f) {
    D || Ur.prototype.constructor.call(this, f);
  }
  ar.prototype = new Ur(), ar._$eT = null, ar._$tP = new Object(), ar._$2o = function() {
    return ar._$eT == null && (ar._$eT = ar.getID("DST_BASE")), ar._$eT;
  }, ar._$27 = function() {
    ar._$tP.clear(), ar._$eT = null;
  }, ar.getID = function(f) {
    var d = ar._$tP[f];
    return d == null && (d = new ar(f), ar._$tP[f] = d), d;
  }, ar.prototype._$3s = function() {
    return new ar();
  };
  function nt(f) {
    D || (dt.prototype.constructor.call(this), this.textures = new Array(), this.transform = null, this.gl = null, this.glno = f, this.firstDraw = !0, this.anisotropyExt = null, this.maxAnisotropy = 0, this._$As = 32, this._$Gr = !1, this._$NT = null, this._$vS = null, this._$no = null, this.vertShader = null, this.fragShader = null, this.vertShaderOff = null, this.fragShaderOff = null);
  }
  nt.prototype = new dt(), nt._$9r = function(f) {
    var d = new Float32Array(f);
    return d;
  }, nt._$vb = function(f) {
    var d = new Int16Array(f);
    return d;
  }, nt._$cr = function(f, d) {
    return f == null || f._$yL() < d.length ? (f = nt._$9r(d.length * 2), f.put(d), f._$oT(0)) : (f.clear(), f.put(d), f._$oT(0)), f;
  }, nt._$mb = function(f, d) {
    return f == null || f._$yL() < d.length ? (f = nt._$vb(d.length * 2), f.put(d), f._$oT(0)) : (f.clear(), f.put(d), f._$oT(0)), f;
  }, nt._$Hs = function() {
    return this._$Gr;
  }, nt._$as = function(f) {
    this._$Gr = f;
  }, nt.prototype.getGL = function() {
    return this.gl;
  }, nt.prototype.setGL = function(f) {
    this.gl = f;
  }, nt.prototype.setTransform = function(f) {
    this.transform = f;
  }, nt.prototype._$ZT = function() {
    var f = this.gl;
    this.firstDraw && (this.initShader(), this.firstDraw = !1, this.anisotropyExt = f.getExtension("EXT_texture_filter_anisotropic") || f.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || f.getExtension("MOZ_EXT_texture_filter_anisotropic"), this.anisotropyExt && (this.maxAnisotropy = f.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))), f.disable(f.SCISSOR_TEST), f.disable(f.STENCIL_TEST), f.disable(f.DEPTH_TEST), f.frontFace(f.CW), f.enable(f.BLEND), f.colorMask(1, 1, 1, 1), f.bindBuffer(f.ARRAY_BUFFER, null), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, null);
  }, nt.prototype._$Uo = function(f, d, x, L, M, N, V, z) {
    if (!(N < 0.01 && this.clipBufPre_clipContextMask == null)) {
      N > 0.9 && yt.EXPAND_W;
      var k = this.gl;
      if (this.gl == null)
        throw new Error("gl is null");
      var q = !1, tt = 1, et = 1, ht = 1, gt = this._$C0 * tt * N, xt = this._$tT * et * N, ut = this._$WL * ht * N, Ct = this._$lT * N;
      if (this.clipBufPre_clipContextMask != null) {
        k.frontFace(k.CCW), k.useProgram(this.shaderProgram), this._$vS = mt(k, this._$vS, L), this._$no = Wt(k, this._$no, x), k.enableVertexAttribArray(this.a_position_Loc), k.vertexAttribPointer(this.a_position_Loc, 2, k.FLOAT, !1, 0, 0), this._$NT = mt(k, this._$NT, M), k.activeTexture(k.TEXTURE1), k.bindTexture(k.TEXTURE_2D, this.textures[f]), k.uniform1i(this.s_texture0_Loc, 1), k.enableVertexAttribArray(this.a_texCoord_Loc), k.vertexAttribPointer(this.a_texCoord_Loc, 2, k.FLOAT, !1, 0, 0), k.uniformMatrix4fv(this.u_matrix_Loc, !1, this.getClipBufPre_clipContextMask().matrixForMask);
        var wt = this.getClipBufPre_clipContextMask().layoutChannelNo, St = this.getChannelFlagAsColor(wt);
        k.uniform4f(this.u_channelFlag, St.r, St.g, St.b, St.a);
        var It = this.getClipBufPre_clipContextMask().layoutBounds;
        k.uniform4f(this.u_baseColor_Loc, It.x * 2 - 1, It.y * 2 - 1, It._$EL() * 2 - 1, It._$5T() * 2 - 1), k.uniform1i(this.u_maskFlag_Loc, !0);
      } else if (q = this.getClipBufPre_clipContextDraw() != null, q) {
        k.useProgram(this.shaderProgramOff), this._$vS = mt(k, this._$vS, L), this._$no = Wt(k, this._$no, x), k.enableVertexAttribArray(this.a_position_Loc_Off), k.vertexAttribPointer(this.a_position_Loc_Off, 2, k.FLOAT, !1, 0, 0), this._$NT = mt(k, this._$NT, M), k.activeTexture(k.TEXTURE1), k.bindTexture(k.TEXTURE_2D, this.textures[f]), k.uniform1i(this.s_texture0_Loc_Off, 1), k.enableVertexAttribArray(this.a_texCoord_Loc_Off), k.vertexAttribPointer(this.a_texCoord_Loc_Off, 2, k.FLOAT, !1, 0, 0), k.uniformMatrix4fv(this.u_clipMatrix_Loc_Off, !1, this.getClipBufPre_clipContextDraw().matrixForDraw), k.uniformMatrix4fv(this.u_matrix_Loc_Off, !1, this.matrix4x4), k.activeTexture(k.TEXTURE2), k.bindTexture(k.TEXTURE_2D, yt.fTexture[this.glno]), k.uniform1i(this.s_texture1_Loc_Off, 2);
        var wt = this.getClipBufPre_clipContextDraw().layoutChannelNo, St = this.getChannelFlagAsColor(wt);
        k.uniform4f(this.u_channelFlag_Loc_Off, St.r, St.g, St.b, St.a), k.uniform4f(this.u_baseColor_Loc_Off, gt, xt, ut, Ct);
      } else
        k.useProgram(this.shaderProgram), this._$vS = mt(k, this._$vS, L), this._$no = Wt(k, this._$no, x), k.enableVertexAttribArray(this.a_position_Loc), k.vertexAttribPointer(this.a_position_Loc, 2, k.FLOAT, !1, 0, 0), this._$NT = mt(k, this._$NT, M), k.activeTexture(k.TEXTURE1), k.bindTexture(k.TEXTURE_2D, this.textures[f]), k.uniform1i(this.s_texture0_Loc, 1), k.enableVertexAttribArray(this.a_texCoord_Loc), k.vertexAttribPointer(this.a_texCoord_Loc, 2, k.FLOAT, !1, 0, 0), k.uniformMatrix4fv(this.u_matrix_Loc, !1, this.matrix4x4), k.uniform4f(this.u_baseColor_Loc, gt, xt, ut, Ct), k.uniform1i(this.u_maskFlag_Loc, !1);
      this.culling ? this.gl.enable(k.CULL_FACE) : this.gl.disable(k.CULL_FACE), this.gl.enable(k.BLEND);
      var re, Bt, G, Mt;
      if (this.clipBufPre_clipContextMask != null)
        re = k.ONE, Bt = k.ONE_MINUS_SRC_ALPHA, G = k.ONE, Mt = k.ONE_MINUS_SRC_ALPHA;
      else
        switch (V) {
          case Ve._$ms:
            re = k.ONE, Bt = k.ONE_MINUS_SRC_ALPHA, G = k.ONE, Mt = k.ONE_MINUS_SRC_ALPHA;
            break;
          case Ve._$ns:
            re = k.ONE, Bt = k.ONE, G = k.ZERO, Mt = k.ONE;
            break;
          case Ve._$_s:
            re = k.DST_COLOR, Bt = k.ONE_MINUS_SRC_ALPHA, G = k.ZERO, Mt = k.ONE;
            break;
        }
      k.blendEquationSeparate(k.FUNC_ADD, k.FUNC_ADD), k.blendFuncSeparate(re, Bt, G, Mt), this.anisotropyExt && k.texParameteri(k.TEXTURE_2D, this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT, this.maxAnisotropy);
      var Ut = x.length;
      k.drawElements(k.TRIANGLES, Ut, k.UNSIGNED_SHORT, 0), k.bindTexture(k.TEXTURE_2D, null);
    }
  };
  function mt(f, d, x) {
    return d == null && (d = f.createBuffer()), f.bindBuffer(f.ARRAY_BUFFER, d), f.bufferData(f.ARRAY_BUFFER, x, f.DYNAMIC_DRAW), d;
  }
  function Wt(f, d, x) {
    return d == null && (d = f.createBuffer()), f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, d), f.bufferData(f.ELEMENT_ARRAY_BUFFER, x, f.DYNAMIC_DRAW), d;
  }
  nt.prototype._$Rs = function() {
    throw new Error("_$Rs");
  }, nt.prototype._$Ds = function(f) {
    throw new Error("_$Ds");
  }, nt.prototype._$K2 = function() {
    for (var f = 0; f < this.textures.length; f++) {
      var d = this.textures[f];
      d != 0 && (this.gl._$K2(1, this.textures, f), this.textures[f] = null);
    }
  }, nt.prototype.setTexture = function(f, d) {
    this.textures[f] = d;
  }, nt.prototype.initShader = function() {
    var f = this.gl;
    this.loadShaders2(), this.a_position_Loc = f.getAttribLocation(this.shaderProgram, "a_position"), this.a_texCoord_Loc = f.getAttribLocation(this.shaderProgram, "a_texCoord"), this.u_matrix_Loc = f.getUniformLocation(this.shaderProgram, "u_mvpMatrix"), this.s_texture0_Loc = f.getUniformLocation(this.shaderProgram, "s_texture0"), this.u_channelFlag = f.getUniformLocation(this.shaderProgram, "u_channelFlag"), this.u_baseColor_Loc = f.getUniformLocation(this.shaderProgram, "u_baseColor"), this.u_maskFlag_Loc = f.getUniformLocation(this.shaderProgram, "u_maskFlag"), this.a_position_Loc_Off = f.getAttribLocation(this.shaderProgramOff, "a_position"), this.a_texCoord_Loc_Off = f.getAttribLocation(this.shaderProgramOff, "a_texCoord"), this.u_matrix_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "u_mvpMatrix"), this.u_clipMatrix_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "u_ClipMatrix"), this.s_texture0_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "s_texture0"), this.s_texture1_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "s_texture1"), this.u_channelFlag_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "u_channelFlag"), this.u_baseColor_Loc_Off = f.getUniformLocation(this.shaderProgramOff, "u_baseColor");
  }, nt.prototype.disposeShader = function() {
    var f = this.gl;
    this.shaderProgram && (f.deleteProgram(this.shaderProgram), this.shaderProgram = null), this.shaderProgramOff && (f.deleteProgram(this.shaderProgramOff), this.shaderProgramOff = null);
  }, nt.prototype.compileShader = function(f, d) {
    var x = this.gl, N, L = d, M = x.createShader(f);
    if (M == null)
      return h._$Ji("_$L0 to create shader"), null;
    x.shaderSource(M, L), x.compileShader(M);
    var N = x.getShaderParameter(M, x.COMPILE_STATUS);
    if (!N) {
      var V = x.getShaderInfoLog(M);
      return h._$Ji("_$L0 to compile shader : " + V), x.deleteShader(M), null;
    }
    return M;
  }, nt.prototype.loadShaders2 = function() {
    var f = this.gl;
    if (this.shaderProgram = f.createProgram(), !this.shaderProgram || (this.shaderProgramOff = f.createProgram(), !this.shaderProgramOff))
      return !1;
    var d = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}", x = "precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}", L = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}", M = "precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}";
    if (this.vertShader = this.compileShader(f.VERTEX_SHADER, d), !this.vertShader)
      return h._$Ji("Vertex shader compile _$li!"), !1;
    if (this.vertShaderOff = this.compileShader(f.VERTEX_SHADER, L), !this.vertShaderOff)
      return h._$Ji("OffVertex shader compile _$li!"), !1;
    if (this.fragShader = this.compileShader(f.FRAGMENT_SHADER, x), !this.fragShader)
      return h._$Ji("Fragment shader compile _$li!"), !1;
    if (this.fragShaderOff = this.compileShader(f.FRAGMENT_SHADER, M), !this.fragShaderOff)
      return h._$Ji("OffFragment shader compile _$li!"), !1;
    f.attachShader(this.shaderProgram, this.vertShader), f.attachShader(this.shaderProgram, this.fragShader), f.attachShader(this.shaderProgramOff, this.vertShaderOff), f.attachShader(this.shaderProgramOff, this.fragShaderOff), f.linkProgram(this.shaderProgram), f.linkProgram(this.shaderProgramOff);
    var N = f.getProgramParameter(this.shaderProgram, f.LINK_STATUS);
    if (!N) {
      var V = f.getProgramInfoLog(this.shaderProgram);
      return h._$Ji("_$L0 to link program: " + V), this.vertShader && (f.deleteShader(this.vertShader), this.vertShader = 0), this.fragShader && (f.deleteShader(this.fragShader), this.fragShader = 0), this.shaderProgram && (f.deleteProgram(this.shaderProgram), this.shaderProgram = 0), this.vertShaderOff && (f.deleteShader(this.vertShaderOff), this.vertShaderOff = 0), this.fragShaderOff && (f.deleteShader(this.fragShaderOff), this.fragShaderOff = 0), this.shaderProgramOff && (f.deleteProgram(this.shaderProgramOff), this.shaderProgramOff = 0), !1;
    }
    return !0;
  }, nt.prototype.createFramebuffer = function() {
    var f = this.gl, d = yt.clippingMaskBufferSize, x = f.createFramebuffer();
    f.bindFramebuffer(f.FRAMEBUFFER, x);
    var L = f.createRenderbuffer();
    f.bindRenderbuffer(f.RENDERBUFFER, L), f.renderbufferStorage(f.RENDERBUFFER, f.RGBA4, d, d), f.framebufferRenderbuffer(f.FRAMEBUFFER, f.COLOR_ATTACHMENT0, f.RENDERBUFFER, L);
    var M = f.createTexture();
    return f.bindTexture(f.TEXTURE_2D, M), f.texImage2D(f.TEXTURE_2D, 0, f.RGBA, d, d, 0, f.RGBA, f.UNSIGNED_BYTE, null), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MIN_FILTER, f.LINEAR), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MAG_FILTER, f.LINEAR), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_S, f.CLAMP_TO_EDGE), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_T, f.CLAMP_TO_EDGE), f.framebufferTexture2D(f.FRAMEBUFFER, f.COLOR_ATTACHMENT0, f.TEXTURE_2D, M, 0), f.bindTexture(f.TEXTURE_2D, null), f.bindRenderbuffer(f.RENDERBUFFER, null), f.bindFramebuffer(f.FRAMEBUFFER, null), yt.fTexture[this.glno] = M, { framebuffer: x, renderbuffer: L, texture: yt.fTexture[this.glno] };
  };
  function ft(f) {
    D || (this._$P = new Int8Array(8), this._$R0 = new DataView(this._$P.buffer), this._$3i = new Int8Array(1e3), this._$hL = 0, this._$v0 = 0, this._$S2 = 0, this._$Ko = new Array(), this._$T = f, this._$F = 0);
  }
  ft.prototype._$fP = function() {
    var f = this._$ST(), d, x, L;
    if (f & 128)
      if ((d = this._$ST()) & 128)
        if ((x = this._$ST()) & 128) {
          if ((L = this._$ST()) & 128)
            throw new Yr("_$L _$0P  _");
          return (f & 127) << 21 | (d & 127) << 14 | (x & 127) << 7 | L & 255;
        } else
          return (f & 127) << 14 | (d & 127) << 7 | x & 255;
      else
        return (f & 127) << 7 | d & 127;
    else
      return f & 255;
  }, ft.prototype.getFormatVersion = function() {
    return this._$S2;
  }, ft.prototype._$gr = function(f) {
    this._$S2 = f;
  }, ft.prototype._$3L = function() {
    return this._$fP();
  }, ft.prototype._$mP = function() {
    return this._$zT(), this._$F += 8, this._$T.getFloat64(this._$F - 8);
  }, ft.prototype._$_T = function() {
    return this._$zT(), this._$F += 4, this._$T.getFloat32(this._$F - 4);
  }, ft.prototype._$6L = function() {
    return this._$zT(), this._$F += 4, this._$T.getInt32(this._$F - 4);
  }, ft.prototype._$ST = function() {
    return this._$zT(), this._$T.getInt8(this._$F++);
  }, ft.prototype._$9T = function() {
    return this._$zT(), this._$F += 2, this._$T.getInt16(this._$F - 2);
  }, ft.prototype._$2T = function() {
    throw this._$zT(), this._$F += 8, new Yr("_$L _$q read long");
  }, ft.prototype._$po = function() {
    return this._$zT(), this._$T.getInt8(this._$F++) != 0;
  };
  var tr = !0;
  ft.prototype._$bT = function() {
    this._$zT();
    var f = this._$3L(), d = null;
    if (tr)
      try {
        var x = new ArrayBuffer(f * 2);
        d = new Uint16Array(x);
        for (var L = 0; L < f; ++L)
          d[L] = this._$T.getUint8(this._$F++);
        return String.fromCharCode.apply(null, d);
      } catch (N) {
        tr = !1;
      }
    try {
      var M = new Array();
      if (d == null)
        for (var L = 0; L < f; ++L)
          M[L] = this._$T.getUint8(this._$F++);
      else
        for (var L = 0; L < f; ++L)
          M[L] = d[L];
      return String.fromCharCode.apply(null, M);
    } catch (N) {
      console.log("read utf8 / _$rT _$L0 !! : " + N);
    }
  }, ft.prototype._$cS = function() {
    this._$zT();
    for (var f = this._$3L(), d = new Int32Array(f), x = 0; x < f; x++)
      d[x] = this._$T.getInt32(this._$F), this._$F += 4;
    return d;
  }, ft.prototype._$Tb = function() {
    this._$zT();
    for (var f = this._$3L(), d = new Float32Array(f), x = 0; x < f; x++)
      d[x] = this._$T.getFloat32(this._$F), this._$F += 4;
    return d;
  }, ft.prototype._$5b = function() {
    this._$zT();
    for (var f = this._$3L(), d = new Float64Array(f), x = 0; x < f; x++)
      d[x] = this._$T.getFloat64(this._$F), this._$F += 8;
    return d;
  }, ft.prototype._$nP = function() {
    return this._$Jb(-1);
  }, ft.prototype._$Jb = function(f) {
    if (this._$zT(), f < 0 && (f = this._$3L()), f == bt._$7P) {
      var d = this._$6L();
      if (0 <= d && d < this._$Ko.length)
        return this._$Ko[d];
      throw new Yr("_$sL _$4i @_$m0");
    } else {
      var x = this._$4b(f);
      return this._$Ko.push(x), x;
    }
  }, ft.prototype._$4b = function(f) {
    if (f == 0)
      return null;
    if (f == 50) {
      var d = this._$bT(), x = he.getID(d);
      return x;
    } else if (f == 51) {
      var d = this._$bT(), x = ar.getID(d);
      return x;
    } else if (f == 134) {
      var d = this._$bT(), x = _.getID(d);
      return x;
    } else if (f == 60) {
      var d = this._$bT(), x = w.getID(d);
      return x;
    }
    if (f >= 48) {
      var L = bt._$9o(f);
      return L != null ? (L._$F0(this), L) : null;
    }
    switch (f) {
      case 1:
        return this._$bT();
      case 10:
        return this._$6L(), new s();
      case 11:
        return new st(this._$mP(), this._$mP(), this._$mP(), this._$mP());
      case 12:
        return new st(this._$_T(), this._$_T(), this._$_T(), this._$_T());
      case 13:
        return new At(this._$mP(), this._$mP());
      case 14:
        return new At(this._$_T(), this._$_T());
      case 15:
        for (var M = this._$3L(), x = new Array(M), N = 0; N < M; N++)
          x[N] = this._$nP();
        return x;
      case 17:
        var x = new Kt(this._$mP(), this._$mP(), this._$mP(), this._$mP(), this._$mP(), this._$mP());
        return x;
      case 21:
        return new c(this._$6L(), this._$6L(), this._$6L(), this._$6L());
      case 22:
        return new qt(this._$6L(), this._$6L());
      case 23:
        throw new Error("_$L _$ro ");
      case 16:
      case 25:
        return this._$cS();
      case 26:
        return this._$5b();
      case 27:
        return this._$Tb();
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
      case 8:
      case 9:
      case 18:
      case 19:
      case 20:
      case 24:
      case 28:
        throw new Yr("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : " + f);
      default:
        throw new Yr("_$6 _$q : _$nP() NO _$i : " + f);
    }
  }, ft.prototype._$8L = function() {
    return this._$hL == 0 ? this._$v0 = this._$ST() : this._$hL == 8 && (this._$v0 = this._$ST(), this._$hL = 0), (this._$v0 >> 7 - this._$hL++ & 1) == 1;
  }, ft.prototype._$zT = function() {
    this._$hL != 0 && (this._$hL = 0);
  };
  function n() {
  }
  n._$2S = Math.PI / 180, n._$bS = Math.PI / 180, n._$wS = 180 / Math.PI, n._$NS = 180 / Math.PI, n.PI_F = Math.PI, n._$kT = [
    0,
    0.012368,
    0.024734,
    0.037097,
    0.049454,
    0.061803,
    0.074143,
    0.086471,
    0.098786,
    0.111087,
    0.12337,
    0.135634,
    0.147877,
    0.160098,
    0.172295,
    0.184465,
    0.196606,
    0.208718,
    0.220798,
    0.232844,
    0.244854,
    0.256827,
    0.268761,
    0.280654,
    0.292503,
    0.304308,
    0.316066,
    0.327776,
    0.339436,
    0.351044,
    0.362598,
    0.374097,
    0.385538,
    0.396921,
    0.408243,
    0.419502,
    0.430697,
    0.441826,
    0.452888,
    0.463881,
    0.474802,
    0.485651,
    0.496425,
    0.507124,
    0.517745,
    0.528287,
    0.538748,
    0.549126,
    0.559421,
    0.56963,
    0.579752,
    0.589785,
    0.599728,
    0.609579,
    0.619337,
    0.629,
    0.638567,
    0.648036,
    0.657406,
    0.666676,
    0.675843,
    0.684908,
    0.693867,
    0.70272,
    0.711466,
    0.720103,
    0.72863,
    0.737045,
    0.745348,
    0.753536,
    0.76161,
    0.769566,
    0.777405,
    0.785125,
    0.792725,
    0.800204,
    0.807561,
    0.814793,
    0.821901,
    0.828884,
    0.835739,
    0.842467,
    0.849066,
    0.855535,
    0.861873,
    0.868079,
    0.874153,
    0.880093,
    0.885898,
    0.891567,
    0.897101,
    0.902497,
    0.907754,
    0.912873,
    0.917853,
    0.922692,
    0.92739,
    0.931946,
    0.936359,
    0.940629,
    0.944755,
    0.948737,
    0.952574,
    0.956265,
    0.959809,
    0.963207,
    0.966457,
    0.96956,
    0.972514,
    0.97532,
    0.977976,
    0.980482,
    0.982839,
    0.985045,
    0.987101,
    0.989006,
    0.990759,
    0.992361,
    0.993811,
    0.995109,
    0.996254,
    0.997248,
    0.998088,
    0.998776,
    0.999312,
    0.999694,
    0.999924,
    1
  ], n._$92 = function(f, d) {
    var x = Math.atan2(f[1], f[0]), L = Math.atan2(d[1], d[0]);
    return n._$tS(x, L);
  }, n._$tS = function(f, d) {
    for (var x = f - d; x < -Math.PI; )
      x += 2 * Math.PI;
    for (; x > Math.PI; )
      x -= 2 * Math.PI;
    return x;
  }, n._$9 = function(f) {
    return Math.sin(f);
  }, n.fcos = function(f) {
    return Math.cos(f);
  };
  function we(f) {
    D || (this._$e0 = null, this._$IP = null, this._$Us = null, this._$7s = null, this._$IS = [!1], this._$VS = null, this._$AT = !0, this.baseOpacity = 1, this.clipBufPre_clipContext = null, this._$e0 = f);
  }
  we.prototype._$u2 = function() {
    return this._$IS[0];
  }, we.prototype._$yo = function() {
    return this._$AT && !this._$IS[0];
  }, we.prototype._$GT = function() {
    return this._$e0;
  };
  function Re() {
  }
  Re._$W2 = 0, Re.SYSTEM_INFO = null, Re.USER_AGENT = navigator.userAgent, Re.isIPhone = function() {
    return Re.SYSTEM_INFO || Re.setup(), Re.SYSTEM_INFO._isIPhone;
  }, Re.isIOS = function() {
    return Re.SYSTEM_INFO || Re.setup(), Re.SYSTEM_INFO._isIPhone || Re.SYSTEM_INFO._isIPad;
  }, Re.isAndroid = function() {
    return Re.SYSTEM_INFO || Re.setup(), Re.SYSTEM_INFO._isAndroid;
  }, Re.getOSVersion = function() {
    return Re.SYSTEM_INFO || Re.setup(), Re.SYSTEM_INFO.version;
  }, Re.getOS = function() {
    return Re.SYSTEM_INFO || Re.setup(), Re.SYSTEM_INFO._isIPhone || Re.SYSTEM_INFO._isIPad ? "iOS" : Re.SYSTEM_INFO._isAndroid ? "Android" : "_$Q0 OS";
  }, Re.setup = function() {
    var f = Re.USER_AGENT;
    function d(M, N) {
      for (var V = M.substring(N).split(/[ _,;\.]/), z = 0, k = 0; k <= 2 && !isNaN(V[k]); k++) {
        var q = parseInt(V[k]);
        if (q < 0 || q > 999) {
          h._$li("err : " + q + " @UtHtml5.setup()"), z = 0;
          break;
        }
        z += q * Math.pow(1e3, 2 - k);
      }
      return z;
    }
    var x, L = Re.SYSTEM_INFO = { userAgent: f };
    if ((x = f.indexOf("iPhone OS ")) >= 0)
      L.os = "iPhone", L._isIPhone = !0, L.version = d(f, x + 10);
    else if ((x = f.indexOf("iPad")) >= 0) {
      if (x = f.indexOf("CPU OS"), x < 0) {
        h._$li(" err : " + f + " @UtHtml5.setup()");
        return;
      }
      L.os = "iPad", L._isIPad = !0, L.version = d(f, x + 7);
    } else
      (x = f.indexOf("Android")) >= 0 ? (L.os = "Android", L._isAndroid = !0, L.version = d(f, x + 8)) : (L.os = "-", L.version = -1);
  }, window.UtSystem = Ft, window.UtDebug = h, window.LDTransform = Vr, window.LDGL = Ze, window.Live2D = yt, window.Live2DModelWebGL = cr, window.Live2DModelJS = _e, window.Live2DMotion = fe, window.MotionQueueManager = wi, window.PhysicsHair = E, window.AMotion = o, window.PartsDataID = _, window.DrawDataID = he, window.BaseDataID = ar, window.ParamID = w, yt.init();
  var D = !1;
})();
Live2D;
var nl;
(function(t) {
  var e = function() {
    function E() {
    }
    return E.getVersion = function() {
      return b.ccall("csmGetVersion", "number", [], []);
    }, E.getLatestMocVersion = function() {
      return b.ccall("csmGetLatestMocVersion", "number", [], []);
    }, E.getMocVersion = function(T, P) {
      return b.ccall("csmGetMocVersion", "number", ["number", "number"], [T, P]);
    }, E.getSizeofModel = function(T) {
      return b.ccall("csmGetSizeofModel", "number", ["number"], [T]);
    }, E.reviveMocInPlace = function(T, P) {
      return b.ccall("csmReviveMocInPlace", "number", ["number", "number"], [T, P]);
    }, E.initializeModelInPlace = function(T, P, O) {
      return b.ccall("csmInitializeModelInPlace", "number", ["number", "number", "number"], [T, P, O]);
    }, E.getParameterCount = function(T) {
      return b.ccall("csmGetParameterCount", "number", ["number"], [T]);
    }, E.getParameterIds = function(T) {
      return b.ccall("csmGetParameterIds", "number", ["number"], [T]);
    }, E.getParameterMinimumValues = function(T) {
      return b.ccall("csmGetParameterMinimumValues", "number", ["number"], [T]);
    }, E.getParameterTypes = function(T) {
      return b.ccall("csmGetParameterTypes", "number", ["number"], [T]);
    }, E.getParameterMaximumValues = function(T) {
      return b.ccall("csmGetParameterMaximumValues", "number", ["number"], [T]);
    }, E.getParameterDefaultValues = function(T) {
      return b.ccall("csmGetParameterDefaultValues", "number", ["number"], [T]);
    }, E.getParameterValues = function(T) {
      return b.ccall("csmGetParameterValues", "number", ["number"], [T]);
    }, E.getParameterKeyCounts = function(T) {
      return b.ccall("csmGetParameterKeyCounts", "number", ["number"], [T]);
    }, E.getParameterKeyValues = function(T) {
      return b.ccall("csmGetParameterKeyValues", "number", ["number"], [T]);
    }, E.getPartCount = function(T) {
      return b.ccall("csmGetPartCount", "number", ["number"], [T]);
    }, E.getPartIds = function(T) {
      return b.ccall("csmGetPartIds", "number", ["number"], [T]);
    }, E.getPartOpacities = function(T) {
      return b.ccall("csmGetPartOpacities", "number", ["number"], [T]);
    }, E.getPartParentPartIndices = function(T) {
      return b.ccall("csmGetPartParentPartIndices", "number", ["number"], [T]);
    }, E.getDrawableCount = function(T) {
      return b.ccall("csmGetDrawableCount", "number", ["number"], [T]);
    }, E.getDrawableIds = function(T) {
      return b.ccall("csmGetDrawableIds", "number", ["number"], [T]);
    }, E.getDrawableConstantFlags = function(T) {
      return b.ccall("csmGetDrawableConstantFlags", "number", ["number"], [T]);
    }, E.getDrawableDynamicFlags = function(T) {
      return b.ccall("csmGetDrawableDynamicFlags", "number", ["number"], [T]);
    }, E.getDrawableTextureIndices = function(T) {
      return b.ccall("csmGetDrawableTextureIndices", "number", ["number"], [T]);
    }, E.getDrawableDrawOrders = function(T) {
      return b.ccall("csmGetDrawableDrawOrders", "number", ["number"], [T]);
    }, E.getDrawableRenderOrders = function(T) {
      return b.ccall("csmGetDrawableRenderOrders", "number", ["number"], [T]);
    }, E.getDrawableOpacities = function(T) {
      return b.ccall("csmGetDrawableOpacities", "number", ["number"], [T]);
    }, E.getDrawableMaskCounts = function(T) {
      return b.ccall("csmGetDrawableMaskCounts", "number", ["number"], [T]);
    }, E.getDrawableMasks = function(T) {
      return b.ccall("csmGetDrawableMasks", "number", ["number"], [T]);
    }, E.getDrawableVertexCounts = function(T) {
      return b.ccall("csmGetDrawableVertexCounts", "number", ["number"], [T]);
    }, E.getDrawableVertexPositions = function(T) {
      return b.ccall("csmGetDrawableVertexPositions", "number", ["number"], [T]);
    }, E.getDrawableVertexUvs = function(T) {
      return b.ccall("csmGetDrawableVertexUvs", "number", ["number"], [T]);
    }, E.getDrawableIndexCounts = function(T) {
      return b.ccall("csmGetDrawableIndexCounts", "number", ["number"], [T]);
    }, E.getDrawableIndices = function(T) {
      return b.ccall("csmGetDrawableIndices", "number", ["number"], [T]);
    }, E.getDrawableMultiplyColors = function(T) {
      return b.ccall("csmGetDrawableMultiplyColors", "number", ["number"], [T]);
    }, E.getDrawableScreenColors = function(T) {
      return b.ccall("csmGetDrawableScreenColors", "number", ["number"], [T]);
    }, E.getDrawableParentPartIndices = function(T) {
      return b.ccall("csmGetDrawableParentPartIndices", "number", ["number"], [T]);
    }, E.mallocMoc = function(T) {
      return b.ccall("csmMallocMoc", "number", ["number"], [T]);
    }, E.mallocModelAndInitialize = function(T) {
      return b.ccall("csmMallocModelAndInitialize", "number", ["number"], [T]);
    }, E.malloc = function(T) {
      return b.ccall("csmMalloc", "number", ["number"], [T]);
    }, E.setLogFunction = function(T) {
      b.ccall("csmSetLogFunction", null, ["number"], [T]);
    }, E.updateModel = function(T) {
      b.ccall("csmUpdateModel", null, ["number"], [T]);
    }, E.readCanvasInfo = function(T, P, O, H) {
      b.ccall("csmReadCanvasInfo", null, ["number", "number", "number", "number"], [T, P, O, H]);
    }, E.resetDrawableDynamicFlags = function(T) {
      b.ccall("csmResetDrawableDynamicFlags", null, ["number"], [T]);
    }, E.free = function(T) {
      b.ccall("csmFree", null, ["number"], [T]);
    }, E;
  }();
  t.AlignofMoc = 64, t.AlignofModel = 16, t.MocVersion_Unknown = 0, t.MocVersion_30 = 1, t.MocVersion_33 = 2, t.MocVersion_40 = 3, t.MocVersion_42 = 4, t.ParameterType_Normal = 0, t.ParameterType_BlendShape = 1;
  var r = function() {
    function E() {
    }
    return E.csmGetVersion = function() {
      return e.getVersion();
    }, E.csmGetLatestMocVersion = function() {
      return e.getLatestMocVersion();
    }, E.csmGetMocVersion = function(T, P) {
      return e.getMocVersion(T._ptr, P.byteLength);
    }, E;
  }();
  t.Version = r;
  var i = function() {
    function E() {
    }
    return E.csmSetLogFunction = function(T) {
      E.logFunction = T;
      var P = b.addFunction(E.wrapLogFunction, "vi");
      e.setLogFunction(P);
    }, E.csmGetLogFunction = function() {
      return E.logFunction;
    }, E.wrapLogFunction = function(T) {
      var P = b.UTF8ToString(T);
      E.logFunction(P);
    }, E;
  }();
  t.Logging = i;
  var s = function() {
    function E(T) {
      var P = e.mallocMoc(T.byteLength);
      if (P) {
        var O = new Uint8Array(b.HEAPU8.buffer, P, T.byteLength);
        O.set(new Uint8Array(T)), this._ptr = e.reviveMocInPlace(P, T.byteLength), this._ptr || e.free(P);
      }
    }
    return E.fromArrayBuffer = function(T) {
      if (!T)
        return null;
      var P = new E(T);
      return P._ptr ? P : null;
    }, E.prototype._release = function() {
      e.free(this._ptr), this._ptr = 0;
    }, E;
  }();
  t.Moc = s;
  var o = function() {
    function E(T) {
      this._ptr = e.mallocModelAndInitialize(T._ptr), this._ptr && (this.parameters = new l(this._ptr), this.parts = new c(this._ptr), this.drawables = new _(this._ptr), this.canvasinfo = new h(this._ptr));
    }
    return E.fromMoc = function(T) {
      var P = new E(T);
      return P._ptr ? P : null;
    }, E.prototype.update = function() {
      e.updateModel(this._ptr);
    }, E.prototype.release = function() {
      e.free(this._ptr), this._ptr = 0;
    }, E;
  }();
  t.Model = o;
  var h = function() {
    function E(T) {
      if (T) {
        var P = new Float32Array(2), O = P.length * P.BYTES_PER_ELEMENT, H = e.malloc(O), Y = new Uint8Array(b.HEAPU8.buffer, H, O);
        Y.set(new Uint8Array(P.buffer));
        var J = new Float32Array(2), it = J.length * J.BYTES_PER_ELEMENT, st = e.malloc(it), K = new Uint8Array(b.HEAPU8.buffer, st, it);
        K.set(new Uint8Array(J.buffer));
        var At = new Float32Array(1), Tt = At.length * At.BYTES_PER_ELEMENT, dt = e.malloc(Tt), Et = new Uint8Array(b.HEAPU8.buffer, dt, Tt);
        Et.set(new Uint8Array(At.buffer)), e.readCanvasInfo(T, Y.byteOffset, K.byteOffset, Et.byteOffset), P = new Float32Array(Y.buffer, Y.byteOffset, Y.length), J = new Float32Array(K.buffer, K.byteOffset, K.length), At = new Float32Array(Et.buffer, Et.byteOffset, Et.length), this.CanvasWidth = P[0], this.CanvasHeight = P[1], this.CanvasOriginX = J[0], this.CanvasOriginY = J[1], this.PixelsPerUnit = At[0], e.free(Y.byteOffset), e.free(K.byteOffset), e.free(Et.byteOffset);
      }
    }
    return E;
  }();
  t.CanvasInfo = h;
  var l = function() {
    function E(T) {
      var P = 0, O = null;
      this.count = e.getParameterCount(T), P = e.getParameterCount(T), this.ids = new Array(P);
      for (var H = new Uint32Array(b.HEAPU32.buffer, e.getParameterIds(T), P), Y = 0; Y < H.length; Y++)
        this.ids[Y] = b.UTF8ToString(H[Y]);
      P = e.getParameterCount(T), this.minimumValues = new Float32Array(b.HEAPF32.buffer, e.getParameterMinimumValues(T), P), P = e.getParameterCount(T), this.types = new Int32Array(b.HEAP32.buffer, e.getParameterTypes(T), P), P = e.getParameterCount(T), this.maximumValues = new Float32Array(b.HEAPF32.buffer, e.getParameterMaximumValues(T), P), P = e.getParameterCount(T), this.defaultValues = new Float32Array(b.HEAPF32.buffer, e.getParameterDefaultValues(T), P), P = e.getParameterCount(T), this.values = new Float32Array(b.HEAPF32.buffer, e.getParameterValues(T), P), P = e.getParameterCount(T), this.keyCounts = new Int32Array(b.HEAP32.buffer, e.getParameterKeyCounts(T), P), P = e.getParameterCount(T), O = new Int32Array(b.HEAP32.buffer, e.getParameterKeyCounts(T), P), this.keyValues = new Array(P);
      for (var J = new Uint32Array(b.HEAPU32.buffer, e.getParameterKeyValues(T), P), Y = 0; Y < J.length; Y++)
        this.keyValues[Y] = new Float32Array(b.HEAPF32.buffer, J[Y], O[Y]);
    }
    return E;
  }();
  t.Parameters = l;
  var c = function() {
    function E(T) {
      var P = 0;
      this.count = e.getPartCount(T), P = e.getPartCount(T), this.ids = new Array(P);
      for (var O = new Uint32Array(b.HEAPU32.buffer, e.getPartIds(T), P), H = 0; H < O.length; H++)
        this.ids[H] = b.UTF8ToString(O[H]);
      P = e.getPartCount(T), this.opacities = new Float32Array(b.HEAPF32.buffer, e.getPartOpacities(T), P), P = e.getPartCount(T), this.parentIndices = new Int32Array(b.HEAP32.buffer, e.getPartParentPartIndices(T), P);
    }
    return E;
  }();
  t.Parts = c;
  var _ = function() {
    function E(T) {
      this._modelPtr = T;
      var P = 0, O = null;
      this.count = e.getDrawableCount(T), P = e.getDrawableCount(T), this.ids = new Array(P);
      for (var H = new Uint32Array(b.HEAPU32.buffer, e.getDrawableIds(T), P), Y = 0; Y < H.length; Y++)
        this.ids[Y] = b.UTF8ToString(H[Y]);
      P = e.getDrawableCount(T), this.constantFlags = new Uint8Array(b.HEAPU8.buffer, e.getDrawableConstantFlags(T), P), P = e.getDrawableCount(T), this.dynamicFlags = new Uint8Array(b.HEAPU8.buffer, e.getDrawableDynamicFlags(T), P), P = e.getDrawableCount(T), this.textureIndices = new Int32Array(b.HEAP32.buffer, e.getDrawableTextureIndices(T), P), P = e.getDrawableCount(T), this.drawOrders = new Int32Array(b.HEAP32.buffer, e.getDrawableDrawOrders(T), P), P = e.getDrawableCount(T), this.renderOrders = new Int32Array(b.HEAP32.buffer, e.getDrawableRenderOrders(T), P), P = e.getDrawableCount(T), this.opacities = new Float32Array(b.HEAPF32.buffer, e.getDrawableOpacities(T), P), P = e.getDrawableCount(T), this.maskCounts = new Int32Array(b.HEAP32.buffer, e.getDrawableMaskCounts(T), P), P = e.getDrawableCount(T), this.vertexCounts = new Int32Array(b.HEAP32.buffer, e.getDrawableVertexCounts(T), P), P = e.getDrawableCount(T), this.indexCounts = new Int32Array(b.HEAP32.buffer, e.getDrawableIndexCounts(T), P), P = e.getDrawableCount(T), this.multiplyColors = new Float32Array(b.HEAPF32.buffer, e.getDrawableMultiplyColors(T), P * 4), P = e.getDrawableCount(T), this.screenColors = new Float32Array(b.HEAPF32.buffer, e.getDrawableScreenColors(T), P * 4), P = e.getDrawableCount(T), this.parentPartIndices = new Int32Array(b.HEAP32.buffer, e.getDrawableParentPartIndices(T), P), P = e.getDrawableCount(T), O = new Int32Array(b.HEAP32.buffer, e.getDrawableMaskCounts(T), P), this.masks = new Array(P);
      for (var J = new Uint32Array(b.HEAPU32.buffer, e.getDrawableMasks(T), P), Y = 0; Y < J.length; Y++)
        this.masks[Y] = new Int32Array(b.HEAP32.buffer, J[Y], O[Y]);
      P = e.getDrawableCount(T), O = new Int32Array(b.HEAP32.buffer, e.getDrawableVertexCounts(T), P), this.vertexPositions = new Array(P);
      for (var it = new Uint32Array(b.HEAPU32.buffer, e.getDrawableVertexPositions(T), P), Y = 0; Y < it.length; Y++)
        this.vertexPositions[Y] = new Float32Array(b.HEAPF32.buffer, it[Y], O[Y] * 2);
      P = e.getDrawableCount(T), O = new Int32Array(b.HEAP32.buffer, e.getDrawableVertexCounts(T), P), this.vertexUvs = new Array(P);
      for (var st = new Uint32Array(b.HEAPU32.buffer, e.getDrawableVertexUvs(T), P), Y = 0; Y < st.length; Y++)
        this.vertexUvs[Y] = new Float32Array(b.HEAPF32.buffer, st[Y], O[Y] * 2);
      P = e.getDrawableCount(T), O = new Int32Array(b.HEAP32.buffer, e.getDrawableIndexCounts(T), P), this.indices = new Array(P);
      for (var K = new Uint32Array(b.HEAPU32.buffer, e.getDrawableIndices(T), P), Y = 0; Y < K.length; Y++)
        this.indices[Y] = new Uint16Array(b.HEAPU16.buffer, K[Y], O[Y]);
    }
    return E.prototype.resetDynamicFlags = function() {
      e.resetDrawableDynamicFlags(this._modelPtr);
    }, E;
  }();
  t.Drawables = _;
  var y = function() {
    function E() {
    }
    return E.hasBlendAdditiveBit = function(T) {
      return (T & 1 << 0) == 1 << 0;
    }, E.hasBlendMultiplicativeBit = function(T) {
      return (T & 1 << 1) == 1 << 1;
    }, E.hasIsDoubleSidedBit = function(T) {
      return (T & 1 << 2) == 1 << 2;
    }, E.hasIsInvertedMaskBit = function(T) {
      return (T & 1 << 3) == 1 << 3;
    }, E.hasIsVisibleBit = function(T) {
      return (T & 1 << 0) == 1 << 0;
    }, E.hasVisibilityDidChangeBit = function(T) {
      return (T & 1 << 1) == 1 << 1;
    }, E.hasOpacityDidChangeBit = function(T) {
      return (T & 1 << 2) == 1 << 2;
    }, E.hasDrawOrderDidChangeBit = function(T) {
      return (T & 1 << 3) == 1 << 3;
    }, E.hasRenderOrderDidChangeBit = function(T) {
      return (T & 1 << 4) == 1 << 4;
    }, E.hasVertexPositionsDidChangeBit = function(T) {
      return (T & 1 << 5) == 1 << 5;
    }, E.hasBlendColorDidChangeBit = function(T) {
      return (T & 1 << 6) == 1 << 6;
    }, E;
  }();
  t.Utils = y;
  var w = function() {
    var E = typeof document != "undefined" && document.currentScript ? document.currentScript.src : void 0;
    return function(T) {
      T = T || {};
      var P, O, Et = {};
      for (O in P = P || (T !== void 0 ? T : {}))
        P.hasOwnProperty(O) && (Et[O] = P[O]);
      var H, Y, J, st = !1, it = typeof window == "object", qt = typeof importScripts == "function", st = typeof process == "object" && typeof process.versions == "object" && typeof process.versions.node == "string" && !it && !qt, K = !it && !st && !qt, At = "", Tt = (st ? (At = __dirname + "/", Y = function(nt, mt) {
        li(nt);
      }, J = function(nt) {
        return ae((nt = (nt = Y(nt, !0)).buffer ? nt : new Uint8Array(nt)).buffer), nt;
      }, 1 < process.argv.length && process.argv[1].replace(/\\/g, "/"), process.argv.slice(2), process.on("uncaughtException", function(nt) {
        throw nt;
      }), process.on("unhandledRejection", ue), P.inspect = function() {
        return "[Emscripten Module object]";
      }) : K ? (typeof read != "undefined" && (Y = function(nt) {
        var mt = li(nt);
        return mt ? Er(mt) : read(nt);
      }), J = function(nt) {
        var mt;
        if (!(mt = li(nt))) {
          if (typeof readbuffer == "function")
            return new Uint8Array(readbuffer(nt));
          ae(typeof (mt = read(nt, "binary")) == "object");
        }
        return mt;
      }, typeof print != "undefined" && ((console = typeof console == "undefined" ? {} : console).log = print, console.warn = console.error = typeof printErr != "undefined" ? printErr : print)) : (it || qt) && (qt ? At = self.location.href : document.currentScript && (At = document.currentScript.src), At = (At = E || At).indexOf("blob:") !== 0 ? At.substr(0, At.lastIndexOf("/") + 1) : "", Y = function(nt) {
        try {
          var mt = new XMLHttpRequest();
          return mt.open("GET", nt, !1), mt.send(null), mt.responseText;
        } catch (Wt) {
          if (nt = li(nt))
            return Er(nt);
          throw Wt;
        }
      }, qt && (J = function(nt) {
        try {
          var mt = new XMLHttpRequest();
          return mt.open("GET", nt, !1), mt.responseType = "arraybuffer", mt.send(null), new Uint8Array(mt.response);
        } catch (Wt) {
          if (nt = li(nt))
            return nt;
          throw Wt;
        }
      }), H = function(nt) {
        var mt = me, Wt = Yr, ft = new XMLHttpRequest();
        ft.open("GET", mt, !0), ft.responseType = "arraybuffer", ft.onload = function() {
          var tr;
          ft.status == 200 || ft.status == 0 && ft.response ? Wt(ft.response) : (tr = li(mt)) ? Wt(tr.buffer) : nt();
        }, ft.onerror = nt, ft.send(null);
      }), P.print || console.log.bind(console)), dt = P.printErr || console.warn.bind(console);
      for (O in Et)
        Et.hasOwnProperty(O) && (P[O] = Et[O]);
      var Et = null, Rt = Array(1), Ft = 0, ne = !1;
      function ae(nt, mt) {
        nt || ue("Assertion failed: " + mt);
      }
      var zt, Vt, he, Kt, ve = typeof TextDecoder != "undefined" ? new TextDecoder("utf8") : void 0;
      function at(nt, mt, Wt) {
        var ft = mt + Wt;
        for (Wt = mt; nt[Wt] && !(ft <= Wt); )
          ++Wt;
        if (16 < Wt - mt && nt.subarray && ve)
          return ve.decode(nt.subarray(mt, Wt));
        for (ft = ""; mt < Wt; ) {
          var tr, n, we = nt[mt++];
          128 & we ? (tr = 63 & nt[mt++], (224 & we) == 192 ? ft += String.fromCharCode((31 & we) << 6 | tr) : (n = 63 & nt[mt++], (we = (240 & we) == 224 ? (15 & we) << 12 | tr << 6 | n : (7 & we) << 18 | tr << 12 | n << 6 | 63 & nt[mt++]) < 65536 ? ft += String.fromCharCode(we) : (we -= 65536, ft += String.fromCharCode(55296 | we >> 10, 56320 | 1023 & we)))) : ft += String.fromCharCode(we);
        }
        return ft;
      }
      function bt(nt, mt) {
        return nt ? at(he, nt, mt) : "";
      }
      function vt(nt) {
        return 0 < nt % 16777216 && (nt += 16777216 - nt % 16777216), nt;
      }
      function le(nt) {
        zt = nt, P.HEAP8 = Vt = new Int8Array(nt), P.HEAP16 = new Int16Array(nt), P.HEAP32 = Kt = new Int32Array(nt), P.HEAPU8 = he = new Uint8Array(nt), P.HEAPU16 = new Uint16Array(nt), P.HEAPU32 = new Uint32Array(nt), P.HEAPF32 = new Float32Array(nt), P.HEAPF64 = new Float64Array(nt);
      }
      typeof TextDecoder != "undefined" && new TextDecoder("utf-16le"), it = P.TOTAL_MEMORY || 16777216;
      function Gt(nt) {
        for (; 0 < nt.length; ) {
          var mt, Wt = nt.shift();
          typeof Wt == "function" ? Wt() : typeof (mt = Wt.C) == "number" ? Wt.w === void 0 ? P.dynCall_v(mt) : P.dynCall_vi(mt, Wt.w) : mt(Wt.w === void 0 ? null : Wt.w);
        }
      }
      it = (zt = P.buffer || new ArrayBuffer(it)).byteLength, le(zt), Kt[1052] = 5247296;
      var se = [], Pe = [], Zt = [], Be = [];
      Math.imul && Math.imul(4294967295, 5) === -5 || (Math.imul = function(nt, mt) {
        var Wt = 65535 & nt, ft = 65535 & mt;
        return Wt * ft + ((nt >>> 16) * ft + Wt * (mt >>> 16) << 16) | 0;
      }), Math.clz32 || (Math.clz32 = function(nt) {
        var mt = 32, Wt = nt >> 16;
        return Wt && (mt -= 16, nt = Wt), (Wt = nt >> 8) && (mt -= 8, nt = Wt), (Wt = nt >> 4) && (mt -= 4, nt = Wt), (Wt = nt >> 2) && (mt -= 2, nt = Wt), nt >> 1 ? mt - 2 : mt - nt;
      }), Math.trunc || (Math.trunc = function(nt) {
        return nt < 0 ? Math.ceil(nt) : Math.floor(nt);
      });
      var _e = 0, fe = null;
      function ue(nt) {
        throw P.onAbort && P.onAbort(nt), Tt(nt), dt(nt), ne = !0, "abort(" + nt + "). Build with -s ASSERTIONS=1 for more info.";
      }
      P.preloadedImages = {}, P.preloadedAudios = {};
      var me = null, Nt = "data:application/octet-stream;base64,";
      function Ue(nt) {
        return nt.replace(/\b__Z[\w\d_]+/g, function(mt) {
          return mt == mt ? mt : mt + " [" + mt + "]";
        });
      }
      function Ke() {
        var nt = Error();
        if (!nt.stack) {
          try {
            throw Error(0);
          } catch (mt) {
            nt = mt;
          }
          if (!nt.stack)
            return "(no stack trace available)";
        }
        return nt.stack.toString();
      }
      var ce = [null, [], []];
      function kr(nt, mt) {
        var Wt = ce[nt];
        mt === 0 || mt === 10 ? ((nt === 1 ? Tt : dt)(at(Wt, 0)), Wt.length = 0) : Wt.push(mt);
      }
      function Ur(nt, mt, Wt, ft) {
        try {
          for (var tr = 0, n = 0; n < Wt; n++) {
            for (var we = Kt[mt + 8 * n >> 2], Re = Kt[mt + (8 * n + 4) >> 2], D = 0; D < Re; D++)
              kr(nt, he[we + D]);
            tr += Re;
          }
          return Kt[ft >> 2] = tr, 0;
        } catch (f) {
          return typeof FS != "undefined" && f instanceof FS.A || ue(f), f.B;
        }
      }
      function ei() {
        return Vt.length;
      }
      function Ze(nt) {
        try {
          var mt = new ArrayBuffer(nt);
          if (mt.byteLength == nt)
            return new Int8Array(mt).set(Vt), cr(mt), le(mt), 1;
        } catch (Wt) {
        }
      }
      var Ai = !(me = "data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAABgKAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAExpdmUyRCBDdWJpc20gU0RLIENvcmUgVmVyc2lvbiAlZC4lZC4lZABNT0MzAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBDb3JydXB0ZWQgIG1vYzMgZmlsZS4KAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KAFtDU01dIFtFXSVzOiAlcwoAY3NtR2V0TW9jVmVyc2lvbgAiYWRkcmVzcyIgaXMgbnVsbC4AY3NtUmV2aXZlTW9jSW5QbGFjZQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZWFkQ2FudmFzSW5mbwAibW9kZWwiIGlzIGludmFsaWQuACJvdXRTaXplSW5QaXhlbHMiIGlzIG51bGwuACJvdXRPcmlnaW5JblBpeGVscyIgaXMgbnVsbC4AIm91dFBpeGVsc1BlclVuaXQiIGlzIG51bGwuAGNzbUdldFNpemVvZk1vZGVsACJtb2MiIGlzIGludmFsaWQuAGNzbUluaXRpYWxpemVNb2RlbEluUGxhY2UAInNpemUiIGlzIGludmFsaWQAY3NtVXBkYXRlTW9kZWwAY3NtR2V0UGFyYW1ldGVyQ291bnQAY3NtR2V0UGFyYW1ldGVySWRzAGNzbUdldFBhcmFtZXRlclR5cGVzAGNzbUdldFBhcmFtZXRlck1pbmltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyTWF4aW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJEZWZhdWx0VmFsdWVzAGNzbUdldFBhcmFtZXRlclZhbHVlcwBjc21HZXRQYXJ0Q291bnQAY3NtR2V0UGFydElkcwBjc21HZXRQYXJ0T3BhY2l0aWVzAGNzbUdldFBhcnRQYXJlbnRQYXJ0SW5kaWNlcwBjc21HZXREcmF3YWJsZUNvdW50AGNzbUdldERyYXdhYmxlSWRzAGNzbUdldERyYXdhYmxlQ29uc3RhbnRGbGFncwBjc21HZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzAGNzbUdldERyYXdhYmxlRHJhd09yZGVycwBjc21HZXREcmF3YWJsZVJlbmRlck9yZGVycwBjc21HZXREcmF3YWJsZU9wYWNpdGllcwBjc21HZXREcmF3YWJsZU1hc2tDb3VudHMAY3NtR2V0RHJhd2FibGVNYXNrcwBjc21HZXREcmF3YWJsZVZlcnRleENvdW50cwBjc21HZXREcmF3YWJsZVZlcnRleFBvc2l0aW9ucwBjc21HZXREcmF3YWJsZVZlcnRleFV2cwBjc21HZXREcmF3YWJsZUluZGV4Q291bnRzAGNzbUdldERyYXdhYmxlSW5kaWNlcwBjc21HZXREcmF3YWJsZU11bHRpcGx5Q29sb3JzAGNzbUdldERyYXdhYmxlU2NyZWVuQ29sb3JzAGNzbUdldERyYXdhYmxlUGFyZW50UGFydEluZGljZXMAY3NtUmVzZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXRQYXJhbWV0ZXJLZXlDb3VudHMAY3NtR2V0UGFyYW1ldGVyS2V5VmFsdWVzAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgAlcwoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=");
      function Er(nt) {
        for (var mt = [], Wt = 0; Wt < nt.length; Wt++) {
          var ft = nt[Wt];
          255 < ft && (Ai && ae(!1, "Character code " + ft + " (" + String.fromCharCode(ft) + ")  at offset " + Wt + " not in 0x00-0xFF."), ft &= 255), mt.push(String.fromCharCode(ft));
        }
        return mt.join("");
      }
      var yt = typeof atob == "function" ? atob : function(nt) {
        var mt = "", Wt = 0;
        nt = nt.replace(/[^A-Za-z0-9\+\/=]/g, "");
        do
          var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)), we = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)), ft = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)), tr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(nt.charAt(Wt++)), n = n << 2 | we >> 4, we = (15 & we) << 4 | ft >> 2, Re = (3 & ft) << 6 | tr;
        while (mt += String.fromCharCode(n), ft !== 64 && (mt += String.fromCharCode(we)), tr !== 64 && (mt += String.fromCharCode(Re)), Wt < nt.length);
        return mt;
      };
      function li(nt) {
        if (String.prototype.startsWith ? nt.startsWith(Nt) : nt.indexOf(Nt) === 0) {
          if (nt = nt.slice(Nt.length), typeof st == "boolean" && st) {
            try {
              var mt = Buffer.from(nt, "base64");
            } catch (n) {
              mt = new Buffer(nt, "base64");
            }
            var Wt = new Uint8Array(mt.buffer, mt.byteOffset, mt.byteLength);
          } else
            try {
              for (var ft = yt(nt), tr = new Uint8Array(ft.length), mt = 0; mt < ft.length; ++mt)
                tr[mt] = ft.charCodeAt(mt);
              Wt = tr;
            } catch (n) {
              throw Error("Converting base64 string to bytes failed.");
            }
          return Wt;
        }
      }
      var Yr, Ve, Mi, qt = function(nt, mt, Wt) {
        var ft = new nt.Int8Array(Wt), tr = new nt.Int16Array(Wt), n = new nt.Int32Array(Wt), we = new nt.Uint8Array(Wt), Re = new nt.Uint16Array(Wt), D = new nt.Float32Array(Wt), f = new nt.Float64Array(Wt), d = 0 | mt.v, x = nt.Math.floor, L = nt.Math.pow, M = nt.Math.cos, N = nt.Math.sin, V = nt.Math.atan2, z = nt.Math.imul, k = nt.Math.clz32, q = mt.a, tt = mt.b, et = mt.c, ht = mt.d, gt = mt.e, xt = mt.f, ut = mt.g, Ct = mt.h, wt = mt.i, St = mt.j, It = mt.k, re = mt.l, Bt = mt.m, G = 4416;
        function Mt(a) {
          var u, v, S, C, p, R, I, A, g, $, F, X, Z, B, W, j, U, rt, lt = 0, Q = 0, ct = 0 | n[(a |= 0) + 500 >> 2];
          if (!((0 | ct) <= 0)) {
            I = 0 | n[a + 504 >> 2], A = 0 | n[a + 444 >> 2], v = 0 | n[a + 536 >> 2], Q = 0;
            do
              if (S = 0 | n[I + (24 * Q | 0) + 12 >> 2], C = 0 | n[A + (n[I + (24 * Q | 0) + 4 >> 2] << 2) >> 2], p = 0 | n[A + (n[I + (24 * Q | 0) + 8 >> 2] << 2) >> 2], R = 0 | n[I + (24 * Q | 0) + 16 >> 2], a = 0 | n[I + (24 * Q | 0) + 20 >> 2], u = +D[v + (Q << 2) >> 2], 0 < (0 | S))
                for (lt = 0; U = +D[R + (lt << 2) >> 2], X = +D[R + ((g = 1 | lt) << 2) >> 2], j = (0 | Re[a + (lt << 1) >> 1]) << 1 & 65534, W = +D[(rt = C + (j << 2) | 0) >> 2], F = +D[(j = C + ((1 | j) << 2) | 0) >> 2], g = (0 | Re[a + (g << 1) >> 1]) << 1 & 65534, B = +D[(Z = p + (g << 2) | 0) >> 2], $ = +D[(g = p + ((1 | g) << 2) | 0) >> 2], D[rt >> 2] = W + U * (B - W) * u, D[j >> 2] = F + U * ($ - F) * u, D[Z >> 2] = B + X * (W - B) * u, D[g >> 2] = $ + X * (F - $) * u, (0 | (lt = lt + 2 | 0)) < (0 | S); )
                  ;
            while ((0 | (Q = Q + 1 | 0)) != (0 | ct));
          }
        }
        function Ut(a) {
          var u = 0 | n[(a |= 0) >> 2];
          (0 | we[4 + u >> 0]) < 4 || He(a, 0 | n[a + 596 >> 2], 0 | n[a + 600 >> 2], 0 | n[984 + u >> 2], 0 | n[a + 152 >> 2], 0 | n[796 + u >> 2]);
        }
        function He(a, u, v, S, C, p) {
          a |= 0, S |= 0, C |= 0, p |= 0;
          var R, I, A, g, $, F, X, Z, B, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = G;
          if (G = G + 16 | 0, Z = Q + 8 | 0, X = Q, F = (v |= 0) + (12 * (u |= 0) | 0) | 0, (0 | u) <= 0)
            G = Q;
          else {
            do {
              u = 0 | n[v >> 2], I = 0 | n[C + (u << 2) >> 2], g = (u = 0 | n[p + (u << 2) >> 2]) << 1, lt = 0 | n[v + 4 >> 2], W = 0 | n[v + 8 >> 2], A = 0 | n[1028 + (0 | n[a >> 2]) >> 2], $ = W + (48 * lt | 0) | 0;
              t:
                do
                  if (0 < (0 | lt)) {
                    if ((0 | u) <= 0) {
                      for (; ; )
                        if (3 <= (u = 0 | n[W + 8 >> 2]) >>> 0 && (n[Z >> 2] = u, kt(0, 784, Z)), $ >>> 0 <= (W = W + 48 | 0) >>> 0)
                          break t;
                    }
                    do {
                      j = S + (n[W + 4 >> 2] << 2) | 0, u = 0 | n[W + 8 >> 2];
                      e:
                        do
                          if (0 | u)
                            switch (lt = A + (n[j + (n[W + 12 >> 2] << 2) >> 2] << 2) | 0, 0 | u) {
                              case 1:
                                for (j = W + 20 | 0, u = W + 44 | 0, U = 0; D[(rt = I + (U << 2) | 0) >> 2] = +D[rt >> 2] + +D[u >> 2] * (+D[lt + (U << 2) >> 2] * +D[j >> 2]), (0 | (U = U + 1 | 0)) != (0 | g); )
                                  ;
                                break;
                              case 2:
                                for (j = A + (n[j + (n[W + 16 >> 2] << 2) >> 2] << 2) | 0, U = W + 20 | 0, R = W + 24 | 0, u = W + 44 | 0, rt = 0; D[(B = I + (rt << 2) | 0) >> 2] = +D[B >> 2] + +D[u >> 2] * (+D[lt + (rt << 2) >> 2] * +D[U >> 2] + +D[j + (rt << 2) >> 2] * +D[R >> 2]), (0 | (rt = rt + 1 | 0)) != (0 | g); )
                                  ;
                                break;
                              default:
                                n[X >> 2] = u, kt(0, 784, X);
                                break e;
                            }
                        while (0);
                    } while ((W = W + 48 | 0) >>> 0 < $ >>> 0);
                  }
                while (0);
            } while ((v = v + 12 | 0) >>> 0 < F >>> 0);
            G = Q;
          }
        }
        function sr(a) {
          var u = 0 | n[(a |= 0) >> 2];
          (0 | we[4 + u >> 0]) < 4 || He(a, 0 | n[a + 604 >> 2], 0 | n[a + 608 >> 2], 0 | n[1024 + u >> 2], 0 | n[a + 444 >> 2], 0 | n[892 + u >> 2]);
        }
        function kt(a, u, v) {
          a |= 0, u |= 0, v |= 0;
          var S, C, p = G;
          G = G + 272 | 0, a = p + 16 | 0, C = p, G = ((S = 0 | n[904]) && (n[C >> 2] = v, Ui(a, u, C), F0[1 & S](a)), p);
        }
        function hr(a, u, v) {
          v |= 0;
          var S, C = 0, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, Z = 0, X = 0, Z = 0 | ft[(a |= 0) + 4 >> 0];
          if (n[(u |= 0) >> 2] = 628, X = 0 | n[(F = a + 704 | 0) >> 2], 0 < (0 | (A = 0 | n[X >> 2]))) {
            for (C = 0 | n[a + 1048 >> 2], p = 0 | n[a + 720 >> 2], I = R = 0; I = (1 << n[C + (n[p + (R << 2) >> 2] << 2) >> 2]) + I | 0, (0 | (R = R + 1 | 0)) != (0 | A); )
              ;
            C = I << 2;
          } else
            C = 0;
          if (n[u + 4 >> 2] = 12 * A, n[u + 8 >> 2] = n[X >> 2] << 2, n[u + 12 >> 2] = n[X >> 2] << 2, n[u + 16 >> 2] = n[X >> 2] << 2, n[u + 20 >> 2] = n[X >> 2] << 2, n[u + 24 >> 2] = n[X >> 2] << 2, n[u + 28 >> 2] = C, n[u + 32 >> 2] = n[X >> 2] << 2, n[u + 36 >> 2] = C, n[u + 40 >> 2] = C, n[u + 44 >> 2] = n[(S = X + 4 | 0) >> 2] << 5, n[u + 48 >> 2] = n[S >> 2] << 2, n[u + 52 >> 2] = n[S >> 2] << 2, n[u + 56 >> 2] = n[S >> 2] << 2, n[u + 60 >> 2] = n[S >> 2] << 4, n[u + 64 >> 2] = n[S >> 2] << 4, 0 < (0 | ($ = 0 | n[(S = X + 8 | 0) >> 2]))) {
            for (p = 0 | n[a + 796 >> 2], R = 0 | n[a + 1048 >> 2], I = 0 | n[a + 780 >> 2], C = g = A = 0; C = (15 + (n[p + (A << 2) >> 2] << 3) & -16) + C | 0, g = (1 << n[R + (n[I + (A << 2) >> 2] << 2) >> 2]) + g | 0, (0 | (A = A + 1 | 0)) != (0 | $); )
              ;
            p = g << 2;
          } else
            C = p = 0;
          if (n[u + 68 >> 2] = 24 * $, n[u + 72 >> 2] = n[S >> 2] << 2, n[u + 76 >> 2] = n[S >> 2] << 2, n[u + 80 >> 2] = n[S >> 2] << 2, n[u + 84 >> 2] = C, n[u + 88 >> 2] = n[S >> 2] << 4, n[u + 92 >> 2] = n[S >> 2] << 4, n[u + 96 >> 2] = n[S >> 2] << 2, n[u + 100 >> 2] = p, n[u + 104 >> 2] = n[S >> 2] << 2, n[u + 108 >> 2] = p, n[u + 112 >> 2] = p, n[u + 116 >> 2] = p, n[u + 120 >> 2] = p, n[u + 124 >> 2] = p, n[u + 128 >> 2] = p, n[u + 132 >> 2] = p, n[u + 136 >> 2] = p, n[u + 140 >> 2] = p, n[u + 144 >> 2] = n[S >> 2] << 2, n[u + 148 >> 2] = n[S >> 2] << 2, n[u + 152 >> 2] = n[S >> 2] << 2, n[u + 156 >> 2] = n[S >> 2] << 2, n[u + 160 >> 2] = n[S >> 2] << 2, n[u + 164 >> 2] = n[S >> 2] << 2, 0 < (0 | (A = 0 | n[(g = X + 12 | 0) >> 2]))) {
            for (C = 0 | n[a + 1048 >> 2], p = 0 | n[a + 812 >> 2], I = R = 0; I = (1 << n[C + (n[p + (R << 2) >> 2] << 2) >> 2]) + I | 0, (0 | (R = R + 1 | 0)) != (0 | A); )
              ;
            C = I << 2;
          } else
            C = 0;
          if (n[u + 168 >> 2] = 12 * A, n[u + 172 >> 2] = n[g >> 2] << 2, n[u + 176 >> 2] = n[g >> 2] << 2, n[u + 180 >> 2] = n[g >> 2] << 2, n[u + 184 >> 2] = n[g >> 2] << 2, n[u + 188 >> 2] = n[g >> 2] << 2, n[u + 192 >> 2] = n[g >> 2] << 2, n[u + 196 >> 2] = n[g >> 2] << 2, n[u + 200 >> 2] = n[g >> 2] << 2, n[u + 204 >> 2] = n[g >> 2] << 4, n[u + 208 >> 2] = n[g >> 2] << 4, n[u + 212 >> 2] = n[g >> 2] << 2, n[u + 216 >> 2] = C, n[u + 220 >> 2] = n[g >> 2] << 2, n[u + 224 >> 2] = C, n[u + 228 >> 2] = C, n[u + 232 >> 2] = C, n[u + 236 >> 2] = C, n[u + 240 >> 2] = C, n[u + 244 >> 2] = C, n[u + 248 >> 2] = C, n[u + 252 >> 2] = C, n[u + 256 >> 2] = C, n[u + 260 >> 2] = C, n[u + 264 >> 2] = C, n[u + 268 >> 2] = C, n[u + 272 >> 2] = n[g >> 2] << 2, n[u + 276 >> 2] = n[g >> 2] << 2, n[u + 280 >> 2] = n[g >> 2] << 2, n[u + 284 >> 2] = n[g >> 2] << 2, n[u + 288 >> 2] = n[g >> 2] << 2, n[u + 292 >> 2] = n[g >> 2] << 2, 0 < (0 | ($ = 0 | n[(S = X + 16 | 0) >> 2]))) {
            for (p = 0 | n[a + 892 >> 2], R = 0 | n[a + 1048 >> 2], I = 0 | n[a + 852 >> 2], C = g = A = 0; C = (15 + (n[p + (A << 2) >> 2] << 3) & -16) + C | 0, g = (1 << n[R + (n[I + (A << 2) >> 2] << 2) >> 2]) + g | 0, (0 | (A = A + 1 | 0)) != (0 | $); )
              ;
            p = g << 2;
          } else
            C = p = 0;
          if (n[u + 296 >> 2] = 20 * $, n[u + 300 >> 2] = n[S >> 2] << 2, n[u + 304 >> 2] = n[S >> 2], n[u + 308 >> 2] = n[S >> 2] << 2, n[u + 312 >> 2] = n[S >> 2] << 2, n[u + 316 >> 2] = n[S >> 2] << 2, n[u + 320 >> 2] = C, n[u + 324 >> 2] = n[S >> 2] << 2, n[u + 328 >> 2] = n[S >> 2] << 4, n[u + 332 >> 2] = n[S >> 2] << 4, n[u + 336 >> 2] = n[S >> 2] << 2, n[u + 340 >> 2] = n[S >> 2] << 2, n[u + 344 >> 2] = n[S >> 2] << 2, n[u + 348 >> 2] = n[S >> 2] << 4, n[u + 352 >> 2] = n[S >> 2] << 4, n[u + 356 >> 2] = n[S >> 2] << 2, n[u + 360 >> 2] = p, n[u + 364 >> 2] = n[S >> 2] << 2, n[u + 368 >> 2] = p, n[u + 372 >> 2] = p, n[u + 376 >> 2] = p, n[u + 380 >> 2] = p, n[u + 384 >> 2] = p, n[u + 388 >> 2] = p, n[u + 392 >> 2] = p, n[u + 396 >> 2] = p, n[u + 400 >> 2] = p, n[u + 404 >> 2] = p, n[u + 408 >> 2] = n[S >> 2] << 2, n[u + 412 >> 2] = n[S >> 2] << 2, n[u + 416 >> 2] = n[S >> 2] << 2, n[u + 420 >> 2] = n[S >> 2] << 2, n[u + 424 >> 2] = n[S >> 2] << 2, n[u + 428 >> 2] = n[S >> 2] << 2, F = 0 | n[F >> 2], n[u + 432 >> 2] = 52 * (0 | n[(p = F + 20 | 0) >> 2]), C = (S = 3 < (255 & Z)) ? 0 : n[p >> 2] << 2, n[u + 436 >> 2] = C, n[u + 440 >> 2] = n[p >> 2] << 2, n[u + 444 >> 2] = 28 * (0 | n[F + 52 >> 2]), 0 < (0 | (A = 0 | n[X + 48 >> 2]))) {
            for (C = 0 | n[a + 1048 >> 2], I = R = p = 0; R = (Z = 0 | n[C + (p << 2) >> 2]) + R | 0, I = (1 << Z) + I | 0, (0 | (p = p + 1 | 0)) != (0 | A); )
              ;
            p = R << 2, C = I << 2;
          } else
            C = p = 0;
          if (n[u + 448 >> 2] = 36 * A, n[u + 452 >> 2] = p, n[u + 456 >> 2] = C, n[u + 460 >> 2] = C, n[u + 488 >> 2] = 28 * (0 | n[(p = X + 72 | 0) >> 2]), 0 < (0 | (p = 0 | n[p >> 2]))) {
            for (R = 0 | n[a + 1152 >> 2], I = 0 | n[a + 1160 >> 2], C = 0 | n[a + 1164 >> 2], $ = g = A = 0; g = (0 | g) < (0 | (Z = 0 | n[R + (A << 2) >> 2])) ? Z : g, $ = (0 | (Z = (0 | n[I + (A << 2) >> 2]) - (0 | n[C + (A << 2) >> 2]) | 0)) < (0 | $) ? $ : Z + 1 | 0, (0 | (A = A + 1 | 0)) != (0 | p); )
              ;
            p = g << 2, C = $ << 2;
          } else
            C = p = 0;
          if (n[u + 492 >> 2] = n[X + 76 >> 2] << 4, n[u + 496 >> 2] = C, n[u + 500 >> 2] = p, n[u + 504 >> 2] = C, 0 < (0 | (A = 0 | n[(g = X + 80 | 0) >> 2]))) {
            for (C = 0 | n[a + 1048 >> 2], p = 0 | n[a + 1188 >> 2], I = R = 0; I = (1 << n[C + (n[p + (R << 2) >> 2] << 2) >> 2]) + I | 0, (0 | (R = R + 1 | 0)) != (0 | A); )
              ;
            C = I << 2;
          } else
            C = 0;
          if (n[u + 508 >> 2] = 24 * A, n[u + 512 >> 2] = n[g >> 2] << 2, n[u + 516 >> 2] = n[g >> 2] << 2, n[u + 520 >> 2] = C, n[u + 524 >> 2] = n[g >> 2] << 2, n[u + 528 >> 2] = C, n[u + 532 >> 2] = C, S) {
            if (n[u + 464 >> 2] = 20 * (0 | n[F + 120 >> 2]), n[u + 468 >> 2] = 28 * (0 | n[F + 100 >> 2]), 0 < (0 | (I = 0 | n[X + 104 >> 2]))) {
              for (C = 0 | n[a + 1080 >> 2], R = p = 0; R = (0 | n[C + (p << 2) >> 2]) + R | 0, (0 | (p = p + 1 | 0)) != (0 | I); )
                ;
              C = R << 2;
            } else
              C = 0;
            n[u + 472 >> 2] = 48 * I, n[u + 476 >> 2] = C, n[u + 480 >> 2] = 12 * (0 | n[F + 108 >> 2]), n[u + 484 >> 2] = 12 * (0 | n[F + 112 >> 2]), C = p = n[u + 540 >> 2] = 0;
          } else {
            if (0 < (0 | (S = 0 | n[(F = X + 20 | 0) >> 2]))) {
              g = 0 | n[a + 948 >> 2], $ = 0 | n[a + 952 >> 2], I = 0 | n[a + 1036 >> 2], C = A = 0;
              do
                if (a = 0 | n[$ + (A << 2) >> 2], R = (p = I + (n[g + (A << 2) >> 2] << 2) | 0) + (a << 2) | 0, 0 < (0 | a))
                  for (; C = (0 | n[p >> 2]) + C | 0, (p = p + 4 | 0) >>> 0 < R >>> 0; )
                    ;
              while ((0 | (A = A + 1 | 0)) != (0 | S));
            } else
              C = 0;
            n[u + 540 >> 2] = S << 2, p = C << 2, C = n[F >> 2] << 2;
          }
          for (n[u + 536 >> 2] = C, n[u + 544 >> 2] = p, p = C = 0; p = (a = 15 + (0 | n[(X = u + (C << 2) | 0) >> 2]) & -16) + (n[X >> 2] = p) | 0, (0 | (C = C + 1 | 0)) != 137; )
            ;
          n[v >> 2] = p;
        }
        function pe(a, u, v) {
          a |= 0, u |= 0, v |= 0;
          var S, C, p, R, I, A, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = 0, Ot = 0, Jt = 0, Dt = 0, Fe = 0, Ce = 0, $e = 0, lr = 0, ir = 0, qe = 0, De = 0, ur = 0, xr = 0, Je = 0, nr = 0, be = 0, Oe = 0, ot = 0, Fr = G;
          if (G = G + 560 | 0, Dt = Fr + 552 | 0, g = (U = Fr) + 556 | 0, ci(0 | U, 0, 548), hr(a, U, g), v >>> 0 < (g = 0 | n[g >> 2]) >>> 0)
            return G = Fr, (ot = 0) | ot;
          if (ci(0 | u, 0, 0 | g), ot = u + (0 | n[U >> 2]) | 0, n[(C = ot + 8 | 0) >> 2] = u + (0 | n[U + 4 >> 2]), n[ot + 40 >> 2] = u + (0 | n[U + 8 >> 2]), n[ot + 44 >> 2] = u + (0 | n[U + 12 >> 2]), n[ot + 48 >> 2] = u + (0 | n[U + 16 >> 2]), n[(Ot = ot + 52 | 0) >> 2] = u + (0 | n[U + 20 >> 2]), n[(Jt = ot + 16 | 0) >> 2] = u + (0 | n[U + 24 >> 2]), n[ot + 24 >> 2] = u + (0 | n[U + 28 >> 2]), n[ot + 28 >> 2] = u + (0 | n[U + 32 >> 2]), n[ot + 32 >> 2] = u + (0 | n[U + 36 >> 2]), n[ot + 36 >> 2] = u + (0 | n[U + 40 >> 2]), F = 0 | n[(Oe = a + 704 | 0) >> 2], n[(p = ot + 308 | 0) >> 2] = u + (0 | n[U + 44 >> 2]), n[ot + 312 >> 2] = u + (0 | n[U + 48 >> 2]), n[ot + 316 >> 2] = u + (0 | n[U + 52 >> 2]), n[ot + 320 >> 2] = u + (0 | n[U + 56 >> 2]), n[ot + 324 >> 2] = u + (0 | n[U + 60 >> 2]), n[ot + 328 >> 2] = u + (0 | n[U + 64 >> 2]), n[($e = ot + 60 | 0) >> 2] = u + (0 | n[U + 68 >> 2]), n[ot + 144 >> 2] = u + (0 | n[U + 72 >> 2]), n[ot + 148 >> 2] = u + (0 | n[U + 76 >> 2]), g = u + (0 | n[U + 80 >> 2]) | 0, n[(X = ot + 152 | 0) >> 2] = g, 0 < (0 | (F = 0 | n[F + 8 >> 2])) && (Z = u + (0 | n[U + 84 >> 2]) | 0, B = a + 796 | 0, n[g >> 2] = Z, (0 | F) != 1))
            for (g = 0, $ = 1, v = Z; v = v + (15 + (n[(0 | n[B >> 2]) + (g << 2) >> 2] << 3) & -16) | 0, n[(0 | n[X >> 2]) + ($ << 2) >> 2] = v, !((0 | F) <= (0 | (g = $ + 1 | 0))); )
              nr = $, $ = g, g = nr;
          if (n[ot + 156 >> 2] = u + (0 | n[U + 88 >> 2]), n[ot + 160 >> 2] = u + (0 | n[U + 92 >> 2]), n[(Fe = ot + 68 | 0) >> 2] = u + (0 | n[U + 96 >> 2]), n[ot + 76 >> 2] = u + (0 | n[U + 100 >> 2]), n[ot + 80 >> 2] = u + (0 | n[U + 104 >> 2]), n[ot + 84 >> 2] = u + (0 | n[U + 108 >> 2]), n[ot + 88 >> 2] = u + (0 | n[U + 112 >> 2]), n[ot + 92 >> 2] = u + (0 | n[U + 116 >> 2]), n[ot + 96 >> 2] = u + (0 | n[U + 120 >> 2]), n[ot + 100 >> 2] = u + (0 | n[U + 124 >> 2]), n[ot + 104 >> 2] = u + (0 | n[U + 128 >> 2]), n[ot + 108 >> 2] = u + (0 | n[U + 132 >> 2]), n[ot + 112 >> 2] = u + (0 | n[U + 136 >> 2]), n[ot + 116 >> 2] = u + (0 | n[U + 140 >> 2]), n[ot + 120 >> 2] = u + (0 | n[U + 144 >> 2]), n[ot + 124 >> 2] = u + (0 | n[U + 148 >> 2]), n[ot + 128 >> 2] = u + (0 | n[U + 152 >> 2]), n[ot + 132 >> 2] = u + (0 | n[U + 156 >> 2]), n[ot + 136 >> 2] = u + (0 | n[U + 160 >> 2]), n[ot + 140 >> 2] = u + (0 | n[U + 164 >> 2]), n[(R = ot + 168 | 0) >> 2] = u + (0 | n[U + 168 >> 2]), n[ot + 264 >> 2] = u + (0 | n[U + 172 >> 2]), n[ot + 268 >> 2] = u + (0 | n[U + 176 >> 2]), n[ot + 272 >> 2] = u + (0 | n[U + 180 >> 2]), n[ot + 276 >> 2] = u + (0 | n[U + 184 >> 2]), n[ot + 280 >> 2] = u + (0 | n[U + 188 >> 2]), n[ot + 284 >> 2] = u + (0 | n[U + 192 >> 2]), n[ot + 288 >> 2] = u + (0 | n[U + 196 >> 2]), n[ot + 292 >> 2] = u + (0 | n[U + 200 >> 2]), n[ot + 296 >> 2] = u + (0 | n[U + 204 >> 2]), n[ot + 300 >> 2] = u + (0 | n[U + 208 >> 2]), n[(Ce = ot + 176 | 0) >> 2] = u + (0 | n[U + 212 >> 2]), n[ot + 184 >> 2] = u + (0 | n[U + 216 >> 2]), n[ot + 188 >> 2] = u + (0 | n[U + 220 >> 2]), n[ot + 192 >> 2] = u + (0 | n[U + 224 >> 2]), n[ot + 196 >> 2] = u + (0 | n[U + 228 >> 2]), n[ot + 200 >> 2] = u + (0 | n[U + 232 >> 2]), n[ot + 204 >> 2] = u + (0 | n[U + 236 >> 2]), n[ot + 208 >> 2] = u + (0 | n[U + 240 >> 2]), n[ot + 212 >> 2] = u + (0 | n[U + 244 >> 2]), n[ot + 216 >> 2] = u + (0 | n[U + 248 >> 2]), n[ot + 220 >> 2] = u + (0 | n[U + 252 >> 2]), n[ot + 224 >> 2] = u + (0 | n[U + 256 >> 2]), n[ot + 228 >> 2] = u + (0 | n[U + 260 >> 2]), n[ot + 232 >> 2] = u + (0 | n[U + 264 >> 2]), n[ot + 236 >> 2] = u + (0 | n[U + 268 >> 2]), n[ot + 240 >> 2] = u + (0 | n[U + 272 >> 2]), n[ot + 244 >> 2] = u + (0 | n[U + 276 >> 2]), n[ot + 248 >> 2] = u + (0 | n[U + 280 >> 2]), n[ot + 252 >> 2] = u + (0 | n[U + 284 >> 2]), n[ot + 256 >> 2] = u + (0 | n[U + 288 >> 2]), n[ot + 260 >> 2] = u + (0 | n[U + 292 >> 2]), F = 0 | n[Oe >> 2], n[(ir = ot + 336 | 0) >> 2] = u + (0 | n[U + 296 >> 2]), n[ot + 424 >> 2] = u + (0 | n[U + 300 >> 2]), n[ot + 432 >> 2] = u + (0 | n[U + 304 >> 2]), n[ot + 436 >> 2] = u + (0 | n[U + 308 >> 2]), n[ot + 440 >> 2] = u + (0 | n[U + 312 >> 2]), g = u + (0 | n[U + 316 >> 2]) | 0, n[(X = ot + 444 | 0) >> 2] = g, 0 < (0 | (F = 0 | n[F + 16 >> 2])) && (W = u + (0 | n[U + 320 >> 2]) | 0, j = a + 892 | 0, n[g >> 2] = W, (0 | F) != 1))
            for (g = 0, $ = 1, v = W; v = v + (15 + (n[(0 | n[j >> 2]) + (g << 2) >> 2] << 3) & -16) | 0, n[(0 | n[X >> 2]) + ($ << 2) >> 2] = v, !((0 | F) <= (0 | (g = $ + 1 | 0))); )
              nr = $, $ = g, g = nr;
          if (n[ot + 448 >> 2] = u + (0 | n[U + 324 >> 2]), n[(qe = ot + 452 | 0) >> 2] = u + (0 | n[U + 328 >> 2]), n[(De = ot + 456 | 0) >> 2] = u + (0 | n[U + 332 >> 2]), n[ot + 460 >> 2] = u + (0 | n[U + 336 >> 2]), n[ot + 464 >> 2] = u + (0 | n[U + 340 >> 2]), n[ot + 468 >> 2] = u + (0 | n[U + 344 >> 2]), n[ot + 472 >> 2] = u + (0 | n[U + 348 >> 2]), n[ot + 476 >> 2] = u + (0 | n[U + 352 >> 2]), n[(lr = ot + 344 | 0) >> 2] = u + (0 | n[U + 356 >> 2]), n[ot + 352 >> 2] = u + (0 | n[U + 360 >> 2]), n[ot + 356 >> 2] = u + (0 | n[U + 364 >> 2]), n[ot + 360 >> 2] = u + (0 | n[U + 368 >> 2]), n[ot + 364 >> 2] = u + (0 | n[U + 372 >> 2]), n[ot + 368 >> 2] = u + (0 | n[U + 376 >> 2]), n[ot + 372 >> 2] = u + (0 | n[U + 380 >> 2]), n[ot + 376 >> 2] = u + (0 | n[U + 384 >> 2]), n[ot + 380 >> 2] = u + (0 | n[U + 388 >> 2]), n[ot + 384 >> 2] = u + (0 | n[U + 392 >> 2]), n[ot + 388 >> 2] = u + (0 | n[U + 396 >> 2]), n[ot + 392 >> 2] = u + (0 | n[U + 400 >> 2]), n[ot + 396 >> 2] = u + (0 | n[U + 404 >> 2]), n[ot + 400 >> 2] = u + (0 | n[U + 408 >> 2]), n[ot + 404 >> 2] = u + (0 | n[U + 412 >> 2]), n[ot + 408 >> 2] = u + (0 | n[U + 416 >> 2]), n[ot + 412 >> 2] = u + (0 | n[U + 420 >> 2]), n[ot + 416 >> 2] = u + (0 | n[U + 424 >> 2]), n[ot + 420 >> 2] = u + (0 | n[U + 428 >> 2]), jt = 0 | n[U + 436 >> 2], S = 0 | n[U + 440 >> 2], n[(nr = ot + 544 | 0) >> 2] = u + (0 | n[U + 432 >> 2]), n[(pt = ot + 548 | 0) >> 2] = u + jt, n[(jt = ot + 552 | 0) >> 2] = u + S, n[(S = ot + 560 | 0) >> 2] = u + (0 | n[U + 444 >> 2]), g = 0 | n[Oe >> 2], F = u + (0 | n[U + 448 >> 2]) | 0, n[(Je = ot + 568 | 0) >> 2] = F, 0 < (0 | (g = 0 | n[g + 48 >> 2])))
            for (v = 0 | n[a + 1048 >> 2], X = u + (0 | n[U + 452 >> 2]) | 0, B = u + ((Z = 0) | n[U + 456 >> 2]) | 0, j = u + (0 | n[U + 460 >> 2]) | 0; n[F + (36 * Z | 0) >> 2] = X, n[F + (36 * Z | 0) + 16 >> 2] = B, n[F + (36 * Z | 0) + 20 >> 2] = j, W = 1 << ($ = 0 | n[v + (Z << 2) >> 2]), (0 | (Z = Z + 1 | 0)) != (0 | g); )
              X = X + ($ << 2) | 0, B = B + (W << 2) | 0, j = j + (W << 2) | 0;
          if (g = 0 | n[Oe >> 2], $ = u + (0 | n[U + 488 >> 2]) | 0, n[(I = ot + 484 | 0) >> 2] = $, 0 < (0 | (g = 0 | n[g + 72 >> 2])))
            for (v = 0 | n[a + 1152 >> 2], X = u + ((F = 0) | n[U + 492 >> 2]) | 0; X = (n[$ + (28 * F | 0) + 12 >> 2] = X) + (n[v + (F << 2) >> 2] << 4) | 0, (0 | (F = F + 1 | 0)) != (0 | g); )
              ;
          if (n[ot + 488 >> 2] = u + (0 | n[U + 496 >> 2]), n[ot + 492 >> 2] = u + (0 | n[U + 500 >> 2]), n[ot + 496 >> 2] = u + (0 | n[U + 504 >> 2]), n[(ur = ot + 504 | 0) >> 2] = u + (0 | n[U + 508 >> 2]), n[ot + 536 >> 2] = u + (0 | n[U + 512 >> 2]), n[(xr = ot + 512 | 0) >> 2] = u + (0 | n[U + 516 >> 2]), n[ot + 520 >> 2] = u + (0 | n[U + 520 >> 2]), n[ot + 524 >> 2] = u + (0 | n[U + 524 >> 2]), n[ot + 528 >> 2] = u + (0 | n[U + 528 >> 2]), n[ot + 532 >> 2] = u + (0 | n[U + 532 >> 2]), Yt = 3 < (0 | we[(A = a + 4 | 0) >> 0])) {
            if (n[ot + 576 >> 2] = u + (0 | n[U + 464 >> 2]), n[ot + 584 >> 2] = u + (0 | n[U + 468 >> 2]), g = 0 | n[U + 476 >> 2], F = 0 | n[Oe >> 2], Z = u + (0 | n[U + 472 >> 2]) | 0, n[ot + 592 >> 2] = Z, 0 < (0 | (F = 0 | n[F + 104 >> 2])))
              for (X = 0 | n[a + 1080 >> 2], g = u + g | 0, v = 0; n[Z + (48 * v | 0) + 40 >> 2] = g, (0 | ($ = v + 1 | 0)) != (0 | F); )
                g = g + (n[X + (v << 2) >> 2] << 2) | 0, v = $;
            n[ot + 600 >> 2] = u + (0 | n[U + 480 >> 2]), n[ot + 608 >> 2] = u + (0 | n[U + 484 >> 2]), v = 0 | n[Oe >> 2], g = 0 | n[v + 20 >> 2];
          } else if (v = 0 | n[U + 536 >> 2], $ = 0 | n[U + 544 >> 2], n[ot + 616 >> 2] = u + (0 | n[U + 540 >> 2]), n[(U = ot + 612 | 0) >> 2] = u + v, v = 0 | n[Oe >> 2], 0 < (0 | (g = 0 | n[v + 20 >> 2])))
            for (B = a + 948 | 0, W = a + 952 | 0, Z = a + 1036 | 0, X = u + $ | (j = 0); ; ) {
              if (g = 0 | n[(0 | n[B >> 2]) + (j << 2) >> 2], $ = ($t = 0 | n[(0 | n[W >> 2]) + (j << 2) >> 2]) + g | 0, 0 < (0 | $t)) {
                for (v = 0 | n[Z >> 2], F = 0; F = (0 | n[v + (g << 2) >> 2]) + F | 0, (0 | (g = g + 1 | 0)) < (0 | $); )
                  ;
                g = (0 | n[U >> 2]) + (j << 2) | 0, F ? (v = X, $ = F) : be = 27;
              } else
                g = (0 | n[U >> 2]) + (j << 2) | 0, be = 27;
              if ((0 | be) == 27 && ($ = v = be = 0), n[g >> 2] = v, v = 0 | n[Oe >> 2], (0 | (g = 0 | n[v + 20 >> 2])) <= (0 | (j = j + 1 | 0)))
                break;
              X = X + ($ << 2) | 0;
            }
          n[ot >> 2] = a, n[ot + 620 >> 2] = 1, n[ot + 624 >> 2] = 1 & ft[20 + (0 | n[a + 708 >> 2]) >> 0], X = (n[ot + 540 >> 2] = g) + -1 | 0;
          t:
            do
              if (0 < (0 | g)) {
                if (u = 0 | n[nr >> 2], rt = 0 | n[a + 928 >> 2], lt = 0 | n[a + 924 >> 2], ct = 0 | n[a + 936 >> 2], Pt = 0 | n[a + 932 >> 2], Xt = 0 | n[a + 940 >> 2], Qt = 0 | n[a + 952 >> 2], $t = a + 948 | 0, U = 0 | n[jt >> 2], j = ot + 584 | 0, W = a + 956 | 0, !Yt)
                  for (; ; ) {
                    if (n[u + (52 * X | 0) >> 2] = 0, n[u + (52 * X | 0) + 4 >> 2] = n[($ = rt + (X << 2) | 0) >> 2], n[u + (52 * X | 0) + 8 >> 2] = n[(jt = lt + (X << 2) | 0) >> 2], D[u + (52 * X | 0) + 12 >> 2] = +D[jt >> 2] - +D[$ >> 2], n[u + (52 * X | 0) + 16 >> 2] = n[ct + (X << 2) >> 2], n[u + (52 * X | 0) + 44 >> 2] = n[($ = Pt + (X << 2) | 0) >> 2], Q = +L(0.10000000149011612, 0 | n[Xt + (X << 2) >> 2]), D[u + (52 * X | 0) + 20 >> 2] = Q, D[u + (52 * X | 0) + 24 >> 2] = 1.5 * Q, jt = 0 | n[Qt + (X << 2) >> 2], F = (n[u + (52 * X | 0) + 32 >> 2] = jt) ? (0 | n[S >> 2]) + (28 * (0 | n[(0 | n[$t >> 2]) + (X << 2) >> 2]) | 0) | 0 : 0, n[u + (52 * X | 0) + 28 >> 2] = F, n[u + (52 * X | 0) + 48 >> 2] = 1, n[U + (X << 2) >> 2] = n[$ >> 2], !(0 < (0 | X)))
                      break t;
                    X = X + -1 | 0;
                  }
                for (Z = 0 | n[a + 944 >> 2], B = 0 | n[a + 960 >> 2]; n[u + (52 * X | 0) >> 2] = n[Z + (X << 2) >> 2], n[u + (52 * X | 0) + 4 >> 2] = n[(F = rt + (X << 2) | 0) >> 2], n[u + (52 * X | 0) + 8 >> 2] = n[(jt = lt + (X << 2) | 0) >> 2], D[u + (52 * X | 0) + 12 >> 2] = +D[jt >> 2] - +D[F >> 2], n[u + (52 * X | 0) + 16 >> 2] = n[ct + (X << 2) >> 2], n[u + (52 * X | 0) + 44 >> 2] = n[(F = Pt + (X << 2) | 0) >> 2], Q = +L(0.10000000149011612, 0 | n[Xt + (X << 2) >> 2]), D[u + (52 * X | 0) + 20 >> 2] = Q, D[u + (52 * X | 0) + 24 >> 2] = 1.5 * Q, jt = 0 | n[Qt + (X << 2) >> 2], $ = (n[u + (52 * X | 0) + 32 >> 2] = jt) ? (0 | n[S >> 2]) + (28 * (0 | n[(0 | n[$t >> 2]) + (X << 2) >> 2]) | 0) | 0 : 0, n[u + (52 * X | 0) + 28 >> 2] = $, jt = 0 | n[B + (X << 2) >> 2], $ = (n[u + (52 * X | 0) + 40 >> 2] = jt) ? (0 | n[j >> 2]) + (28 * (0 | n[(0 | n[W >> 2]) + (X << 2) >> 2]) | 0) | 0 : 0, n[u + (52 * X | 0) + 36 >> 2] = $, n[u + (52 * X | 0) + 48 >> 2] = 1, n[U + (X << 2) >> 2] = n[F >> 2], 0 < (0 | X); )
                  X = X + -1 | 0;
              }
            while (0);
          if (Yt ? (n[pt >> 2] = n[a + 944 >> 2], Z = v, B = a) : (ci(0 | n[pt >> 2], 0, g << 2 | 0), B = 0 | n[ot >> 2], Z = 0 | n[B + 704 >> 2]), g = 0 | n[Z + 52 >> 2], 0 < (0 | (n[ot + 556 >> 2] = g)))
            for (v = 0 | n[S >> 2], $ = 0 | n[B + 1036 >> 2], F = 0 | n[B + 1132 >> 2], X = 0 | n[B + 1032 >> 2]; n[v + (28 * (g = (pt = g) + -1 | 0) | 0) >> 2] = n[$ + (g << 2) >> 2], n[v + (28 * g | 0) + 4 >> 2] = F + (n[X + (g << 2) >> 2] << 2), n[v + (28 * g | 0) + 8 >> 2] = 0, D[v + (28 * g | 0) + 12 >> 2] = 0, n[v + (28 * g | 0) + 16 >> 2] = 0, n[v + (28 * g | 0) + 20 >> 2] = 1, (n[v + (28 * g | 0) + 24 >> 2] = 1) < (0 | pt); )
              ;
          if (g = 0 | n[Z + 48 >> 2], 0 < (0 | (n[ot + 564 >> 2] = g))) {
            W = B + 1048 | 0, j = B + 1040 | 0, B = B + 1044 | 0;
            do
              if (Z = g, v = 0 | n[Je >> 2], $ = 0 | n[(0 | n[W >> 2]) + ((g = g + -1 | 0) << 2) >> 2], 0 < (0 | (n[v + (36 * g | 0) + 4 >> 2] = $)))
                for (F = v + (36 * g | 0) | 0, X = 0; n[(0 | n[F >> 2]) + (X << 2) >> 2] = (0 | n[S >> 2]) + (28 * (0 | n[(0 | n[j >> 2]) + ((0 | n[(0 | n[B >> 2]) + (g << 2) >> 2]) + X << 2) >> 2]) | 0), (0 | (X = X + 1 | 0)) != (0 | $); )
                  ;
            while (n[v + (36 * g | 0) + 8 >> 2] = 1 << $, n[v + (36 * g | 0) + 24 >> 2] = 1, (n[v + (36 * g | 0) + 28 >> 2] = 1) < (0 | Z));
            rt = 0 | n[ot >> 2], Z = 0 | n[rt + 704 >> 2];
          } else
            rt = B;
          if (v = 0 | n[Z >> 2], 0 < (0 | (n[(u = ot + 4 | 0) >> 2] = v))) {
            for (F = 0 | n[C >> 2], j = 0 | n[Je >> 2], U = 0 | n[rt + 720 >> 2], X = 0 | n[rt + 740 >> 2], B = 0 | n[rt + 736 >> 2], W = 0 | n[rt + 732 >> 2], g = 0 | n[Ot >> 2], $ = v; n[F + (12 * ($ = (Ot = $) + -1 | 0) | 0) >> 2] = j + (36 * (0 | n[U + ($ << 2) >> 2]) | 0), n[F + (12 * $ | 0) + 4 >> 2] = n[X + ($ << 2) >> 2], n[F + (12 * $ | 0) + 8 >> 2] = n[B + ($ << 2) >> 2], D[g + ($ << 2) >> 2] = 0 | n[W + ($ << 2) >> 2] ? 1 : 0, 1 < (0 | Ot); )
              ;
            for ($ = 0 | n[Jt >> 2], g = 0; Ot = 0 | n[j + (36 * (0 | n[U + ((v = (Jt = v) + -1 | 0) << 2) >> 2]) | 0) + 8 >> 2], g = (n[$ + (v << 2) >> 2] = Ot) + g | 0, 1 < (0 | Jt); )
              ;
            v = 0 | n[u >> 2];
          } else
            g = 0;
          if (n[ot + 20 >> 2] = g, n[ot + 12 >> 2] = v, g = 0 | n[Z + 4 >> 2], 0 < (0 | (n[ot + 304 >> 2] = g))) {
            B = rt + 752 | 0, j = rt + 764 | 0, W = rt + 768 | 0, Z = rt + 772 | 0, U = rt + 776 | 0, X = rt + 760 | 0;
            do
              switch (F = g, v = 0 | n[p >> 2], n[v + ((g = g + -1 | 0) << 5) >> 2] = (0 | n[Je >> 2]) + (36 * (0 | n[(0 | n[B >> 2]) + (g << 2) >> 2]) | 0), n[v + (g << 5) + 4 >> 2] = n[(0 | n[j >> 2]) + (g << 2) >> 2], n[v + (g << 5) + 8 >> 2] = n[(0 | n[W >> 2]) + (g << 2) >> 2], Jt = 0 | n[(0 | n[Z >> 2]) + (g << 2) >> 2], n[v + (g << 5) + 12 >> 2] = Jt, $ = 0 | n[(0 | n[U >> 2]) + (g << 2) >> 2], n[v + (g << 5) + 16 >> 2] = $, n[v + (g << 5) + 28 >> 2] = n[(0 | n[X >> 2]) + (g << 2) >> 2], 0 | Jt) {
                case 0:
                  n[(0 | n[$e >> 2]) + (24 * $ | 0) + 20 >> 2] = g, n[v + (g << 5) + 20 >> 2] = 2, n[v + (g << 5) + 24 >> 2] = 2;
                  break;
                case 1:
                  n[(0 | n[R >> 2]) + (12 * $ | 0) + 8 >> 2] = g, n[v + (g << 5) + 20 >> 2] = 3, n[v + (g << 5) + 24 >> 2] = 3;
                  break;
                default:
                  kt(0, 937, Dt);
              }
            while (1 < (0 | F));
            pt = 0 | n[ot >> 2], Yt = 0 | n[pt + 704 >> 2];
          } else
            Yt = Z, pt = rt;
          if ($ = 0 | n[Yt + 8 >> 2], g = (n[(u = ot + 56 | 0) >> 2] = $) + -1 | 0, U = 0 < (0 | $))
            if (F = 0 | n[$e >> 2], X = 0 | n[Je >> 2], Z = 0 | n[pt + 780 >> 2], B = 0 | n[pt + 800 >> 2], W = 0 | n[pt + 804 >> 2], j = 0 | n[pt + 796 >> 2], 1 < (0 | we[pt + 4 >> 0]))
              for (v = 0 | n[pt + 808 >> 2]; n[F + (24 * g | 0) >> 2] = X + (36 * (0 | n[Z + (g << 2) >> 2]) | 0), n[F + (24 * g | 0) + 4 >> 2] = n[B + (g << 2) >> 2], n[F + (24 * g | 0) + 8 >> 2] = n[W + (g << 2) >> 2], n[F + (24 * g | 0) + 16 >> 2] = n[j + (g << 2) >> 2], n[F + (24 * g | 0) + 12 >> 2] = n[v + (g << 2) >> 2], 0 < (0 | g); )
                g = g + -1 | 0;
            else
              for (; n[F + (24 * g | 0) >> 2] = X + (36 * (0 | n[Z + (g << 2) >> 2]) | 0), n[F + (24 * g | 0) + 4 >> 2] = n[B + (g << 2) >> 2], n[F + (24 * g | 0) + 8 >> 2] = n[W + (g << 2) >> 2], n[F + (24 * g | 0) + 16 >> 2] = n[j + (g << 2) >> 2], (n[F + (24 * g | 0) + 12 >> 2] = 0) < (0 | g); )
                g = g + -1 | 0;
          if (v = 0 | n[Yt + 12 >> 2], 0 < (0 | (n[(W = ot + 164 | 0) >> 2] = v)))
            for (g = 0 | n[R >> 2], F = 0 | n[Je >> 2], X = 0 | n[pt + 812 >> 2], Z = 0 | n[pt + 828 >> 2], B = v; n[g + (12 * (B = (Dt = B) + -1 | 0) | 0) >> 2] = F + (36 * (0 | n[X + (B << 2) >> 2]) | 0), n[g + (12 * B | 0) + 4 >> 2] = n[Z + (B << 2) >> 2], 1 < (0 | Dt); )
              ;
          if (U) {
            for (F = 0 | n[$e >> 2], v = 0 | n[Fe >> 2], g = 0; Fe = 0 | n[8 + (0 | n[F + (24 * ($ = ($e = $) + -1 | 0) | 0) >> 2]) >> 2], g = (n[v + ($ << 2) >> 2] = Fe) + g | 0, 1 < (0 | $e); )
              ;
            $ = 0 | n[u >> 2], v = 0 | n[W >> 2];
          } else
            g = 0;
          if (n[ot + 72 >> 2] = g, n[ot + 64 >> 2] = $, 0 < (0 | v)) {
            for (F = 0 | n[R >> 2], $ = 0 | n[Ce >> 2], g = 0; Ce = 0 | n[8 + (0 | n[F + (12 * (v = ($e = v) + -1 | 0) | 0) >> 2]) >> 2], g = (n[$ + (v << 2) >> 2] = Ce) + g | 0, 1 < (0 | $e); )
              ;
            v = 0 | n[W >> 2];
          } else
            g = 0;
          if (n[ot + 180 >> 2] = g, n[ot + 172 >> 2] = v, jt = pt + 704 | 0, g = 0 | n[Yt + 16 >> 2], 0 < (0 | (n[(U = ot + 332 | 0) >> 2] = g))) {
            for (v = 0 | n[ir >> 2], W = 0 | n[Je >> 2], j = 0 | n[pt + 852 >> 2], $ = 0 | n[pt + 876 >> 2], F = 0 | n[pt + 880 >> 2], X = 0 | n[pt + 892 >> 2], Z = 0 | n[pt + 872 >> 2], B = g; n[v + (20 * (B = (ir = B) + -1 | 0) | 0) >> 2] = W + (36 * (0 | n[j + (B << 2) >> 2]) | 0), n[v + (20 * B | 0) + 4 >> 2] = n[$ + (B << 2) >> 2], n[v + (20 * B | 0) + 8 >> 2] = n[F + (B << 2) >> 2], n[v + (20 * B | 0) + 16 >> 2] = n[X + (B << 2) >> 2], n[v + (20 * B | 0) + 12 >> 2] = n[Z + (B << 2) >> 2], 1 < (0 | ir); )
              ;
            for (v = 0 | n[lr >> 2], $ = 0; lr = 0 | n[W + (36 * (0 | n[j + ((g = (ir = g) + -1 | 0) << 2) >> 2]) | 0) + 8 >> 2], $ = (n[v + (g << 2) >> 2] = lr) + $ | 0, 1 < (0 | ir); )
              ;
            if (g = 0 | n[U >> 2], n[ot + 348 >> 2] = $, 0 < (0 | (n[ot + 340 >> 2] = g)))
              for (F = 0 | n[qe >> 2], v = 0 | n[De >> 2], $ = g << 2; D[F + (($ = (De = $) + -4 | 0) << 2) >> 2] = 1, D[F + ((ir = De + -3 | 0) << 2) >> 2] = 1, D[F + ((qe = De + -2 | 0) << 2) >> 2] = 1, D[F + ((De = De + -1 | 0) << 2) >> 2] = 1, D[v + ($ << 2) >> 2] = 0, D[v + (ir << 2) >> 2] = 0, !(((D[v + (qe << 2) >> 2] = 0) | g) <= (D[v + (De << 2) >> 2] = 1)); )
                g = g + -1 | 0;
          } else
            n[ot + 348 >> 2] = 0, n[ot + 340 >> 2] = g;
          if ($t = 0 | n[Yt + 72 >> 2], 0 < (0 | (n[ot + 480 >> 2] = $t))) {
            g = 0 | n[I >> 2], v = 0 | n[pt + 1152 >> 2], $ = 0 | n[pt + 1156 >> 2], F = 0 | n[pt + 1160 >> 2], X = 0 | n[pt + 1164 >> 2], Z = 0 | n[pt + 1148 >> 2], lt = pt + 1172 | 0, Pt = pt + 1168 | 0, ct = pt + 1176 | 0, Xt = 0;
            do
              if (B = 0 | n[v + (Xt << 2) >> 2], n[g + (28 * Xt | 0) + 4 >> 2] = B, n[g + (28 * Xt | 0) >> 2] = n[$ + (Xt << 2) >> 2], De = 0 | n[F + (Xt << 2) >> 2], n[g + (28 * Xt | 0) + 16 >> 2] = De, W = 0 | n[X + (Xt << 2) >> 2], n[g + (28 * Xt | 0) + 20 >> 2] = W, n[g + (28 * Xt | 0) + 24 >> 2] = De + 1 - W, W = (n[g + (28 * Xt | 0) + 8 >> 2] = 0) | n[Z + (Xt << 2) >> 2], 0 < (0 | B))
                for (j = 0 | n[g + (28 * Xt | 0) + 12 >> 2], U = 0 | n[lt >> 2], u = 0 | n[Pt >> 2], rt = 0 | n[ct >> 2], Qt = 0; n[j + (Qt << 4) + 4 >> 2] = n[U + ((De = Qt + W | 0) << 2) >> 2], n[j + (Qt << 4) >> 2] = n[u + (De << 2) >> 2], n[j + (Qt << 4) + 8 >> 2] = n[rt + (De << 2) >> 2], (0 | (Qt = Qt + 1 | (n[j + (Qt << 4) + 12 >> 2] = 0))) != (0 | B); )
                  ;
            while ((0 | (Xt = Xt + 1 | 0)) != (0 | $t));
          }
          v = 0 | n[Yt + 80 >> 2], n[(u = ot + 500 | 0) >> 2] = v;
          do
            if (0 < (0 | v)) {
              for (W = 0 | n[ur >> 2], j = 0 | n[Je >> 2], U = 0 | n[pt + 1188 >> 2], g = 0 | n[pt + 1200 >> 2], $ = 0 | n[pt + 1204 >> 2], F = 0 | n[pt + 1212 >> 2], X = 0 | n[pt + 1216 >> 2], Z = 0 | n[pt + 1208 >> 2], B = 0 | n[pt + 1220 >> 2]; n[W + (24 * (v = (Je = v) + -1 | 0) | 0) >> 2] = j + (36 * (0 | n[U + (v << 2) >> 2]) | 0), n[W + (24 * v | 0) + 4 >> 2] = n[g + (v << 2) >> 2], n[W + (24 * v | 0) + 8 >> 2] = n[$ + (v << 2) >> 2], n[W + (24 * v | 0) + 12 >> 2] = n[F + (v << 2) >> 2], ur = 0 | n[Z + (v << 2) >> 2], n[W + (24 * v | 0) + 16 >> 2] = X + (ur << 2), n[W + (24 * v | 0) + 20 >> 2] = B + (ur << 1), 1 < (0 | Je); )
                ;
              if ((0 | (v = 0 | n[u >> 2])) <= 0) {
                g = 0;
                break;
              }
              for ($ = 0 | n[xr >> 2], g = 0; xr = 0 | n[j + (36 * (0 | n[U + ((v = (Je = v) + -1 | 0) << 2) >> 2]) | 0) + 8 >> 2], g = (n[$ + (v << 2) >> 2] = xr) + g | 0, 1 < (0 | Je); )
                ;
              v = 0 | n[u >> 2];
            } else
              g = 0;
          while (0);
          n[ot + 516 >> 2] = g, n[ot + 508 >> 2] = v;
          do
            if (3 < (0 | we[A >> 0])) {
              if ((255 & (g = 0 | ft[pt + 4 >> 0])) < 4)
                break;
              if (v = 0 | n[Yt + 120 >> 2], 0 < (0 | (n[ot + 572 >> 2] = v)))
                for (j = 0 | n[ot + 576 >> 2], $ = 0 | n[nr >> 2], F = 0 | n[pt + 1112 >> 2], X = 0 | n[pt + 1124 >> 2], Z = 0 | n[pt + 1116 >> 2], B = 0 | n[pt + 1128 >> 2], W = 0 | n[pt + 1120 >> 2]; n[j + (20 * (v = (be = v) + -1 | 0) | 0) >> 2] = $ + (52 * (0 | n[F + (v << 2) >> 2]) | 0), nr = 0 | n[Z + (v << 2) >> 2], n[j + (20 * v | 0) + 4 >> 2] = X + (nr << 2), n[j + (20 * v | 0) + 8 >> 2] = B + (nr << 2), n[j + (20 * v | 0) + 12 >> 2] = n[W + (v << 2) >> 2], 1 < (0 | be); )
                  ;
              if (v = 0 | n[Yt + 100 >> 2], 0 < (0 | (n[ot + 580 >> 2] = v)))
                for ($ = 0 | n[ot + 584 >> 2], F = 0 | n[pt + 1056 >> 2], X = 0 | n[pt + 1132 >> 2], Z = 0 | n[pt + 1052 >> 2], B = 0 | n[pt + 1060 >> 2]; n[$ + (28 * (v = (be = v) + -1 | 0) | 0) >> 2] = n[F + (v << 2) >> 2], n[$ + (28 * v | 0) + 4 >> 2] = X + (n[Z + (v << 2) >> 2] << 2), n[$ + (28 * v | 0) + 8 >> 2] = n[B + (v << 2) >> 2], n[$ + (28 * v | 0) + 12 >> 2] = 0, D[$ + (28 * v | 0) + 16 >> 2] = 0, n[$ + (28 * v | 0) + 20 >> 2] = 1, (n[$ + (28 * v | 0) + 24 >> 2] = 1) < (0 | be); )
                  ;
              if (v = 0 | n[Yt + 104 >> 2], 0 < (0 | (n[ot + 588 >> 2] = v))) {
                U = ot + 592 | 0, rt = ot + 584 | 0, j = pt + 1064 | 0, lt = pt + 1068 | 0, B = pt + 1080 | 0, u = ot + 576 | 0, W = pt + 1108 | 0, Z = pt + 1076 | 0;
                do
                  if (X = v, g = 0 | n[U >> 2], n[g + (48 * (v = v + -1 | 0) | 0) >> 2] = (0 | n[rt >> 2]) + (28 * (0 | n[(0 | n[j >> 2]) + (v << 2) >> 2]) | 0), n[g + (48 * v | 0) + 4 >> 2] = n[(0 | n[lt >> 2]) + (v << 2) >> 2], n[g + (48 * v | 0) + 8 >> 2] = 0, n[g + (48 * v | 0) + 28 >> 2] = 1, n[g + (48 * v | 0) + 32 >> 2] = 1, F = 0 | n[(0 | n[B >> 2]) + (v << 2) >> 2], 0 < (0 | (n[g + (48 * v | 0) + 36 >> 2] = F)))
                    for (g = g + (48 * v | 0) + 40 | 0, $ = 0; n[(0 | n[g >> 2]) + ($ << 2) >> 2] = (0 | n[u >> 2]) + (20 * (0 | n[(0 | n[W >> 2]) + ((0 | n[(0 | n[Z >> 2]) + (v << 2) >> 2]) + $ << 2) >> 2]) | 0), (0 | ($ = $ + 1 | 0)) != (0 | F); )
                      ;
                while (1 < (0 | X));
                j = 0 | n[ot >> 2], g = 0 | ft[j + 4 >> 0];
              } else
                j = pt;
              if (W = 0 | n[Oe >> 2], v = 0 | n[W + 108 >> 2], (255 & g) < 4)
                break;
              if (0 < (0 | (n[ot + 596 >> 2] = v)))
                for ($ = 0 | n[ot + 600 >> 2], F = 0 | n[a + 1084 >> 2], X = 0 | n[a + 1092 >> 2], Z = 0 | n[ot + 592 >> 2], B = 0 | n[a + 1088 >> 2], g = v; n[$ + (12 * (g = (Oe = g) + -1 | 0) | 0) >> 2] = n[F + (g << 2) >> 2], n[$ + (12 * g | 0) + 4 >> 2] = n[X + (g << 2) >> 2], n[$ + (12 * g | 0) + 8 >> 2] = Z + (48 * (0 | n[B + (g << 2) >> 2]) | 0), 1 < (0 | Oe); )
                  ;
              if (g = 0 | n[W + 112 >> 2], 0 < (0 | (n[ot + 604 >> 2] = g)))
                for ($ = 0 | n[ot + 608 >> 2], F = 0 | n[a + 1096 >> 2], X = 0 | n[a + 1104 >> 2], Z = 0 | n[ot + 592 >> 2], v = 0 | n[a + 1100 >> 2]; n[$ + (12 * (g = (a = g) + -1 | 0) | 0) >> 2] = n[F + (g << 2) >> 2], n[$ + (12 * g | 0) + 4 >> 2] = n[X + (g << 2) >> 2], n[$ + (12 * g | 0) + 8 >> 2] = Z + (48 * (0 | n[v + (g << 2) >> 2]) | 0), 1 < (0 | a); )
                  ;
              if ($ = 0 | n[j + 1132 >> 2], F = 0 | n[20 + (0 | n[j + 704 >> 2]) >> 2], X = ot + 612 | 0, n[ot + 616 >> 2] = n[j + 972 >> 2], g = 0 | n[j + 964 >> 2], n[X >> 2] = g, (0 | F) <= 0 || (n[g >> 2] = $ + (n[n[(v = j + 968 | 0) >> 2] >> 2] << 2), (0 | F) == 1))
                break;
              for (g = 1; n[(0 | n[X >> 2]) + (g << 2) >> 2] = $ + (n[(0 | n[v >> 2]) + (g << 2) >> 2] << 2), (0 | (g = g + 1 | 0)) != (0 | F); )
                ;
            } else {
              if ((0 | n[Yt + 20 >> 2]) <= 0)
                break;
              $t = pt + 948 | 0, Yt = pt + 952 | 0, Pt = ot + 612 | 0, Xt = pt + 1032 | 0, Qt = pt + 1036 | 0, rt = pt + 1132 | 0, lt = ot + 616 | 0, ct = 0;
              do {
                if (g = 0 | n[(0 | n[$t >> 2]) + (ct << 2) >> 2], U = (a = 0 | n[(0 | n[Yt >> 2]) + (ct << 2) >> 2]) + g | 0, u = 0 | n[(0 | n[Pt >> 2]) + (ct << 2) >> 2], 0 < (0 | a)) {
                  W = 0 | n[Xt >> 2], j = 0 | n[Qt >> 2], B = g, g = 0;
                  do
                    if (v = 0 | n[W + (B << 2) >> 2], Z = (a = 0 | n[j + (B << 2) >> 2]) + v | 0, 0 < (0 | a)) {
                      X = 0 | n[rt >> 2];
                      do {
                        Q = +D[X + (v << 2) >> 2], $ = u + (g << 2) | 0;
                        t:
                          do
                            if (0 < (0 | g))
                              for (F = u; ; ) {
                                if (+D[F >> 2] == Q)
                                  break t;
                                if ($ >>> 0 <= (F = F + 4 | 0) >>> 0) {
                                  be = 146;
                                  break;
                                }
                              }
                            else
                              be = 146;
                          while (0);
                      } while ((0 | be) == 146 && (be = 0, D[$ >> 2] = Q, g = g + 1 | 0), (0 | (v = v + 1 | 0)) < (0 | Z));
                    }
                  while ((0 | (B = B + 1 | 0)) < (0 | U));
                } else
                  g = 0;
                (function(Qe, Xe) {
                  Qe |= 0;
                  var er = 0, Te = 0, Kr = 0, Mn = 0, U0 = 0, Un = 0, di = 0, Gr = 0, oa = 0, mh = 0;
                  G = (mh = G) + 208 | 0, Kr = (Xe |= 0) << 2, n[(Un = Gr = (di = mh) + 192 | 0) >> 2] = 1, n[Un + 4 >> 2] = 0;
                  t:
                    do
                      if (0 | Kr) {
                        for (n[di + 4 >> 2] = 4, n[di >> 2] = 4, er = Xe = 4, Te = 2; Xe = Xe + 4 + er | 0, (n[di + (Te << 2) >> 2] = Xe) >>> 0 < Kr >>> 0; )
                          Un = er, er = Xe, Te = Te + 1 | 0, Xe = Un;
                        if (Qe >>> 0 < (Mn = Qe + Kr + -4 | 0) >>> 0) {
                          U0 = Mn, Un = 4 + Gr | 0, er = Qe, Te = Xe = 1;
                          do
                            do
                              if ((3 & Xe | 0) != 3) {
                                if ((0 | n[di + ((Kr = Te + -1 | 0) << 2) >> 2]) >>> 0 < (U0 - er | 0) >>> 0 ? ps(er, Te, di) : Sn(er, Xe, 0 | n[Un >> 2], Te, 0, di), (0 | Te) == 1) {
                                  Nn(Gr, 1), Te = 0;
                                  break;
                                }
                                Nn(Gr, Kr), Te = 1;
                                break;
                              }
                            while (ps(er, Te, di), Rn(Gr, 2), Te = Te + 2 | 0, 0);
                          while (Xe = 1 | n[Gr >> 2], n[Gr >> 2] = Xe, (er = er + 4 | 0) >>> 0 < Mn >>> 0);
                          Kr = 0 | n[(Mn = Un) >> 2];
                        } else
                          Mn = 4 + Gr | 0, Kr = 0, er = Qe, Te = Xe = 1;
                        for (Sn(er, Xe, Kr, Te, 0, di), Kr = 4 + Gr | 0; ; ) {
                          if ((0 | Te) == 1 & (0 | Xe) == 1) {
                            if (!(0 | n[Kr >> 2]))
                              break t;
                            oa = 21;
                          } else
                            (0 | Te) < 2 ? oa = 21 : (Nn(Gr, 2), Qe = Te + -2 | 0, n[Gr >> 2] = 7 ^ n[Gr >> 2], Rn(Gr, 1), Sn(er + (0 - (0 | n[di + (Qe << 2) >> 2])) + -4 | 0, 0 | n[Gr >> 2], 0 | n[Mn >> 2], Te + -1 | 0, 1, di), Nn(Gr, 1), Xe = 1 | n[Gr >> 2], n[Gr >> 2] = Xe, Sn(er = er + -4 | 0, Xe, 0 | n[Mn >> 2], Qe, 1, di), Te = Qe);
                          (0 | oa) == 21 && (Qe = (oa = 0) | Ys(Gr), Rn(Gr, Qe), Xe = 0 | n[Gr >> 2], er = er + -4 | 0, Te = Qe + Te | 0);
                        }
                      }
                    while (0);
                  G = mh;
                })(u, g), n[(0 | n[lt >> 2]) + (ct << 2) >> 2] = g, ct = ct + 1 | 0;
              } while ((0 | ct) < (0 | n[20 + (0 | n[jt >> 2]) >> 2]));
            }
          while (0);
          return Qr(ot), G = Fr, 0 | ot;
        }
        function oe(a, u) {
          return 0 | ((a = +D[(a |= 0) >> 2]) < (u = +D[(u |= 0) >> 2]) ? -1 : u < a & 1);
        }
        function ge(a) {
          var u = 0 | ft[(a |= 0) + 4 >> 0];
          n[a + 704 >> 2] = a + (0 | n[a + 64 >> 2]), n[a + 708 >> 2] = a + (0 | n[a + 68 >> 2]), n[a + 712 >> 2] = a + (0 | n[a + 72 >> 2]), n[a + 716 >> 2] = a + (0 | n[a + 76 >> 2]), n[a + 720 >> 2] = a + (0 | n[a + 80 >> 2]), n[a + 724 >> 2] = a + (0 | n[a + 84 >> 2]), n[a + 728 >> 2] = a + (0 | n[a + 88 >> 2]), n[a + 732 >> 2] = a + (0 | n[a + 92 >> 2]), n[a + 736 >> 2] = a + (0 | n[a + 96 >> 2]), n[a + 740 >> 2] = a + (0 | n[a + 100 >> 2]), n[a + 744 >> 2] = a + (0 | n[a + 104 >> 2]), n[a + 748 >> 2] = a + (0 | n[a + 108 >> 2]), n[a + 752 >> 2] = a + (0 | n[a + 112 >> 2]), n[a + 756 >> 2] = a + (0 | n[a + 116 >> 2]), n[a + 760 >> 2] = a + (0 | n[a + 120 >> 2]), n[a + 764 >> 2] = a + (0 | n[a + 124 >> 2]), n[a + 768 >> 2] = a + (0 | n[a + 128 >> 2]), n[a + 772 >> 2] = a + (0 | n[a + 132 >> 2]), n[a + 776 >> 2] = a + (0 | n[a + 136 >> 2]), n[a + 780 >> 2] = a + (0 | n[a + 140 >> 2]), n[a + 784 >> 2] = a + (0 | n[a + 144 >> 2]), n[a + 788 >> 2] = a + (0 | n[a + 148 >> 2]), n[a + 796 >> 2] = a + (0 | n[a + 152 >> 2]), n[a + 800 >> 2] = a + (0 | n[a + 156 >> 2]), n[a + 804 >> 2] = a + (0 | n[a + 160 >> 2]), n[a + 812 >> 2] = a + (0 | n[a + 164 >> 2]), n[a + 816 >> 2] = a + (0 | n[a + 168 >> 2]), n[a + 820 >> 2] = a + (0 | n[a + 172 >> 2]), n[a + 828 >> 2] = a + (0 | n[a + 176 >> 2]), n[a + 832 >> 2] = a + (0 | n[a + 180 >> 2]), n[a + 836 >> 2] = a + (0 | n[a + 184 >> 2]), n[a + 840 >> 2] = a + (0 | n[a + 188 >> 2]), n[a + 844 >> 2] = a + (0 | n[a + 192 >> 2]), n[a + 848 >> 2] = a + (0 | n[a + 196 >> 2]), n[a + 852 >> 2] = a + (0 | n[a + 200 >> 2]), n[a + 856 >> 2] = a + (0 | n[a + 204 >> 2]), n[a + 860 >> 2] = a + (0 | n[a + 208 >> 2]), n[a + 868 >> 2] = a + (0 | n[a + 212 >> 2]), n[a + 872 >> 2] = a + (0 | n[a + 216 >> 2]), n[a + 876 >> 2] = a + (0 | n[a + 220 >> 2]), n[a + 880 >> 2] = a + (0 | n[a + 224 >> 2]), n[a + 884 >> 2] = a + (0 | n[a + 228 >> 2]), n[a + 888 >> 2] = a + (0 | n[a + 232 >> 2]), n[a + 892 >> 2] = a + (0 | n[a + 236 >> 2]), n[a + 896 >> 2] = a + (0 | n[a + 240 >> 2]), n[a + 900 >> 2] = a + (0 | n[a + 244 >> 2]), n[a + 904 >> 2] = a + (0 | n[a + 248 >> 2]), n[a + 908 >> 2] = a + (0 | n[a + 252 >> 2]), n[a + 912 >> 2] = a + (0 | n[a + 256 >> 2]), n[a + 916 >> 2] = a + (0 | n[a + 260 >> 2]), n[a + 920 >> 2] = a + (0 | n[a + 264 >> 2]), n[a + 924 >> 2] = a + (0 | n[a + 268 >> 2]), n[a + 928 >> 2] = a + (0 | n[a + 272 >> 2]), n[a + 932 >> 2] = a + (0 | n[a + 276 >> 2]), n[a + 936 >> 2] = a + (0 | n[a + 280 >> 2]), n[a + 940 >> 2] = a + (0 | n[a + 284 >> 2]), n[a + 948 >> 2] = a + (0 | n[a + 288 >> 2]), n[a + 952 >> 2] = a + (0 | n[a + 292 >> 2]), n[a + 976 >> 2] = a + (0 | n[a + 296 >> 2]), n[a + 980 >> 2] = a + (0 | n[a + 300 >> 2]), n[a + 984 >> 2] = a + (0 | n[a + 304 >> 2]), n[a + 988 >> 2] = a + (0 | n[a + 308 >> 2]), n[a + 992 >> 2] = a + (0 | n[a + 312 >> 2]), n[a + 996 >> 2] = a + (0 | n[a + 316 >> 2]), n[a + 1e3 >> 2] = a + (0 | n[a + 320 >> 2]), n[a + 1004 >> 2] = a + (0 | n[a + 324 >> 2]), n[a + 1008 >> 2] = a + (0 | n[a + 328 >> 2]), n[a + 1012 >> 2] = a + (0 | n[a + 332 >> 2]), n[a + 1016 >> 2] = a + (0 | n[a + 336 >> 2]), n[a + 1020 >> 2] = a + (0 | n[a + 340 >> 2]), n[a + 1024 >> 2] = a + (0 | n[a + 344 >> 2]), n[a + 1028 >> 2] = a + (0 | n[a + 348 >> 2]), n[a + 1040 >> 2] = a + (0 | n[a + 352 >> 2]), n[a + 1044 >> 2] = a + (0 | n[a + 356 >> 2]), n[a + 1048 >> 2] = a + (0 | n[a + 360 >> 2]), n[a + 1032 >> 2] = a + (0 | n[a + 364 >> 2]), n[a + 1036 >> 2] = a + (0 | n[a + 368 >> 2]), n[a + 1132 >> 2] = a + (0 | n[a + 372 >> 2]), n[a + 1136 >> 2] = a + (0 | n[a + 376 >> 2]), n[a + 1140 >> 2] = a + (0 | n[a + 380 >> 2]), n[a + 1144 >> 2] = a + (0 | n[a + 384 >> 2]), n[a + 1148 >> 2] = a + (0 | n[a + 388 >> 2]), n[a + 1152 >> 2] = a + (0 | n[a + 392 >> 2]), n[a + 1156 >> 2] = a + (0 | n[a + 396 >> 2]), n[a + 1160 >> 2] = a + (0 | n[a + 400 >> 2]), n[a + 1164 >> 2] = a + (0 | n[a + 404 >> 2]), n[a + 1168 >> 2] = a + (0 | n[a + 408 >> 2]), n[a + 1172 >> 2] = a + (0 | n[a + 412 >> 2]), n[a + 1176 >> 2] = a + (0 | n[a + 416 >> 2]), n[a + 1180 >> 2] = a + (0 | n[a + 420 >> 2]), n[a + 1184 >> 2] = a + (0 | n[a + 424 >> 2]), n[a + 1188 >> 2] = a + (0 | n[a + 428 >> 2]), n[a + 1192 >> 2] = a + (0 | n[a + 432 >> 2]), n[a + 1196 >> 2] = a + (0 | n[a + 436 >> 2]), n[a + 1200 >> 2] = a + (0 | n[a + 440 >> 2]), n[a + 1204 >> 2] = a + (0 | n[a + 444 >> 2]), n[a + 1208 >> 2] = a + (0 | n[a + 448 >> 2]), n[a + 1212 >> 2] = a + (0 | n[a + 452 >> 2]), n[a + 1216 >> 2] = a + (0 | n[a + 456 >> 2]), n[a + 1220 >> 2] = a + (0 | n[a + 460 >> 2]), n[a + 1224 >> 2] = a + (0 | n[a + 464 >> 2]), (255 & u) <= 1 || (n[a + 808 >> 2] = a + (0 | n[a + 468 >> 2]), (255 & u) <= 3 || (n[a + 964 >> 2] = a + (0 | n[a + 472 >> 2]), n[a + 968 >> 2] = a + (0 | n[a + 476 >> 2]), n[a + 972 >> 2] = a + (0 | n[a + 480 >> 2]), n[a + 792 >> 2] = a + (0 | n[a + 484 >> 2]), n[a + 824 >> 2] = a + (0 | n[a + 488 >> 2]), n[a + 864 >> 2] = a + (0 | n[a + 492 >> 2]), n[a + 1228 >> 2] = a + (0 | n[a + 496 >> 2]), n[a + 1232 >> 2] = a + (0 | n[a + 500 >> 2]), n[a + 1236 >> 2] = a + (0 | n[a + 504 >> 2]), n[a + 1240 >> 2] = a + (0 | n[a + 508 >> 2]), n[a + 1244 >> 2] = a + (0 | n[a + 512 >> 2]), n[a + 1248 >> 2] = a + (0 | n[a + 516 >> 2]), n[a + 944 >> 2] = a + (0 | n[a + 520 >> 2]), n[a + 956 >> 2] = a + (0 | n[a + 524 >> 2]), n[a + 960 >> 2] = a + (0 | n[a + 528 >> 2]), n[a + 1052 >> 2] = a + (0 | n[a + 532 >> 2]), n[a + 1056 >> 2] = a + (0 | n[a + 536 >> 2]), n[a + 1060 >> 2] = a + (0 | n[a + 540 >> 2]), n[a + 1064 >> 2] = a + (0 | n[a + 544 >> 2]), n[a + 1068 >> 2] = a + (0 | n[a + 548 >> 2]), n[a + 1072 >> 2] = a + (0 | n[a + 552 >> 2]), n[a + 1076 >> 2] = a + (0 | n[a + 556 >> 2]), n[a + 1080 >> 2] = a + (0 | n[a + 560 >> 2]), n[a + 1084 >> 2] = a + (0 | n[a + 564 >> 2]), n[a + 1088 >> 2] = a + (0 | n[a + 568 >> 2]), n[a + 1092 >> 2] = a + (0 | n[a + 572 >> 2]), n[a + 1096 >> 2] = a + (0 | n[a + 576 >> 2]), n[a + 1100 >> 2] = a + (0 | n[a + 580 >> 2]), n[a + 1104 >> 2] = a + (0 | n[a + 584 >> 2]), n[a + 1108 >> 2] = a + (0 | n[a + 588 >> 2]), n[a + 1112 >> 2] = a + (0 | n[a + 592 >> 2]), n[a + 1116 >> 2] = a + (0 | n[a + 596 >> 2]), n[a + 1120 >> 2] = a + (0 | n[a + 600 >> 2]), n[a + 1124 >> 2] = a + (0 | n[a + 604 >> 2]), n[a + 1128 >> 2] = a + (0 | n[a + 608 >> 2])));
        }
        function Ee(a) {
          a |= 0;
          var u, v, S, C = 0, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = G;
          if (G = G + 32 | 0, p = W + 24 | 0, n[(B = W) >> 2] = 4, n[B + 4 >> 2] = 2, n[B + 8 >> 2] = 2, function(j, U) {
            j |= 0, U |= 0;
            var rt = 0, lt = 0;
            G = (j = G) + 272 | 0, rt = j + 16 | 0, n[(lt = j) >> 2] = U, Ui(rt, 993, lt), function(Q) {
              Q |= 0;
              var ct = 0, Pt = 0;
              G = (ct = G) + 16 | 0, n[(Pt = ct) >> 2] = Q, function(Xt, Qt, $t) {
                Xt |= 0, Qt |= 0, $t |= 0, G = (Qt = G) + 16 | 0, n[(Xt = Qt) >> 2] = $t, Gi(496, 2518, Xt), G = Qt;
              }(0, 0, Pt), G = ct;
            }(rt), G = j;
          }(0, B), 0 | Ws(a))
            return kt(0, 1038, W + 16 | 0), G = W, (B = 0) | B;
          if (4 < (255 & (C = 0 | ft[(R = a + 4 | 0) >> 0])))
            return n[p >> 2] = 4, n[p + 4 >> 2] = 255 & C, kt(0, 1101, p), G = W, (B = 0) | B;
          if (0 | ft[(C = a + 5 | 0) >> 0] ? (je(R, 1), _t(a + 64 | 0, 4, 160), ft[C >> 0] = 0, ge(a), C = 0 | ft[R >> 0], _t(0 | n[(p = a + 704 | 0) >> 2], 4, 32), je(0 | n[(B = a + 708 | 0) >> 2], 4), je(4 + (0 | n[B >> 2]) | 0, 4), je(8 + (0 | n[B >> 2]) | 0, 4), je(12 + (0 | n[B >> 2]) | 0, 4), je(16 + (0 | n[B >> 2]) | 0, 4), je(20 + (0 | n[B >> 2]) | 0, 1), _t(0 | n[a + 720 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 724 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 728 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 732 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 736 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 740 >> 2], 4, 0 | n[n[p >> 2] >> 2]), _t(0 | n[a + 752 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 756 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 760 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 764 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 768 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 772 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 776 >> 2], 4, 0 | n[4 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 780 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 784 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 788 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 796 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 800 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 804 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 812 >> 2], 4, 0 | n[12 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 816 >> 2], 4, 0 | n[12 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 820 >> 2], 4, 0 | n[12 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 828 >> 2], 4, 0 | n[12 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 852 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 856 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 860 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 868 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 872 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 876 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 880 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 884 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 888 >> 2], 1, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 892 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 896 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 900 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 904 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 908 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 912 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 924 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 928 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 932 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 936 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 940 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 948 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 952 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 976 >> 2], 4, 0 | n[24 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 980 >> 2], 4, 0 | n[28 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 984 >> 2], 4, 0 | n[28 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 988 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 992 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 996 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1e3 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1004 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1008 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1012 >> 2], 4, 0 | n[32 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1016 >> 2], 4, 0 | n[36 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1020 >> 2], 4, 0 | n[36 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1024 >> 2], 4, 0 | n[36 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1028 >> 2], 4, 0 | n[40 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1040 >> 2], 4, 0 | n[44 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1044 >> 2], 4, 0 | n[48 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1048 >> 2], 4, 0 | n[48 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1032 >> 2], 4, 0 | n[52 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1036 >> 2], 4, 0 | n[52 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1132 >> 2], 4, 0 | n[56 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1136 >> 2], 4, 0 | n[60 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1140 >> 2], 2, 0 | n[64 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1144 >> 2], 4, 0 | n[68 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1148 >> 2], 4, 0 | n[72 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1152 >> 2], 4, 0 | n[72 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1156 >> 2], 4, 0 | n[72 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1160 >> 2], 4, 0 | n[72 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1164 >> 2], 4, 0 | n[72 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1168 >> 2], 4, 0 | n[76 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1172 >> 2], 4, 0 | n[76 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1176 >> 2], 4, 0 | n[76 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1188 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1192 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1196 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1200 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1204 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1208 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1212 >> 2], 4, 0 | n[80 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1216 >> 2], 4, 0 | n[84 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1220 >> 2], 2, 0 | n[84 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1224 >> 2], 4, 0 | n[88 + (0 | n[p >> 2]) >> 2]), 1 < (255 & C) && (_t(0 | n[a + 808 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), 3 < (255 & C)) && (_t(0 | n[a + 968 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 972 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 792 >> 2], 4, 0 | n[8 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 824 >> 2], 4, 0 | n[12 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 864 >> 2], 4, 0 | n[16 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1228 >> 2], 4, 0 | n[92 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1232 >> 2], 4, 0 | n[92 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1236 >> 2], 4, 0 | n[92 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1240 >> 2], 4, 0 | n[96 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1244 >> 2], 4, 0 | n[96 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1248 >> 2], 4, 0 | n[96 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 944 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 956 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 960 >> 2], 4, 0 | n[20 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1052 >> 2], 4, 0 | n[100 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1056 >> 2], 4, 0 | n[100 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1060 >> 2], 4, 0 | n[100 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1064 >> 2], 4, 0 | n[104 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1068 >> 2], 4, 0 | n[104 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1072 >> 2], 4, 0 | n[104 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1076 >> 2], 4, 0 | n[104 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1080 >> 2], 4, 0 | n[104 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1084 >> 2], 4, 0 | n[108 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1088 >> 2], 4, 0 | n[108 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1092 >> 2], 4, 0 | n[108 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1096 >> 2], 4, 0 | n[112 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1100 >> 2], 4, 0 | n[112 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1104 >> 2], 4, 0 | n[112 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1108 >> 2], 4, 0 | n[116 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1112 >> 2], 4, 0 | n[120 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1116 >> 2], 4, 0 | n[120 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1120 >> 2], 4, 0 | n[120 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1124 >> 2], 4, 0 | n[124 + (0 | n[p >> 2]) >> 2]), _t(0 | n[a + 1128 >> 2], 4, 0 | n[124 + (0 | n[p >> 2]) >> 2]))) : (ge(a), p = a + 704 | 0), 0 | n[905] || (n[905] = 1), C = 0 | n[p >> 2], 0 < (0 | n[C >> 2]))
            for (R = a + 716 | 0, I = a + 712 | 0, A = 0; n[(0 | n[I >> 2]) + (A << 2) >> 2] = (0 | n[R >> 2]) + (A << 6), C = 0 | n[p >> 2], (0 | (A = A + 1 | 0)) < (0 | n[C >> 2]); )
              ;
          if (0 < (0 | n[C + 4 >> 2]))
            for (R = a + 748 | 0, I = a + 744 | 0, A = 0; n[(0 | n[I >> 2]) + (A << 2) >> 2] = (0 | n[R >> 2]) + (A << 6), C = 0 | n[p >> 2], (0 | (A = A + 1 | 0)) < (0 | n[C + 4 >> 2]); )
              ;
          if (0 < (0 | n[C + 16 >> 2]))
            for (g = a + 848 | 0, $ = a + 832 | 0, Z = a + 1136 | 0, S = a + 896 | 0, X = a + 836 | 0, F = a + 1140 | 0, u = a + 900 | 0, v = a + 840 | 0, R = a + 1144 | 0, I = a + 908 | 0, A = a + 844 | 0, B = 0; n[(0 | n[$ >> 2]) + (B << 2) >> 2] = (0 | n[g >> 2]) + (B << 6), n[(0 | n[X >> 2]) + (B << 2) >> 2] = (0 | n[Z >> 2]) + (n[(0 | n[S >> 2]) + (B << 2) >> 2] << 2), n[(0 | n[v >> 2]) + (B << 2) >> 2] = (0 | n[F >> 2]) + (n[(0 | n[u >> 2]) + (B << 2) >> 2] << 1), n[(0 | n[A >> 2]) + (B << 2) >> 2] = (0 | n[R >> 2]) + (n[(0 | n[I >> 2]) + (B << 2) >> 2] << 2), C = 0 | n[p >> 2], (0 | (B = B + 1 | 0)) < (0 | n[C + 16 >> 2]); )
              ;
          if (0 < (0 | n[C + 20 >> 2]))
            for (R = a + 920 | 0, I = a + 916 | 0, A = 0; n[(0 | n[I >> 2]) + (A << 2) >> 2] = (0 | n[R >> 2]) + (A << 6), C = 0 | n[p >> 2], (0 | (A = A + 1 | 0)) < (0 | n[C + 20 >> 2]); )
              ;
          if (0 < (0 | n[C + 80 >> 2]))
            for (R = a + 1184 | 0, I = a + 1180 | 0, A = 0; n[(0 | n[I >> 2]) + (A << 2) >> 2] = (0 | n[R >> 2]) + (A << 6), C = 0 | n[p >> 2], (0 | (A = A + 1 | 0)) < (0 | n[C + 80 >> 2]); )
              ;
          if (1 & ft[20 + (0 | n[a + 708 >> 2]) >> 0] || (0 | (F = 0 | n[C + 16 >> 2])) <= 0)
            return G = W, 0 | (B = a);
          C = 0 | n[a + 1140 >> 2], p = 0 | n[a + 900 >> 2], R = 0 | n[a + 904 >> 2], A = 0;
          do
            if (I = C + (n[p + (A << 2) >> 2] << 1) | 0, $ = (B = 0 | n[R + (A << 2) >> 2]) + -1 | 0, 1 < (0 | B))
              for (g = 0; Z = 0 | tr[(X = I + (g << 1) | 0) >> 1], tr[X >> 1] = 0 | tr[(B = I + (g + 2 << 1) | 0) >> 1], tr[B >> 1] = Z, (0 | (g = g + 3 | 0)) < (0 | $); )
                ;
          while ((0 | (A = A + 1 | 0)) != (0 | F));
          p = 0 | n[a + 1136 >> 2], R = 0 | n[a + 896 >> 2], I = 0 | n[a + 892 >> 2], g = 0;
          do
            if (A = (C = p + (n[R + (g << 2) >> 2] << 2) | 0) + ((B = 0 | n[I + (g << 2) >> 2]) << 1 << 2) | 0, 0 < (0 | B))
              for (C = C + 4 | 0; D[C >> 2] = 1 - +D[C >> 2], (C = C + 8 | 0) >>> 0 < A >>> 0; )
                ;
          while ((0 | (g = g + 1 | 0)) != (0 | F));
          return G = W, 0 | a;
        }
        function ye(a) {
          var u = G;
          return G = G + 16 | 0, 0 | Ws(a |= 0) ? (kt(0, 1210, u), G = u, (a = 0) | a) : (a = 0 | we[a + 4 >> 0], G = u, 0 | a);
        }
        function Se(a) {
          var u, v, S, C, $ = 0, g = 0, p = 0, R = 0, I = 0, A = 0, g = (a |= 0) + 64 | 0, $ = a + 144 | 0;
          if (Lt(g, 0 | n[a + 88 >> 2], 0 | n[a + 148 >> 2], 0 | n[$ >> 2]), Le(g, 0 | n[a + 92 >> 2], 0 | n[a + 152 >> 2], 0 | n[796 + (0 | n[a >> 2]) >> 2], 2, 0 | n[$ >> 2]), !((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (Lt(g, 0 | n[a + 96 >> 2], 0 | n[(C = a + 120 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 100 >> 2], 0 | n[(p = a + 124 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 104 >> 2], 0 | n[(R = a + 128 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 108 >> 2], 0 | n[(u = a + 132 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 112 >> 2], 0 | n[(v = a + 136 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 116 >> 2], 0 | n[(S = a + 140 | 0) >> 2], 0 | n[$ >> 2]), $ = 0 | n[a + 156 >> 2], g = 0 | n[C >> 2], p = 0 | n[p >> 2], R = 0 | n[R >> 2], (0 | (C = 0 | n[a + 56 >> 2])) <= 0))) {
            for (A = I = 0; n[$ + (I << 2) >> 2] = n[g + (A << 2) >> 2], n[$ + ((1 | I) << 2) >> 2] = n[p + (A << 2) >> 2], n[$ + ((2 | I) << 2) >> 2] = n[R + (A << 2) >> 2], (0 | (A = A + 1 | 0)) != (0 | C); )
              I = I + 4 | 0;
            for (A = 0 | n[a + 160 >> 2], I = 0 | n[u >> 2], R = 0 | n[v >> 2], $ = 0 | n[S >> 2], p = g = 0; n[A + (g << 2) >> 2] = n[I + (p << 2) >> 2], n[A + ((1 | g) << 2) >> 2] = n[R + (p << 2) >> 2], n[A + ((2 | g) << 2) >> 2] = n[$ + (p << 2) >> 2], (0 | (p = p + 1 | 0)) != (0 | C); )
              g = g + 4 | 0;
          }
        }
        function te(a) {
          var u, v, S, C, $ = 0, g = 0, p = 0, R = 0, I = 0, A = 0, g = (a |= 0) + 172 | 0, $ = a + 264 | 0;
          if (Lt(g, 0 | n[a + 196 >> 2], 0 | n[a + 268 >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 200 >> 2], 0 | n[a + 284 >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 204 >> 2], 0 | n[a + 276 >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 208 >> 2], 0 | n[a + 280 >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 212 >> 2], 0 | n[a + 272 >> 2], 0 | n[$ >> 2]), !((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (Lt(g, 0 | n[a + 216 >> 2], 0 | n[(C = a + 240 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 220 >> 2], 0 | n[(p = a + 244 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 224 >> 2], 0 | n[(R = a + 248 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 228 >> 2], 0 | n[(u = a + 252 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 232 >> 2], 0 | n[(v = a + 256 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 236 >> 2], 0 | n[(S = a + 260 | 0) >> 2], 0 | n[$ >> 2]), $ = 0 | n[a + 296 >> 2], g = 0 | n[C >> 2], p = 0 | n[p >> 2], R = 0 | n[R >> 2], (0 | (C = 0 | n[a + 164 >> 2])) <= 0))) {
            for (A = I = 0; n[$ + (I << 2) >> 2] = n[g + (A << 2) >> 2], n[$ + ((1 | I) << 2) >> 2] = n[p + (A << 2) >> 2], n[$ + ((2 | I) << 2) >> 2] = n[R + (A << 2) >> 2], (0 | (A = A + 1 | 0)) != (0 | C); )
              I = I + 4 | 0;
            for (A = 0 | n[a + 300 >> 2], I = 0 | n[u >> 2], R = 0 | n[v >> 2], $ = 0 | n[S >> 2], p = g = 0; n[A + (g << 2) >> 2] = n[I + (p << 2) >> 2], n[A + ((1 | g) << 2) >> 2] = n[R + (p << 2) >> 2], n[A + ((2 | g) << 2) >> 2] = n[$ + (p << 2) >> 2], (0 | (p = p + 1 | 0)) != (0 | C); )
              g = g + 4 | 0;
          }
        }
        function de(a) {
          var u, v, S, C, $ = 0, g = 0, p = 0, R = 0, I = 0, A = 0, g = (a |= 0) + 340 | 0, $ = a + 424 | 0;
          if (Lt(g, 0 | n[a + 364 >> 2], 0 | n[a + 448 >> 2], 0 | n[$ >> 2]), ie(g, 0 | n[a + 368 >> 2], 0 | n[a + 440 >> 2], 0 | n[$ >> 2]), Le(g, 0 | n[a + 372 >> 2], 0 | n[a + 444 >> 2], 0 | n[892 + (0 | n[a >> 2]) >> 2], 2, 0 | n[$ >> 2]), !((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (Lt(g, 0 | n[a + 376 >> 2], 0 | n[(C = a + 400 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 380 >> 2], 0 | n[(p = a + 404 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 384 >> 2], 0 | n[(R = a + 408 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 388 >> 2], 0 | n[(u = a + 412 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 392 >> 2], 0 | n[(v = a + 416 | 0) >> 2], 0 | n[$ >> 2]), Lt(g, 0 | n[a + 396 >> 2], 0 | n[(S = a + 420 | 0) >> 2], 0 | n[$ >> 2]), $ = 0 | n[a + 452 >> 2], g = 0 | n[C >> 2], p = 0 | n[p >> 2], R = 0 | n[R >> 2], (0 | (C = 0 | n[a + 332 >> 2])) <= 0))) {
            for (A = I = 0; n[$ + (I << 2) >> 2] = n[g + (A << 2) >> 2], n[$ + ((1 | I) << 2) >> 2] = n[p + (A << 2) >> 2], n[$ + ((2 | I) << 2) >> 2] = n[R + (A << 2) >> 2], (0 | (A = A + 1 | 0)) != (0 | C); )
              I = I + 4 | 0;
            for (A = 0 | n[a + 456 >> 2], I = 0 | n[u >> 2], R = 0 | n[v >> 2], $ = 0 | n[S >> 2], p = g = 0; n[A + (g << 2) >> 2] = n[I + (p << 2) >> 2], n[A + ((1 | g) << 2) >> 2] = n[R + (p << 2) >> 2], n[A + ((2 | g) << 2) >> 2] = n[$ + (p << 2) >> 2], (0 | (p = p + 1 | 0)) != (0 | C); )
              g = g + 4 | 0;
          }
        }
        function Lt(a, u, v, S) {
          u |= 0, v |= 0, S |= 0;
          var C, p, R, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0;
          if (0 < (0 | (I = 0 | n[(a |= 0) + 8 >> 2])))
            for (A = 0 | n[a + 20 >> 2], g = 0 | n[a + 12 >> 2], $ = 0; D[g + ($ << 2) >> 2] = +D[u + ($ << 2) >> 2] * +D[A + ($ << 2) >> 2], (0 | ($ = $ + 1 | 0)) != (0 | I); )
              ;
          if (!((0 | (p = 0 | n[a >> 2])) <= 0))
            if (X = a + 16 | 0, R = 0 | n[a + 4 >> 2], C = a + 12 | 0, S)
              for (u = $ = 0; ; ) {
                if (0 | n[S >> 2]) {
                  if (A = (a = 0 | n[(0 | n[X >> 2]) + (u << 2) >> 2]) + $ | 0, 0 < (0 | a))
                    for (I = 0 | n[C >> 2], g = $, F = 0; F += +D[I + (g << 2) >> 2], (0 | (g = g + 1 | 0)) < (0 | A); )
                      ;
                  else
                    F = 0;
                  D[v + (u << 2) >> 2] = F;
                }
                if ((0 | (I = u + 1 | 0)) == (0 | p))
                  break;
                S = S + 4 | 0, $ = (0 | n[R + (u << 2) >> 2]) + $ | 0, u = I;
              }
            else
              for ($ = 0 | n[X >> 2], a = u = 0; ; ) {
                if (A = (X = 0 | n[$ + (a << 2) >> 2]) + u | 0, 0 < (0 | X))
                  for (I = 0 | n[C >> 2], g = u, F = 0; F += +D[I + (g << 2) >> 2], (0 | (g = g + 1 | 0)) < (0 | A); )
                    ;
                else
                  F = 0;
                if (D[v + (a << 2) >> 2] = F, (0 | (I = a + 1 | 0)) == (0 | p))
                  break;
                u = (0 | n[R + (a << 2) >> 2]) + u | 0, a = I;
              }
        }
        function ie(a, u, v, S) {
          u |= 0, v |= 0, S |= 0;
          var C, p, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0;
          if (0 < (0 | (R = 0 | n[(a |= 0) + 8 >> 2])))
            for (I = 0 | n[a + 20 >> 2], A = 0 | n[a + 12 >> 2], g = 0; D[A + (g << 2) >> 2] = +D[u + (g << 2) >> 2] * +D[I + (g << 2) >> 2], (0 | (g = g + 1 | 0)) != (0 | R); )
              ;
          if (!((0 | (R = 0 | n[a >> 2])) <= 0))
            if (F = a + 16 | 0, C = 0 | n[a + 4 >> 2], p = a + 12 | 0, S)
              for (u = g = 0; ; ) {
                if (0 | n[S >> 2]) {
                  if (I = (A = 0 | n[(0 | n[F >> 2]) + (u << 2) >> 2]) + g | 0, 0 < (0 | A))
                    for (R = 0 | n[p >> 2], A = g, $ = 0; $ += +D[R + (A << 2) >> 2], (0 | (A = A + 1 | 0)) < (0 | I); )
                      ;
                  else
                    $ = 0;
                  n[v + (u << 2) >> 2] = ~~($ + 0.0010000000474974513), R = 0 | n[a >> 2];
                }
                if (!((0 | (I = u + 1 | 0)) < (0 | R)))
                  break;
                S = S + 4 | 0, g = (0 | n[C + (u << 2) >> 2]) + g | 0, u = I;
              }
            else
              for (g = 0 | n[F >> 2], S = u = 0; ; ) {
                if (I = (F = 0 | n[g + (S << 2) >> 2]) + u | 0, 0 < (0 | F))
                  for (R = 0 | n[p >> 2], A = u, $ = 0; $ += +D[R + (A << 2) >> 2], (0 | (A = A + 1 | 0)) < (0 | I); )
                    ;
                else
                  $ = 0;
                if (n[v + (S << 2) >> 2] = ~~($ + 0.0010000000474974513), !((0 | (R = S + 1 | 0)) < (0 | n[a >> 2])))
                  break;
                u = (0 | n[C + (S << 2) >> 2]) + u | 0, S = R;
              }
        }
        function Le(a, u, v, S, C, p) {
          u |= 0, v |= 0, S |= 0, C |= 0, p |= 0;
          var R, I, A, g, $, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0 | n[(a |= 0) >> 2];
          if (!((0 | Q) <= 0))
            if (g = a + 16 | 0, A = 0 | n[a + 4 >> 2], I = a + 20 | 0, R = C << 2, p)
              for (rt = U = 0; ; ) {
                if (0 | n[p >> 2] && (B = 0 | n[v + (rt << 2) >> 2], a = 0 | n[S + (rt << 2) >> 2], j = 0 | z(a, C), W = (F = 0 | n[(0 | n[g >> 2]) + (rt << 2) >> 2]) + U | 0, (Z = 0 < (0 | j)) && ci(0 | B, 0, 0 | z(R, a)), 0 < (0 | F) && (lt = 0 | n[I >> 2], Z))) {
                  F = U;
                  do
                    for (a = 0 | n[u + (F << 2) >> 2], X = +D[lt + (F << 2) >> 2], Z = 0; D[($ = B + (Z << 2) | 0) >> 2] = +D[$ >> 2] + X * +D[a + (Z << 2) >> 2], (0 | (Z = Z + 1 | 0)) != (0 | j); )
                      ;
                  while ((0 | (F = F + 1 | 0)) < (0 | W));
                }
                if ((0 | (a = rt + 1 | 0)) == (0 | Q))
                  break;
                p = p + 4 | 0, U = (0 | n[A + (rt << 2) >> 2]) + U | 0, rt = a;
              }
            else
              for (U = j = 0; ; ) {
                if (Z = 0 | n[v + (U << 2) >> 2], a = 0 | n[S + (U << 2) >> 2], W = 0 | z(a, C), B = (p = 0 | n[(0 | n[g >> 2]) + (U << 2) >> 2]) + j | 0, (F = 0 < (0 | W)) && ci(0 | Z, 0, 0 | z(R, a)), 0 < (0 | p) && (rt = 0 | n[I >> 2], F)) {
                  p = j;
                  do
                    for (a = 0 | n[u + (p << 2) >> 2], X = +D[rt + (p << 2) >> 2], F = 0; D[(lt = Z + (F << 2) | 0) >> 2] = +D[lt >> 2] + X * +D[a + (F << 2) >> 2], (0 | (F = F + 1 | 0)) != (0 | W); )
                      ;
                  while ((0 | (p = p + 1 | 0)) < (0 | B));
                }
                if ((0 | (a = U + 1 | 0)) == (0 | Q))
                  break;
                j = (0 | n[A + (U << 2) >> 2]) + j | 0, U = a;
              }
        }
        function pr(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | function(S) {
            S |= 0;
            var C, p, R = G;
            return G = G + 560 | 0, C = (p = R) + 548 | 0, ci(0 | p, 0, 548), hr(S, p, C), G = R, 0 | n[C >> 2];
          }(a), G = v, 0 | u) : (n[u >> 2] = 1515, n[u + 4 >> 2] = 1533, kt(0, 1269, u), G = v, (u = 0) | u);
        }
        function ze(a, u, v) {
          u |= 0, v |= 0;
          var S, C, p = 0, R = 0, I = G;
          return G = G + 32 | 0, R = I + 24 | 0, C = I + 16 | 0, p = I + 8 | 0, S = I, (a |= 0) ? u ? ((p = u) + 15 & -16 | 0) != (0 | p) ? (n[C >> 2] = 1551, n[4 + C >> 2] = 1342, kt(0, 1269, C), G = I, (R = 0) | R) : (u = 0 | pe(a, u, v)) ? (G = I, 0 | (R = u)) : (n[R >> 2] = 1551, n[R + 4 >> 2] = 1577, kt(0, 1269, R), G = I, (R = 0) | R) : (n[p >> 2] = 1551, n[p + 4 >> 2] = 1303, kt(0, 1269, p), G = I, (R = 0) | R) : (n[S >> 2] = 1551, n[S + 4 >> 2] = 1533, kt(0, 1269, S), G = I, (R = 0) | R);
        }
        function Ne(a, u, v, S) {
          if (v = +v, S = +S, (u = +V(+(u = +u), +(a = +a)) - +V(+S, +v)) < -3.1415927410125732)
            for (; (u += 6.2831854820251465) < -3.1415927410125732; )
              ;
          if (!(3.1415927410125732 < u))
            return +(v = u);
          for (; 3.1415927410125732 < (u += -6.2831854820251465); )
            ;
          return +u;
        }
        function je(a, u) {
          a |= 0, u |= 0;
          var v;
          if (!((u = a + u + -1 | 0) >>> 0 <= a >>> 0))
            for (; v = 0 | ft[a >> 0], ft[a >> 0] = 0 | ft[u >> 0], a = a + 1 | 0, ft[u >> 0] = v, a >>> 0 < (u = u + -1 | 0) >>> 0; )
              ;
        }
        function _t(a, u, v) {
          a |= 0, u |= 0;
          var S, C = 0, p = 0;
          if (v |= 0)
            do
              if (v = v + -1 | 0, (p = a) >>> 0 < (C = (a = a + u | 0) + -1 | 0) >>> 0)
                for (; S = 0 | ft[p >> 0], ft[p >> 0] = 0 | ft[C >> 0], p = p + 1 | 0, ft[C >> 0] = S, p >>> 0 < (C = C + -1 | 0) >>> 0; )
                  ;
            while (0 | v);
        }
        function Sr(a) {
          var u, v, S, C = 0, p = 0, R = 0, I = 0, j = 0, U = 0, rt = 0, A = 0, W = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = (C = 0 | n[(v = (a |= 0) + 336 | 0) >> 2]) + (20 * (A = 0 | n[(S = a + 332 | 0) >> 2]) | 0) | 0, W = a + 424 | 0, j = 0 | n[a + 48 >> 2], U = 0 | n[a + 316 >> 2], rt = 0 | n[a + 308 >> 2];
          if (0 < (0 | A))
            for (A = 0 | n[W >> 2], R = 0 | n[a + 448 >> 2], I = 0 | n[a + 444 >> 2]; 0 | n[A >> 2] && ((0 | (p = 0 | n[C + 4 >> 2])) != -1 && (D[R >> 2] = +D[j + (p << 2) >> 2] * +D[R >> 2]), (0 | (p = 0 | n[C + 8 >> 2])) != -1 && (D[R >> 2] = +D[U + (p << 2) >> 2] * +D[R >> 2], $ = 0 | n[I >> 2], Fn[3 & n[rt + (p << 5) + 24 >> 2]](a, p, $, $, 0 | n[C + 16 >> 2]))), !(B >>> 0 <= (C = C + 20 | 0) >>> 0); )
              A = A + 4 | 0, R = R + 4 | 0, I = I + 4 | 0;
          if (!((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (rt = (C = 0 | n[v >> 2]) + (20 * ($ = 0 | n[S >> 2]) | 0) | 0, j = 0 | n[a + 324 >> 2], U = 0 | n[a + 328 >> 2], (0 | $) <= 0)))
            for (I = 0 | n[W >> 2], p = C, R = 0 | n[a + 452 >> 2], C = 0 | n[a + 456 >> 2]; 0 | n[I >> 2] && (0 | (g = 0 | n[p + 8 >> 2])) != -1 && (F = +D[R >> 2] * +D[(S = j + ((W = g << 2) << 2) | 0) >> 2], D[R >> 2] = F, X = +D[($ = R + 4 | 0) >> 2] * +D[4 + S >> 2], D[$ >> 2] = X, Z = +D[(a = R + 8 | 0) >> 2] * +D[8 + S >> 2], D[R >> 2] = F < 0 ? 0 : 1 < F ? 1 : F, D[$ >> 2] = X < 0 ? 0 : 1 < X ? 1 : X, D[a >> 2] = Z < 0 ? 0 : 1 < Z ? 1 : Z, D[R + 12 >> 2] = 1, Z = +D[C >> 2], X = +D[(W = U + (W << 2) | 0) >> 2], D[C >> 2] = X = Z + X - Z * X, Z = +D[(a = C + 4 | 0) >> 2], F = +D[W + 4 >> 2], D[a >> 2] = F = Z + F - Z * F, u = (Z = +D[($ = C + 8 | 0) >> 2]) + (u = +D[W + 8 >> 2]) - Z * u, D[C >> 2] = X < 0 ? 0 : 1 < X ? 1 : X, D[a >> 2] = F < 0 ? 0 : 1 < F ? 1 : F, D[$ >> 2] = u < 0 ? 0 : 1 < u ? 1 : u, D[C + 12 >> 2] = 1), !(rt >>> 0 <= (p = p + 20 | 0) >>> 0); )
              I = I + 4 | 0, R = R + 16 | 0, C = C + 16 | 0;
        }
        function rr(a) {
          var u, v = 0 | n[(a |= 0) + 332 >> 2];
          0 | n[a + 428 >> 2] && (Ei(0 | n[a + 460 >> 2], 0 | n[a + 436 >> 2], 0 | (u = v << 2)), Ei(0 | n[a + 464 >> 2], 0 | n[a + 440 >> 2], 0 | u), Ei(0 | n[a + 468 >> 2], 0 | n[a + 448 >> 2], 0 | u), (0 | we[4 + (0 | n[a >> 2]) >> 0]) <= 3 || (Ei(0 | n[a + 472 >> 2], 0 | n[a + 452 >> 2], 0 | (u = v << 4)), Ei(0 | n[a + 476 >> 2], 0 | n[a + 456 >> 2], 0 | u)));
        }
        function Nr(a) {
          var u, v, S, C, p, R, I, A, g, $, F, ct = 0, lt = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0 | ft[4 + (0 | n[(a |= 0) >> 2]) >> 0], Q = 0 | n[a + 332 >> 2], ct = a + 428 | 0;
          if (0 | n[a + 620 >> 2]) {
            if (!(((n[ct >> 2] = 0) | Q) <= 0))
              for (Z = a + 424 | 0, B = a + 432 | 0, ct = a + 448 | 0, lt = 0; X = 0 | n[(0 | n[Z >> 2]) + (lt << 2) >> 2] && +D[(0 | n[ct >> 2]) + (lt << 2) >> 2] != 0 ? 127 : 126, ft[(0 | n[B >> 2]) + lt >> 0] = X, (0 | (lt = lt + 1 | 0)) != (0 | Q); )
                ;
          } else if (0 | n[ct >> 2]) {
            if (!(((n[ct >> 2] = 0) | Q) <= 0))
              if (S = a + 424 | 0, R = a + 432 | 0, p = a + 448 | 0, A = a + 468 | 0, C = a + 440 | 0, I = a + 464 | 0, $ = a + 436 | 0, g = a + 460 | 0, u = a + 452 | 0, W = a + 472 | 0, v = a + 456 | 0, B = a + 476 | 0, (255 & lt) <= 3)
                for (ct = 0; W = (0 | n[(0 | n[S >> 2]) + (ct << 2) >> 2]) == 0, rt = +D[(0 | n[p >> 2]) + (ct << 2) >> 2], U = (0 | n[R >> 2]) + ct | 0, j = (1 & ft[U >> 0]) == (j = rt != 0 & (1 ^ W) & 1) << 24 >> 24 ? j : 2 | j, j = rt != +D[(0 | n[A >> 2]) + (ct << 2) >> 2] ? 4 | j : j, j = (0 | n[(0 | n[C >> 2]) + (ct << 2) >> 2]) == (0 | n[(0 | n[I >> 2]) + (ct << 2) >> 2]) ? j : 8 | j, j = (0 | n[(0 | n[$ >> 2]) + (ct << 2) >> 2]) == (0 | n[(0 | n[g >> 2]) + (ct << 2) >> 2]) ? j : 16 | j, ft[U >> 0] = W ? j : 32 | j, (0 | (ct = ct + 1 | 0)) != (0 | Q); )
                  ;
              else
                for (Z = X = 0; F = (0 | n[(0 | n[S >> 2]) + (X << 2) >> 2]) == 0, rt = +D[(0 | n[p >> 2]) + (X << 2) >> 2], lt = (0 | n[R >> 2]) + X | 0, ct = (1 & ft[lt >> 0]) == (ct = rt != 0 & (1 ^ F) & 1) << 24 >> 24 ? ct : 2 | ct, ct = rt != +D[(0 | n[A >> 2]) + (X << 2) >> 2] ? 4 | ct : ct, ct = (0 | n[(0 | n[C >> 2]) + (X << 2) >> 2]) == (0 | n[(0 | n[I >> 2]) + (X << 2) >> 2]) ? ct : 8 | ct, ct = (0 | n[(0 | n[$ >> 2]) + (X << 2) >> 2]) == (0 | n[(0 | n[g >> 2]) + (X << 2) >> 2]) ? ct : 16 | ct, ct = F ? ct : 32 | ct, F = (0 | n[u >> 2]) + (Z << 2) | 0, a = (0 | n[W >> 2]) + (Z << 2) | 0, +D[F >> 2] == +D[a >> 2] && +D[4 + F >> 2] == +D[a + 4 >> 2] && +D[8 + F >> 2] == +D[a + 8 >> 2] && +D[12 + F >> 2] == +D[a + 12 >> 2] && (j = (0 | n[v >> 2]) + (Z << 2) | 0, U = (0 | n[B >> 2]) + (Z << 2) | 0, +D[j >> 2] == +D[U >> 2]) && +D[j + 4 >> 2] == +D[U + 4 >> 2] && +D[j + 8 >> 2] == +D[U + 8 >> 2] && +D[j + 12 >> 2] == +D[U + 12 >> 2] || (ct |= 64), ft[lt >> 0] = ct, (0 | (X = X + 1 | 0)) != (0 | Q); )
                  Z = Z + 4 | 0;
          } else if (!((0 | Q) <= 0))
            for (X = a + 424 | 0, Z = a + 432 | 0, ct = a + 448 | 0, lt = 0; 0 | n[(0 | n[X >> 2]) + (lt << 2) >> 2] && +D[(0 | n[ct >> 2]) + (lt << 2) >> 2] != 0 ? (U = (0 | n[Z >> 2]) + lt | 0, ft[U >> 0] = 1 | ft[U >> 0]) : (U = (0 | n[Z >> 2]) + lt | 0, ft[U >> 0] = -2 & ft[U >> 0]), (0 | (lt = lt + 1 | 0)) != (0 | Q); )
              ;
        }
        function vr(a) {
          var u, v, S, C, p, R, I, Dt = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, Jt = 0, Fe = 0, Ce = 0, $e = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = 0, Ot = 0, Jt = 0 | n[(R = (a |= 0) + 60 | 0) >> 2], Dt = 0 | n[a >> 2], Fe = 0 | n[Dt + 784 >> 2], Ce = 0 | n[(I = a + 56 | 0) >> 2], $e = 0 | n[Dt + 1028 >> 2];
          if (0 < (0 | Ce)) {
            for (rt = a + 80 | 0, ct = a + 92 | 0, Q = a + 88 | 0, Pt = a + 84 | 0, lt = Dt + 984 | 0, F = Dt + 980 | 0, Z = X = 0; ; ) {
              if ($ = 0 | n[Jt + (24 * X | 0) >> 2], (0 | ($t = 0 | n[(Dt = $ + 24 | 0) >> 2] || 0 | n[$ + 28 >> 2] ? 15 : $t)) == 15 && (n[(($t = 0) | n[rt >> 2]) + (X << 2) >> 2] = n[(U = $ + 12 | 0) >> 2], 0 | n[Dt >> 2]) && (B = 0 | n[Fe + (X << 2) >> 2], Xt = (W = 0 | n[$ + 16 >> 2]) + ((Yt = 0 | n[U >> 2]) << 2) | 0, 0 < (0 | Yt)))
                for (Dt = W, A = (0 | n[Q >> 2]) + (Z << 2) | 0, g = (0 | n[ct >> 2]) + (Z << 2) | 0; Yt = (0 | n[Dt >> 2]) + B | 0, n[g >> 2] = $e + (n[(0 | n[lt >> 2]) + (Yt << 2) >> 2] << 2), n[A >> 2] = n[(0 | n[F >> 2]) + (Yt << 2) >> 2], !(Xt >>> 0 <= (Dt = Dt + 4 | 0) >>> 0); )
                  A = A + 4 | 0, g = g + 4 | 0;
              if (0 | n[$ + 28 >> 2] && (Qt = (j = 0 | n[$ + 20 >> 2]) + ((Yt = 0 | n[$ + 12 >> 2]) << 2) | 0, 0 < (0 | Yt)))
                for (Dt = (0 | n[Pt >> 2]) + (Z << 2) | 0, A = j; n[Dt >> 2] = n[A >> 2], !(Qt >>> 0 <= (A = A + 4 | 0) >>> 0); )
                  Dt = Dt + 4 | 0;
              if ((0 | (X = X + 1 | 0)) == (0 | Ce))
                break;
              Z = (0 | n[$ + 8 >> 2]) + Z | 0;
            }
            Dt = 0 | n[a >> 2];
          }
          if (!((0 | we[Dt + 4 >> 0]) < 4 || (p = 0 | n[R >> 2], Yt = 0 | n[Dt + 792 >> 2], (0 | (R = 0 | n[I >> 2])) <= 0)))
            for (v = a + 96 | 0, u = a + 100 | 0, I = a + 104 | 0, C = a + 108 | 0, S = a + 112 | 0, $t = a + 116 | 0, Xt = Dt + 1228 | 0, ct = Dt + 1232 | 0, Q = Dt + 1236 | 0, Qt = Dt + 1240 | 0, Pt = Dt + 1244 | 0, Jt = Dt + 1248 | 0, Ce = Fe = 0; ; ) {
              if (Dt = 0 | n[p + (24 * Fe | 0) >> 2], 0 | n[Dt + 24 >> 2] && (jt = 0 | n[Yt + (Fe << 2) >> 2], Ot = (pt = 0 | n[Dt + 16 >> 2]) + ((a = 0 | n[Dt + 12 >> 2]) << 2) | 0, 0 < (0 | a)))
                for (A = 0 | n[Xt >> 2], g = 0 | n[ct >> 2], $ = 0 | n[Q >> 2], F = 0 | n[Qt >> 2], X = 0 | n[Pt >> 2], Z = 0 | n[Jt >> 2], $e = pt, B = (0 | n[I >> 2]) + (Ce << 2) | 0, W = (0 | n[u >> 2]) + (Ce << 2) | 0, j = (0 | n[v >> 2]) + (Ce << 2) | 0, U = (0 | n[$t >> 2]) + (Ce << 2) | 0, rt = (0 | n[S >> 2]) + (Ce << 2) | 0, lt = (0 | n[C >> 2]) + (Ce << 2) | 0; a = (0 | n[$e >> 2]) + jt | 0, n[j >> 2] = n[A + (a << 2) >> 2], n[W >> 2] = n[g + (a << 2) >> 2], n[B >> 2] = n[$ + (a << 2) >> 2], n[lt >> 2] = n[F + (a << 2) >> 2], n[rt >> 2] = n[X + (a << 2) >> 2], n[U >> 2] = n[Z + (a << 2) >> 2], !(Ot >>> 0 <= ($e = $e + 4 | 0) >>> 0); )
                  B = B + 4 | 0, W = W + 4 | 0, j = j + 4 | 0, U = U + 4 | 0, rt = rt + 4 | 0, lt = lt + 4 | 0;
              if ((0 | (Fe = Fe + 1 | 0)) == (0 | R))
                break;
              Ce = (0 | n[Dt + 8 >> 2]) + Ce | 0;
            }
        }
        function Jr(a) {
          var u, v, S, C, p, R, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, Fr = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = 0, Ot = 0, Jt = 0, Dt = 0, Fe = 0, Ce = 0, $e = 0, lr = 0, ir = 0, qe = 0, De = 0, ur = 0, xr = 0, Je = 0, nr = 0, be = 0, Oe = 0 | n[(a |= 0) + 168 >> 2], ot = 0 | n[a >> 2], Fr = 0 | n[816 + ot >> 2];
          if (0 < (0 | (ct = 0 | n[(R = a + 164 | 0) >> 2])))
            for (Ot = a + 188 | 0, $t = a + 200 | 0, Ce = a + 204 | 0, lr = a + 208 | 0, C = a + 212 | 0, Jt = a + 196 | 0, p = a + 192 | 0, Qt = 992 + ot | 0, Fe = 996 + ot | 0, $e = 1e3 + ot | 0, S = 1004 + ot | 0, Dt = 988 + ot | 0, u = 1008 + ot | 0, Yt = a + 288 | 0, v = 1012 + ot | 0, jt = a + 292 | 0, De = qe = 0; ; ) {
              if (Pt = 0 | n[Oe + (12 * qe | 0) >> 2], (0 | (ur = 0 | n[(I = Pt + 24 | 0) >> 2] || 0 | n[Pt + 28 >> 2] ? 14 : ur)) == 14 && (n[((ur = 0) | n[Ot >> 2]) + (qe << 2) >> 2] = n[(pt = Pt + 12 | 0) >> 2], 0 | n[I >> 2])) {
                if (I = 0 | n[Fr + (qe << 2) >> 2], B = (A = 0 | n[Pt + 16 >> 2]) + ((Q = 0 | n[pt >> 2]) << 2) | 0, 0 < (0 | Q))
                  for (g = 0 | n[Qt >> 2], $ = 0 | n[Fe >> 2], F = 0 | n[$e >> 2], X = 0 | n[S >> 2], Z = 0 | n[Dt >> 2], W = (0 | n[$t >> 2]) + (De << 2) | 0, j = A, U = (0 | n[Jt >> 2]) + (De << 2) | 0, rt = (0 | n[Ce >> 2]) + (De << 2) | 0, lt = (0 | n[lr >> 2]) + (De << 2) | 0, Q = (0 | n[C >> 2]) + (De << 2) | 0; be = (0 | n[j >> 2]) + I | 0, n[W >> 2] = n[g + (be << 2) >> 2], n[rt >> 2] = n[$ + (be << 2) >> 2], n[lt >> 2] = n[F + (be << 2) >> 2], n[Q >> 2] = n[X + (be << 2) >> 2], n[U >> 2] = n[Z + (be << 2) >> 2], !(B >>> 0 <= (j = j + 4 | 0) >>> 0); )
                    W = W + 4 | 0, U = U + 4 | 0, rt = rt + 4 | 0, lt = lt + 4 | 0, Q = Q + 4 | 0;
                be = (0 | n[A >> 2]) + I | 0, n[(0 | n[Yt >> 2]) + (qe << 2) >> 2] = n[(0 | n[u >> 2]) + (be << 2) >> 2], n[(0 | n[jt >> 2]) + (qe << 2) >> 2] = n[(0 | n[v >> 2]) + (be << 2) >> 2];
              }
              if (0 | n[Pt + 28 >> 2] && (ir = (Xt = 0 | n[Pt + 20 >> 2]) + ((be = 0 | n[Pt + 12 >> 2]) << 2) | 0, 0 < (0 | be)))
                for (I = (0 | n[p >> 2]) + (De << 2) | 0, A = Xt; n[I >> 2] = n[A >> 2], !(ir >>> 0 <= (A = A + 4 | 0) >>> 0); )
                  I = I + 4 | 0;
              if ((0 | (qe = qe + 1 | 0)) == (0 | ct))
                break;
              De = (0 | n[Pt + 8 >> 2]) + De | 0;
            }
          if (!((0 | we[4 + ot >> 0]) < 4 || (lr = 0 | n[824 + ot >> 2], (0 | (Ot = 0 | n[R >> 2])) <= 0)))
            for (Fe = a + 216 | 0, Dt = a + 220 | 0, Jt = a + 224 | 0, $e = a + 228 | 0, Ce = a + 232 | 0, pt = a + 236 | 0, Yt = 1228 + ot | 0, Qt = 1232 + ot | 0, Xt = 1236 + ot | 0, jt = 1240 + ot | 0, $t = 1244 + ot | 0, B = 1248 + ot | 0, j = W = 0; ; ) {
              if (Z = 0 | n[Oe + (12 * W | 0) >> 2], 0 | n[Z + 24 >> 2] && (Je = 0 | n[lr + (W << 2) >> 2], nr = (xr = 0 | n[Z + 16 >> 2]) + ((be = 0 | n[Z + 12 >> 2]) << 2) | 0, 0 < (0 | be)))
                for (I = 0 | n[Yt >> 2], A = 0 | n[Qt >> 2], g = 0 | n[Xt >> 2], $ = 0 | n[jt >> 2], F = 0 | n[$t >> 2], X = 0 | n[B >> 2], U = xr, rt = (0 | n[Jt >> 2]) + (j << 2) | 0, lt = (0 | n[Dt >> 2]) + (j << 2) | 0, Q = (0 | n[Fe >> 2]) + (j << 2) | 0, Fr = (0 | n[pt >> 2]) + (j << 2) | 0, ct = (0 | n[Ce >> 2]) + (j << 2) | 0, Pt = (0 | n[$e >> 2]) + (j << 2) | 0; be = (0 | n[U >> 2]) + Je | 0, n[Q >> 2] = n[I + (be << 2) >> 2], n[lt >> 2] = n[A + (be << 2) >> 2], n[rt >> 2] = n[g + (be << 2) >> 2], n[Pt >> 2] = n[$ + (be << 2) >> 2], n[ct >> 2] = n[F + (be << 2) >> 2], n[Fr >> 2] = n[X + (be << 2) >> 2], !(nr >>> 0 <= (U = U + 4 | 0) >>> 0); )
                  rt = rt + 4 | 0, lt = lt + 4 | 0, Q = Q + 4 | 0, Fr = Fr + 4 | 0, ct = ct + 4 | 0, Pt = Pt + 4 | 0;
              if ((0 | (W = W + 1 | 0)) == (0 | Ot))
                break;
              j = (0 | n[Z + 8 >> 2]) + j | 0;
            }
        }
        function ui(a) {
          var u, v, S, C, Dt = 0, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, Jt = 0, Fe = 0, Ce = 0, $e = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = 0, Ot = 0, Jt = 0 | n[(S = (a |= 0) + 336 | 0) >> 2], Dt = 0 | n[a >> 2], Fe = 0 | n[Dt + 856 >> 2], Ce = 0 | n[(C = a + 332 | 0) >> 2], $e = 0 | n[Dt + 1028 >> 2];
          if (0 < (0 | Ce)) {
            for (j = a + 356 | 0, ct = a + 372 | 0, lt = a + 364 | 0, U = a + 368 | 0, Pt = a + 360 | 0, rt = Dt + 1024 | 0, Q = Dt + 1016 | 0, g = Dt + 1020 | 0, F = $ = 0; ; ) {
              if (A = 0 | n[Jt + (20 * $ | 0) >> 2], (0 | ($t = 0 | n[(Dt = A + 24 | 0) >> 2] || 0 | n[A + 28 >> 2] ? 15 : $t)) == 15 && (n[(($t = 0) | n[j >> 2]) + ($ << 2) >> 2] = n[(W = A + 12 | 0) >> 2], 0 | n[Dt >> 2]) && (X = 0 | n[Fe + ($ << 2) >> 2], Xt = (Z = 0 | n[A + 16 >> 2]) + ((Yt = 0 | n[W >> 2]) << 2) | 0, 0 < (0 | Yt)))
                for (Dt = (0 | n[U >> 2]) + (F << 2) | 0, p = Z, R = (0 | n[lt >> 2]) + (F << 2) | 0, I = (0 | n[ct >> 2]) + (F << 2) | 0; Yt = (0 | n[p >> 2]) + X | 0, n[I >> 2] = $e + (n[(0 | n[rt >> 2]) + (Yt << 2) >> 2] << 2), n[R >> 2] = n[(0 | n[Q >> 2]) + (Yt << 2) >> 2], n[Dt >> 2] = n[(0 | n[g >> 2]) + (Yt << 2) >> 2], !(Xt >>> 0 <= (p = p + 4 | 0) >>> 0); )
                  Dt = Dt + 4 | 0, R = R + 4 | 0, I = I + 4 | 0;
              if (0 | n[A + 28 >> 2] && (Qt = (B = 0 | n[A + 20 >> 2]) + ((Yt = 0 | n[A + 12 >> 2]) << 2) | 0, 0 < (0 | Yt)))
                for (Dt = (0 | n[Pt >> 2]) + (F << 2) | 0, p = B; n[Dt >> 2] = n[p >> 2], !(Qt >>> 0 <= (p = p + 4 | 0) >>> 0); )
                  Dt = Dt + 4 | 0;
              if ((0 | ($ = $ + 1 | 0)) == (0 | Ce))
                break;
              F = (0 | n[A + 8 >> 2]) + F | 0;
            }
            Dt = 0 | n[a >> 2];
          }
          if (!((0 | we[Dt + 4 >> 0]) < 4 || (v = 0 | n[S >> 2], Yt = 0 | n[Dt + 864 >> 2], (0 | (Xt = 0 | n[C >> 2])) <= 0)))
            for (S = a + 376 | 0, $t = a + 380 | 0, Qt = a + 384 | 0, u = a + 388 | 0, C = a + 392 | 0, Pt = a + 396 | 0, Q = Dt + 1228 | 0, rt = Dt + 1232 | 0, U = Dt + 1236 | 0, ct = Dt + 1240 | 0, lt = Dt + 1244 | 0, F = Dt + 1248 | 0, Fe = Jt = 0; ; ) {
              if (Dt = 0 | n[v + (20 * Jt | 0) >> 2], 0 | n[Dt + 24 >> 2] && (jt = 0 | n[Yt + (Jt << 2) >> 2], Ot = (pt = 0 | n[Dt + 16 >> 2]) + ((a = 0 | n[Dt + 12 >> 2]) << 2) | 0, 0 < (0 | a)))
                for (p = 0 | n[Q >> 2], R = 0 | n[rt >> 2], I = 0 | n[U >> 2], A = 0 | n[ct >> 2], g = 0 | n[lt >> 2], $ = 0 | n[F >> 2], Ce = pt, $e = (0 | n[Qt >> 2]) + (Fe << 2) | 0, X = (0 | n[$t >> 2]) + (Fe << 2) | 0, Z = (0 | n[S >> 2]) + (Fe << 2) | 0, B = (0 | n[Pt >> 2]) + (Fe << 2) | 0, W = (0 | n[C >> 2]) + (Fe << 2) | 0, j = (0 | n[u >> 2]) + (Fe << 2) | 0; a = (0 | n[Ce >> 2]) + jt | 0, n[Z >> 2] = n[p + (a << 2) >> 2], n[X >> 2] = n[R + (a << 2) >> 2], n[$e >> 2] = n[I + (a << 2) >> 2], n[j >> 2] = n[A + (a << 2) >> 2], n[W >> 2] = n[g + (a << 2) >> 2], n[B >> 2] = n[$ + (a << 2) >> 2], !(Ot >>> 0 <= (Ce = Ce + 4 | 0) >>> 0); )
                  $e = $e + 4 | 0, X = X + 4 | 0, Z = Z + 4 | 0, B = B + 4 | 0, W = W + 4 | 0, j = j + 4 | 0;
              if ((0 | (Jt = Jt + 1 | 0)) == (0 | Xt))
                break;
              Fe = (0 | n[Dt + 8 >> 2]) + Fe | 0;
            }
        }
        function Qr(a) {
          var u, v, S, C = 0;
          if (rr(a |= 0), function(p) {
            p |= 0;
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0;
            if (R = 0 | n[p + 4 >> 2], $ = 0 | n[p >> 2], F = R + (52 * $ | 0) | 0, !((0 | $) <= 0))
              for ($ = 0 | n[p + 12 >> 2]; I = +D[$ >> 2], g = (0 | n[R + 16 >> 2]) == 0, p = R + 4 | 0, I = g ? (Z = +D[p >> 2], X = +D[R + 8 >> 2], I < Z ? Z : X < I ? X : I) : (Z = +D[R + 12 >> 2], (X = +D[p >> 2]) + Z * ((I = (I - X) / Z) - (0 | ~~+x(+I)))), p = R + 48 | 0, +D[(A = R + 44 | 0) >> 2] != I ? (n[p >> 2] = 1, D[A >> 2] = I) : n[p >> 2] = 0, g && (D[$ >> 2] = I), !(F >>> 0 <= (R = R + 52 | 0) >>> 0); )
                $ = $ + 4 | 0;
          }(a + 540 | 0), function(p) {
            p |= 0;
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0;
            if (R = 0 | n[p + 544 >> 2], j = 0 | n[p + 540 >> 2], ct = R + (52 * j | 0) | 0, !((0 | j) <= 0)) {
              j = (0 | n[p + 620 >> 2]) == 0;
              do {
                t:
                  do
                    if (!(0 | n[R >> 2]) && (U = +D[R + 44 >> 2], rt = +D[R + 20 >> 2], lt = +D[R + 24 >> 2], Q = 0 | n[R + 28 >> 2], B = 0 | n[R + 32 >> 2], Pt = Q + (28 * B | 0) | 0, 0 < (0 | B))) {
                      if (!j)
                        for (B = Q; ; ) {
                          $ = 0 | n[B >> 2];
                          do
                            if (1 <= (0 | $)) {
                              if (g = 0 | n[B + 4 >> 2], A = +D[g >> 2], I = A - rt, (0 | $) == 1) {
                                $ = !(U < rt + A) | !(I < U), I = p = 0, W = 41;
                                break;
                              }
                              if (U < I) {
                                g = B + 16 | 0, F = 1, I = p = 0, W = 43;
                                break;
                              }
                              if (U < rt + A)
                                I = p = $ = 0, W = 41;
                              else {
                                for (p = 1; I = +D[g + (p << 2) >> 2], !(U < rt + I); ) {
                                  if (!((0 | (p = p + 1 | 0)) < (0 | $))) {
                                    W = 40;
                                    break;
                                  }
                                  A = I;
                                }
                                if ((0 | W) == 40) {
                                  g = B + 16 | 0, p = $ + -(F = 1) | 0, I = 0, W = 43;
                                  break;
                                }
                                W = (I = I - rt < U ? $ = 0 : (p = p + -1 | 0, (I -= A) < lt ? $ = 0 : ($ = 0, (U - A) / I)), 41);
                              }
                            } else
                              I = p = $ = 0, W = 41;
                          while (0);
                          if ((0 | W) == 41 && ($ | (W = 0) == (0 | n[(g = B + 16 | 0) >> 2]) ? (F = 1 & $, W = 43) : (n[B + 24 >> 2] = 1, n[B + 20 >> 2] = 1, Z = B + 8 | 0, X = B + 12 | 0, $ = 0)), (0 | W) == 43 && (A = +D[(X = B + 12 | (W = 0)) >> 2], Xt = A != I, $ = 1 & ((0 | n[(Z = B + 8 | 0) >> 2]) != (0 | p) | Xt & (I == 0 | A == 0)), n[B + 24 >> 2] = 1 & Xt, n[B + 20 >> 2] = $, $ = F), D[X >> 2] = I, n[Z >> 2] = p, n[g >> 2] = $, Pt >>> 0 <= (B = B + 28 | 0) >>> 0)
                            break t;
                        }
                      if (!(0 | n[R + 48 >> 2])) {
                        for (p = Q; ; )
                          if (n[p + 24 >> 2] = 0, n[p + 20 >> 2] = 0, Pt >>> 0 <= (p = p + 28 | 0) >>> 0)
                            break t;
                      }
                      B = Q;
                      do {
                        $ = 0 | n[B >> 2];
                        do
                          if (1 <= (0 | $)) {
                            if (g = 0 | n[B + 4 >> 2], A = +D[g >> 2], I = A - rt, (0 | $) == 1) {
                              $ = !(U < rt + A) | !(I < U), I = p = 0, W = 24;
                              break;
                            }
                            if (U < I) {
                              g = B + 16 | 0, F = 1, I = p = 0, W = 26;
                              break;
                            }
                            if (U < rt + A)
                              I = p = $ = 0, W = 24;
                            else {
                              for (p = 1; I = +D[g + (p << 2) >> 2], !(U < rt + I); ) {
                                if (!((0 | (p = p + 1 | 0)) < (0 | $))) {
                                  W = 21;
                                  break;
                                }
                                A = I;
                              }
                              if ((0 | W) == 21) {
                                g = B + 16 | 0, p = $ + -(F = 1) | 0, I = 0, W = 26;
                                break;
                              }
                              W = (I = I - rt < U ? $ = 0 : (p = p + -1 | 0, (I -= A) < lt ? $ = 0 : ($ = 0, (U - A) / I)), 24);
                            }
                          } else
                            I = p = $ = 0, W = 24;
                        while (0);
                      } while ((0 | W) == 24 && ($ | (W = 0) == (0 | n[(g = B + 16 | 0) >> 2]) ? (F = 1 & $, W = 26) : (n[B + 24 >> 2] = 1, n[B + 20 >> 2] = 1, Z = B + 8 | 0, X = B + 12 | 0, $ = 0)), (0 | W) == 26 && (A = +D[(X = B + 12 | (W = 0)) >> 2], Xt = A != I, $ = 1 & ((0 | n[(Z = B + 8 | 0) >> 2]) != (0 | p) | Xt & (I == 0 | A == 0)), n[B + 24 >> 2] = 1 & Xt, n[B + 20 >> 2] = $, $ = F), D[X >> 2] = I, n[Z >> 2] = p, n[g >> 2] = $, (B = B + 28 | 0) >>> 0 < Pt >>> 0);
                    }
                  while (0);
              } while ((R = R + 52 | 0) >>> 0 < ct >>> 0);
            }
          }(a), ri(a), function(p) {
            p |= 0;
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0;
            if (R = 0 | n[p + 568 >> 2], rt = 0 | n[p + 564 >> 2], Pt = R + (36 * rt | 0) | 0, !((0 | rt) <= 0)) {
              rt = (0 | n[p + 620 >> 2]) == 0;
              do {
                U = 0 | n[R + 4 >> 2];
                t:
                  do
                    if (0 < (0 | U))
                      for (F = 0 | n[R >> 2], A = p = I = X = 0; ; ) {
                        if (g = 0 | n[F + (X << 2) >> 2], 0 | n[g + 16 >> 2]) {
                          A = 1, p = I = 0;
                          break t;
                        }
                        if (A = A || 0 | n[g + 24 >> 2], p = p || 0 | n[g + 20 >> 2], I = I + (+D[g + 12 >> 2] != 0 & 1) | 0, (0 | U) <= (0 | (X = X + 1 | 0))) {
                          F = I, $t = 11;
                          break;
                        }
                      }
                    else
                      A = p = F = 0, $t = 11;
                  while (0);
                t:
                  do
                    if ((0 | $t) == 11)
                      if (I = rt ? p : 1, ($t = 0) != ((p = rt ? A : 1) | I | 0) && (Qt = 1 << F, n[R + 12 >> 2] = Qt, lt = 0 | n[R >> 2], Q = 0 | n[R + 16 >> 2], ct = 0 | n[R + 20 >> 2], Xt = Q + (Qt << 2) | 0, (0 | F) != 31)) {
                        for (ci(0 | Q, 0, ((A = Q + 4 | 0) >>> 0 < Xt >>> 0 ? Xt : A) + ~Q + 4 & -4 | 0), A = ct + (Qt << 2) | 0, g = ct; D[g >> 2] = 1, (g = g + 4 | 0) >>> 0 < A >>> 0; )
                          ;
                        if (1 <= (0 | U)) {
                          if (!F)
                            for (F = 0, Z = 1; ; ) {
                              if (g = 0 | n[lt + (F << 2) >> 2], X = 0 | z(0 | n[g + 8 >> 2], Z), ($ = +D[g + 12 >> 2]) == 0)
                                for (A = 0; n[(j = Q + (A << 2) | 0) >> 2] = (0 | n[j >> 2]) + X, (0 | (A = A + 1 | 0)) != (0 | Qt); )
                                  ;
                              else
                                n[Q >> 2] = (0 | n[Q >> 2]) + X, D[ct >> 2] = (1 - $) * +D[ct >> 2];
                              if (Z = 0 | z(0 | n[g >> 2], Z), (0 | (F = F + 1 | 0)) == (0 | U)) {
                                A = 0;
                                break t;
                              }
                            }
                          W = 0, j = A = 1;
                          do
                            if (B = 0 | n[lt + (W << 2) >> 2], g = 0 | n[8 + B >> 2], Z = 0 | z(g, j), ($ = +D[(X = 12 + B | 0) >> 2]) == 0)
                              for (g = 0; n[(X = Q + (g << 2) | 0) >> 2] = (0 | n[X >> 2]) + Z, (0 | (g = g + 1 | 0)) != (0 | Qt); )
                                ;
                            else {
                              for (F = 0 | z(g + 1 | 0, j), n[Q >> 2] = (0 | n[Q >> 2]) + Z, D[ct >> 2] = (1 - $) * +D[ct >> 2], g = 1; $ = +D[X >> 2], jt = (g & A | 0) != 0, n[(Yt = Q + (g << 2) | 0) >> 2] = (jt ? F : Z) + (0 | n[Yt >> 2]), D[(Yt = ct + (g << 2) | 0) >> 2] = (jt ? $ : 1 - $) * +D[Yt >> 2], (0 | (g = g + 1 | 0)) != (0 | Qt); )
                                ;
                              A <<= 1;
                            }
                          while (j = 0 | z(0 | n[B >> 2], j), (0 | (W = W + 1 | 0)) != (0 | U));
                          A = 0;
                        } else
                          A = 0;
                      } else
                        A = 0;
                  while (0);
              } while (n[R + 28 >> 2] = p, n[R + 24 >> 2] = I, n[R + 32 >> 2] = A, (R = R + 36 | 0) >>> 0 < Pt >>> 0);
            }
          }(a), br(a), v = 0 | n[a + 4 >> 2], u = (C = 0 | n[a + 52 >> 2]) + (v << 2) | 0, 0 < (0 | v))
            for (; S = +D[C >> 2], D[C >> 2] = S < 0 ? 0 : 1 < S ? 1 : S, (C = C + 4 | 0) >>> 0 < u >>> 0; )
              ;
          (function(p, R, I) {
            p |= 0, R |= 0, I |= 0;
            var A = 0, g = 0;
            if (g = R + (12 * p | 0) | 0, !((0 | p) <= 0))
              for (A = I; ; ) {
                do
                  if (0 | n[R + 8 >> 2]) {
                    if ((0 | (p = 0 | n[R + 4 >> 2])) != -1 && !(0 | n[I + (p << 2) >> 2])) {
                      p = 0;
                      break;
                    }
                    p = (0 | n[32 + (0 | n[R >> 2]) >> 2]) == 0;
                  } else
                    p = 0;
                while (0);
                if (n[A >> 2] = 1 & p, g >>> 0 <= (R = R + 12 | 0) >>> 0)
                  break;
                A = A + 4 | 0;
              }
          })(v, 0 | n[a + 8 >> 2], 0 | n[a + 40 >> 2]), function(p) {
            var R, I, A, g, $, Pt = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0 | n[(p |= 0) + 8 >> 2], Pt = 0 | n[p >> 2], Xt = 0 | n[Pt + 724 >> 2], Qt = 0 | n[p + 4 >> 2];
            if (!((0 | Qt) <= 0))
              for (g = p + 28 | 0, $ = p + 36 | 0, A = p + 32 | 0, I = Pt + 976 | 0, Z = X = 0; ; ) {
                if (R = 0 | n[ct + (12 * X | 0) >> 2], (0 | (Q = 0 | n[(p = 24 + R | 0) >> 2] || 0 | n[28 + R >> 2] ? 6 : Q)) == 6 && (n[((Q = 0) | n[g >> 2]) + (X << 2) >> 2] = n[(U = 12 + R | 0) >> 2], 0 | n[p >> 2]) && (j = 0 | n[Xt + (X << 2) >> 2], rt = (B = 0 | n[16 + R >> 2]) + ((F = 0 | n[U >> 2]) << 2) | 0, 0 < (0 | F)))
                  for (p = 0 | n[I >> 2], Pt = (0 | n[$ >> 2]) + (Z << 2) | 0, F = B; n[Pt >> 2] = n[p + ((0 | n[F >> 2]) + j << 2) >> 2], !(rt >>> 0 <= (F = F + 4 | 0) >>> 0); )
                    Pt = Pt + 4 | 0;
                if (0 | n[28 + R >> 2] && (lt = (W = 0 | n[20 + R >> 2]) + ((F = 0 | n[12 + R >> 2]) << 2) | 0, 0 < (0 | F)))
                  for (p = (0 | n[A >> 2]) + (Z << 2) | 0, Pt = W; n[p >> 2] = n[Pt >> 2], !(lt >>> 0 <= (Pt = Pt + 4 | 0) >>> 0); )
                    p = p + 4 | 0;
                if ((0 | (X = X + 1 | 0)) == (0 | Qt))
                  break;
                Z = (0 | n[8 + R >> 2]) + Z | 0;
              }
          }(a), function(p) {
            ie((p |= 0) + 12 | 0, 0 | n[p + 36 >> 2], 0 | n[p + 44 >> 2], 0 | n[p + 40 >> 2]);
          }(a), function(p) {
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0;
            if (G = (B = G) + 16 | 0, Z = B, R = n[(p = p | 0) + 308 >> 2] | 0, A = n[p + 304 >> 2] | 0, X = R + (A << 5) | 0, g = n[p + 40 >> 2] | 0, $ = n[p + 312 >> 2] | 0, F = n[p + 144 >> 2] | 0, I = n[p + 264 >> 2] | 0, (0 | A) <= 0)
              G = B;
            else {
              for (A = $; ; ) {
                do
                  if (0 | n[R + 28 >> 2]) {
                    if ((0 | (p = 0 | n[R + 4 >> 2])) != -1 && !(0 | n[g + (p << 2) >> 2])) {
                      p = 0;
                      break;
                    }
                    if ((0 | (p = 0 | n[R + 8 >> 2])) != -1 && !(0 | n[$ + (p << 2) >> 2])) {
                      p = 0;
                      break;
                    }
                    p = (0 | n[32 + (0 | n[R >> 2]) >> 2]) == 0;
                  } else
                    p = 0;
                while (0);
                switch (p &= 1, n[A >> 2] = p, 0 | n[R + 12 >> 2]) {
                  case 0:
                    n[F + (n[R + 16 >> 2] << 2) >> 2] = p;
                    break;
                  case 1:
                    n[I + (n[R + 16 >> 2] << 2) >> 2] = p;
                    break;
                  default:
                    kt(0, 2458, Z);
                }
                if (X >>> 0 <= (R = R + 32 | 0) >>> 0)
                  break;
                A = A + 4 | 0;
              }
              G = B;
            }
          }(a), vr(a), Jr(a), Se(a), te(a), function(p) {
            p |= 0;
            var R = 0, I = 0, A = 0, g = 0, $ = 0;
            if (R = 0 | n[p + 336 >> 2], I = 0 | n[p + 332 >> 2], $ = R + (20 * I | 0) | 0, A = 0 | n[p + 40 >> 2], g = 0 | n[p + 312 >> 2], !((0 | I) <= 0))
              for (I = 0 | n[p + 424 >> 2]; ; ) {
                do
                  if (0 | n[R + 12 >> 2]) {
                    if ((0 | (p = 0 | n[R + 4 >> 2])) != -1 && !(0 | n[A + (p << 2) >> 2])) {
                      p = 0;
                      break;
                    }
                    if ((0 | (p = 0 | n[R + 8 >> 2])) != -1 && !(0 | n[g + (p << 2) >> 2])) {
                      p = 0;
                      break;
                    }
                    p = (0 | n[32 + (0 | n[R >> 2]) >> 2]) == 0;
                  } else
                    p = 0;
                while (0);
                if (n[I >> 2] = 1 & p, $ >>> 0 <= (R = R + 20 | 0) >>> 0)
                  break;
                I = I + 4 | 0;
              }
          }(a), ui(a), de(a), function(p) {
            var R, I, A, g, $, Pt = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0 | n[(p |= 0) + 504 >> 2], Pt = 0 | n[p >> 2], Xt = 0 | n[Pt + 1192 >> 2], Qt = 0 | n[p + 500 >> 2];
            if (!((0 | Qt) <= 0))
              for (g = p + 524 | 0, $ = p + 532 | 0, A = p + 528 | 0, I = Pt + 1224 | 0, Z = X = 0; ; ) {
                if (R = 0 | n[ct + (24 * X | 0) >> 2], (0 | (Q = 0 | n[(p = 24 + R | 0) >> 2] || 0 | n[28 + R >> 2] ? 6 : Q)) == 6 && (n[((Q = 0) | n[g >> 2]) + (X << 2) >> 2] = n[(U = 12 + R | 0) >> 2], 0 | n[p >> 2]) && (j = 0 | n[Xt + (X << 2) >> 2], rt = (B = 0 | n[16 + R >> 2]) + ((F = 0 | n[U >> 2]) << 2) | 0, 0 < (0 | F)))
                  for (p = 0 | n[I >> 2], Pt = (0 | n[$ >> 2]) + (Z << 2) | 0, F = B; n[Pt >> 2] = n[p + ((0 | n[F >> 2]) + j << 2) >> 2], !(rt >>> 0 <= (F = F + 4 | 0) >>> 0); )
                    Pt = Pt + 4 | 0;
                if (0 | n[28 + R >> 2] && (lt = (W = 0 | n[20 + R >> 2]) + ((F = 0 | n[12 + R >> 2]) << 2) | 0, 0 < (0 | F)))
                  for (p = (0 | n[A >> 2]) + (Z << 2) | 0, Pt = W; n[p >> 2] = n[Pt >> 2], !(lt >>> 0 <= (Pt = Pt + 4 | 0) >>> 0); )
                    p = p + 4 | 0;
                if ((0 | (X = X + 1 | 0)) == (0 | Qt))
                  break;
                Z = (0 | n[8 + R >> 2]) + Z | 0;
              }
          }(a), function(p) {
            Lt((p |= 0) + 508 | 0, 0 | n[p + 532 >> 2], 0 | n[p + 536 >> 2], 0);
          }(a), Ut(a), sr(a), function(p) {
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = (R = 0 | n[(p |= 0) + 8 >> 2]) + (12 * ($ = 0 | n[p + 4 >> 2]) | 0) | 0, X = 0 | n[p + 48 >> 2];
            if (!((0 | $) <= 0))
              for ($ = 0 | n[p + 40 >> 2], I = X, p = 0 | n[p + 52 >> 2]; 0 | n[$ >> 2] && (A = +D[p >> 2], D[I >> 2] = A, (0 | (g = 0 | n[R + 4 >> 2])) != -1) && (D[I >> 2] = A * +D[X + (g << 2) >> 2]), !(F >>> 0 <= (R = R + 12 | 0) >>> 0); )
                $ = $ + 4 | 0, I = I + 4 | 0, p = p + 4 | 0;
          }(a), function(p) {
            var R = 0, I = 0, A = 0, g = 0 | n[(p |= 0) + 304 >> 2];
            if (!((0 | g) <= 0))
              for (R = 0 | n[p + 312 >> 2], I = 0 | n[p + 308 >> 2], A = 0; 0 | n[R >> 2] && M0[3 & n[I + 20 >> 2]](p, A), (0 | (A = A + 1 | 0)) != (0 | g); )
                R = R + 4 | 0, I = I + 32 | 0;
          }(a), Sr(a), Mt(a), function(p) {
            p |= 0;
            var R, I, A = 0, g = 0, $ = 0, F = 0, X = 0;
            if (!(0 | n[p + 624 >> 2] || (R = (A = 0 | n[p + 336 >> 2]) + (20 * (F = 0 | n[p + 332 >> 2]) | 0) | 0, (0 | F) <= 0)))
              for (F = 0 | n[p + 424 >> 2], p = 0 | n[p + 444 >> 2]; ; ) {
                if (0 | n[F >> 2] && ($ = 0 | n[p >> 2], X = (g = 0 | n[A + 16 >> 2]) << 1, 0 < (0 | g)))
                  for (g = 1; D[(I = $ + (g << 2) | 0) >> 2] = -+D[I >> 2], (0 | (g = g + 2 | 0)) < (0 | X); )
                    ;
                if (R >>> 0 <= (A = A + 20 | 0) >>> 0)
                  break;
                F = F + 4 | 0, p = p + 4 | 0;
              }
          }(a), function(p) {
            p |= 0;
            var R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0;
            if (Q = 0 | n[p + 480 >> 2], ct = 0 | n[p + 484 >> 2], Z = ct + (28 * Q | 0) | 0, R = 0 | n[p + 440 >> 2], I = 0 | n[p + 44 >> 2], A = 0 | n[p + 40 >> 2], g = 0 | n[p + 424 >> 2], !((0 | Q) <= 0)) {
              B = ct;
              do
                if (0 < (0 | ($ = 0 | n[B + 4 >> 2])))
                  for (F = 0 | n[B + 12 >> 2], X = B + 20 | 0, W = 0; lt = 0 | n[F + (W << 4) + 4 >> 2], rt = (0 | n[F + (W << 4) >> 2]) == 1, n[F + (W << 4) + 12 >> 2] = n[(0 | n[(rt ? A : g) + (lt << 2) >> 2] ? (rt ? I : R) + (lt << 2) | 0 : X) >> 2], (0 | (W = W + 1 | 0)) != (0 | $); )
                    ;
              while ((B = B + 28 | 0) >>> 0 < Z >>> 0);
              U = 0 | n[p + 436 >> 2], rt = p + 488 | 0, lt = p + 492 | 0, W = p + 496 | 0, j = 0;
              do {
                if (0 < (0 | n[(p = ct + (28 * j | 0) + 24 | 0) >> 2])) {
                  for (R = 0 | n[rt >> 2], A = 0; n[R + (A << 2) >> 2] = -1, A = A + 1 | 0, I = 0 | n[p >> 2], (0 | A) < (0 | I); )
                    ;
                  if (0 < (0 | I))
                    for (R = 0 | n[W >> 2], I = 0; n[R + (I << 2) >> 2] = -1, (0 | (I = I + 1 | 0)) < (0 | n[p >> 2]); )
                      ;
                }
                if (0 < (0 | n[(B = ct + (28 * j | 0) + 4 | 0) >> 2])) {
                  for (Z = 0 | n[lt >> 2], I = 0; n[Z + (I << 2) >> 2] = -1, I = I + 1 | 0, R = 0 | n[B >> 2], (0 | I) < (0 | R); )
                    ;
                  if (0 < (0 | R))
                    for (A = 0 | n[ct + (28 * j | 0) + 12 >> 2], $ = ct + (28 * j | 0) + 20 | 0, g = 0 | n[W >> 2], X = 0; I = (0 | n[A + (X << 4) + 12 >> 2]) - (0 | n[$ >> 2]) | 0, R = (0 | (R = 0 | n[(F = g + (I << 2) | 0) >> 2])) == -1 ? (0 | n[rt >> 2]) + (I << 2) | 0 : Z + (R << 2) | 0, n[R >> 2] = X, (0 | (X = (n[F >> 2] = X) + 1 | 0)) < (0 | n[B >> 2]); )
                      ;
                }
                if (0 < (0 | (R = 0 | n[p >> 2]))) {
                  X = 0 | n[rt >> 2], Z = ct + (28 * j | 0) + 12 | 0, I = (F = 0) | n[ct + (28 * j | 0) + 8 >> 2];
                  do
                    if ((0 | (A = 0 | n[X + (F << 2) >> 2])) != -1) {
                      for (g = 0 | n[Z >> 2], $ = 0 | n[lt >> 2]; R = (0 | n[g + (A << 4) >> 2]) == 1 ? (R = 0 | n[g + (A << 4) + 8 >> 2], n[ct + (28 * R | 0) + 8 >> 2] = I, 0 | n[ct + (28 * R | 0) >> 2]) : (n[U + (n[g + (A << 4) + 4 >> 2] << 2) >> 2] = I, 1), I = R + I | 0, !((0 | (A = 0 | n[$ + ((B = A) << 2) >> 2])) <= (0 | B) | (0 | A) == -1); )
                        ;
                      R = 0 | n[p >> 2];
                    }
                  while ((0 | (F = F + 1 | 0)) < (0 | R));
                }
              } while ((0 | (j = j + 1 | 0)) != (0 | Q));
            }
          }(a), Nr(a), n[a + 620 >> 2] = 0;
        }
        function ri(a) {
          a |= 0;
          var u, v, S = 0, C = 0, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0;
          if (!((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (v = (S = 0 | n[a + 544 >> 2]) + (52 * (u = 0 | n[a + 540 >> 2]) | 0) | 0, (0 | u) <= 0))) {
            u = (0 | n[a + 620 >> 2]) == 0;
            do {
              t:
                do
                  if ((0 | n[S >> 2]) == 1 && (B = +D[S + 44 >> 2], W = 0 | n[S + 36 >> 2], g = 0 | n[S + 40 >> 2], j = W + (28 * g | 0) | 0, 0 < (0 | g))) {
                    if (!u)
                      for (A = W; ; ) {
                        p = 0 | n[A >> 2];
                        do
                          if (2 <= (0 | p) && (X = 0 | n[A + 4 >> 2], !(B <= (Z = +D[X >> 2])))) {
                            for (R = 1, I = Z; ; ) {
                              if (a = R + 1 | 0, B < (C = +D[X + (R << 2) >> 2])) {
                                g = 25;
                                break;
                              }
                              if (!((0 | a) < (0 | p))) {
                                g = 26;
                                break;
                              }
                              R = a, I = C;
                            }
                            if ((0 | g) == 25) {
                              a = R + -1 | 0, C = (B - I) / (C - I);
                              break;
                            }
                            if ((0 | g) == 26) {
                              a = p + -1 | 0, C = 0;
                              break;
                            }
                          } else
                            C = a = 0;
                        while (0);
                        if (I = +D[(R = A + 16 | 0) >> 2], p = 1 & ((0 | n[(g = A + 12 | 0) >> 2]) != (0 | a) | (U = I != C) & (C == 0 | I == 0)), n[A + 24 >> 2] = 1 & U, n[A + 20 >> 2] = p, D[R >> 2] = C, n[g >> 2] = a, j >>> 0 <= (A = A + 28 | 0) >>> 0)
                          break t;
                      }
                    if (!(0 | n[S + 48 >> 2])) {
                      for (a = W; ; )
                        if (n[a + 24 >> 2] = 0, j >>> (n[a + 20 >> 2] = 0) <= (a = a + 28 | 0) >>> 0)
                          break t;
                    }
                    A = W;
                    do {
                      p = 0 | n[A >> 2];
                      do
                        if (2 <= (0 | p) && ($ = 0 | n[A + 4 >> 2], !(B <= (F = +D[$ >> 2])))) {
                          for (R = 1, I = F; ; ) {
                            if (a = R + 1 | 0, B < (C = +D[$ + (R << 2) >> 2])) {
                              g = 17;
                              break;
                            }
                            if (!((0 | a) < (0 | p))) {
                              g = 18;
                              break;
                            }
                            R = a, I = C;
                          }
                          if ((0 | g) == 17) {
                            a = R + -1 | 0, C = (B - I) / (C - I);
                            break;
                          }
                          if ((0 | g) == 18) {
                            a = p + -1 | 0, C = 0;
                            break;
                          }
                        } else
                          C = a = 0;
                      while (0);
                    } while (I = +D[(g = A + 16 | 0) >> 2], R = 1 & ((0 | n[(U = A + 12 | 0) >> 2]) != (0 | a) | (p = I != C) & (C == 0 | I == 0)), n[A + 24 >> 2] = 1 & p, n[A + 20 >> 2] = R, D[g >> 2] = C, n[U >> 2] = a, (A = A + 28 | 0) >>> 0 < j >>> 0);
                  }
                while (0);
            } while ((S = S + 52 | 0) >>> 0 < v >>> 0);
          }
        }
        function br(a) {
          a |= 0;
          var u, v, S, C, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0;
          if (!((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (C = (p = 0 | n[a + 592 >> 2]) + (48 * (S = 0 | n[a + 588 >> 2]) | 0) | 0, (0 | S) <= 0))) {
            S = (0 | n[a + 620 >> 2]) == 0;
            do {
              if (a = 0 | n[p >> 2], I = S ? 0 | n[a + 24 >> 2] : 1, (X = S ? 0 | n[a + 20 >> 2] : 1) | I) {
                F = 0 | n[a + 12 >> 2], R = +D[a + 16 >> 2], $ = (0 | F) == (0 | (a = 0 | n[a + 8 >> 2]));
                do
                  if (R != 0) {
                    if (g = F + 1 | 0, $) {
                      R = (I = a = n[p + 8 >> 2] = 1) - R, $ = 11;
                      break;
                    }
                    a = (0 | g) == (0 | a) ? 1 : 2, $ = 10;
                    break;
                  }
                while (a = 1 & (1 ^ $), $ = 10, 0);
                (0 | $) == 10 && ($ = 0, n[p + 8 >> 2] = a, I ? (g = F, a = X, $ = 11) : (g = F, a = X, I = 0)), (0 | $) == 11 && (D[p + 20 >> 2] = 1 - R, D[p + 24 >> 2] = R), a ? (n[p + 12 >> 2] = g, n[p + 16 >> 2] = g + 1) : a = 0;
              } else
                a = X;
              u = 0 | n[p + 36 >> 2];
              t:
                do
                  if (0 < (0 | u)) {
                    if (v = 0 | n[p + 40 >> 2], !S)
                      for (j = 0, R = 1; ; ) {
                        W = 0 | n[v + (j << 2) >> 2], $ = 0 | n[W + 4 >> 2], F = 0 | n[W + 8 >> 2], X = 0 | n[W + 12 >> 2], B = +D[44 + (0 | n[W >> 2]) >> 2];
                        do
                          if (1 <= (0 | X)) {
                            if ((0 | X) == 1) {
                              A = +D[F >> 2];
                              break;
                            }
                            if (B <= (A = +D[$ >> 2])) {
                              A = +D[F >> 2];
                              break;
                            }
                            for (g = 1; ; ) {
                              if (B < (Z = +D[$ + (g << 2) >> 2])) {
                                $ = 40;
                                break;
                              }
                              if (!((0 | (g = g + 1 | 0)) < (0 | X))) {
                                $ = 41;
                                break;
                              }
                              A = Z;
                            }
                            if ((0 | $) == 40) {
                              A = (1 - (A = (B - A) / (Z - A))) * +D[F + (g + -1 << 2) >> 2] + A * +D[F + (g << 2) >> 2];
                              break;
                            }
                            if ((0 | $) == 41) {
                              A = +D[F + (X + -1 << 2) >> 2];
                              break;
                            }
                          } else
                            A = 1;
                        while (0);
                        if (R = R < (D[W + 16 >> 2] = A) ? R : A, (0 | (j = j + 1 | 0)) == (0 | u))
                          break t;
                      }
                    j = 0, R = 1;
                    do
                      if (W = 0 | n[v + (j << 2) >> 2], g = 0 | n[W >> 2], 0 | n[g + 48 >> 2]) {
                        $ = 0 | n[W + 4 >> 2], F = 0 | n[W + 8 >> 2], X = 0 | n[W + 12 >> 2], B = +D[g + 44 >> 2];
                        do
                          if (1 <= (0 | X)) {
                            if ((0 | X) == 1) {
                              A = +D[F >> 2];
                              break;
                            }
                            if (B <= (A = +D[$ >> 2])) {
                              A = +D[F >> 2];
                              break;
                            }
                            for (g = 1; ; ) {
                              if (B < (Z = +D[$ + (g << 2) >> 2])) {
                                $ = 28;
                                break;
                              }
                              if (!((0 | (g = g + 1 | 0)) < (0 | X))) {
                                $ = 27;
                                break;
                              }
                              A = Z;
                            }
                            if ((0 | $) == 27) {
                              A = +D[F + (X + -1 << 2) >> 2];
                              break;
                            }
                            if ((0 | $) == 28) {
                              A = (1 - (A = (B - A) / (Z - A))) * +D[F + (g + -1 << 2) >> 2] + A * +D[F + (g << 2) >> 2];
                              break;
                            }
                          } else
                            A = 1;
                        while (0);
                        D[W + 16 >> 2] = A;
                      } else
                        A = +D[W + 16 >> 2];
                    while (R = R < A ? R : A, (0 | (j = j + 1 | 0)) != (0 | u));
                  } else
                    R = 1;
                while (0);
            } while (D[p + 44 >> 2] = R, n[p + 28 >> 2] = a, n[p + 32 >> 2] = I, (p = p + 48 | 0) >>> 0 < C >>> 0);
          }
        }
        function Ui(a, u, v) {
          a |= 0, u |= 0, v |= 0;
          var S, C, p, R = 0, I = G;
          G = G + 144 | 0, Ei(0 | (C = I), 640, 144), n[C + 48 >> 2] = R = (R = -2 - a | 0) >>> 0 < 256 ? R : 256, n[(S = C + 20 | 0) >> 2] = a, p = (n[C + 44 >> 2] = a) + R | 0, n[(a = C + 16 | 0) >> 2] = p, n[C + 28 >> 2] = p, Gi(C, u, v), 0 | R && (p = 0 | n[S >> 2], ft[p + (((0 | p) == (0 | n[a >> 2])) << 31 >> 31) >> 0] = 0), G = I;
        }
        function Gi(a, u, v) {
          Di(a |= 0, u |= 0, v |= 0);
        }
        function hi(a, u, v, S, C, p) {
          a |= 0, u = +u, v |= 0, S |= 0, C |= 0, p |= 0;
          var R, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = G;
          G = G + 560 | 0, $ = pt + 32 | 0, $t = (g = (Yt = jt = pt) + 540 | 0) + 12 | (n[(U = pt + 536 | 0) >> 2] = 0), zs(u), Xt = (0 | (I = 0 | et())) < 0 ? (zs(u = -u), I = 0 | et(), Qt = 1, 2539) : (Qt = (2049 & C | 0) != 0 & 1, 2048 & C | 0 ? 2542 : 1 & C | 0 ? 2545 : 2540);
          do
            if (!0 & (2146435072 & I | 0) == 2146435072)
              jt = (32 & p | 0) != 0, Or(a, 32, v, I = Qt + 3 | 0, -65537 & C), Ie(a, Xt, Qt), Ie(a, u != u | !1 ? jt ? 2566 : 2570 : jt ? 2558 : 2562, 3), Or(a, 32, v, I, 8192 ^ C);
            else {
              if ((I = (B = 2 * +js(u, U)) != 0) && (n[U >> 2] = (0 | n[U >> 2]) - 1), (0 | (lt = 32 | p)) == 97) {
                W = 0 | (X = 32 & p) ? Xt + 9 | 0 : Xt, Z = 2 | Qt, I = 12 - S | 0;
                do
                  if (!(11 < S >>> 0 | (0 | I) == 0)) {
                    for (u = 8; u *= 16, (0 | (I = I + -1 | 0)) != 0; )
                      ;
                    if ((0 | ft[W >> 0]) == 45) {
                      u = -(u + (-B - u));
                      break;
                    }
                    u = B + u - u;
                    break;
                  }
                while (u = B, 0);
                for ((0 | (I = 0 | tn(I = (0 | (A = 0 | n[U >> 2])) < 0 ? 0 - A | 0 : A, ((0 | I) < 0) << 31 >> 31, $t))) == (0 | $t) && (ft[(I = g + 11 | 0) >> 0] = 48), ft[I + -1 >> 0] = 43 + (A >> 31 & 2), ft[(F = I + -2 | 0) >> 0] = p + 15, A = (0 | S) < 1, g = (8 & C | 0) == 0, I = jt; $ = I + 1 | 0, ft[I >> 0] = X | we[480 + (Qt = ~~u) >> 0], u = 16 * (u - (0 | Qt)), ($ - Yt | 0) != 1 || g & A & u == 0 || (ft[$ >> 0] = 46, $ = I + 2 | 0), u != 0; )
                  I = $;
                Or(a, 32, v, $t = (I = 0 | S && (-2 - Yt + $ | 0) < (0 | S) ? S + 2 + (A = $t) - (g = F) | 0 : (A = $t) - Yt - (g = F) + $ | 0) + Z | 0, C), Ie(a, W, Z), Or(a, 48, v, $t, 65536 ^ C), Ie(a, jt, Yt = $ - Yt | 0), Or(a, 48, I - (Yt + (jt = A - g | 0)) | 0, 0, 0), Ie(a, F, jt), Or(a, 32, v, $t, 8192 ^ C), I = $t;
                break;
              }
              for (A = (0 | S) < 0 ? 6 : S, u = I ? (g = (0 | n[U >> 2]) - 28 | 0, n[U >> 2] = g, 268435456 * B) : (g = 0 | n[U >> 2], B), $ = R = (0 | g) < 0 ? $ : $ + 288 | 0; n[$ >> 2] = ct = ~~u >>> 0, $ = $ + 4 | 0, (u = 1e9 * (u - (ct >>> 0))) != 0; )
                ;
              if (ct = R, 0 < (0 | g)) {
                I = R;
                do {
                  if (X = (0 | g) < 29 ? g : 29, I >>> 0 <= (g = $ + -4 | 0) >>> 0) {
                    for (F = 0; j = 0 | rn(0 | (j = 0 | N0(0 | n[g >> 2], 0, 0 | X)), 0 | et(), 0 | F, 0), Q = 0 | rn(0 | j, 0 | (rt = 0 | et()), 0 | (Q = 0 | mn(0 | (F = 0 | Ks(0 | j, 0 | rt, 1e9, 0)), 0 | et(), -1e9, -1)), 0 | et()), et(), n[g >> 2] = Q, I >>> 0 <= (g = g + -4 | 0) >>> 0; )
                      ;
                    F && (n[(I = I + -4 | 0) >> 2] = F);
                  }
                  t:
                    do
                      if (I >>> 0 < $ >>> 0)
                        for (; ; ) {
                          if (0 | n[(g = $ + -4 | 0) >> 2])
                            break t;
                          if (!(I >>> 0 < g >>> 0)) {
                            $ = g;
                            break;
                          }
                          $ = g;
                        }
                    while (0);
                } while (g = (0 | n[U >> 2]) - X | 0, 0 < (0 | (n[U >> 2] = g)));
              } else
                I = R;
              if ((0 | g) < 0) {
                S = 1 + ((A + 25 | 0) / 9 | 0) | 0, j = (0 | lt) == 102;
                do
                  if (W = (0 | (W = 0 - g | 0)) < 9 ? W : 9, I >>> 0 < $ >>> 0) {
                    for (X = (1 << W) - 1 | 0, F = W ? 1e9 >>> W : 1e9, Z = 0, g = I; Q = 0 | n[g >> 2], n[g >> 2] = (W ? Q >>> W : Q) + Z, Z = 0 | z(Q & X, F), (g = g + 4 | 0) >>> 0 < $ >>> 0; )
                      ;
                    I = 0 | n[I >> 2] ? I : I + 4 | 0, Z && (n[$ >> 2] = Z, $ = $ + 4 | 0);
                  } else
                    I = 0 | n[I >> 2] ? I : I + 4 | 0;
                while ($ = (0 | S) < ((Q = $ - (g = j ? R : I) | 0) >> 2 | 0) ? g + (S << 2) | 0 : $, g = (0 | n[U >> 2]) + W | 0, (0 | (n[U >> 2] = g)) < 0);
                j = $;
              } else
                j = $;
              if (I >>> 0 < j >>> 0) {
                if (g = 9 * ((g = ct - I | 0) >> 2) | 0, 10 <= (F = 0 | n[I >> 2]) >>> 0)
                  for ($ = 10; g = g + 1 | 0, ($ = 10 * $ | 0) >>> 0 <= F >>> 0; )
                    ;
              } else
                g = 0;
              if ((0 | ($ = A - ((0 | lt) == 102 ? 0 : g) + (((rt = (0 | A) != 0) & (U = (0 | lt) == 103)) << 31 >> 31) | 0)) < ((9 * ((Q = j - ct | 0) >> 2) | 0) - 9 | 0)) {
                if (S = R + 4 + (($ = (0 | (Q = $ + 9216 | 0)) / 9 | 0) + -1024 << 2) | 0, (0 | ($ = Q + (0 | z($, -9)) | 0)) < 8)
                  for (F = 10; F = 10 * F | 0, (0 | $) < 7; )
                    $ = $ + 1 | 0;
                else
                  F = 10;
                if ((Z = (S + 4 | 0) == (0 | j)) & (0 | (X = (X = 0 | n[S >> 2]) - (W = 0 | z($ = (X >>> 0) / (F >>> 0) | 0, F)) | 0)) == 0)
                  $ = S;
                else if (B = 1 & $ | 0 ? 9007199254740994 : 9007199254740992, u = X >>> 0 < (Q = F >>> 1) >>> 0 ? 0.5 : Z & (0 | X) == (0 | Q) ? 1 : 1.5, Qt && (B = (Q = (0 | ft[Xt >> 0]) == 45) ? -B : B, u = Q ? -u : u), n[S >> 2] = W, B + u != B) {
                  if (999999999 < (n[S >> 2] = Q = W + F | 0) >>> 0)
                    for (g = S; ($ = g + -4 | 0) >>> (n[g >> 2] = 0) < I >>> 0 && (n[(I = I + -4 | 0) >> 2] = 0), Q = 1 + (0 | n[$ >> 2]) | 0, 999999999 < (n[$ >> 2] = Q) >>> 0; )
                      g = $;
                  else
                    $ = S;
                  if (g = 9 * ((g = ct - I | 0) >> 2) | 0, 10 <= (X = 0 | n[I >> 2]) >>> 0)
                    for (F = 10; g = g + 1 | 0, (F = 10 * F | 0) >>> 0 <= X >>> 0; )
                      ;
                } else
                  $ = S;
                Q = I, I = (lt = $ + 4 | 0) >>> 0 < j >>> 0 ? lt : j;
              } else
                Q = I, I = j;
              W = 0 - g | 0;
              t:
                do
                  if (Q >>> 0 < I >>> 0)
                    for (; ; ) {
                      if (0 | n[($ = I + -4 | 0) >> 2]) {
                        j = 1, lt = I;
                        break t;
                      }
                      if (!(Q >>> 0 < $ >>> 0)) {
                        j = 0, lt = $;
                        break;
                      }
                      I = $;
                    }
                  else
                    j = 0, lt = I;
                while (0);
              do
                if (U) {
                  if (F = (0 | g) < (0 | (I = A + (1 & (1 ^ rt)) | 0)) & -5 < (0 | g) ? (A = I + -1 - g | 0, p + -1 | 0) : (A = I + -1 | 0, p + -2 | 0), !(8 & C)) {
                    if (j && 0 | (Pt = 0 | n[lt + -4 >> 2]))
                      if ((Pt >>> 0) % 10 | 0)
                        $ = 0;
                      else
                        for (I = 10, $ = 0; $ = $ + 1 | 0, !((Pt >>> 0) % ((I = 10 * I | 0) >>> 0) | 0); )
                          ;
                    else
                      $ = 9;
                    if (I = (9 * ((I = lt - ct | 0) >> 2) | 0) - 9 | 0, (32 | F) == 102) {
                      A = (0 | A) < (0 | (p = 0 < (0 | (p = I - $ | 0)) ? p : 0)) ? A : p;
                      break;
                    }
                    A = (0 | A) < (0 | (p = 0 < (0 | (p = I + g - $ | 0)) ? p : 0)) ? A : p;
                    break;
                  }
                } else
                  F = p;
              while (0);
              if (X = (S = (0 | A) != 0) ? 1 : C >>> 3 & 1, Z = (32 | F) == 102)
                I = (rt = 0) < (0 | g) ? g : 0;
              else {
                if ((($ = $t) - (I = 0 | tn(I = (0 | g) < 0 ? W : g, ((0 | I) < 0) << 31 >> 31, $t)) | 0) < 2)
                  for (; ft[(I = I + -1 | 0) >> 0] = 48, ($ - I | 0) < 2; )
                    ;
                ft[I + -1 >> 0] = 43 + (g >> 31 & 2), ft[(I = I + -2 | 0) >> 0] = F, I = $ - (rt = I) | 0;
              }
              if (Or(a, 32, v, I = Qt + 1 + A + X + I | 0, C), Ie(a, Xt, Qt), Or(a, 48, v, I, 65536 ^ C), Z) {
                Z = W = jt + 9 | 0, F = jt + 8 | 0, $ = X = R >>> 0 < Q >>> 0 ? R : Q;
                do
                  if (g = 0 | tn(0 | n[$ >> 2], 0, W), (0 | $) == (0 | X))
                    (0 | g) == (0 | W) && (ft[F >> 0] = 48, g = F);
                  else if (jt >>> 0 < g >>> 0)
                    for (ci(0 | jt, 48, g - Yt | 0); jt >>> 0 < (g = g + -1 | 0) >>> 0; )
                      ;
                while (Ie(a, g, Z - g | 0), ($ = $ + 4 | 0) >>> 0 <= R >>> 0);
                if ((8 & C | 0) == 0 & (1 ^ S) || Ie(a, 2574, 1), $ >>> 0 < lt >>> 0 & 0 < (0 | A))
                  for (; ; ) {
                    if (jt >>> 0 < (g = 0 | tn(0 | n[$ >> 2], 0, W)) >>> 0)
                      for (ci(0 | jt, 48, g - Yt | 0); jt >>> 0 < (g = g + -1 | 0) >>> 0; )
                        ;
                    if (Ie(a, g, (0 | A) < 9 ? A : 9), g = A + -9 | 0, !(($ = $ + 4 | 0) >>> 0 < lt >>> 0 & 9 < (0 | A))) {
                      A = g;
                      break;
                    }
                    A = g;
                  }
                Or(a, 48, A + 9 | 0, 9, 0);
              } else {
                if (Q >>> 0 < (S = j ? lt : Q + 4 | 0) >>> 0 & -1 < (0 | A)) {
                  U = (8 & C | 0) == 0, j = W = jt + 9 | 0, F = 0 - Yt | 0, Z = jt + 8 | 0, X = Q;
                  do {
                    (0 | (g = 0 | tn(0 | n[X >> 2], 0, W))) == (0 | W) && (ft[Z >> 0] = 48, g = Z);
                    do
                      if ((0 | X) == (0 | Q)) {
                        if ($ = g + 1 | 0, Ie(a, g, 1), U & (0 | A) < 1) {
                          g = $;
                          break;
                        }
                        Ie(a, 2574, 1), g = $;
                      } else {
                        if (g >>> 0 <= jt >>> 0)
                          break;
                        for (ci(0 | jt, 48, g + F | 0); jt >>> 0 < (g = g + -1 | 0) >>> 0; )
                          ;
                      }
                    while (0);
                  } while (Ie(a, g, (0 | (Yt = j - g | 0)) < (0 | A) ? Yt : A), (X = X + 4 | 0) >>> 0 < S >>> 0 & -1 < (0 | (A = A - Yt | 0)));
                }
                Or(a, 48, A + 18 | 0, 18, 0), Ie(a, rt, $t - rt | 0);
              }
              Or(a, 32, v, I, 8192 ^ C);
            }
          while (0);
          return G = pt, 0 | ((0 | I) < (0 | v) ? v : I);
        }
        function Di(a, u, v) {
          a |= 0, u |= 0, v |= 0;
          var S, C, p, R, I, A, g, $, F = 0, X = 0, Z = G;
          for (G = G + 224 | 0, I = Z + 208 | 0, g = Z + 80 | 0, X = (F = $ = (A = Z) + 160 | 0) + 40 | 0; (0 | (F = F + 4 | (n[F >> 2] = 0))) < (0 | X); )
            ;
          n[I >> 2] = n[v >> 2], 0 <= (0 | ii(0, u, I, g, $)) && (R = 32 & (v = 0 | n[a >> 2]), (0 | ft[a + 74 >> 0]) < 1 && (n[a >> 2] = -33 & v), 0 | n[(X = a + 48 | 0) >> 2] ? ii(a, u, I, g, $) : (v = 0 | n[(F = a + 44 | 0) >> 2], n[F >> 2] = A, n[(S = a + 28 | 0) >> 2] = A, n[(p = a + 20 | 0) >> 2] = A, n[X >> 2] = 80, n[(C = a + 16 | 0) >> 2] = A + 80, ii(a, u, I, g, $), 0 | v && (sa[3 & n[a + 36 >> 2]](a, 0, 0), n[F >> 2] = v, n[X >> 2] = 0, n[C >> 2] = 0, n[S >> 2] = 0, n[p >> 2] = 0)), n[a >> 2] = n[a >> 2] | R), G = Z;
        }
        function ii(a, u, v, S, C) {
          a |= 0, v |= 0, S |= 0, C |= 0;
          var p, R, I, A, g, $, F, X, Z, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = G;
          G = G + 64 | 0, $ = jt + 40 | 0, Z = (R = jt) + 48 | 0, F = jt + 60 | 0, n[(X = jt + 56 | 0) >> 2] = u |= 0, g = (0 | a) != 0, A = p = R + 40 | 0, R = R + 39 | 0, I = 4 + Z | 0, U = B = u = 0;
          t:
            for (; ; ) {
              do {
                do
                  if (-1 < (0 | u)) {
                    if ((2147483647 - u | 0) < (0 | B)) {
                      n[922] = 61, u = -1;
                      break;
                    }
                    u = B + u | 0;
                    break;
                  }
                while (0);
                if (Q = 0 | n[X >> 2], !((B = 0 | ft[Q >> 0]) << 24 >> 24)) {
                  $t = 91;
                  break t;
                }
                W = Q;
                e:
                  for (; ; ) {
                    switch (B << 24 >> 24) {
                      case 37:
                        $t = 10;
                        break e;
                      case 0:
                        B = W;
                        break e;
                    }
                    n[X >> 2] = Qt = W + 1 | 0, B = 0 | ft[Qt >> 0], W = Qt;
                  }
                e:
                  do
                    if ((0 | $t) == 10) {
                      $t = 0, B = j = W;
                      do
                        if ((0 | ft[j + 1 >> 0]) != 37)
                          break e;
                      while (B = B + 1 | 0, n[X >> 2] = j = j + 2 | 0, (0 | ft[j >> 0]) == 37);
                    }
                  while (0);
              } while (B = B - Q | 0, g && Ie(a, Q, B), (0 | B) != 0);
              if (j = 0 | n[X >> 2], lt = 0 | vn(B = 0 | ft[j + 1 >> 0]) ? (W = (lt = (0 | ft[j + 2 >> 0]) == 36) ? 3 : 1, Pt = lt ? B + -48 | 0 : -1, lt ? 1 : U) : (Pt = -(W = 1), U), n[X >> 2] = W = j + W | 0, 31 < (j = ((B = 0 | ft[W >> 0]) << 24 >> 24) - 32 | 0) >>> 0 | (1 << j & 75913 | 0) == 0)
                rt = 0;
              else
                for (B = 0; ; ) {
                  if (U = 1 << j | B, n[X >> 2] = W = W + 1 | 0, 31 < (j = ((B = 0 | ft[W >> 0]) << 24 >> 24) - 32 | 0) >>> 0 | (1 << j & 75913 | 0) == 0) {
                    rt = U;
                    break;
                  }
                  B = U;
                }
              if (B << 24 >> 24 == 42) {
                if (0 | vn(B = 0 | ft[(j = W + 1 | 0) >> 0]) && (0 | ft[W + 2 >> 0]) == 36)
                  n[C + (B + -48 << 2) >> 2] = 10, U = 1, B = W + 3 | 0, W = 0 | n[S + ((0 | ft[j >> 0]) - 48 << 3) >> 2];
                else {
                  if (0 | lt) {
                    u = -1;
                    break;
                  }
                  g ? (U = 3 + (0 | n[v >> 2]) & -4, W = 0 | n[U >> 2], n[v >> 2] = U + 4, U = 0, B = j) : (B = j, W = U = 0);
                }
                j = n[X >> 2] = B, ct = (Xt = (0 | W) < 0) ? 8192 | rt : rt, Qt = U, Xt = Xt ? 0 - W | 0 : W;
              } else {
                if ((0 | (B = 0 | fi(X))) < 0) {
                  u = -1;
                  break;
                }
                j = 0 | n[X >> 2], ct = rt, Qt = lt, Xt = B;
              }
              do
                if ((0 | ft[j >> 0]) == 46) {
                  if ((0 | ft[(B = j + 1 | 0) >> 0]) != 42) {
                    n[X >> 2] = B, rt = 0 | fi(X), B = 0 | n[X >> 2];
                    break;
                  }
                  if (0 | vn(W = 0 | ft[(B = j + 2 | 0) >> 0]) && (0 | ft[j + 3 >> 0]) == 36) {
                    n[C + (W + -48 << 2) >> 2] = 10, rt = 0 | n[S + ((0 | ft[B >> 0]) - 48 << 3) >> 2], n[X >> 2] = B = j + 4 | 0;
                    break;
                  }
                  if (0 | Qt) {
                    u = -1;
                    break t;
                  }
                  g ? (lt = 3 + (0 | n[v >> 2]) & -4, W = 0 | n[lt >> 2], n[v >> 2] = lt + 4) : W = 0, n[X >> 2] = B, rt = W;
                } else
                  B = j, rt = -1;
              while (0);
              for (lt = 0; ; ) {
                if (57 < ((0 | ft[B >> 0]) - 65 | 0) >>> 0) {
                  u = -1;
                  break t;
                }
                if (n[X >> 2] = W = B + 1 | 0, !(((U = 255 & (j = 0 | ft[(0 | ft[B >> 0]) - 65 + (16 + (58 * lt | 0)) >> 0])) + -1 | 0) >>> 0 < 8))
                  break;
                B = W, lt = U;
              }
              if (!(j << 24 >> 24)) {
                u = -1;
                break;
              }
              W = -1 < (0 | Pt);
              do
                if (j << 24 >> 24 == 19) {
                  if (W) {
                    u = -1;
                    break t;
                  }
                  $t = 52;
                } else {
                  if (W) {
                    n[C + (Pt << 2) >> 2] = U, Pt = 0 | n[(U = S + (Pt << 3) | 0) + 4 >> 2], n[($t = $) >> 2] = n[U >> 2], n[$t + 4 >> 2] = Pt, $t = 52;
                    break;
                  }
                  if (!g) {
                    u = 0;
                    break t;
                  }
                  Pi($, U, v), $t = 53;
                }
              while (0);
              (0 | $t) == 52 && ($t = 0, g ? $t = 53 : B = 0);
              e:
                do
                  if ((0 | $t) == 53) {
                    j = ($t = 0) != (0 | lt) & (15 & (j = 0 | ft[B >> 0]) | 0) == 3 ? -33 & j : j, B = -65537 & ct, Pt = 8192 & ct | 0 ? B : ct;
                    r:
                      do
                        switch (0 | j) {
                          case 110:
                            switch ((255 & lt) << 24 >> 24) {
                              case 0:
                              case 1:
                                n[n[$ >> 2] >> 2] = u, B = 0;
                                break e;
                              case 2:
                                B = 0 | n[$ >> 2], n[B >> 2] = u, n[B + 4 >> 2] = ((0 | u) < 0) << 31 >> 31, B = 0;
                                break e;
                              case 3:
                                tr[n[$ >> 2] >> 1] = u, B = 0;
                                break e;
                              case 4:
                                ft[n[$ >> 2] >> 0] = u, B = 0;
                                break e;
                              case 6:
                                n[n[$ >> 2] >> 2] = u, B = 0;
                                break e;
                              case 7:
                                B = 0 | n[$ >> 2], n[B >> 2] = u, n[B + 4 >> 2] = ((0 | u) < 0) << 31 >> 31, B = 0;
                                break e;
                              default:
                                B = 0;
                                break e;
                            }
                          case 112:
                            B = 8 | Pt, W = 8 < rt >>> 0 ? rt : 8, U = 120, $t = 65;
                            break;
                          case 88:
                          case 120:
                            B = Pt, W = rt, U = j, $t = 65;
                            break;
                          case 111:
                            rt = (8 & (B = Pt) | 0) == 0 | (0 | (j = A - (lt = 0 | function(pt, Ot, Jt) {
                              if (Jt |= 0, !((0 | (pt |= 0)) == 0 & (0 | (Ot |= 0)) == 0))
                                for (; ft[(Jt = Jt + -1 | 0) >> 0] = 7 & pt | 48, pt = 0 | na(0 | pt, 0 | Ot, 3), Ot = 0 | et(), !((0 | pt) == 0 & (0 | Ot) == 0); )
                                  ;
                              return 0 | Jt;
                            }(Q = 0 | n[(ct = $) >> 2], ct = 0 | n[ct + 4 >> 2], p)) | 0)) < (0 | rt) ? rt : j + 1 | 0, j = 0, W = 2522, $t = 71;
                            break;
                          case 105:
                          case 100:
                            if (B = 0 | n[(W = $) >> 2], (0 | (W = 0 | n[W + 4 >> 2])) < 0) {
                              B = 0 | qr(0, 0, 0 | B, 0 | W), W = 0 | et(), n[(j = $) >> 2] = B, n[j + 4 >> 2] = W, j = 1, U = 2522, $t = 70;
                              break r;
                            }
                            j = (2049 & Pt | 0) != 0 & 1, U = 2048 & Pt | 0 ? 2523 : 1 & Pt | 0 ? 2524 : 2522, $t = 70;
                            break r;
                          case 117:
                            B = 0 | n[(W = $) >> 2], W = 0 | n[W + 4 >> 2], j = 0, U = 2522, $t = 70;
                            break;
                          case 99:
                            ft[R >> 0] = n[$ >> 2], Q = R, lt = B, U = 1, j = 0, W = 2522, B = A;
                            break;
                          case 115:
                            Q = ct = 0 | (ct = 0 | n[$ >> 2]) ? ct : 2532, lt = B, U = (Yt = (0 | (Pt = 0 | function(pt, Ot) {
                              pt |= 0;
                              var Jt = 0, Dt = 0;
                              Jt = (0 | (Ot |= 0)) != 0;
                              i:
                                do
                                  if (Jt & (3 & pt | 0) != 0)
                                    for (; ; ) {
                                      if (!(0 | ft[pt >> 0]))
                                        break i;
                                      if (!((Jt = (0 | (Ot = Ot + -1 | 0)) != 0) & (3 & (pt = pt + 1 | 0) | 0) != 0)) {
                                        Dt = 5;
                                        break;
                                      }
                                    }
                                  else
                                    Dt = 5;
                                while (0);
                              i:
                                do
                                  if ((0 | Dt) == 5) {
                                    do
                                      if (Jt) {
                                        if (!(0 | ft[pt >> 0])) {
                                          if (Ot)
                                            break i;
                                          break;
                                        }
                                        n:
                                          do
                                            if (3 < Ot >>> 0)
                                              for (; ; ) {
                                                if ((-2139062144 & (Jt = 0 | n[pt >> 2]) ^ -2139062144) & Jt + -16843009 | 0)
                                                  break n;
                                                if (pt = pt + 4 | 0, (Ot = Ot + -4 | 0) >>> 0 <= 3) {
                                                  Dt = 11;
                                                  break;
                                                }
                                              }
                                            else
                                              Dt = 11;
                                          while (0);
                                        if ((0 | Dt) == 11 && !Ot)
                                          break;
                                        for (; ; ) {
                                          if (!(0 | ft[pt >> 0]))
                                            break i;
                                          if (!(Ot = Ot + -1 | 0))
                                            break;
                                          pt = pt + 1 | 0;
                                        }
                                      }
                                    while (0);
                                    pt = 0;
                                  }
                                while (0);
                              return 0 | pt;
                            }(ct, rt))) == 0) ? rt : Pt - ct | 0, j = 0, W = 2522, B = Yt ? ct + rt | 0 : Pt;
                            break;
                          case 67:
                            n[Z >> 2] = n[$ >> 2], n[I >> 2] = 0, j = n[$ >> 2] = Z, rt = -1, $t = 78;
                            break;
                          case 83:
                            if (rt) {
                              j = 0 | n[$ >> 2], $t = 78;
                              break r;
                            }
                            Or(a, 32, Xt, 0, Pt), B = 0, $t = 88;
                            break r;
                          case 65:
                          case 71:
                          case 70:
                          case 69:
                          case 97:
                          case 103:
                          case 102:
                          case 101:
                            B = 0 | hi(a, +f[$ >> 3], Xt, rt, Pt, j);
                            break e;
                          default:
                            lt = Pt, U = rt, j = 0, W = 2522, B = A;
                        }
                      while (0);
                    r:
                      do
                        if ((0 | $t) == 65)
                          lt = 0 | ta(Q = 0 | n[(ct = $) >> 2], ct = 0 | n[ct + 4 >> 2], p, 32 & U), rt = W, j = (Yt = (8 & B | 0) == 0 | (0 | Q) == 0 & (0 | ct) == 0) ? 0 : 2, W = Yt ? 2522 : 2522 + (U >>> 4) | 0, $t = 71;
                        else if ((0 | $t) == 70)
                          lt = 0 | tn(Q = B, ct = W, p), B = Pt, W = U, $t = 71;
                        else if ((0 | $t) == 78) {
                          for (B = $t = 0, lt = j; W = 0 | n[lt >> 2]; ) {
                            if ((U = (0 | (W = 0 | Hs(F, W))) < 0) | (rt - B | 0) >>> 0 < W >>> 0) {
                              $t = 82;
                              break;
                            }
                            if (!((B = W + B | 0) >>> 0 < rt >>> 0))
                              break;
                            lt = lt + 4 | 0;
                          }
                          if ((0 | $t) == 82 && ($t = 0, U)) {
                            u = -1;
                            break t;
                          }
                          if (Or(a, 32, Xt, B, Pt), B)
                            for (U = 0; ; ) {
                              if (!(W = 0 | n[j >> 2])) {
                                $t = 88;
                                break r;
                              }
                              if ((0 | B) < (0 | (U = (W = 0 | Hs(F, W)) + U | 0))) {
                                $t = 88;
                                break r;
                              }
                              if (Ie(a, F, W), B >>> 0 <= U >>> 0) {
                                $t = 88;
                                break;
                              }
                              j = j + 4 | 0;
                            }
                          else
                            B = 0, $t = 88;
                        }
                      while (0);
                    if ((0 | $t) == 71)
                      Yt = ($t = 0) != (0 | rt) | (U = (0 | Q) != 0 | (0 | ct) != 0), U = A - lt + (1 & (1 ^ U)) | 0, Q = Yt ? lt : p, lt = -1 < (0 | rt) ? -65537 & B : B, U = Yt ? (0 | U) < (0 | rt) ? rt : U : 0, B = A;
                    else if ((0 | $t) == 88) {
                      $t = 0, Or(a, 32, Xt, B, 8192 ^ Pt), B = (0 | B) < (0 | Xt) ? Xt : B;
                      break;
                    }
                    Or(a, 32, B = (0 | Xt) < (0 | (Yt = (ct = (0 | U) < (0 | (Pt = B - Q | 0)) ? Pt : U) + j | 0)) ? Yt : Xt, Yt, lt), Ie(a, W, j), Or(a, 48, B, Yt, 65536 ^ lt), Or(a, 48, ct, Pt, 0), Ie(a, Q, Pt), Or(a, 32, B, Yt, 8192 ^ lt);
                  }
                while (0);
              U = Qt;
            }
          t:
            do
              if ((0 | $t) == 91 && !a)
                if (U) {
                  for (u = 1; B = 0 | n[C + (u << 2) >> 2]; )
                    if (Pi(S + (u << 3) | 0, B, v), 10 <= (u = u + 1 | 0) >>> 0) {
                      u = 1;
                      break t;
                    }
                  for (B = 0; ; ) {
                    if (u = u + 1 | 0, 0 | B) {
                      u = -1;
                      break t;
                    }
                    if (10 <= u >>> 0) {
                      u = 1;
                      break t;
                    }
                    B = 0 | n[C + (u << 2) >> 2];
                  }
                } else
                  u = 0;
            while (0);
          return G = jt, 0 | u;
        }
        function Ie(a, u, v) {
          u |= 0, v |= 0, 32 & n[(a |= 0) >> 2] || ra(u, v, a);
        }
        function vn(a) {
          return ((a |= 0) + -48 | 0) >>> 0 < 10 | 0;
        }
        function fi(a) {
          var u = 0, S = 0, v = 0, S = 0 | n[(a |= 0) >> 2];
          if (0 | vn((u = 0 | ft[S >> 0]) << 24 >> 24))
            for (v = u, u = 0; u = (10 * u | 0) - 48 + (v << 24 >> 24) | 0, n[a >> 2] = S = S + 1 | 0, (0 | vn((v = 0 | ft[S >> 0]) << 24 >> 24)) != 0; )
              ;
          else
            u = 0;
          return 0 | u;
        }
        function Pi(a, u, v) {
          a |= 0, u |= 0, v |= 0;
          var S, C = 0, p = 0;
          t:
            do
              if (u >>> 0 <= 20)
                switch (0 | u) {
                  case 9:
                    C = 3 + (0 | n[v >> 2]) & -4, u = 0 | n[C >> 2], n[v >> 2] = C + 4, n[a >> 2] = u;
                    break t;
                  case 10:
                    C = 3 + (0 | n[v >> 2]) & -4, u = 0 | n[C >> 2], n[v >> 2] = C + 4, n[(C = a) >> 2] = u, n[C + 4 >> 2] = ((0 | u) < 0) << 31 >> 31;
                    break t;
                  case 11:
                    C = 3 + (0 | n[v >> 2]) & -4, u = 0 | n[C >> 2], n[v >> 2] = C + 4, n[(C = a) >> 2] = u, n[C + 4 >> 2] = 0;
                    break t;
                  case 12:
                    C = 7 + (0 | n[v >> 2]) & -8, p = 0 | n[(u = C) >> 2], u = 0 | n[u + 4 >> 2], n[v >> 2] = C + 8, n[(C = a) >> 2] = p, n[C + 4 >> 2] = u;
                    break t;
                  case 13:
                    p = 3 + (0 | n[v >> 2]) & -4, C = 0 | n[p >> 2], n[v >> 2] = p + 4, n[(p = a) >> 2] = C = (65535 & C) << 16 >> 16, n[p + 4 >> 2] = ((0 | C) < 0) << 31 >> 31;
                    break t;
                  case 14:
                    p = 3 + (0 | n[v >> 2]) & -4, C = 0 | n[p >> 2], n[v >> 2] = p + 4, n[(p = a) >> 2] = 65535 & C, n[p + 4 >> 2] = 0;
                    break t;
                  case 15:
                    p = 3 + (0 | n[v >> 2]) & -4, C = 0 | n[p >> 2], n[v >> 2] = p + 4, n[(p = a) >> 2] = C = (255 & C) << 24 >> 24, n[p + 4 >> 2] = ((0 | C) < 0) << 31 >> 31;
                    break t;
                  case 16:
                    p = 3 + (0 | n[v >> 2]) & -4, C = 0 | n[p >> 2], n[v >> 2] = p + 4, n[(p = a) >> 2] = 255 & C, n[p + 4 >> 2] = 0;
                    break t;
                  case 17:
                    p = 7 + (0 | n[v >> 2]) & -8, S = +f[p >> 3], n[v >> 2] = p + 8, f[a >> 3] = S;
                    break t;
                  case 18:
                    (function(R, I) {
                      R |= 0;
                      var A = 7 + (0 | n[(I |= 0) >> 2]) & -8, g = +f[A >> 3];
                      n[I >> 2] = 8 + A, f[R >> 3] = g;
                    })(a, v);
                    break t;
                  default:
                    break t;
                }
            while (0);
        }
        function ta(a, u, v, S) {
          if (v |= 0, S |= 0, !((0 | (a |= 0)) == 0 & (0 | (u |= 0)) == 0))
            for (; ft[(v = v + -1 | 0) >> 0] = 0 | we[480 + (15 & a) >> 0] | S, !((0 | (a = 0 | na(0 | a, 0 | u, 4))) == 0 & (0 | (u = 0 | et())) == 0); )
              ;
          return 0 | v;
        }
        function tn(a, u, v) {
          v |= 0;
          var S, C = 0, p = 0;
          if (0 < (u |= 0) >>> 0 | (0 | u) == 0 & 4294967295 < (a |= 0) >>> 0)
            for (; p = 0 | rn(0 | (S = a), 0 | (C = u), 0 | (p = 0 | mn(0 | (a = 0 | Ks(0 | a, 0 | u, 10, 0)), 0 | (u = 0 | et()), -10, -1)), 0 | et()), et(), ft[(v = v + -1 | 0) >> 0] = 255 & p | 48, 9 < C >>> 0 | (0 | C) == 9 & 4294967295 < S >>> 0; )
              ;
          if (a)
            for (; C = 255 & ((p = a) + (0 | z(a = (a >>> 0) / 10 | 0, -10)) | 48), ft[(v = v + -1 | 0) >> 0] = C, 10 <= p >>> 0; )
              ;
          return 0 | v;
        }
        function Or(a, u, v, S, C) {
          a |= 0, u |= 0;
          var p, R = G;
          if (G = G + 256 | 0, p = R, (0 | (S |= 0)) < (0 | (v |= 0)) & (73728 & (C |= 0) | 0) == 0) {
            if (ci(0 | p, u << 24 >> 24 | 0, 0 | ((C = v - S | 0) >>> 0 < 256 ? C : 256)), 255 < C >>> 0) {
              for (S = C; Ie(a, p, 256), 255 < (S = S + -256 | 0) >>> 0; )
                ;
              C &= 255;
            }
            Ie(a, p, C);
          }
          G = R;
        }
        function Hs(a, u) {
          return u |= 0, 0 | (a = (a |= 0) ? 0 | ea(a, u) : 0);
        }
        function ea(a, u) {
          a |= 0, u |= 0;
          do
            if (a) {
              if (u >>> 0 < 128) {
                ft[a >> 0] = u, a = 1;
                break;
              }
              if (!(0 | n[916])) {
                if ((-128 & u | 0) == 57216) {
                  ft[a >> 0] = u, a = 1;
                  break;
                }
                n[922] = 25, a = -1;
                break;
              }
              if (u >>> 0 < 2048) {
                ft[a >> 0] = u >>> 6 | 192, ft[a + 1 >> 0] = 63 & u | 128, a = 2;
                break;
              }
              if (u >>> 0 < 55296 | (-8192 & u | 0) == 57344) {
                ft[a >> 0] = u >>> 12 | 224, ft[a + 1 >> 0] = u >>> 6 & 63 | 128, ft[a + 2 >> 0] = 63 & u | 128, a = 3;
                break;
              }
              if ((u + -65536 | 0) >>> 0 < 1048576) {
                ft[a >> 0] = u >>> 18 | 240, ft[a + 1 >> 0] = u >>> 12 & 63 | 128, ft[a + 2 >> 0] = u >>> 6 & 63 | 128, ft[a + 3 >> 0] = 63 & u | 128, a = 4;
                break;
              }
              n[922] = 25, a = -1;
              break;
            }
          while (a = 1, 0);
          return 0 | a;
        }
        function ra(a, u, v) {
          a |= 0, u |= 0;
          var S, C = 0, p = 0, R = 0;
          (C = 0 | n[(p = (v |= 0) + 16 | 0) >> 2]) ? R = 5 : 0 | function(I) {
            var A = 0, g = 0;
            return g = 0 | ft[(A = 74 + (I |= 0) | 0) >> 0], ft[A >> 0] = 255 + g | g, A = 8 & (A = 0 | n[I >> 2]) ? (n[I >> 2] = 32 | A, -1) : (n[I + 8 >> 2] = 0, n[I + 4 >> 2] = 0, A = 0 | n[I + 44 >> 2], n[I + 28 >> 2] = A, n[I + 20 >> 2] = A, n[I + 16 >> 2] = A + (0 | n[I + 48 >> 2]), 0), 0 | A;
          }(v) || (C = 0 | n[p >> 2], R = 5);
          t:
            do
              if ((0 | R) == 5) {
                if ((C - (p = R = 0 | n[(S = v + 20 | 0) >> 2]) | 0) >>> 0 < u >>> 0) {
                  sa[3 & n[v + 36 >> 2]](v, a, u);
                  break;
                }
                e:
                  do
                    if ((0 | ft[v + 75 >> 0]) < 0 | (0 | u) == 0)
                      C = u;
                    else {
                      for (R = u; (0 | ft[a + (C = R + -1 | 0) >> 0]) != 10; ) {
                        if (!C) {
                          C = u;
                          break e;
                        }
                        R = C;
                      }
                      if ((0 | sa[3 & n[v + 36 >> 2]](v, a, R)) >>> 0 < R >>> 0)
                        break t;
                      p = 0 | n[S >> 2], C = u - R | 0, a = a + R | 0;
                    }
                  while (0);
                Ei(0 | p, 0 | a, 0 | C), n[S >> 2] = (0 | n[S >> 2]) + C;
              }
            while (0);
        }
        function zs(a) {
          return f[d >> 3] = a = +a, a = 0 | n[d >> 2], tt(0 | n[d + 4 >> 2]), 0 | a;
        }
        function js(a, u) {
          u |= 0;
          var v, S, C = 0;
          switch (f[d >> 3] = a = +a, S = 0 | na(0 | (C = 0 | n[d >> 2]), 0 | (v = 0 | n[d + 4 >> 2]), 52), et(), 2047 & S) {
            case 0:
              C = a != 0 ? (a = +js(18446744073709552e3 * a, u), (0 | n[u >> 2]) - 64 | 0) : 0, n[u >> 2] = C;
              break;
            case 2047:
              break;
            default:
              n[u >> 2] = (2047 & S) - 1022, n[d >> 2] = C, n[d + 4 >> 2] = -2146435073 & v | 1071644672, a = +f[d >> 3];
          }
          return +a;
        }
        function Ws(a) {
          var u, C = 0, v = 0, S = 0, C = 0 | ft[(a |= 0) >> 0];
          t:
            do
              if (C << 24 >> 24)
                for (v = a, S = 4, a = 1033; ; ) {
                  if (!(C << 24 >> 24 == (u = 0 | ft[a >> 0]) << 24 >> 24 & (0 | (S = S + -1 | 0)) != 0 & u << 24 >> 24 != 0))
                    break t;
                  if (a = a + 1 | 0, !((C = 0 | ft[(v = v + 1 | 0) >> 0]) << 24 >> 24)) {
                    C = 0;
                    break;
                  }
                }
              else
                C = 0, a = 1033;
            while (0);
          return (255 & C) - (0 | we[a >> 0]) | 0;
        }
        function ps(a, u, v) {
          u |= 0, v |= 0;
          var S, C, p, R = 0, I = 0, A = G;
          G = G + 240 | 0, n[(p = A) >> 2] = a |= 0;
          t:
            do
              if (1 < (0 | u))
                for (I = R = a, a = 1; ; ) {
                  if (-1 < (0 | oe(R, S = (I = I + -4 | 0) + (0 - (0 | n[v + ((C = u + -2 | 0) << 2) >> 2])) | 0)) && -1 < (0 | oe(R, I)) || (R = p + (a << 2) | 0, a = a + 1 | 0, (0 | (u = -1 < (0 | oe(S, I)) ? (I = n[R >> 2] = S, u + -1 | 0) : (n[R >> 2] = I, C))) <= 1))
                    break t;
                  R = 0 | n[p >> 2];
                }
              else
                a = 1;
            while (0);
          Zs(p, a), G = A;
        }
        function Rn(a, u) {
          var v = 0, S = 0, C = (a |= 0) + 4 | 0;
          31 < (u |= 0) >>> 0 ? (v = 0 | n[C >> 2], n[a >> 2] = v, u = u + -32 | (S = n[C >> 2] = 0)) : (v = 0 | n[a >> 2], S = 0 | n[C >> 2]), n[a >> 2] = S << 32 - u | (u ? v >>> u : v), n[C >> 2] = u ? S >>> u : S;
        }
        function Sn(a, u, v, S, C, p) {
          a |= 0, v |= 0, S |= 0, C |= 0, p |= 0;
          var R, I, A, g = 0, $ = 0, F = G;
          G = G + 240 | 0, n[(I = (A = F) + 232 | 0) >> 2] = u |= 0, n[(R = 4 + I | 0) >> 2] = v, n[A >> 2] = a;
          t:
            do
              if ((0 | u) != 1 | (0 | v) != 0 && (g = a + (0 - (0 | n[p + (S << 2) >> 2])) | 0, 1 <= (0 | oe(g, a))))
                for (u = g, $ = 1, g = (0 | C) == 0; ; ) {
                  if (g & 1 < (0 | S)) {
                    if (-1 < (0 | oe(g = a + -4 | 0, u))) {
                      u = a, g = $, v = 10;
                      break t;
                    }
                    if (-1 < (0 | oe(g + (0 - (0 | n[p + (S + -2 << 2) >> 2])) | 0, u))) {
                      u = a, g = $, v = 10;
                      break t;
                    }
                  }
                  if (v = $ + 1 | 0, n[A + ($ << 2) >> 2] = u, Rn(I, C = 0 | Ys(I)), S = C + S | 0, !((0 | n[I >> 2]) != 1 | (0 | n[R >> 2]) != 0)) {
                    g = v, v = 10;
                    break t;
                  }
                  if ((0 | oe(g = u + (0 - (0 | n[p + (S << 2) >> 2])) | 0, 0 | n[A >> 2])) < 1) {
                    g = v, v = 10;
                    break;
                  }
                  a = u, u = g, $ = v, g = 1;
                }
              else
                v = 9;
            while (0);
          (0 | v) == 9 && !(0 | C) && (u = a, g = 1, v = 10), (0 | v) == 10 && (Zs(A, g), ps(u, S, p)), G = F;
        }
        function Nn(a, u) {
          var v = 0, S = 0, C = (a |= 0) + 4 | 0;
          31 < (u |= 0) >>> 0 ? (v = 0 | n[a >> 2], n[C >> 2] = v, u = u + -32 | (S = n[a >> 2] = 0)) : (v = 0 | n[C >> 2], S = 0 | n[a >> 2]), n[C >> 2] = ((C = 32 - u | 0) ? S >>> C : S) | v << u, n[a >> 2] = S << u;
        }
        function Ys(a) {
          var u;
          return (u = 0 | qs((0 | n[(a |= 0) >> 2]) - 1 | 0)) ? 0 | u : 0 | (0 | (a = 0 | qs(0 | n[a + 4 >> 2])) ? a + 32 | 0 : 0);
        }
        function qs(a) {
          var u = 0;
          if (a |= 0)
            if (1 & a)
              u = 0;
            else
              for (u = 0; u = u + 1 | 0, !(2 & a); )
                a >>>= 1;
          else
            u = 32;
          return 0 | u;
        }
        function Zs(a, u) {
          a |= 0;
          var v, S = 0, C = G;
          if (G = G + 256 | 0, S = C, 2 <= (0 | (u |= 0)))
            for (Ei(0 | (n[a + (u << 2) >> 2] = S), 0 | n[a >> 2], 4), S = 0; Ei(0 | n[(v = a + (S << 2) | 0) >> 2], 0 | n[a + ((S = S + 1 | 0) << 2) >> 2], 4), n[v >> 2] = 4 + (0 | n[v >> 2]), (0 | S) != (0 | u); )
              ;
          G = C;
        }
        function en(a) {
          a |= 0;
          var u = 0, v = 0, S = 0, C = 0, p = 0, R = 0, I = 0, A = 0, g = 0, $ = 0, F = 0, X = 0, Z = 0, B = 0, W = 0, j = 0, U = 0, rt = 0, lt = 0, Q = 0, ct = G;
          G = G + 16 | 0, X = ct;
          do
            if (a >>> 0 < 245) {
              if (F = 0 | n[923], 3 & (v = (a = (g = a >>> 0 < 11 ? 16 : a + 11 & -8) >>> 3) ? F >>> a : F) | 0)
                return a = 0 | n[(u = (C = 3732 + ((S = (1 & v ^ 1) + a | 0) << 1 << 2) | 0) + 8 | 0) >> 2], (0 | (v = 0 | n[(p = a + 8 | 0) >> 2])) == (0 | C) ? n[923] = F & ~(1 << S) : (n[v + 12 >> 2] = C, n[u >> 2] = v), n[a + 4 >> 2] = 3 | (Q = S << 3), n[(Q = a + Q + 4 | 0) >> 2] = 1 | n[Q >> 2], G = ct, 0 | (Q = p);
              if (($ = 0 | n[925]) >>> 0 < g >>> 0) {
                if (0 | v)
                  return p = 0 | n[(u = (v = 3732 + ((S = ((a = (S = (I = (S = ((S = v << a & ((S = 2 << a) | 0 - S)) & 0 - S) - 1 | 0) >>> 12 & 16) ? S >>> I : S) >>> 5 & 8) | I | (p = (S = a ? S >>> a : S) >>> 2 & 4) | (u = (S = p ? S >>> p : S) >>> 1 & 2) | (v = (S = u ? S >>> u : S) >>> 1 & 1)) + (v ? S >>> v : S) | 0) << 1 << 2) | 0) + 8 | 0) >> 2], (0 | (a = 0 | n[(I = p + 8 | 0) >> 2])) == (0 | v) ? n[923] = a = F & ~(1 << S) : (n[a + 12 >> 2] = v, n[u >> 2] = a, a = F), R = (Q = S << 3) - g | 0, n[p + 4 >> 2] = 3 | g, n[(C = p + g | 0) + 4 >> 2] = 1 | R, n[p + Q >> 2] = R, 0 | $ && (S = 0 | n[928], v = 3732 + ((u = $ >>> 3) << 1 << 2) | 0, a = a & (u = 1 << u) ? 0 | n[(u = a = v + 8 | 0) >> 2] : (n[923] = a | u, u = v + 8 | 0, v), n[u >> 2] = S, n[a + 12 >> 2] = S, n[S + 8 >> 2] = a, n[S + 12 >> 2] = v), n[925] = R, n[928] = C, G = ct, 0 | (Q = I);
                if (p = 0 | n[924]) {
                  for (A = 0 | n[3996 + (((S = (A = (C = (A = (p & 0 - p) - 1 | 0) >>> 12 & 16) ? A >>> C : A) >>> 5 & 8) | C | (R = (A = S ? A >>> S : A) >>> 2 & 4) | (v = (A = R ? A >>> R : A) >>> 1 & 2) | (I = (A = v ? A >>> v : A) >>> 1 & 1)) + (I ? A >>> I : A) << 2) >> 2], I = (-8 & n[A + 4 >> 2]) - g | 0, v = A; !(!(a = 0 | n[v + 16 >> 2]) && !(a = 0 | n[v + 20 >> 2])); )
                    I = (R = (v = (-8 & n[a + 4 >> 2]) - g | 0) >>> 0 < I >>> 0) ? v : I, v = a, A = R ? a : A;
                  if (A >>> 0 < (R = A + g | 0) >>> 0) {
                    C = 0 | n[A + 24 >> 2], u = 0 | n[A + 12 >> 2];
                    do
                      if ((0 | u) == (0 | A)) {
                        if (!(u = 0 | n[(a = A + 20 | 0) >> 2]) && !(u = 0 | n[(a = A + 16 | 0) >> 2])) {
                          v = 0;
                          break;
                        }
                        for (; ; )
                          if (v = 0 | n[(S = u + 20 | 0) >> 2])
                            u = v, a = S;
                          else {
                            if (!(v = 0 | n[(S = u + 16 | 0) >> 2]))
                              break;
                            u = v, a = S;
                          }
                        n[a >> 2] = 0, v = u;
                      } else
                        v = 0 | n[A + 8 >> 2], n[v + 12 >> 2] = u, n[u + 8 >> 2] = v, v = u;
                    while (0);
                    do
                      if (0 | C) {
                        if (u = 0 | n[A + 28 >> 2], (0 | A) == (0 | n[(a = 3996 + (u << 2) | 0) >> 2])) {
                          if (!(n[a >> 2] = v)) {
                            n[924] = p & ~(1 << u);
                            break;
                          }
                        } else if (!(n[((0 | n[(Q = C + 16 | 0) >> 2]) == (0 | A) ? Q : C + 20 | 0) >> 2] = v))
                          break;
                        n[v + 24 >> 2] = C, 0 | (u = 0 | n[A + 16 >> 2]) && (n[v + 16 >> 2] = u, n[u + 24 >> 2] = v), 0 | (u = 0 | n[A + 20 >> 2]) && (n[v + 20 >> 2] = u, n[u + 24 >> 2] = v);
                      }
                    while (0);
                    return I >>> 0 < 16 ? (n[A + 4 >> 2] = 3 | (Q = I + g | 0), n[(Q = A + Q + 4 | 0) >> 2] = 1 | n[Q >> 2]) : (n[A + 4 >> 2] = 3 | g, n[R + 4 >> 2] = 1 | I, n[R + I >> 2] = I, 0 | $ && (S = 0 | n[928], v = 3732 + ((u = $ >>> 3) << 1 << 2) | 0, a = (u = 1 << u) & F ? 0 | n[(u = a = v + 8 | 0) >> 2] : (n[923] = u | F, u = v + 8 | 0, v), n[u >> 2] = S, n[a + 12 >> 2] = S, n[S + 8 >> 2] = a, n[S + 12 >> 2] = v), n[925] = I, n[928] = R), G = ct, 0 | (Q = A + 8 | 0);
                  }
                  F = g;
                } else
                  F = g;
              } else
                F = g;
            } else if (a >>> 0 <= 4294967231)
              if (g = -8 & (a = a + 11 | 0), S = 0 | n[924]) {
                v = 0 - g | 0, A = (a >>>= 8) ? 16777215 < g >>> 0 ? 31 : 1 & ((j = (A = 14 - ((I = (I = (A = a << (F = (F = a + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | F | (j = (j = (A <<= I) + 245760 | 0) >>> 16 & 2)) + ((A <<= j) >>> 15) | 0) + 7 | 0) ? g >>> j : g) | A << 1 : 0, a = 0 | n[3996 + (A << 2) >> 2];
                t:
                  do
                    if (a)
                      for (R = g << (((C = 0) | A) == 31 ? 0 : 25 - (A >>> 1) | 0), I = a, a = 0; ; ) {
                        if ((p = (-8 & n[I + 4 >> 2]) - g | 0) >>> 0 < v >>> 0) {
                          if (!p) {
                            v = 0, a = C = I, j = 65;
                            break t;
                          }
                          v = p, a = I;
                        }
                        if (C = (0 | (j = 0 | n[I + 20 >> 2])) == 0 | (0 | j) == (0 | (I = 0 | n[I + 16 + (R >>> 31 << 2) >> 2])) ? C : j, !I) {
                          j = 61;
                          break;
                        }
                        R <<= 1;
                      }
                    else
                      a = C = 0, j = 61;
                  while (0);
                if ((0 | j) == 61) {
                  if ((0 | C) == 0 & (0 | a) == 0) {
                    if (!(a = ((a = 2 << A) | 0 - a) & S)) {
                      F = g;
                      break;
                    }
                    C = 0 | n[3996 + (((R = (C = (I = (C = (a & 0 - a) - 1 | 0) >>> 12 & 16) ? C >>> I : C) >>> 5 & 8) | I | (A = (C = R ? C >>> R : C) >>> 2 & 4) | (F = (C = A ? C >>> A : C) >>> 1 & 2) | (a = (C = F ? C >>> F : C) >>> 1 & 1)) + (a ? C >>> a : C) << 2) >> 2], a = 0;
                  }
                  C ? j = 65 : (I = v, p = a);
                }
                if ((0 | j) == 65)
                  for (; ; ) {
                    if (v = (p = (F = (-8 & n[C + 4 >> 2]) - g | 0) >>> 0 < v >>> 0) ? F : v, p = p ? C : a, !(a = (a = 0 | n[C + 16 >> 2]) || 0 | n[C + 20 >> 2])) {
                      I = v;
                      break;
                    }
                    C = a, a = p;
                  }
                if (0 | p && I >>> 0 < ((0 | n[925]) - g | 0) >>> 0 && p >>> 0 < ($ = p + g | 0) >>> 0) {
                  R = 0 | n[p + 24 >> 2], u = 0 | n[p + 12 >> 2];
                  do
                    if ((0 | u) == (0 | p)) {
                      if (!(u = 0 | n[(a = p + 20 | 0) >> 2]) && !(u = 0 | n[(a = p + 16 | 0) >> 2])) {
                        u = 0;
                        break;
                      }
                      for (; ; )
                        if (v = 0 | n[(C = u + 20 | 0) >> 2])
                          u = v, a = C;
                        else {
                          if (!(v = 0 | n[(C = u + 16 | 0) >> 2]))
                            break;
                          u = v, a = C;
                        }
                      n[a >> 2] = 0;
                    } else
                      Q = 0 | n[p + 8 >> 2], n[Q + 12 >> 2] = u, n[u + 8 >> 2] = Q;
                  while (0);
                  do
                    if (R) {
                      if (a = 0 | n[p + 28 >> 2], (0 | p) == (0 | n[(v = 3996 + (a << 2) | 0) >> 2])) {
                        if (!(n[v >> 2] = u)) {
                          S &= ~(1 << a), n[924] = S;
                          break;
                        }
                      } else if (!(n[((0 | n[(Q = R + 16 | 0) >> 2]) == (0 | p) ? Q : R + 20 | 0) >> 2] = u))
                        break;
                      n[u + 24 >> 2] = R, 0 | (a = 0 | n[p + 16 >> 2]) && (n[u + 16 >> 2] = a, n[a + 24 >> 2] = u), (a = 0 | n[p + 20 >> 2]) && (n[u + 20 >> 2] = a, n[a + 24 >> 2] = u);
                    }
                  while (0);
                  t:
                    do
                      if (I >>> 0 < 16)
                        n[p + 4 >> 2] = 3 | (Q = I + g | 0), n[(Q = p + Q + 4 | 0) >> 2] = 1 | n[Q >> 2];
                      else {
                        if (n[p + 4 >> 2] = 3 | g, n[$ + 4 >> 2] = 1 | I, u = (n[$ + I >> 2] = I) >>> 3, I >>> 0 < 256) {
                          v = 3732 + (u << 1 << 2) | 0, a = (a = 0 | n[923]) & (u = 1 << u) ? 0 | n[(u = a = v + 8 | 0) >> 2] : (n[923] = a | u, u = v + 8 | 0, v), n[u >> 2] = $, n[a + 12 >> 2] = $, n[$ + 8 >> 2] = a, n[$ + 12 >> 2] = v;
                          break;
                        }
                        if (u = 3996 + ((v = (u = I >>> 8) ? 16777215 < I >>> 0 ? 31 : 1 & ((Q = (v = 14 - ((rt = (rt = (v = u << (lt = (lt = u + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | lt | (Q = (Q = (v <<= rt) + 245760 | 0) >>> 16 & 2)) + ((v <<= Q) >>> 15) | 0) + 7 | 0) ? I >>> Q : I) | v << 1 : 0) << 2) | 0, n[$ + 28 >> 2] = v, n[(a = $ + 16 | 0) + 4 >> 2] = 0, n[a >> 2] = 0, !(S & (a = 1 << v))) {
                          n[924] = S | a, n[u >> 2] = $, n[$ + 24 >> 2] = u, n[$ + 12 >> 2] = $, n[$ + 8 >> 2] = $;
                          break;
                        }
                        u = 0 | n[u >> 2];
                        e:
                          do
                            if ((-8 & n[u + 4 >> 2] | 0) != (0 | I)) {
                              for (S = I << ((0 | v) == 31 ? 0 : 25 - (v >>> 1) | 0); a = 0 | n[(v = u + 16 + (S >>> 31 << 2) | 0) >> 2]; ) {
                                if ((-8 & n[a + 4 >> 2] | 0) == (0 | I)) {
                                  u = a;
                                  break e;
                                }
                                S <<= 1, u = a;
                              }
                              n[v >> 2] = $, n[$ + 24 >> 2] = u, n[$ + 12 >> 2] = $, n[$ + 8 >> 2] = $;
                              break t;
                            }
                          while (0);
                        Q = 0 | n[(lt = u + 8 | 0) >> 2], n[Q + 12 >> 2] = $, n[lt >> 2] = $, n[$ + 8 >> 2] = Q, n[$ + 12 >> 2] = u, n[$ + 24 >> 2] = 0;
                      }
                    while (0);
                  return G = ct, 0 | (Q = p + 8 | 0);
                }
                F = g;
              } else
                F = g;
            else
              F = -1;
          while (0);
          if (F >>> 0 <= (v = 0 | n[925]) >>> 0)
            return u = 0 | n[928], 15 < (a = v - F | 0) >>> 0 ? (n[928] = Q = u + F | 0, n[925] = a, n[Q + 4 >> 2] = 1 | a, n[u + v >> 2] = a, n[u + 4 >> 2] = 3 | F) : (n[925] = 0, n[928] = 0, n[u + 4 >> 2] = 3 | v, n[(Q = u + v + 4 | 0) >> 2] = 1 | n[Q >> 2]), G = ct, 0 | (Q = u + 8 | 0);
          if (F >>> 0 < (R = 0 | n[926]) >>> 0)
            return n[926] = rt = R - F | 0, Q = 0 | n[929], n[929] = lt = Q + F | 0, n[lt + 4 >> 2] = 1 | rt, n[Q + 4 >> 2] = 3 | F, G = ct, 0 | (Q = Q + 8 | 0);
          if (I = F + 48 | 0, (g = (p = (a = 0 | n[1041] ? 0 | n[1043] : (n[1043] = 4096, n[1042] = 4096, n[1044] = -1, n[1045] = -1, n[1046] = 0, n[1034] = 0, n[1041] = -16 & X ^ 1431655768, 4096)) + (A = F + 47 | 0) | 0) & (S = 0 - a | 0)) >>> 0 <= F >>> 0 || 0 | (a = 0 | n[1033]) && (X = ($ = 0 | n[1031]) + g | 0) >>> 0 <= $ >>> 0 | a >>> 0 < X >>> 0)
            return G = ct, (Q = 0) | Q;
          t:
            do
              if (4 & n[1034])
                u = 0, j = 143;
              else {
                v = 0 | n[929];
                e:
                  do
                    if (v) {
                      for (C = 4140; !((a = 0 | n[C >> 2]) >>> 0 <= v >>> 0 && (a + (0 | n[(W = C + 4 | 0) >> 2]) | 0) >>> 0 > v >>> 0); ) {
                        if (!(a = 0 | n[C + 8 >> 2])) {
                          j = 128;
                          break e;
                        }
                        C = a;
                      }
                      if ((u = p - R & S) >>> 0 < 2147483647)
                        if ((0 | (a = 0 | Bi(u))) == ((0 | n[C >> 2]) + (0 | n[W >> 2]) | 0)) {
                          if ((0 | a) != -1) {
                            R = a, p = u, j = 145;
                            break t;
                          }
                        } else
                          S = a, j = 136;
                      else
                        u = 0;
                    } else
                      j = 128;
                  while (0);
                do
                  if ((0 | j) == 128)
                    if ((0 | (v = 0 | Bi(0))) != -1 && (u = v, B = (u = ((B = (Z = 0 | n[1042]) + -1 | 0) & u | 0 ? (B + u & 0 - Z) - u | 0 : 0) + g | 0) + (Z = 0 | n[1031]) | 0, F >>> 0 < u >>> 0 & u >>> 0 < 2147483647)) {
                      if (0 | (W = 0 | n[1033]) && B >>> 0 <= Z >>> 0 | W >>> 0 < B >>> 0) {
                        u = 0;
                        break;
                      }
                      if ((0 | (a = 0 | Bi(u))) == (0 | v)) {
                        R = v, p = u, j = 145;
                        break t;
                      }
                      S = a, j = 136;
                    } else
                      u = 0;
                while (0);
                do
                  if ((0 | j) == 136) {
                    if (v = 0 - u | 0, !(u >>> 0 < I >>> 0 & u >>> 0 < 2147483647 & (0 | S) != -1)) {
                      if ((0 | S) == -1) {
                        u = 0;
                        break;
                      }
                      R = S, p = u, j = 145;
                      break t;
                    }
                    if (2147483647 <= (a = A - u + (a = 0 | n[1043]) & 0 - a) >>> 0) {
                      R = S, p = u, j = 145;
                      break t;
                    }
                    if ((0 | Bi(a)) == -1) {
                      Bi(v), u = 0;
                      break;
                    }
                    R = S, p = a + u | 0, j = 145;
                    break t;
                  }
                while (0);
                n[1034] = 4 | n[1034], j = 143;
              }
            while (0);
          if ((0 | j) == 143 && g >>> 0 < 2147483647 && !((0 | (U = 0 | Bi(g))) == -1 | 1 ^ (rt = (F + 40 | 0) >>> 0 < (lt = (W = 0 | Bi(0)) - U | 0) >>> 0) | U >>> 0 < W >>> 0 & (0 | U) != -1 & (0 | W) != -1 ^ 1) && (R = U, p = rt ? lt : u, j = 145), (0 | j) == 145) {
            u = (0 | n[1031]) + p | 0, (n[1031] = u) >>> 0 > (0 | n[1032]) >>> 0 && (n[1032] = u), A = 0 | n[929];
            t:
              do
                if (A) {
                  for (C = 4140; ; ) {
                    if ((0 | R) == ((u = 0 | n[C >> 2]) + (a = 0 | n[(S = C + 4 | 0) >> 2]) | 0)) {
                      j = 154;
                      break;
                    }
                    if (!(v = 0 | n[C + 8 >> 2]))
                      break;
                    C = v;
                  }
                  if ((0 | j) == 154 && !(8 & n[C + 12 >> 2] | 0) && A >>> 0 < R >>> 0 & u >>> 0 <= A >>> 0) {
                    n[S >> 2] = a + p, lt = A + (rt = 7 & (rt = A + 8 | 0) | 0 ? 0 - rt & 7 : 0) | 0, rt = (Q = (0 | n[926]) + p | 0) - rt | 0, n[929] = lt, n[926] = rt, n[lt + 4 >> 2] = 1 | rt, n[A + Q + 4 >> 2] = 40, n[930] = n[1045];
                    break;
                  }
                  for (R >>> 0 < (0 | n[927]) >>> 0 && (n[927] = R), v = R + p | 0, a = 4140; ; ) {
                    if ((0 | n[a >> 2]) == (0 | v)) {
                      j = 162;
                      break;
                    }
                    if (!(u = 0 | n[a + 8 >> 2]))
                      break;
                    a = u;
                  }
                  if ((0 | j) == 162 && !(8 & n[a + 12 >> 2] | 0)) {
                    n[a >> 2] = R, n[($ = a + 4 | 0) >> 2] = (0 | n[$ >> 2]) + p, g = ($ = R + (7 & ($ = R + 8 | 0) | 0 ? 0 - $ & 7 : 0) | 0) + F | 0, I = (u = v + (7 & (u = v + 8 | 0) | 0 ? 0 - u & 7 : 0) | 0) - $ - F | 0, n[$ + 4 >> 2] = 3 | F;
                    e:
                      do
                        if ((0 | A) == (0 | u))
                          Q = (0 | n[926]) + I | 0, n[926] = Q, n[929] = g, n[g + 4 >> 2] = 1 | Q;
                        else {
                          if ((0 | n[928]) == (0 | u)) {
                            Q = (0 | n[925]) + I | 0, n[925] = Q, n[928] = g, n[g + 4 >> 2] = 1 | Q, n[g + Q >> 2] = Q;
                            break;
                          }
                          if ((3 & (a = 0 | n[u + 4 >> 2]) | 0) == 1) {
                            R = -8 & a, S = a >>> 3;
                            r:
                              do {
                                if (a >>> 0 < 256) {
                                  if (a = 0 | n[u + 8 >> 2], (0 | (v = 0 | n[u + 12 >> 2])) == (0 | a)) {
                                    n[923] = n[923] & ~(1 << S);
                                    break;
                                  }
                                  n[a + 12 >> 2] = v, n[v + 8 >> 2] = a;
                                  break;
                                }
                                p = 0 | n[u + 24 >> 2], a = 0 | n[u + 12 >> 2];
                                do
                                  if ((0 | a) == (0 | u)) {
                                    if (!(a = 0 | n[(v = (S = u + 16 | 0) + 4 | 0) >> 2])) {
                                      if (!(a = 0 | n[S >> 2])) {
                                        a = 0;
                                        break;
                                      }
                                      v = S;
                                    }
                                    for (; ; )
                                      if (S = 0 | n[(C = a + 20 | 0) >> 2])
                                        a = S, v = C;
                                      else {
                                        if (!(S = 0 | n[(C = a + 16 | 0) >> 2]))
                                          break;
                                        a = S, v = C;
                                      }
                                    n[v >> 2] = 0;
                                  } else
                                    Q = 0 | n[u + 8 >> 2], n[Q + 12 >> 2] = a, n[a + 8 >> 2] = Q;
                                while (0);
                                if (!p)
                                  break;
                                S = 3996 + ((v = 0 | n[u + 28 >> 2]) << 2) | 0;
                                do {
                                  if ((0 | n[S >> 2]) == (0 | u)) {
                                    if (0 | (n[S >> 2] = a))
                                      break;
                                    n[924] = n[924] & ~(1 << v);
                                    break r;
                                  }
                                  if (!(n[((0 | n[(Q = p + 16 | 0) >> 2]) == (0 | u) ? Q : p + 20 | 0) >> 2] = a))
                                    break r;
                                } while (0);
                              } while (n[a + 24 >> 2] = p, 0 | (v = 0 | n[(S = u + 16 | 0) >> 2]) && (n[a + 16 >> 2] = v, n[v + 24 >> 2] = a), (v = 0 | n[S + 4 >> 2]) && (n[a + 20 >> 2] = v, n[v + 24 >> 2] = a, 0));
                            u = u + R | 0, C = R + I | 0;
                          } else
                            C = I;
                          if (n[(u = u + 4 | 0) >> 2] = -2 & n[u >> 2], n[g + 4 >> 2] = 1 | C, u = (n[g + C >> 2] = C) >>> 3, C >>> 0 < 256) {
                            v = 3732 + (u << 1 << 2) | 0, a = (a = 0 | n[923]) & (u = 1 << u) ? 0 | n[(u = a = v + 8 | 0) >> 2] : (n[923] = a | u, u = v + 8 | 0, v), n[u >> 2] = g, n[a + 12 >> 2] = g, n[g + 8 >> 2] = a, n[g + 12 >> 2] = v;
                            break;
                          }
                          u = C >>> 8;
                          do
                            if (u) {
                              if (16777215 < C >>> 0) {
                                S = 31;
                                break;
                              }
                              S = 1 & ((Q = (S = 14 - ((rt = (rt = (S = u << (lt = (lt = u + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | lt | (Q = (Q = (S <<= rt) + 245760 | 0) >>> 16 & 2)) + ((S <<= Q) >>> 15) | 0) + 7 | 0) ? C >>> Q : C) | S << 1;
                            } else
                              S = 0;
                          while (0);
                          if (a = 3996 + (S << 2) | 0, n[g + 28 >> 2] = S, n[(u = g + 16 | 0) + 4 >> 2] = 0, !((u = (n[u >> 2] = 0) | n[924]) & (v = 1 << S))) {
                            n[924] = u | v, n[a >> 2] = g, n[g + 24 >> 2] = a, n[g + 12 >> 2] = g, n[g + 8 >> 2] = g;
                            break;
                          }
                          u = 0 | n[a >> 2];
                          r:
                            do
                              if ((-8 & n[u + 4 >> 2] | 0) != (0 | C)) {
                                for (S = C << ((0 | S) == 31 ? 0 : 25 - (S >>> 1) | 0); a = 0 | n[(v = u + 16 + (S >>> 31 << 2) | 0) >> 2]; ) {
                                  if ((-8 & n[a + 4 >> 2] | 0) == (0 | C)) {
                                    u = a;
                                    break r;
                                  }
                                  S <<= 1, u = a;
                                }
                                n[v >> 2] = g, n[g + 24 >> 2] = u, n[g + 12 >> 2] = g, n[g + 8 >> 2] = g;
                                break e;
                              }
                            while (0);
                          Q = 0 | n[(lt = u + 8 | 0) >> 2], n[Q + 12 >> 2] = g, n[lt >> 2] = g, n[g + 8 >> 2] = Q, n[g + 12 >> 2] = u, n[g + 24 >> 2] = 0;
                        }
                      while (0);
                    return G = ct, 0 | (Q = $ + 8 | 0);
                  }
                  for (a = 4140; !((u = 0 | n[a >> 2]) >>> 0 <= A >>> 0 && A >>> 0 < (Q = u + (0 | n[a + 4 >> 2]) | 0) >>> 0); )
                    a = 0 | n[a + 8 >> 2];
                  for (u = (a = (a = (C = Q + -47 | 0) + (7 & (a = C + 8 | 0) | 0 ? 0 - a & 7 : 0) | 0) >>> 0 < (C = A + 16 | 0) >>> 0 ? A : a) + 8 | 0, lt = R + (rt = 7 & (rt = R + 8 | 0) | 0 ? 0 - rt & 7 : 0) | 0, rt = (v = p + -40 | 0) - rt | 0, n[929] = lt, n[926] = rt, n[lt + 4 >> 2] = 1 | rt, n[R + v + 4 >> 2] = 40, n[930] = n[1045], n[(v = a + 4 | 0) >> 2] = 27, n[u >> 2] = n[1035], n[u + 4 >> 2] = n[1036], n[u + 8 >> 2] = n[1037], n[u + 12 >> 2] = n[1038], n[1035] = R, n[1036] = p, n[1038] = 0, n[1037] = u, u = a + 24 | 0; n[(u = (lt = u) + 4 | 0) >> 2] = 7, (lt + 8 | 0) >>> 0 < Q >>> 0; )
                    ;
                  if ((0 | a) != (0 | A)) {
                    if (p = a - A | 0, n[v >> 2] = -2 & n[v >> 2], n[A + 4 >> 2] = 1 | p, u = (n[a >> 2] = p) >>> 3, p >>> 0 < 256) {
                      v = 3732 + (u << 1 << 2) | 0, a = (a = 0 | n[923]) & (u = 1 << u) ? 0 | n[(u = a = v + 8 | 0) >> 2] : (n[923] = a | u, u = v + 8 | 0, v), n[u >> 2] = A, n[a + 12 >> 2] = A, n[A + 8 >> 2] = a, n[A + 12 >> 2] = v;
                      break;
                    }
                    if (v = 3996 + ((S = (u = p >>> 8) ? 16777215 < p >>> 0 ? 31 : 1 & ((Q = (S = 14 - ((rt = (rt = (S = u << (lt = (lt = u + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | lt | (Q = (Q = (S <<= rt) + 245760 | 0) >>> 16 & 2)) + ((S <<= Q) >>> 15) | 0) + 7 | 0) ? p >>> Q : p) | S << 1 : 0) << 2) | 0, n[A + 28 >> 2] = S, n[A + 20 >> 2] = 0, !((u = (n[C >> 2] = 0) | n[924]) & (a = 1 << S))) {
                      n[924] = u | a, n[v >> 2] = A, n[A + 24 >> 2] = v, n[A + 12 >> 2] = A, n[A + 8 >> 2] = A;
                      break;
                    }
                    u = 0 | n[v >> 2];
                    e:
                      do
                        if ((-8 & n[u + 4 >> 2] | 0) != (0 | p)) {
                          for (S = p << ((0 | S) == 31 ? 0 : 25 - (S >>> 1) | 0); a = 0 | n[(v = u + 16 + (S >>> 31 << 2) | 0) >> 2]; ) {
                            if ((-8 & n[a + 4 >> 2] | 0) == (0 | p)) {
                              u = a;
                              break e;
                            }
                            S <<= 1, u = a;
                          }
                          n[v >> 2] = A, n[A + 24 >> 2] = u, n[A + 12 >> 2] = A, n[A + 8 >> 2] = A;
                          break t;
                        }
                      while (0);
                    Q = 0 | n[(lt = u + 8 | 0) >> 2], n[Q + 12 >> 2] = A, n[lt >> 2] = A, n[A + 8 >> 2] = Q, n[A + 12 >> 2] = u, n[A + 24 >> 2] = 0;
                  }
                } else
                  (0 | (Q = 0 | n[927])) == 0 | R >>> 0 < Q >>> 0 && (n[927] = R), n[1035] = R, n[1036] = p, n[1038] = 0, n[932] = n[1041], n[931] = -1, n[936] = 3732, n[935] = 3732, n[938] = 3740, n[937] = 3740, n[940] = 3748, n[939] = 3748, n[942] = 3756, n[941] = 3756, n[944] = 3764, n[943] = 3764, n[946] = 3772, n[945] = 3772, n[948] = 3780, n[947] = 3780, n[950] = 3788, n[949] = 3788, n[952] = 3796, n[951] = 3796, n[954] = 3804, n[953] = 3804, n[956] = 3812, n[955] = 3812, n[958] = 3820, n[957] = 3820, n[960] = 3828, n[959] = 3828, n[962] = 3836, n[961] = 3836, n[964] = 3844, n[963] = 3844, n[966] = 3852, n[965] = 3852, n[968] = 3860, n[967] = 3860, n[970] = 3868, n[969] = 3868, n[972] = 3876, n[971] = 3876, n[974] = 3884, n[973] = 3884, n[976] = 3892, n[975] = 3892, n[978] = 3900, n[977] = 3900, n[980] = 3908, n[979] = 3908, n[982] = 3916, n[981] = 3916, n[984] = 3924, n[983] = 3924, n[986] = 3932, n[985] = 3932, n[988] = 3940, n[987] = 3940, n[990] = 3948, n[989] = 3948, n[992] = 3956, n[991] = 3956, n[994] = 3964, n[993] = 3964, n[996] = 3972, n[995] = 3972, n[998] = 3980, n[997] = 3980, lt = R + (rt = 7 & (rt = R + 8 | 0) | 0 ? 0 - rt & 7 : 0) | 0, rt = (Q = p + -40 | 0) - rt | 0, n[929] = lt, n[926] = rt, n[lt + 4 >> 2] = 1 | rt, n[R + Q + 4 >> 2] = 40, n[930] = n[1045];
              while (0);
            if (F >>> 0 < (u = 0 | n[926]) >>> 0)
              return n[926] = rt = u - F | 0, Q = 0 | n[929], n[929] = lt = Q + F | 0, n[lt + 4 >> 2] = 1 | rt, n[Q + 4 >> 2] = 3 | F, G = ct, 0 | (Q = Q + 8 | 0);
          }
          return n[922] = 48, G = ct, (Q = 0) | Q;
        }
        function Ln(a) {
          var u = 0, v = 0, S = 0, C = 0, p = 0, R = 0, I = 0, A = 0, g = 0;
          if (a |= 0) {
            S = 0 | n[927], g = (v = a + -8 | 0) + (u = -8 & (a = 0 | n[a + -4 >> 2])) | 0;
            do
              if (1 & a)
                A = I = v;
              else {
                if (C = 0 | n[v >> 2], !(3 & a) || (R = C + u | 0, (p = v + (0 - C) | 0) >>> 0 < S >>> 0))
                  return;
                if ((0 | n[928]) == (0 | p)) {
                  if ((3 & (a = 0 | n[(u = g + 4 | 0) >> 2]) | 0) == 3)
                    return n[925] = R, n[u >> 2] = -2 & a, n[p + 4 >> 2] = 1 | R, void (n[p + R >> 2] = R);
                  A = I = p, u = R;
                  break;
                }
                if (v = C >>> 3, C >>> 0 < 256) {
                  if (a = 0 | n[p + 8 >> 2], (0 | (u = 0 | n[p + 12 >> 2])) == (0 | a)) {
                    n[923] = n[923] & ~(1 << v), A = I = p, u = R;
                    break;
                  }
                  n[a + 12 >> 2] = u, n[u + 8 >> 2] = a, A = I = p, u = R;
                  break;
                }
                C = 0 | n[p + 24 >> 2], a = 0 | n[p + 12 >> 2];
                do
                  if ((0 | a) == (0 | p)) {
                    if (!(a = 0 | n[(u = (v = p + 16 | 0) + 4 | 0) >> 2])) {
                      if (!(a = 0 | n[v >> 2])) {
                        v = 0;
                        break;
                      }
                      u = v;
                    }
                    for (; ; )
                      if (v = 0 | n[(S = a + 20 | 0) >> 2])
                        a = v, u = S;
                      else {
                        if (!(v = 0 | n[(S = a + 16 | 0) >> 2]))
                          break;
                        a = v, u = S;
                      }
                    n[u >> 2] = 0, v = a;
                  } else
                    v = 0 | n[p + 8 >> 2], n[v + 12 >> 2] = a, n[a + 8 >> 2] = v, v = a;
                while (0);
                if (C) {
                  if (a = 0 | n[p + 28 >> 2], (0 | n[(u = 3996 + (a << 2) | 0) >> 2]) == (0 | p)) {
                    if (!(n[u >> 2] = v)) {
                      n[924] = n[924] & ~(1 << a), A = I = p, u = R;
                      break;
                    }
                  } else if (!(n[((0 | n[(A = C + 16 | 0) >> 2]) == (0 | p) ? A : C + 20 | 0) >> 2] = v)) {
                    A = I = p, u = R;
                    break;
                  }
                  n[v + 24 >> 2] = C, 0 | (a = 0 | n[(u = p + 16 | 0) >> 2]) && (n[v + 16 >> 2] = a, n[a + 24 >> 2] = v), u = (A = I = ((a = 0 | n[u + 4 >> 2]) && (n[v + 20 >> 2] = a, n[a + 24 >> 2] = v), p), R);
                } else
                  A = I = p, u = R;
              }
            while (0);
            if (!(g >>> 0 <= I >>> 0) && 1 & (v = 0 | n[(a = g + 4 | 0) >> 2])) {
              if (2 & v)
                n[a >> 2] = -2 & v, n[A + 4 >> 2] = 1 | u, C = n[I + u >> 2] = u;
              else {
                if ((0 | n[929]) == (0 | g))
                  return g = (0 | n[926]) + u | 0, n[926] = g, n[929] = A, n[A + 4 >> 2] = 1 | g, void ((0 | A) == (0 | n[928]) && (n[928] = 0, n[925] = 0));
                if ((0 | n[928]) == (0 | g))
                  return g = (0 | n[925]) + u | 0, n[925] = g, n[928] = I, n[A + 4 >> 2] = 1 | g, void (n[I + g >> 2] = g);
                C = (-8 & v) + u | 0, S = v >>> 3;
                do {
                  if (v >>> 0 < 256) {
                    if (u = 0 | n[g + 8 >> 2], (0 | (a = 0 | n[g + 12 >> 2])) == (0 | u)) {
                      n[923] = n[923] & ~(1 << S);
                      break;
                    }
                    n[u + 12 >> 2] = a, n[a + 8 >> 2] = u;
                    break;
                  }
                  p = 0 | n[g + 24 >> 2], a = 0 | n[g + 12 >> 2];
                  do
                    if ((0 | a) == (0 | g)) {
                      if (!(a = 0 | n[(u = (v = g + 16 | 0) + 4 | 0) >> 2])) {
                        if (!(a = 0 | n[v >> 2])) {
                          v = 0;
                          break;
                        }
                        u = v;
                      }
                      for (; ; )
                        if (v = 0 | n[(S = a + 20 | 0) >> 2])
                          a = v, u = S;
                        else {
                          if (!(v = 0 | n[(S = a + 16 | 0) >> 2]))
                            break;
                          a = v, u = S;
                        }
                      n[u >> 2] = 0, v = a;
                    } else
                      v = 0 | n[g + 8 >> 2], n[v + 12 >> 2] = a, n[a + 8 >> 2] = v, v = a;
                  while (0);
                  if (0 | p) {
                    if (a = 0 | n[g + 28 >> 2], (0 | n[(u = 3996 + (a << 2) | 0) >> 2]) == (0 | g)) {
                      if (!(n[u >> 2] = v)) {
                        n[924] = n[924] & ~(1 << a);
                        break;
                      }
                    } else if (!(n[((0 | n[(R = p + 16 | 0) >> 2]) == (0 | g) ? R : p + 20 | 0) >> 2] = v))
                      break;
                    n[v + 24 >> 2] = p, 0 | (a = 0 | n[(u = g + 16 | 0) >> 2]) && (n[v + 16 >> 2] = a, n[a + 24 >> 2] = v), 0 | (a = 0 | n[u + 4 >> 2]) && (n[v + 20 >> 2] = a, n[a + 24 >> 2] = v);
                  }
                } while (0);
                if (n[A + 4 >> 2] = 1 | C, n[I + C >> 2] = C, (0 | A) == (0 | n[928]))
                  return void (n[925] = C);
              }
              if (a = C >>> 3, C >>> 0 < 256)
                return v = 3732 + (a << 1 << 2) | 0, u = (u = 0 | n[923]) & (a = 1 << a) ? 0 | n[(a = u = v + 8 | 0) >> 2] : (n[923] = u | a, a = v + 8 | 0, v), n[a >> 2] = A, n[u + 12 >> 2] = A, n[A + 8 >> 2] = u, void (n[A + 12 >> 2] = v);
              u = 3996 + ((S = (a = C >>> 8) ? 16777215 < C >>> 0 ? 31 : 1 & ((g = (S = 14 - ((R = (R = (S = a << (I = (I = a + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | I | (g = (g = (S <<= R) + 245760 | 0) >>> 16 & 2)) + ((S <<= g) >>> 15) | 0) + 7 | 0) ? C >>> g : C) | S << 1 : 0) << 2) | 0, n[A + 28 >> 2] = S, n[A + 20 >> 2] = 0, a = (n[A + 16 >> 2] = 0) | n[924], v = 1 << S;
              t:
                do
                  if (a & v) {
                    a = 0 | n[u >> 2];
                    e:
                      do
                        if ((-8 & n[a + 4 >> 2] | 0) != (0 | C)) {
                          for (S = C << ((0 | S) == 31 ? 0 : 25 - (S >>> 1) | 0); u = 0 | n[(v = a + 16 + (S >>> 31 << 2) | 0) >> 2]; ) {
                            if ((-8 & n[u + 4 >> 2] | 0) == (0 | C)) {
                              a = u;
                              break e;
                            }
                            S <<= 1, a = u;
                          }
                          n[v >> 2] = A, n[A + 24 >> 2] = a, n[A + 12 >> 2] = A, n[A + 8 >> 2] = A;
                          break t;
                        }
                      while (0);
                    g = 0 | n[(I = a + 8 | 0) >> 2], n[g + 12 >> 2] = A, n[I >> 2] = A, n[A + 8 >> 2] = g, n[A + 12 >> 2] = a, n[A + 24 >> 2] = 0;
                  } else
                    n[924] = a | v, n[u >> 2] = A, n[A + 24 >> 2] = u, n[A + 12 >> 2] = A, n[A + 8 >> 2] = A;
                while (0);
              if (g = (0 | n[931]) - 1 | 0, !(0 | (n[931] = g))) {
                for (a = 4148; a = 0 | n[a >> 2]; )
                  a = a + 8 | 0;
                n[931] = -1;
              }
            }
          }
        }
        function On(a, u) {
          var A = 0, v = 0, S = 0, C = 0, p = 0, R = 0, I = 0, I = (a |= 0) + (u |= 0) | 0, A = 0 | n[a + 4 >> 2];
          do
            if (1 & A)
              R = a, a = u;
            else {
              if (v = 0 | n[a >> 2], !(3 & A))
                return;
              if (p = v + u | 0, (0 | n[928]) == (0 | (C = a + (0 - v) | 0))) {
                if ((3 & (A = 0 | n[(a = I + 4 | 0) >> 2]) | 0) == 3)
                  return n[925] = p, n[a >> 2] = -2 & A, n[C + 4 >> 2] = 1 | p, void (n[I >> 2] = p);
                R = C, a = p;
                break;
              }
              if (u = v >>> 3, v >>> 0 < 256) {
                if (A = 0 | n[C + 8 >> 2], (0 | (a = 0 | n[C + 12 >> 2])) == (0 | A)) {
                  n[923] = n[923] & ~(1 << u), R = C, a = p;
                  break;
                }
                n[A + 12 >> 2] = a, n[a + 8 >> 2] = A, R = C, a = p;
                break;
              }
              S = 0 | n[C + 24 >> 2], A = 0 | n[C + 12 >> 2];
              do
                if ((0 | A) == (0 | C)) {
                  if (!(A = 0 | n[(a = (u = C + 16 | 0) + 4 | 0) >> 2])) {
                    if (!(A = 0 | n[u >> 2])) {
                      u = 0;
                      break;
                    }
                    a = u;
                  }
                  for (; ; )
                    if (u = 0 | n[(v = A + 20 | 0) >> 2])
                      A = u, a = v;
                    else {
                      if (!(u = 0 | n[(v = A + 16 | 0) >> 2]))
                        break;
                      A = u, a = v;
                    }
                  n[a >> 2] = 0, u = A;
                } else
                  u = 0 | n[C + 8 >> 2], n[u + 12 >> 2] = A, n[A + 8 >> 2] = u, u = A;
              while (0);
              if (S) {
                if (A = 0 | n[C + 28 >> 2], (0 | n[(a = 3996 + (A << 2) | 0) >> 2]) == (0 | C)) {
                  if (!(n[a >> 2] = u)) {
                    n[924] = n[924] & ~(1 << A), R = C, a = p;
                    break;
                  }
                } else if (!(n[((0 | n[(R = S + 16 | 0) >> 2]) == (0 | C) ? R : S + 20 | 0) >> 2] = u)) {
                  R = C, a = p;
                  break;
                }
                n[u + 24 >> 2] = S, 0 | (A = 0 | n[(a = C + 16 | 0) >> 2]) && (n[u + 16 >> 2] = A, n[A + 24 >> 2] = u), a = (R = ((A = 0 | n[a + 4 >> 2]) && (n[u + 20 >> 2] = A, n[A + 24 >> 2] = u), C), p);
              } else
                R = C, a = p;
            }
          while (0);
          if (2 & (u = 0 | n[(A = I + 4 | 0) >> 2]))
            n[A >> 2] = -2 & u, n[R + 4 >> 2] = 1 | a, n[R + a >> 2] = a;
          else {
            if ((0 | n[929]) == (0 | I))
              return I = (0 | n[926]) + a | 0, n[926] = I, n[929] = R, n[R + 4 >> 2] = 1 | I, void ((0 | R) == (0 | n[928]) && (n[928] = 0, n[925] = 0));
            if ((0 | n[928]) == (0 | I))
              return I = (0 | n[925]) + a | 0, n[925] = I, n[928] = R, n[R + 4 >> 2] = 1 | I, void (n[R + I >> 2] = I);
            C = (-8 & u) + a | 0, v = u >>> 3;
            do {
              if (u >>> 0 < 256) {
                if (a = 0 | n[I + 8 >> 2], (0 | (A = 0 | n[I + 12 >> 2])) == (0 | a)) {
                  n[923] = n[923] & ~(1 << v);
                  break;
                }
                n[a + 12 >> 2] = A, n[A + 8 >> 2] = a;
                break;
              }
              S = 0 | n[I + 24 >> 2], A = 0 | n[I + 12 >> 2];
              do
                if ((0 | A) == (0 | I)) {
                  if (!(A = 0 | n[(a = (u = I + 16 | 0) + 4 | 0) >> 2])) {
                    if (!(A = 0 | n[u >> 2])) {
                      u = 0;
                      break;
                    }
                    a = u;
                  }
                  for (; ; )
                    if (u = 0 | n[(v = A + 20 | 0) >> 2])
                      A = u, a = v;
                    else {
                      if (!(u = 0 | n[(v = A + 16 | 0) >> 2]))
                        break;
                      A = u, a = v;
                    }
                  n[a >> 2] = 0, u = A;
                } else
                  u = 0 | n[I + 8 >> 2], n[u + 12 >> 2] = A, n[A + 8 >> 2] = u, u = A;
              while (0);
              if (0 | S) {
                if (A = 0 | n[I + 28 >> 2], (0 | n[(a = 3996 + (A << 2) | 0) >> 2]) == (0 | I)) {
                  if (!(n[a >> 2] = u)) {
                    n[924] = n[924] & ~(1 << A);
                    break;
                  }
                } else if (!(n[((0 | n[(p = S + 16 | 0) >> 2]) == (0 | I) ? p : S + 20 | 0) >> 2] = u))
                  break;
                n[u + 24 >> 2] = S, 0 | (A = 0 | n[(a = I + 16 | 0) >> 2]) && (n[u + 16 >> 2] = A, n[A + 24 >> 2] = u), 0 | (A = 0 | n[a + 4 >> 2]) && (n[u + 20 >> 2] = A, n[A + 24 >> 2] = u);
              }
            } while (0);
            if (n[R + 4 >> 2] = 1 | C, n[R + C >> 2] = C, (0 | R) == (0 | n[928]))
              return void (n[925] = C);
            a = C;
          }
          if (A = a >>> 3, a >>> 0 < 256)
            return u = 3732 + (A << 1 << 2) | 0, a = (a = 0 | n[923]) & (A = 1 << A) ? 0 | n[(A = a = u + 8 | 0) >> 2] : (n[923] = a | A, A = u + 8 | 0, u), n[A >> 2] = R, n[a + 12 >> 2] = R, n[R + 8 >> 2] = a, void (n[R + 12 >> 2] = u);
          if (u = 3996 + ((S = (A = a >>> 8) ? 16777215 < a >>> 0 ? 31 : 1 & ((I = (S = 14 - ((C = (C = (S = A << (p = (p = A + 1048320 | 0) >>> 16 & 8)) + 520192 | 0) >>> 16 & 4) | p | (I = (I = (S <<= C) + 245760 | 0) >>> 16 & 2)) + ((S <<= I) >>> 15) | 0) + 7 | 0) ? a >>> I : a) | S << 1 : 0) << 2) | 0, n[R + 28 >> 2] = S, n[R + 20 >> 2] = 0, !((A = (n[R + 16 >> 2] = 0) | n[924]) & (v = 1 << S)))
            return n[924] = A | v, n[u >> 2] = R, n[R + 24 >> 2] = u, n[R + 12 >> 2] = R, void (n[R + 8 >> 2] = R);
          A = 0 | n[u >> 2];
          t:
            do
              if ((-8 & n[A + 4 >> 2] | 0) != (0 | a)) {
                for (S = a << ((0 | S) == 31 ? 0 : 25 - (S >>> 1) | 0); u = 0 | n[(v = A + 16 + (S >>> 31 << 2) | 0) >> 2]; ) {
                  if ((-8 & n[u + 4 >> 2] | 0) == (0 | a)) {
                    A = u;
                    break t;
                  }
                  S <<= 1, A = u;
                }
                return n[v >> 2] = R, n[R + 24 >> 2] = A, n[R + 12 >> 2] = R, void (n[R + 8 >> 2] = R);
              }
            while (0);
          I = 0 | n[(p = A + 8 | 0) >> 2], n[I + 12 >> 2] = R, n[p >> 2] = R, n[R + 8 >> 2] = I, n[R + 12 >> 2] = A, n[R + 24 >> 2] = 0;
        }
        function Js(a, u, v) {
          a |= 0;
          var S;
          return (3 & (u |= 0) | 0) != 0 | (0 | (S = u >>> 2)) == 0 || 1073741823 + S & S | 0 ? 0 | (a = 28) : !((-64 - u | 0) >>> 0 < (v |= 0) >>> 0) && (u = 0 | function(C, p) {
            p |= 0;
            var R, I = 0, A = 0, g = 0, $ = 0, F = 0;
            if ((I = 16 < (C |= 0) >>> 0 ? C : 16) + -1 & I)
              for (C = 16; C >>> 0 < I >>> 0; )
                C <<= 1;
            else
              C = I;
            if ((-64 - C | 0) >>> 0 <= p >>> 0)
              return n[922] = 48, ($ = 0) | $;
            if (!(I = 0 | en(12 + (R = p >>> 0 < 11 ? 16 : p + 11 & -8) + C | 0)))
              return ($ = 0) | $;
            g = I + -8 | 0;
            do
              if (C + -1 & I) {
                if (A = 15 < ((A = (I + C + -1 & 0 - C) - 8 | 0) - (p = g) | 0) >>> 0 ? A : A + C | 0, I = (-8 & (F = 0 | n[(C = I + -4 | 0) >> 2])) - (p = A - p | 0) | 0, 3 & F) {
                  n[(F = A + 4 | 0) >> 2] = I | 1 & n[F >> 2] | 2, n[(I = A + I + 4 | 0) >> 2] = 1 | n[I >> 2], n[C >> 2] = p | 1 & n[C >> 2] | 2, n[F >> 2] = 1 | n[F >> 2], On(g, p), C = p = A;
                  break;
                }
                n[A >> 2] = (0 | n[g >> 2]) + p, n[A + 4 >> 2] = I, C = p = A;
                break;
              }
            while (C = p = g, 0);
            return 3 & (C = 0 | n[(I = C + 4 | 0) >> 2]) | 0 && (16 + R | 0) >>> 0 < ($ = -8 & C) >>> 0 && (F = $ - R | 0, g = p + R | 0, n[I >> 2] = R | 1 & C | 2, n[g + 4 >> 2] = 3 | F, n[($ = p + $ + 4 | 0) >> 2] = 1 | n[$ >> 2], On(g, F)), 0 | (F = p + 8 | 0);
          }(16 < u >>> 0 ? u : 16, v)) ? (n[a >> 2] = u, (a = 0) | a) : 0 | (a = 48);
        }
        function Bi(a) {
          var u, v = 0;
          return (a = (u = 0 | n[(v = 4208) >> 2]) + (a |= 0) | 0) >>> 0 > (0 | It()) >>> 0 && !(0 | Bt(0 | a)) ? (n[922] = 48, 0 | (v = -1)) : (n[v >> 2] = a, 0 | (v = u));
        }
        function mn(a, u, v, S) {
          u |= 0, S |= 0;
          var C = 0, p = 0;
          return v = 0 | function(R, I) {
            var A, g, $, F;
            return R = (($ = 0 | z(g = 65535 & (I |= 0), A = 65535 & (R |= 0))) >>> 16) + (0 | z(g, F = R >>> 16)) | 0, I = 0 | z(g = I >>> 16, A), 0 | (tt((R >>> 16) + (0 | z(g, F)) + (((65535 & R) + I | 0) >>> 16) | 0), R + I << 16 | 65535 & $ | 0);
          }(C = a |= 0, p = v |= 0), a = 0 | et(), 0 | (tt((0 | z(u, p)) + (0 | z(S, C)) + a | 0 & a | 0), 0 | v);
        }
        function rn(a, u, v, S) {
          return 0 | (tt((u |= 0) + (S |= 0) + ((v = (a |= 0) + (v |= 0) >>> 0) >>> 0 < a >>> 0 | 0) >>> 0 | 0), 0 | v);
        }
        function qr(a, u, v, S) {
          return 0 | (tt(0 | (S = (u |= 0) - (S |= 0) - ((a |= 0) >>> 0 < (v |= 0) >>> 0 | 0) >>> 0)), a - v >>> 0 | 0);
        }
        function Qs(a) {
          return 0 | ((a |= 0) ? 31 - (0 | k(a ^ a - 1)) | 0 : 32);
        }
        function ia(a, u, v, S, C) {
          C |= 0;
          var p = 0, Z = 0, B = 0, R = 0, I = 0, X = 0, A = 0, g = 0, $ = 0, F = 0, X = a |= 0, Z = v |= 0, B = g = S |= 0;
          if (!(I = R = u |= 0))
            return p = (0 | C) != 0, B ? (p && (n[C >> 2] = 0 | a, n[C + 4 >> 2] = 0 & u), (C = g = 0) | (tt(0 | g), C)) : (p && (n[C >> 2] = (X >>> 0) % (Z >>> 0), n[C + 4 >> 2] = 0), C = (X >>> (g = 0)) / (Z >>> 0) >>> 0, 0 | (tt(0 | g), C));
          p = (0 | B) == 0;
          do {
            if (Z) {
              if (!p) {
                if ((p = (0 | k(0 | B)) - (0 | k(0 | I)) | 0) >>> 0 <= 31) {
                  a = X >>> ((Z = A = p + 1 | 0) >>> 0) & (u = p - 31 >> 31) | I << (B = 31 - p | 0), u &= I >>> (A >>> 0), p = 0, B = X << B;
                  break;
                }
                return C && (n[C >> 2] = 0 | a, n[C + 4 >> 2] = R | 0 & u), (C = g = 0) | (tt(0 | g), C);
              }
              if ((p = Z - 1 | 0) & Z | 0) {
                a = (A = 32 - (B = 33 + (0 | k(0 | Z)) - (0 | k(0 | I)) | 0) | 0) - 1 >> 31 & I >>> (($ = B - 32 | 0) >>> 0) | (I << A | X >>> ((Z = B) >>> 0)) & (u = $ >> 31), u &= I >>> (B >>> 0), p = X << (F = 64 - B | 0) & (R = A >> 31), B = (I << F | X >>> ($ >>> 0)) & R | X << A & B - 33 >> 31;
                break;
              }
              return 0 | C && (n[C >> 2] = p & X, n[C + 4 >> 2] = 0), (0 | Z) == 1 ? (F = 0 | a, 0 | (tt(0 | ($ = R | 0 & u)), F)) : ($ = I >>> ((F = 0 | Qs(0 | Z)) >>> 0) | 0, F = I << 32 - F | X >>> (F >>> 0) | 0, 0 | (tt(0 | $), F));
            }
            if (p)
              return 0 | C && (n[C >> 2] = (I >>> 0) % (Z >>> 0), n[C + 4 >> 2] = 0), F = (I >>> ($ = 0)) / (Z >>> 0) >>> 0, 0 | (tt(0 | $), F);
            if (!X)
              return 0 | C && (n[C >> 2] = 0, n[C + 4 >> 2] = (I >>> 0) % (B >>> 0)), F = (I >>> ($ = 0)) / (B >>> 0) >>> 0, 0 | (tt(0 | $), F);
            if (!((p = B - 1 | 0) & B))
              return 0 | C && (n[C >> 2] = 0 | a, n[C + 4 >> 2] = p & I | 0 & u), F = I >>> ((($ = 0) | Qs(0 | B)) >>> 0), 0 | (tt(0 | $), F);
            if ((p = (0 | k(0 | B)) - (0 | k(0 | I)) | 0) >>> 0 <= 30) {
              a = I << (B = 31 - p | 0) | X >>> ((Z = u = p + 1 | 0) >>> 0), u = I >>> (u >>> 0), p = 0, B = X << B;
              break;
            }
            return C && (n[C >> 2] = 0 | a, n[C + 4 >> 2] = R | 0 & u), (F = $ = 0) | (tt(0 | $), F);
          } while (0);
          if (Z) {
            for (I = 0 | rn(0 | (A = 0 | v), 0 | (X = g | 0 & S), -1, -1), v = 0 | et(), R = B, B = 0; R = p >>> 31 | (S = R) << 1, p = B | p << 1, qr(0 | I, 0 | v, 0 | (S = a << 1 | S >>> 31 | 0), 0 | (g = a >>> 31 | u << 1 | 0)), B = 1 & ($ = (F = 0 | et()) >> 31 | ((0 | F) < 0 ? -1 : 0) << 1), a = 0 | qr(0 | S, 0 | g, $ & A | 0, (((0 | F) < 0 ? -1 : 0) >> 31 | ((0 | F) < 0 ? -1 : 0) << 1) & X | 0), u = 0 | et(), (0 | (Z = Z - 1 | 0)) != 0; )
              ;
            I = R, R = 0;
          } else
            I = B, B = R = 0;
          return (Z = 0) | C && (n[C >> 2] = a, n[C + 4 >> 2] = u), F = -2 & (p << 1 | 0) | B, 0 | (tt(0 | ($ = (0 | p) >>> 31 | (I | Z) << 1 | 0 & (Z << 1 | p >>> 31) | R)), F);
        }
        function Ks(a, u, v, S) {
          return 0 | ia(a |= 0, u |= 0, v |= 0, S |= 0, 0);
        }
        function na(a, u, v) {
          return a |= 0, u |= 0, (0 | (v |= 0)) < 32 ? (tt(u >>> v | 0), a >>> v | (u & (1 << v) - 1) << 32 - v) : (tt(0), u >>> v - 32 | 0);
        }
        function N0(a, u, v) {
          return a |= 0, u |= 0, (0 | (v |= 0)) < 32 ? (tt(u << v | (a & (1 << v) - 1 << 32 - v) >>> 32 - v | 0), a << v) : (tt(a << v - 32 | 0), 0);
        }
        function _v() {
          return 4208;
        }
        function Ei(a, u, v) {
          a |= 0, u |= 0;
          var S, C, p;
          if (8192 <= (0 | (v |= 0)))
            return re(0 | a, 0 | u, 0 | v), 0 | a;
          if (p = 0 | a, C = a + v | 0, (3 & a) == (3 & u)) {
            for (; 3 & a; ) {
              if (!v)
                return 0 | p;
              ft[a >> 0] = 0 | ft[u >> 0], a = a + 1 | 0, u = u + 1 | 0, v = v - 1 | 0;
            }
            for (S = (v = -4 & C | 0) - 64 | 0; (0 | a) <= (0 | S); )
              n[a >> 2] = n[u >> 2], n[a + 4 >> 2] = n[u + 4 >> 2], n[a + 8 >> 2] = n[u + 8 >> 2], n[a + 12 >> 2] = n[u + 12 >> 2], n[a + 16 >> 2] = n[u + 16 >> 2], n[a + 20 >> 2] = n[u + 20 >> 2], n[a + 24 >> 2] = n[u + 24 >> 2], n[a + 28 >> 2] = n[u + 28 >> 2], n[a + 32 >> 2] = n[u + 32 >> 2], n[a + 36 >> 2] = n[u + 36 >> 2], n[a + 40 >> 2] = n[u + 40 >> 2], n[a + 44 >> 2] = n[u + 44 >> 2], n[a + 48 >> 2] = n[u + 48 >> 2], n[a + 52 >> 2] = n[u + 52 >> 2], n[a + 56 >> 2] = n[u + 56 >> 2], n[a + 60 >> 2] = n[u + 60 >> 2], a = a + 64 | 0, u = u + 64 | 0;
            for (; (0 | a) < (0 | v); )
              n[a >> 2] = n[u >> 2], a = a + 4 | 0, u = u + 4 | 0;
          } else
            for (v = C - 4 | 0; (0 | a) < (0 | v); )
              ft[a >> 0] = 0 | ft[u >> 0], ft[a + 1 >> 0] = 0 | ft[u + 1 >> 0], ft[a + 2 >> 0] = 0 | ft[u + 2 >> 0], ft[a + 3 >> 0] = 0 | ft[u + 3 >> 0], a = a + 4 | 0, u = u + 4 | 0;
          for (; (0 | a) < (0 | C); )
            ft[a >> 0] = 0 | ft[u >> 0], a = a + 1 | 0, u = u + 1 | 0;
          return 0 | p;
        }
        function ci(a, u, v) {
          var S, C, p, R = (a |= 0) + (v |= 0) | 0;
          if (u = (u | 0) & 255, 67 <= (0 | v)) {
            for (; 3 & a; )
              ft[a >> 0] = u, a = a + 1 | 0;
            for (p = u | u << 8 | u << 16 | u << 24, C = (S = -4 & R | 0) - 64 | 0; (0 | a) <= (0 | C); )
              n[a >> 2] = p, n[a + 4 >> 2] = p, n[a + 8 >> 2] = p, n[a + 12 >> 2] = p, n[a + 16 >> 2] = p, n[a + 20 >> 2] = p, n[a + 24 >> 2] = p, n[a + 28 >> 2] = p, n[a + 32 >> 2] = p, n[a + 36 >> 2] = p, n[a + 40 >> 2] = p, n[a + 44 >> 2] = p, n[a + 48 >> 2] = p, n[a + 52 >> 2] = p, n[a + 56 >> 2] = p, n[a + 60 >> 2] = p, a = a + 64 | 0;
            for (; (0 | a) < (0 | S); )
              n[a >> 2] = p, a = a + 4 | 0;
          }
          for (; (0 | a) < (0 | R); )
            ft[a >> 0] = u, a = a + 1 | 0;
          return R - v | 0;
        }
        function L0(a) {
          return q(0), 0;
        }
        function O0(a, u, v, S) {
          return q(2), 0;
        }
        var pv = [L0, function(a) {
          return 0 | ht(0, 0 | (a |= 0));
        }, function(a) {
          return 0;
        }, L0], sa = [function(a, u, v) {
          return q(1), 0;
        }, function(a, u, v) {
          return 0 | gt(0, 0 | (a |= 0), 0 | (u |= 0), 0 | (v |= 0));
        }, function(a, u, v) {
          u |= 0, v |= 0;
          var S, C, p, R, I, A, g, $ = 0, F = 0, X = 0, Z = 0, B = G;
          for (G = G + 32 | 0, C = (F = B) + 16 | 0, $ = 0 | n[(p = (a |= 0) + 28 | 0) >> 2], n[F >> 2] = $, $ = (0 | n[(R = a + 20 | 0) >> 2]) - $ | 0, n[F + 4 >> 2] = $, n[F + 8 >> 2] = u, S = a + 60 | 0, $ = $ + (n[F + 12 >> (X = 2)] = v) | 0; ; ) {
            if ((0 | $) == (0 | (u = 0 | function(W) {
              return 0 | (W = (W |= 0) << 16 >> 16 ? (n[922] = 65535 & W, -1) : 0);
            }(0 | St(0 | n[S >> 2], 0 | F, 0 | X, 0 | C)) ? n[C >> 2] = -1 : 0 | n[C >> 2]))) {
              u = 6;
              break;
            }
            if ((0 | u) < 0) {
              u = 8;
              break;
            }
            Z = 0 | n[F + 4 >> 2], n[(A = (I = Z >>> 0 < u >>> 0) ? F + 8 | 0 : F) >> 2] = (0 | n[A >> 2]) + (Z = u - (I ? Z : 0) | 0), n[(g = A + 4 | 0) >> 2] = (0 | n[g >> 2]) - Z, F = A, X = X + (I << 31 >> 31) | 0, $ = $ - u | 0;
          }
          return (0 | u) == 6 ? (Z = 0 | n[a + 44 >> 2], n[a + 16 >> 2] = Z + (0 | n[a + 48 >> 2]), n[p >> 2] = Z, n[R >> 2] = Z) : (0 | u) == 8 && (n[a + 16 >> 2] = 0, n[p >> 2] = 0, n[R >> 2] = 0, n[a >> 2] = 32 | n[a >> 2], v = (0 | X) == 2 ? 0 : v - (0 | n[F + 4 >> 2]) | 0), G = B, 0 | v;
        }, function(a, u, v) {
          var S, C;
          return Ei(0 | (C = 0 | n[(S = (a |= 0) + 20 | 0) >> 2]), 0 | (u |= 0), 0 | (a = (v |= 0) >>> 0 < (a = (0 | n[a + 16 >> 2]) - C | 0) >>> 0 ? v : a)), n[S >> 2] = (0 | n[S >> 2]) + a, 0 | v;
        }], vv = [O0, function(a, u, v, S) {
          return 0 | xt(0, 0 | (a |= 0), 0 | (u |= 0), 0 | (v |= 0), 0 | (S |= 0));
        }, function(a, u, v, S) {
          return tt(0), 0;
        }, O0], F0 = [function(a) {
          q(3);
        }, function(a) {
          ut(0, 0 | (a |= 0));
        }], M0 = [function(a, u) {
          q(4);
        }, function(a, u) {
          Ct(0, 0 | (a |= 0), 0 | (u |= 0));
        }, function(a, u) {
          var v, A = 0, g = 0, $ = 0, S = 0, C = 0, p = 0, R = 0, I = 0, A = 0 | n[(v = (a |= 0) + 308 | 0) >> 2], g = 0 | n[a + 316 >> 2], $ = 0 | n[a + 320 >> 2];
          (0 | (S = 0 | n[(C = A + ((u |= 0) << 5) + 8 | 0) >> 2])) == -1 ? (n[g + (u << 2) >> 2] = n[(0 | n[a + 148 >> 2]) + (n[A + (u << 5) + 16 >> 2] << 2) >> 2], D[$ + (u << 2) >> 2] = 1) : (R = 0 | n[(p = A + (u << 5) + 16 | 0) >> 2], I = 0 | n[(0 | n[a + 152 >> 2]) + (R << 2) >> 2], Fn[3 & n[A + (S << 5) + 24 >> 2]](a, S, I, I, 0 | n[(0 | n[a + 60 >> 2]) + (24 * R | 0) + 16 >> 2]), C = 0 | n[C >> 2], D[g + (u << 2) >> 2] = +D[(0 | n[a + 148 >> 2]) + (n[p >> 2] << 2) >> 2] * +D[g + (C << 2) >> 2], n[$ + (u << 2) >> 2] = n[$ + (C << 2) >> 2]), (0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (A = 0 | n[v >> 2], g = 0 | n[a + 324 >> 2], v = 0 | n[a + 328 >> 2], $ = u << 2, S = n[A + (u << 5) + 16 >> 2] << 2, (0 | (A = 0 | n[A + (u << 5) + 8 >> 2])) == -1 ? (A = 0 | n[a + 156 >> 2], n[g + ($ << 2) >> 2] = n[A + (S << 2) >> 2], n[g + ((u = 1 | $) << 2) >> 2] = n[A + ((C = 1 | S) << 2) >> 2], n[g + ((I = 2 | $) << 2) >> 2] = n[A + ((R = 2 | S) << 2) >> 2], D[g + ((A = 3 | $) << 2) >> 2] = 1, p = 0 | n[a + 160 >> 2], n[v + ($ << 2) >> 2] = n[p + (S << 2) >> 2], n[v + (u << 2) >> 2] = n[p + (C << 2) >> 2], n[v + (I << 2) >> 2] = n[p + (R << 2) >> 2]) : (R = A << 2, p = (0 | n[a + 156 >> 2]) + (S << 2) | 0, D[(A = g + ($ << 2) | 0) >> 2] = +D[p >> 2] * +D[(I = g + (R << 2) | 0) >> 2], D[A + 4 >> 2] = +D[p + 4 >> 2] * +D[I + 4 >> 2], D[A + 8 >> 2] = +D[p + 8 >> 2] * +D[I + 8 >> 2], D[g + ((A = 3 | $) << 2) >> 2] = 1, p = (0 | n[a + 160 >> 2]) + (S << 2) | 0, u = +D[p >> 2], C = +D[(R = v + (R << 2) | 0) >> 2], D[(I = v + ($ << 2) | 0) >> 2] = u + C - u * C, C = +D[p + 4 >> 2], u = +D[R + 4 >> 2], D[I + 4 >> 2] = C + u - C * u, u = +D[p + 8 >> 2], C = +D[R + 8 >> 2], D[I + 8 >> 2] = u + C - u * C), D[v + (A << 2) >> 2] = 1);
        }, function(a, u) {
          var v, S, C, p, R, I, A, g, $, F, X, Z, B, W, j, U = 0, rt = 0, lt = 0, Q = 0, ct = 0, Pt = 0, Xt = 0, Qt = 0, $t = 0, Yt = 0, jt = 0, pt = 0, Ot = 0, Jt = G;
          if (G = G + 48 | 0, A = Jt + 8 | 0, R = Jt + 40 | 0, p = Jt + 32 | 0, C = (I = Jt) + 24 | 0, pt = Jt + 16 | 0, U = 0 | n[(X = (a |= 0) + 308 | 0) >> 2], $ = 0 | n[a + 316 >> 2], F = 0 | n[a + 320 >> 2], (0 | (S = 0 | n[(W = U + ((u |= 0) << 5) + 8 | 0) >> 2])) == -1)
            Ot = 0 | n[U + (u << 5) + 16 >> 2], n[$ + (u << 2) >> 2] = n[(0 | n[a + 268 >> 2]) + (Ot << 2) >> 2], n[F + (u << 2) >> 2] = n[(0 | n[a + 272 >> 2]) + (Ot << 2) >> 2];
          else {
            for (g = 0 | n[(j = U + (u << 5) + 16 | 0) >> 2], ct = 0 | n[(0 | n[(Z = a + 276 | 0) >> 2]) + (g << 2) >> 2], n[pt >> 2] = ct, g = 0 | n[(0 | n[(B = a + 280 | 0) >> 2]) + (g << 2) >> 2], n[(Yt = pt + 4 | 0) >> 2] = g, jt = (0 | n[U + (S << 5) + 12 >> 2]) == 1 ? -10 : -0.10000000149011612, n[R >> 2] = ct, n[(ct = 4 + R | 0) >> 2] = g, Fn[3 & n[(g = U + (S << 5) + 24 | 0) >> 2]](a, S, R, p, 1), lt = 4 + C | 0, U = 4 + p | 0, rt = I + 4 | 0, Q = 9, $t = 1; D[C >> 2] = (Qt = 0 * $t) + +D[R >> 2], D[lt >> 2] = (v = jt * $t) + +D[ct >> 2], Fn[3 & n[g >> 2]](a, S, C, I, 1), Xt = +D[I >> 2] - +D[p >> 2], D[I >> 2] = Xt, Pt = +D[rt >> 2] - +D[U >> 2], !(Xt != 0 | (D[rt >> 2] = Pt) != 0); ) {
              if (D[C >> 2] = +D[R >> 2] - Qt, D[lt >> 2] = +D[ct >> 2] - v, Fn[3 & n[g >> 2]](a, S, C, I, 1), Pt = +D[I >> 2] - +D[p >> 2], D[I >> 2] = Pt, Qt = +D[rt >> 2] - +D[U >> 2], Pt != 0 | (D[rt >> 2] = Qt) != 0) {
                Ot = 6;
                break;
              }
              if (!Q) {
                Ot = 8;
                break;
              }
              Q = Q + -1 | 0, $t *= 0.10000000149011612;
            }
            (0 | Ot) == 6 ? (Xt = -Pt, Pt = -Qt) : (0 | Ot) == 8 && (kt(0, 2397, A), Pt = Xt = 0), jt = 180 * +Ne(0, jt, Xt, Pt) / 3.1415927410125732, Fn[3 & n[g >> 2]](a, 0 | n[W >> 2], pt, pt, 1), Ot = 0 | n[j >> 2], n[(0 | n[Z >> 2]) + (Ot << 2) >> 2] = n[pt >> 2], n[(0 | n[B >> 2]) + (Ot << 2) >> 2] = n[Yt >> 2], pt = (0 | n[a + 284 >> 2]) + (Ot << 2) | 0, D[pt >> 2] = +D[pt >> 2] - jt, pt = 0 | n[W >> 2], D[$ + (u << 2) >> 2] = +D[(0 | n[a + 268 >> 2]) + (Ot << 2) >> 2] * +D[$ + (pt << 2) >> 2], Ot = (0 | n[a + 272 >> 2]) + (Ot << 2) | 0, jt = +D[Ot >> 2] * +D[F + (pt << 2) >> 2], D[F + (u << 2) >> 2] = jt, D[Ot >> 2] = jt;
          }
          G = ((0 | we[4 + (0 | n[a >> 2]) >> 0]) < 4 || (U = 0 | n[X >> 2], rt = 0 | n[a + 324 >> 2], ct = 0 | n[a + 328 >> 2], lt = u << 2, Q = n[U + (u << 5) + 16 >> 2] << 2, (0 | (U = 0 | n[U + (u << 5) + 8 >> 2])) == -1 ? (U = 0 | n[a + 296 >> 2], n[rt + (lt << 2) >> 2] = n[U + (Q << 2) >> 2], n[rt + ((pt = 1 | lt) << 2) >> 2] = n[U + ((Yt = 1 | Q) << 2) >> 2], n[rt + ((u = 2 | lt) << 2) >> 2] = n[U + ((Ot = 2 | Q) << 2) >> 2], D[rt + ((U = 3 | lt) << 2) >> 2] = 1, a = 0 | n[a + 300 >> 2], n[ct + (lt << 2) >> 2] = n[a + (Q << 2) >> 2], n[ct + (pt << 2) >> 2] = n[a + (Yt << 2) >> 2], n[ct + (u << 2) >> 2] = n[a + (Ot << 2) >> 2]) : (pt = U << 2, Ot = (0 | n[a + 296 >> 2]) + (Q << 2) | 0, D[(U = rt + (lt << 2) | 0) >> 2] = +D[Ot >> 2] * +D[(u = rt + (pt << 2) | 0) >> 2], D[U + 4 >> 2] = +D[Ot + 4 >> 2] * +D[u + 4 >> 2], D[U + 8 >> 2] = +D[Ot + 8 >> 2] * +D[u + 8 >> 2], D[rt + ((U = 3 | lt) << 2) >> 2] = 1, Ot = (0 | n[a + 300 >> 2]) + (Q << 2) | 0, $t = +D[Ot >> 2], jt = +D[(a = ct + (pt << 2) | 0) >> 2], D[(u = ct + (lt << 2) | 0) >> 2] = $t + jt - $t * jt, jt = +D[Ot + 4 >> 2], $t = +D[a + 4 >> 2], D[u + 4 >> 2] = jt + $t - jt * $t, $t = +D[Ot + 8 >> 2], jt = +D[a + 8 >> 2], D[u + 8 >> 2] = $t + jt - $t * jt), D[ct + (U << 2) >> 2] = 1), Jt);
        }], Fn = [function(a, u, v, S, C) {
          q(5);
        }, function(a, u, v, S, C) {
          wt(0, 0 | (a |= 0), 0 | (u |= 0), 0 | (v |= 0), 0 | (S |= 0), 0 | (C |= 0));
        }, function(a, u, v, S, C) {
          v |= 0, S |= 0;
          var p, R, I, A, g, $, F, X, Z, B, W, j, U, rt, lt, Q, ct, Pt, Xt, Qt, $t, Yt, jt, pt = 0, Ot = 0, Jt = 0, Dt = 0, Fe = 0, Ce = 0, $e = 0, lr = 0, ir = 0, qe = 0, De = 0, ur = 0, xr = 0, Je = 0, nr = 0, be = 0, Oe = 0, ot = 0, Fr = 0, Qe = 0, Xe = 0, er = 0, Te = 0, Kr = G;
          if (G = G + 32 | 0, Xt = Kr, u = 0 | n[(0 | n[(a |= 0) + 308 >> 2]) + ((u |= 0) << 5) + 16 >> 2], pt = 0 | n[a + 60 >> 2], U = 0 | n[(0 | n[a + 152 >> 2]) + (u << 2) >> 2], rt = 0 | n[pt + (24 * u | 0) + 8 >> 2], lt = 0 | n[pt + (24 * u | 0) + 4 >> 2], Q = 1 + rt | 0, (0 | (C |= 0)) <= 0)
            G = Kr;
          else {
            ct = 0 | rt, Pt = 0 | lt, j = (0 | n[pt + (24 * u | 0) + 12 >> 2]) == 0, R = U + (rt << 3) | 0, I = U + ((Z = 0 | z(lt, Q)) << 3) | 0, A = U + ((X = Z + rt | 0) << 3) | 0, g = 4 + U | 0, $ = U + (rt << 3) + 4 | 0, F = U + (Z << 3) + 4 | 0, X = U + (X << 3) + 4 | 0, W = rt - 1 | 0, B = lt - 1 | 0, ur = xr = Je = nr = Ot = Jt = De = qe = ir = lr = Xe = Qe = $e = Ce = Fe = Dt = er = ot = 0;
            do {
              be = (p = +D[v + (er << 3) >> 2]) * ct, Fr = (Oe = +D[v + (er << 3) + 4 >> 2]) * Pt, a = !(1 <= p), pt = !(1 <= Oe);
              do {
                if (pt & a & !(p < 0) & !(Oe < 0)) {
                  if (a = ~~be, u = (0 | z(Q, pt = ~~Fr)) + a | 0, Jt = be - (0 | a), Ot = Fr - (0 | pt), !j) {
                    D[S + (er << 3) >> 2] = (be = 1 - Ot) * ((Oe = 1 - Jt) * +D[U + (u << 3) >> 2]) + be * (Jt * +D[U + ((Te = u + 1 | 0) << 3) >> 2]) + Ot * (Oe * +D[U + ((a = u + Q | 0) << 3) >> 2]) + Ot * (Jt * +D[U + ((pt = a + 1 | 0) << 3) >> 2]), Oe = be * (Oe * +D[U + (u << 3) + 4 >> 2]) + be * (Jt * +D[U + (Te << 3) + 4 >> 2]) + Ot * (Oe * +D[U + (a << 3) + 4 >> 2]), be = Ot * (Jt * +D[U + (pt << 3) + 4 >> 2]);
                    break;
                  }
                  if (Jt + Ot <= 1) {
                    D[S + (er << 3) >> 2] = (Oe = 1 - Jt - Ot) * +D[U + (u << 3) >> 2] + Jt * +D[U + ((pt = u + 1 | 0) << 3) >> 2] + Ot * +D[U + ((Te = u + Q | 0) << 3) >> 2], Oe = Oe * +D[U + (u << 3) + 4 >> 2] + Jt * +D[U + (pt << 3) + 4 >> 2], be = Ot * +D[U + (Te << 3) + 4 >> 2];
                    break;
                  }
                  D[S + (er << 3) >> 2] = (Fr = Jt + -1 + Ot) * +D[U + ((a = (pt = u + Q | 0) + 1 | 0) << 3) >> 2] + (Oe = 1 - Jt) * +D[U + (pt << 3) >> 2] + (be = 1 - Ot) * +D[U + ((Te = u + 1 | 0) << 3) >> 2], Oe = Fr * +D[U + (a << 3) + 4 >> 2] + Oe * +D[U + (pt << 3) + 4 >> 2], be *= +D[U + (Te << 3) + 4 >> 2];
                  break;
                }
                if (ot || (jt = +D[U >> 2], Yt = +D[R >> 2], $t = +D[I >> 2], Qe = +D[A >> 2], Qt = +D[g >> 2], ur = (Je = +D[$ >> 2]) - (nr = +D[F >> 2]), ot = 1, Qe = 0.25 * (jt + Yt + $t + Qe) - 0.5 * (jt = Qe - jt), Xe = 0.25 * (Qt + Je + nr + (Xe = +D[X >> 2])) - 0.5 * (Qt = Xe - Qt), nr = 0.5 * ((xr = Yt - $t) + jt), Je = 0.5 * (ur + Qt), xr = 0.5 * (jt - xr), ur = 0.5 * (Qt - ur)), !(Oe < 3 & -2 < p & p < 3 & -2 < Oe)) {
                  D[S + (er << 3) >> 2] = Oe * xr + (p * nr + Qe), Oe *= ur, be = p * Je + Xe;
                  break;
                }
                do {
                  if (p <= 0) {
                    if (Oe <= 0) {
                      Dt = Qe - (Ce = 2 * xr), Fe = Xe - ($e = 2 * ur), Ce = (qe = Qe - 2 * nr) - Ce, $e = (De = Xe - 2 * Je) - $e, lr = +D[U >> 2], ir = +D[g >> 2], Jt = 0.5 * (2 + p), Ot = 0.5 * (Oe + 2);
                      break;
                    }
                    if (pt) {
                      $e = (Ot = 0 | (pt = (0 | lt) == (0 | (pt = ~~Fr)) ? B : pt)) / Pt, Jt = (0 | (Te = pt + 1 | 0)) / Pt, pt = 0 | z(pt, Q), Te = 0 | z(Te, Q), Dt = +D[U + (pt << 3) >> 2], Fe = +D[U + (pt << 3) + 4 >> 2], Ce = $e * xr + (qe = Qe - 2 * nr), $e = $e * ur + (De = Xe - 2 * Je), lr = +D[U + (Te << 3) >> 2], ir = +D[U + (Te << 3) + 4 >> 2], qe = Jt * xr + qe, De = Jt * ur + De, Jt = 0.5 * (2 + p), Ot = Fr - Ot;
                      break;
                    }
                    Dt = +D[I >> 2], Fe = +D[F >> 2], Ce = xr + (qe = Qe - 2 * nr), $e = ur + (De = Xe - 2 * Je), lr = (Ot = 3 * xr) + Qe, ir = (Jt = 3 * ur) + Xe, qe = Ot + qe, De = Jt + De, Jt = 0.5 * (2 + p), Ot = 0.5 * (Oe + -1);
                    break;
                  }
                  if (u = Oe <= 0, a) {
                    if (u) {
                      Dt = (Fe = (0 | (pt = (Te = (0 | rt) == (0 | (Te = ~~be)) ? W : Te) + 1 | 0)) / ct) * nr + Qe - (Ce = 2 * xr), Fe = Fe * Je + Xe - ($e = 2 * ur), Ce = (lr = (Jt = 0 | Te) / ct) * nr + Qe - Ce, $e = lr * Je + Xe - $e, lr = +D[U + (pt << 3) >> 2], ir = +D[U + (pt << 3) + 4 >> 2], qe = +D[U + (Te << 3) >> 2], De = +D[U + (Te << 3) + 4 >> 2], Jt = be - Jt, Ot = 0.5 * (Oe + 2);
                      break;
                    }
                    if (pt) {
                      n[Xt >> 2] = er, f[Xt + 8 >> 3] = p, f[Xt + 16 >> 3] = Oe, kt(0, 865, Xt);
                      break;
                    }
                    Jt = 0 | (Te = (0 | rt) == (0 | (Te = ~~be)) ? W : Te), ir = (0 | (pt = Te + 1 | 0)) / ct, Dt = +D[U + ((pt = pt + Z | 0) << 3) >> 2], Fe = +D[U + (pt << 3) + 4 >> 2], Ce = +D[U + ((Te = Te + Z | 0) << 3) >> 2], $e = +D[U + (Te << 3) + 4 >> 2], lr = (qe = 3 * xr) + (ir * nr + Qe), ir = (Ot = 3 * ur) + (ir * Je + Xe), qe += (De = Jt / ct) * nr + Qe, De = Ot + (De * Je + Xe), Jt = be - Jt, Ot = 0.5 * (Oe + -1);
                    break;
                  }
                  if (u) {
                    Dt = (lr = 3 * nr + Qe) - (Ce = 2 * xr), Fe = (ir = 3 * Je + Xe) - ($e = 2 * ur), Ce = nr + Qe - Ce, $e = Je + Xe - $e, qe = +D[R >> 2], De = +D[$ >> 2], Jt = 0.5 * (p - 1), Ot = 0.5 * (Oe + 2);
                    break;
                  }
                  if (pt) {
                    Fe = (Ot = 0 | (pt = (0 | lt) == (0 | (pt = ~~Fr)) ? B : pt)) / Pt, qe = (0 | (Te = pt + 1 | 0)) / Pt, pt = (0 | z(pt, Q)) + rt | 0, Te = (0 | z(Te, Q)) + rt | 0, Dt = Fe * xr + (lr = 3 * nr + Qe), Fe = Fe * ur + (ir = 3 * Je + Xe), Ce = +D[U + (pt << 3) >> 2], $e = +D[U + (pt << 3) + 4 >> 2], lr = qe * xr + lr, ir = qe * ur + ir, qe = +D[U + (Te << 3) >> 2], De = +D[U + (Te << 3) + 4 >> 2], Jt = 0.5 * (p - 1), Ot = Fr - Ot;
                    break;
                  }
                  Dt = xr + (lr = 3 * nr + Qe), Fe = ur + (ir = 3 * Je + Xe), Ce = +D[A >> 2], $e = +D[X >> 2], lr = (qe = 3 * xr) + lr, ir = (De = 3 * ur) + ir, qe += nr + Qe, De += Je + Xe, Jt = 0.5 * (p - 1), Ot = 0.5 * (Oe + -1);
                  break;
                } while (0);
                if (Jt + Ot <= 1) {
                  D[S + (er << 3) >> 2] = Ce + (Dt - Ce) * Jt + (qe - Ce) * Ot, Oe = $e + (Fe - $e) * Jt, be = (De - $e) * Ot;
                  break;
                }
                D[S + (er << 3) >> 2] = lr + (qe - lr) * (Oe = 1 - Jt) + (Dt - lr) * (be = 1 - Ot), Oe = ir + (De - ir) * Oe, be *= Fe - ir;
                break;
              } while (0);
            } while (D[S + (er << 3) + 4 >> 2] = Oe + be, (0 | (er = er + 1 | 0)) != (0 | C));
            G = Kr;
          }
        }, function(a, u, v, S, C) {
          a |= 0, u |= 0, v |= 0, S |= 0, C |= 0;
          var p, R, I, A, g = 0, $ = 0, F = 0, X = 0;
          if (u = 0 | n[(0 | n[a + 308 >> 2]) + (u << 5) + 16 >> 2], $ = 3.1415927410125732 * (+D[(0 | n[a + 168 >> 2]) + (12 * u | 0) + 4 >> 2] + +D[(0 | n[a + 284 >> 2]) + (u << 2) >> 2]) / 180, g = +N($), $ = +M($), R = ($ *= p = +D[(0 | n[a + 272 >> 2]) + (u << 2) >> 2]) * (F = 0 | n[(0 | n[a + 288 >> 2]) + (u << 2) >> 2] ? -1 : 1), p = (g *= p) * (X = 0 | n[(0 | n[a + 292 >> 2]) + (u << 2) >> 2] ? -1 : 1), F *= g, X *= $, $ = +D[(0 | n[a + 276 >> 2]) + (u << 2) >> 2], g = +D[(0 | n[a + 280 >> 2]) + (u << 2) >> 2], !((0 | C) <= 0))
            for (u = 0; A = +D[v + (u << 3) >> 2], I = +D[v + (u << 3) + 4 >> 2], D[S + (u << 3) >> 2] = R * A - p * I + $, D[S + (u << 3) + 4 >> 2] = F * A + X * I + g, (0 | (u = u + 1 | 0)) != (0 | C); )
              ;
        }];
        return { ___errno_location: function() {
          return 3688;
        }, ___muldi3: mn, ___udivdi3: Ks, _bitshift64Lshr: na, _bitshift64Shl: N0, _csmFree: function(a) {
          Ln(a |= 0);
        }, _csmGetDrawableConstantFlags: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[888 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1896, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableCount: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 332 >> 2], G = v, 0 | u) : (n[u >> 2] = 1858, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, 0 | (u = -1));
        }, _csmGetDrawableDrawOrders: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 440 >> 2], G = v, 0 | u) : (n[u >> 2] = 1980, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableDynamicFlags: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 432 >> 2], G = v, 0 | u) : (n[u >> 2] = 1924, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableIds: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[832 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1878, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableIndexCounts: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[904 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2182, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableIndices: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[840 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2208, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableMaskCounts: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[912 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2056, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableMasks: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[844 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2081, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableMultiplyColors: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 452 >> 2], G = v, 0 | u) : (n[u >> 2] = 2230, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableOpacities: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 448 >> 2], G = v, 0 | u) : (n[u >> 2] = 2032, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableParentPartIndices: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[876 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2286, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableRenderOrders: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 436 >> 2], G = v, 0 | u) : (n[u >> 2] = 2005, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableScreenColors: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 456 >> 2], G = v, 0 | u) : (n[u >> 2] = 2259, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableTextureIndices: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[884 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1951, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableVertexCounts: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[892 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2101, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableVertexPositions: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 444 >> 2], G = v, 0 | u) : (n[u >> 2] = 2128, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetDrawableVertexUvs: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[836 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 2158, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetLatestMocVersion: function() {
          return 4;
        }, _csmGetMocVersion: function(a, u) {
          u |= 0;
          var v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (a = 0 | ye(a), G = v, 0 | a) : (n[u >> 2] = 1286, n[u + 4 >> 2] = 1303, kt(0, 1269, u), G = v, (a = 0) | a);
        }, _csmGetParameterCount: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 540 >> 2], G = v, 0 | u) : (n[u >> 2] = 1610, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, 0 | (u = -1));
        }, _csmGetParameterDefaultValues: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[932 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1729, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterIds: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[916 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1631, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterKeyCounts: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 616 >> 2], G = v, 0 | u) : (n[u >> 2] = 2347, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterKeyValues: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 612 >> 2], G = v, 0 | u) : (n[u >> 2] = 2372, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterMaximumValues: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[924 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1700, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterMinimumValues: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[928 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1671, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterTypes: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 548 >> 2], G = v, 0 | u) : (n[u >> 2] = 1650, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetParameterValues: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 552 >> 2], G = v, 0 | u) : (n[u >> 2] = 1758, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetPartCount: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 4 >> 2], G = v, 0 | u) : (n[u >> 2] = 1780, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, 0 | (u = -1));
        }, _csmGetPartIds: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[712 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1796, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetPartOpacities: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[a + 52 >> 2], G = v, 0 | u) : (n[u >> 2] = 1810, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetPartParentPartIndices: function(a) {
          var u = 0, v = G;
          return G = G + 16 | 0, u = v, (a |= 0) ? (u = 0 | n[740 + (0 | n[a >> 2]) >> 2], G = v, 0 | u) : (n[u >> 2] = 1830, n[u + 4 >> 2] = 1411, kt(0, 1269, u), G = v, (u = 0) | u);
        }, _csmGetSizeofModel: pr, _csmGetVersion: function() {
          return 67239938;
        }, _csmInitializeModelInPlace: ze, _csmMalloc: function(a) {
          return 0 | en(a |= 0);
        }, _csmMallocMoc: function(a) {
          var u, v = G;
          return G = G + 16 | 0, Js(u = v, 64, a |= 0), G = v, 0 | n[u >> 2];
        }, _csmMallocModelAndInitialize: function(a) {
          var u = 0, v = 0, S = G;
          return G = G + 16 | 0, u = S, 0 | (a |= 0) && !(0 | Js(u, 16, v = 0 | pr(a))) ? (u = 0 | ze(a, a = 0 | n[u >> 2], v)) || (Ln(a), u = 0) : u = 0, G = S, 0 | u;
        }, _csmReadCanvasInfo: function(a, u, v, S) {
          u |= 0, v |= 0, S |= 0;
          var C, p, R, I = 0, A = G;
          if (G = G + 32 | 0, p = A + 24 | 0, I = A + 16 | 0, R = A + 8 | 0, C = A, a |= 0)
            return u ? v ? void (G = (S ? (I = 0 | n[708 + (0 | n[a >> 2]) >> 2], n[u >> 2] = n[I + 12 >> 2], n[u + 4 >> 2] = n[I + 16 >> 2], n[v >> 2] = n[I + 4 >> 2], n[v + 4 >> 2] = n[I + 8 >> 2], n[S >> 2] = n[I >> 2]) : (n[p >> 2] = 1393, n[4 + p >> 2] = 1487, kt(0, 1269, p)), A)) : (n[I >> 2] = 1393, n[I + 4 >> 2] = 1458, kt(0, 1269, I), void (G = A)) : (n[R >> 2] = 1393, n[4 + R >> 2] = 1431, kt(0, 1269, R), void (G = A));
          n[C >> 2] = 1393, n[C + 4 >> 2] = 1411, kt(0, 1269, C), G = A;
        }, _csmResetDrawableDynamicFlags: function(a) {
          var u, v = G;
          G = G + 16 | 0, u = v, G = ((a |= 0) ? n[a + 428 >> 2] = 1 : (n[u >> 2] = 2318, n[u + 4 >> 2] = 1411, kt(0, 1269, u)), v);
        }, _csmReviveMocInPlace: function(a, u) {
          u |= 0;
          var v, S = 0, C = 0, p = G;
          return G = G + 32 | 0, C = p + 16 | 0, v = p + 8 | 0, S = p, (a |= 0) ? ((S = a) + 63 & -64 | 0) != (0 | S) ? (n[v >> 2] = 1322, n[4 + v >> 2] = 1342, kt(0, 1269, v), G = p, (C = 0) | C) : 0 | u && (u + 63 & -64 | 0) == (0 | u) ? (C = 0 | Ee(a), G = p, 0 | C) : (n[C >> 2] = 1322, n[C + 4 >> 2] = 1374, kt(0, 1269, C), G = p, (C = 0) | C) : (n[S >> 2] = 1322, n[S + 4 >> 2] = 1303, kt(0, 1269, S), G = p, (C = 0) | C);
        }, _csmSetLogFunction: function(a) {
          n[904] = a |= 0;
        }, _csmUpdateModel: function(a) {
          var u, v = G;
          G = G + 16 | 0, u = v, G = ((a |= 0) ? Qr(a) : (n[u >> 2] = 1595, n[u + 4 >> 2] = 1411, kt(0, 1269, u)), v);
        }, _emscripten_get_sbrk_ptr: _v, _emscripten_replace_memory: function(a) {
          return ft = new Int8Array(a), we = new Uint8Array(a), tr = new Int16Array(a), Re = new Uint16Array(a), n = new Int32Array(a), D = new Float32Array(a), f = new Float64Array(a), !0;
        }, _free: Ln, _i64Add: rn, _i64Subtract: qr, _malloc: en, _memcpy: Ei, _memset: ci, dynCall_ii: function(a, u) {
          return 0 | pv[3 & (a |= 0)](0 | (u |= 0));
        }, dynCall_iiii: function(a, u, v, S) {
          return 0 | sa[3 & (a |= 0)](0 | (u |= 0), 0 | (v |= 0), 0 | (S |= 0));
        }, dynCall_iiiii: function(a, u, v, S, C) {
          return 0 | vv[3 & (a |= 0)](0 | (u |= 0), 0 | (v |= 0), 0 | (S |= 0), 0 | (C |= 0));
        }, dynCall_vi: function(a, u) {
          F0[1 & (a |= 0)](0 | (u |= 0));
        }, dynCall_vii: function(a, u, v) {
          M0[3 & (a |= 0)](0 | (u |= 0), 0 | (v |= 0));
        }, dynCall_viiiii: function(a, u, v, S, C, p) {
          Fn[3 & (a |= 0)](0 | (u |= 0), 0 | (v |= 0), 0 | (S |= 0), 0 | (C |= 0), 0 | (p |= 0));
        }, establishStackSpace: function(a, u) {
          G = a |= 0;
        }, stackAlloc: function(a) {
          var u = G;
          return G = (G = G + (a |= 0) | 0) + 15 & -16, 0 | u;
        }, stackRestore: function(a) {
          G = a |= 0;
        }, stackSave: function() {
          return 0 | G;
        } };
      }({ Math, Int8Array, Int16Array, Int32Array, Uint8Array, Uint16Array, Float32Array, Float64Array }, { a: ue, b: function(nt) {
        Ft = nt;
      }, c: function() {
        return Ft;
      }, d: function(nt, mt) {
        return Rt[nt](mt);
      }, e: function(nt, mt, Wt, ft) {
        return Rt[nt](mt, Wt, ft);
      }, f: function(nt, mt, Wt, ft, tr) {
        return Rt[nt](mt, Wt, ft, tr);
      }, g: function(nt, mt) {
        Rt[nt](mt);
      }, h: function(nt, mt, Wt) {
        Rt[nt](mt, Wt);
      }, i: function(nt, mt, Wt, ft, tr, n) {
        Rt[nt](mt, Wt, ft, tr, n);
      }, j: function() {
        return Ur.apply(null, arguments);
      }, k: ei, l: function(nt, mt, Wt) {
        he.set(he.subarray(mt, mt + Wt), nt);
      }, m: function(nt) {
        if (2130706432 < nt)
          return !1;
        for (var mt = Math.max(ei(), 16777216); mt < nt; )
          mt = mt <= 536870912 ? vt(2 * mt) : Math.min(vt((3 * mt + 2147483648) / 4), 2130706432);
        return !!Ze(mt);
      }, n: Ur, o: function() {
        ue("OOM");
      }, p: function(nt) {
        return nt;
      }, q: Ue, r: Ze, s: function() {
        var nt = P._fflush;
        nt && nt(0), ce[1].length && kr(1, 10), ce[2].length && kr(2, 10);
      }, t: Ke, u: function() {
        var nt = Ke();
        return P.extraStackTrace && (nt += `
` + P.extraStackTrace()), Ue(nt);
      }, v: 4400 }, zt), cr = (P.___errno_location = qt.___errno_location, P.___muldi3 = qt.___muldi3, P.___udivdi3 = qt.___udivdi3, P._bitshift64Lshr = qt._bitshift64Lshr, P._bitshift64Shl = qt._bitshift64Shl, P._csmFree = qt._csmFree, P._csmGetDrawableConstantFlags = qt._csmGetDrawableConstantFlags, P._csmGetDrawableCount = qt._csmGetDrawableCount, P._csmGetDrawableDrawOrders = qt._csmGetDrawableDrawOrders, P._csmGetDrawableDynamicFlags = qt._csmGetDrawableDynamicFlags, P._csmGetDrawableIds = qt._csmGetDrawableIds, P._csmGetDrawableIndexCounts = qt._csmGetDrawableIndexCounts, P._csmGetDrawableIndices = qt._csmGetDrawableIndices, P._csmGetDrawableMaskCounts = qt._csmGetDrawableMaskCounts, P._csmGetDrawableMasks = qt._csmGetDrawableMasks, P._csmGetDrawableMultiplyColors = qt._csmGetDrawableMultiplyColors, P._csmGetDrawableOpacities = qt._csmGetDrawableOpacities, P._csmGetDrawableParentPartIndices = qt._csmGetDrawableParentPartIndices, P._csmGetDrawableRenderOrders = qt._csmGetDrawableRenderOrders, P._csmGetDrawableScreenColors = qt._csmGetDrawableScreenColors, P._csmGetDrawableTextureIndices = qt._csmGetDrawableTextureIndices, P._csmGetDrawableVertexCounts = qt._csmGetDrawableVertexCounts, P._csmGetDrawableVertexPositions = qt._csmGetDrawableVertexPositions, P._csmGetDrawableVertexUvs = qt._csmGetDrawableVertexUvs, P._csmGetLatestMocVersion = qt._csmGetLatestMocVersion, P._csmGetMocVersion = qt._csmGetMocVersion, P._csmGetParameterCount = qt._csmGetParameterCount, P._csmGetParameterDefaultValues = qt._csmGetParameterDefaultValues, P._csmGetParameterIds = qt._csmGetParameterIds, P._csmGetParameterKeyCounts = qt._csmGetParameterKeyCounts, P._csmGetParameterKeyValues = qt._csmGetParameterKeyValues, P._csmGetParameterMaximumValues = qt._csmGetParameterMaximumValues, P._csmGetParameterMinimumValues = qt._csmGetParameterMinimumValues, P._csmGetParameterTypes = qt._csmGetParameterTypes, P._csmGetParameterValues = qt._csmGetParameterValues, P._csmGetPartCount = qt._csmGetPartCount, P._csmGetPartIds = qt._csmGetPartIds, P._csmGetPartOpacities = qt._csmGetPartOpacities, P._csmGetPartParentPartIndices = qt._csmGetPartParentPartIndices, P._csmGetSizeofModel = qt._csmGetSizeofModel, P._csmGetVersion = qt._csmGetVersion, P._csmInitializeModelInPlace = qt._csmInitializeModelInPlace, P._csmMalloc = qt._csmMalloc, P._csmMallocMoc = qt._csmMallocMoc, P._csmMallocModelAndInitialize = qt._csmMallocModelAndInitialize, P._csmReadCanvasInfo = qt._csmReadCanvasInfo, P._csmResetDrawableDynamicFlags = qt._csmResetDrawableDynamicFlags, P._csmReviveMocInPlace = qt._csmReviveMocInPlace, P._csmSetLogFunction = qt._csmSetLogFunction, P._csmUpdateModel = qt._csmUpdateModel, P._emscripten_get_sbrk_ptr = qt._emscripten_get_sbrk_ptr, P._emscripten_replace_memory = qt._emscripten_replace_memory), wi = (P._free = qt._free, P._i64Add = qt._i64Add, P._i64Subtract = qt._i64Subtract, P._malloc = qt._malloc, P._memcpy = qt._memcpy, P._memset = qt._memset, P.establishStackSpace = qt.establishStackSpace, P.stackAlloc = qt.stackAlloc), pn = P.stackRestore = qt.stackRestore, Vr = P.stackSave = qt.stackSave;
      function ar() {
        function nt() {
          if (!Mi && (Mi = !0, !ne)) {
            if (Gt(Pe), Gt(Zt), P.onRuntimeInitialized && P.onRuntimeInitialized(), P.postRun)
              for (typeof P.postRun == "function" && (P.postRun = [P.postRun]); P.postRun.length; ) {
                var mt = P.postRun.shift();
                Be.unshift(mt);
              }
            Gt(Be);
          }
        }
        if (!(0 < _e)) {
          if (P.preRun)
            for (typeof P.preRun == "function" && (P.preRun = [P.preRun]); P.preRun.length; )
              (function() {
                var mt = P.preRun.shift();
                se.unshift(mt);
              })();
          Gt(se), 0 < _e || (P.setStatus ? (P.setStatus("Running..."), setTimeout(function() {
            setTimeout(function() {
              P.setStatus("");
            }, 1), nt();
          }, 1)) : nt());
        }
      }
      if (P.dynCall_ii = qt.dynCall_ii, P.dynCall_iiii = qt.dynCall_iiii, P.dynCall_iiiii = qt.dynCall_iiiii, P.dynCall_vi = qt.dynCall_vi, P.dynCall_vii = qt.dynCall_vii, P.dynCall_viiiii = qt.dynCall_viiiii, P.asm = qt, P.ccall = function(nt, mt, Wt, ft) {
        var tr = { string: function(f) {
          var d = 0;
          if (f != null && f !== 0) {
            var x = 1 + (f.length << 2), L = d = wi(x), M = he;
            if (0 < x) {
              for (var x = L + x - 1, N = 0; N < f.length; ++N) {
                var V = f.charCodeAt(N);
                if ((V = 55296 <= V && V <= 57343 ? 65536 + ((1023 & V) << 10) | 1023 & f.charCodeAt(++N) : V) <= 127) {
                  if (x <= L)
                    break;
                  M[L++] = V;
                } else {
                  if (V <= 2047) {
                    if (x <= L + 1)
                      break;
                    M[L++] = 192 | V >> 6;
                  } else {
                    if (V <= 65535) {
                      if (x <= L + 2)
                        break;
                      M[L++] = 224 | V >> 12;
                    } else {
                      if (x <= L + 3)
                        break;
                      M[L++] = 240 | V >> 18, M[L++] = 128 | V >> 12 & 63;
                    }
                    M[L++] = 128 | V >> 6 & 63;
                  }
                  M[L++] = 128 | 63 & V;
                }
              }
              M[L] = 0;
            }
          }
          return d;
        }, array: function(f) {
          var d = wi(f.length);
          return Vt.set(f, d), d;
        } }, n = function(f) {
          var d = P["_" + f];
          return ae(d, "Cannot call unknown function " + f + ", make sure it is exported"), d;
        }(nt), we = [];
        if (nt = 0, ft)
          for (var Re = 0; Re < ft.length; Re++) {
            var D = tr[Wt[Re]];
            D ? (nt === 0 && (nt = Vr()), we[Re] = D(ft[Re])) : we[Re] = ft[Re];
          }
        return Wt = function(f) {
          return mt === "string" ? bt(f) : mt === "boolean" ? !!f : f;
        }(Wt = n.apply(null, we)), nt !== 0 && pn(nt), Wt;
      }, P.UTF8ToString = bt, P.addFunction = function(nt) {
        for (var mt = 0; mt < 1; mt++)
          if (!Rt[mt])
            return Rt[mt] = nt, 1 + mt;
        throw "Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS.";
      }, me && ((String.prototype.startsWith ? me.startsWith(Nt) : me.indexOf(Nt) === 0) || (it = me, me = P.locateFile ? P.locateFile(it, At) : At + it), st || K ? (qt = J(me), he.set(qt, 8)) : (_e++, P.monitorRunDependencies && P.monitorRunDependencies(_e), Yr = function(nt) {
        nt.byteLength && (nt = new Uint8Array(nt)), he.set(nt, 8), P.memoryInitializerRequest && delete P.memoryInitializerRequest.response, _e--, P.monitorRunDependencies && P.monitorRunDependencies(_e), _e == 0 && fe && (nt = fe, fe = null, nt());
      }, Ve = function() {
        H(function() {
          throw "could not load memory initializer " + me;
        });
      }, (At = li(me)) ? Yr(At.buffer) : P.memoryInitializerRequest ? (it = function() {
        var nt = P.memoryInitializerRequest, mt = nt.response;
        if (nt.status !== 200 && nt.status !== 0) {
          if (!(mt = li(P.memoryInitializerRequestURL)))
            return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: " + nt.status + ", retrying " + me), void Ve();
          mt = mt.buffer;
        }
        Yr(mt);
      }, P.memoryInitializerRequest.response ? setTimeout(it, 0) : P.memoryInitializerRequest.addEventListener("load", it)) : Ve())), P.then = function(nt) {
        var mt;
        return Mi ? nt(P) : (mt = P.onRuntimeInitialized, P.onRuntimeInitialized = function() {
          mt && mt(), nt(P);
        }), P;
      }, fe = function nt() {
        Mi || ar(), Mi || (fe = nt);
      }, P.run = ar, P.preInit)
        for (typeof P.preInit == "function" && (P.preInit = [P.preInit]); 0 < P.preInit.length; )
          P.preInit.pop()();
      return ar(), T;
    };
  }();
  typeof exports == "object" && typeof module == "object" ? module.exports = w : typeof define == "function" && define.amd ? define([], function() {
    return w;
  }) : typeof exports == "object" && (exports._em_module = w);
  var b = w();
})(nl || (nl = {}));
window.Live2DCubismCore = nl;
function yv(t) {
  var e = this.constructor;
  return this.then(
    function(r) {
      return e.resolve(t()).then(function() {
        return r;
      });
    },
    function(r) {
      return e.resolve(t()).then(function() {
        return e.reject(r);
      });
    }
  );
}
function bv(t) {
  var e = this;
  return new e(function(r, i) {
    if (!(t && typeof t.length != "undefined"))
      return i(
        new TypeError(
          typeof t + " " + t + " is not iterable(cannot read property Symbol(Symbol.iterator))"
        )
      );
    var s = Array.prototype.slice.call(t);
    if (s.length === 0)
      return r([]);
    var o = s.length;
    function h(c, _) {
      if (_ && (typeof _ == "object" || typeof _ == "function")) {
        var y = _.then;
        if (typeof y == "function") {
          y.call(
            _,
            function(w) {
              h(c, w);
            },
            function(w) {
              s[c] = { status: "rejected", reason: w }, --o === 0 && r(s);
            }
          );
          return;
        }
      }
      s[c] = { status: "fulfilled", value: _ }, --o === 0 && r(s);
    }
    for (var l = 0; l < s.length; l++)
      h(l, s[l]);
  });
}
function N_(t, e) {
  this.name = "AggregateError", this.errors = t, this.message = e || "";
}
N_.prototype = Error.prototype;
function xv(t) {
  var e = this;
  return new e(function(r, i) {
    if (!(t && typeof t.length != "undefined"))
      return i(new TypeError("Promise.any accepts an array"));
    var s = Array.prototype.slice.call(t);
    if (s.length === 0)
      return i();
    for (var o = [], h = 0; h < s.length; h++)
      try {
        e.resolve(s[h]).then(r).catch(function(l) {
          o.push(l), o.length === s.length && i(
            new N_(
              o,
              "All promises were rejected"
            )
          );
        });
      } catch (l) {
        i(l);
      }
  });
}
var Tv = setTimeout;
function L_(t) {
  return Boolean(t && typeof t.length != "undefined");
}
function Av() {
}
function wv(t, e) {
  return function() {
    t.apply(e, arguments);
  };
}
function Rr(t) {
  if (!(this instanceof Rr))
    throw new TypeError("Promises must be constructed via new");
  if (typeof t != "function")
    throw new TypeError("not a function");
  this._state = 0, this._handled = !1, this._value = void 0, this._deferreds = [], F_(t, this);
}
function O_(t, e) {
  for (; t._state === 3; )
    t = t._value;
  if (t._state === 0) {
    t._deferreds.push(e);
    return;
  }
  t._handled = !0, Rr._immediateFn(function() {
    var r = t._state === 1 ? e.onFulfilled : e.onRejected;
    if (r === null) {
      (t._state === 1 ? sl : Eo)(e.promise, t._value);
      return;
    }
    var i;
    try {
      i = r(t._value);
    } catch (s) {
      Eo(e.promise, s);
      return;
    }
    sl(e.promise, i);
  });
}
function sl(t, e) {
  try {
    if (e === t)
      throw new TypeError("A promise cannot be resolved with itself.");
    if (e && (typeof e == "object" || typeof e == "function")) {
      var r = e.then;
      if (e instanceof Rr) {
        t._state = 3, t._value = e, ol(t);
        return;
      } else if (typeof r == "function") {
        F_(wv(r, e), t);
        return;
      }
    }
    t._state = 1, t._value = e, ol(t);
  } catch (i) {
    Eo(t, i);
  }
}
function Eo(t, e) {
  t._state = 2, t._value = e, ol(t);
}
function ol(t) {
  t._state === 2 && t._deferreds.length === 0 && Rr._immediateFn(function() {
    t._handled || Rr._unhandledRejectionFn(t._value);
  });
  for (var e = 0, r = t._deferreds.length; e < r; e++)
    O_(t, t._deferreds[e]);
  t._deferreds = null;
}
function Pv(t, e, r) {
  this.onFulfilled = typeof t == "function" ? t : null, this.onRejected = typeof e == "function" ? e : null, this.promise = r;
}
function F_(t, e) {
  var r = !1;
  try {
    t(
      function(i) {
        r || (r = !0, sl(e, i));
      },
      function(i) {
        r || (r = !0, Eo(e, i));
      }
    );
  } catch (i) {
    if (r)
      return;
    r = !0, Eo(e, i);
  }
}
Rr.prototype.catch = function(t) {
  return this.then(null, t);
};
Rr.prototype.then = function(t, e) {
  var r = new this.constructor(Av);
  return O_(this, new Pv(t, e, r)), r;
};
Rr.prototype.finally = yv;
Rr.all = function(t) {
  return new Rr(function(e, r) {
    if (!L_(t))
      return r(new TypeError("Promise.all accepts an array"));
    var i = Array.prototype.slice.call(t);
    if (i.length === 0)
      return e([]);
    var s = i.length;
    function o(l, c) {
      try {
        if (c && (typeof c == "object" || typeof c == "function")) {
          var _ = c.then;
          if (typeof _ == "function") {
            _.call(
              c,
              function(y) {
                o(l, y);
              },
              r
            );
            return;
          }
        }
        i[l] = c, --s === 0 && e(i);
      } catch (y) {
        r(y);
      }
    }
    for (var h = 0; h < i.length; h++)
      o(h, i[h]);
  });
};
Rr.any = xv;
Rr.allSettled = bv;
Rr.resolve = function(t) {
  return t && typeof t == "object" && t.constructor === Rr ? t : new Rr(function(e) {
    e(t);
  });
};
Rr.reject = function(t) {
  return new Rr(function(e, r) {
    r(t);
  });
};
Rr.race = function(t) {
  return new Rr(function(e, r) {
    if (!L_(t))
      return r(new TypeError("Promise.race accepts an array"));
    for (var i = 0, s = t.length; i < s; i++)
      Rr.resolve(t[i]).then(e, r);
  });
};
Rr._immediateFn = // @ts-ignore
typeof setImmediate == "function" && function(t) {
  setImmediate(t);
} || function(t) {
  Tv(t, 0);
};
Rr._unhandledRejectionFn = function(e) {
  typeof console != "undefined" && console && console.warn("Possible Unhandled Promise Rejection:", e);
};
var gh = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var G0 = Object.getOwnPropertySymbols, Ev = Object.prototype.hasOwnProperty, Iv = Object.prototype.propertyIsEnumerable;
function Cv(t) {
  if (t == null)
    throw new TypeError("Object.assign cannot be called with null or undefined");
  return Object(t);
}
function $v() {
  try {
    if (!Object.assign)
      return !1;
    var t = new String("abc");
    if (t[5] = "de", Object.getOwnPropertyNames(t)[0] === "5")
      return !1;
    for (var e = {}, r = 0; r < 10; r++)
      e["_" + String.fromCharCode(r)] = r;
    var i = Object.getOwnPropertyNames(e).map(function(o) {
      return e[o];
    });
    if (i.join("") !== "0123456789")
      return !1;
    var s = {};
    return "abcdefghijklmnopqrst".split("").forEach(function(o) {
      s[o] = o;
    }), Object.keys(Object.assign({}, s)).join("") === "abcdefghijklmnopqrst";
  } catch (o) {
    return !1;
  }
}
var Rv = $v() ? Object.assign : function(t, e) {
  for (var r, i = Cv(t), s, o = 1; o < arguments.length; o++) {
    r = Object(arguments[o]);
    for (var h in r)
      Ev.call(r, h) && (i[h] = r[h]);
    if (G0) {
      s = G0(r);
      for (var l = 0; l < s.length; l++)
        Iv.call(r, s[l]) && (i[s[l]] = r[s[l]]);
    }
  }
  return i;
};
/*!
 * @pixi/polyfill - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
typeof globalThis == "undefined" && (typeof self != "undefined" ? self.globalThis = self : typeof global != "undefined" && (global.globalThis = global));
globalThis.Promise || (globalThis.Promise = Rr);
Object.assign || (Object.assign = Rv);
var Sv = 16;
Date.now && Date.prototype.getTime || (Date.now = function() {
  return new Date().getTime();
});
if (!(globalThis.performance && globalThis.performance.now)) {
  var Nv = Date.now();
  globalThis.performance || (globalThis.performance = {}), globalThis.performance.now = function() {
    return Date.now() - Nv;
  };
}
var yh = Date.now(), D0 = ["ms", "moz", "webkit", "o"];
for (var bh = 0; bh < D0.length && !globalThis.requestAnimationFrame; ++bh) {
  var xh = D0[bh];
  globalThis.requestAnimationFrame = globalThis[xh + "RequestAnimationFrame"], globalThis.cancelAnimationFrame = globalThis[xh + "CancelAnimationFrame"] || globalThis[xh + "CancelRequestAnimationFrame"];
}
globalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(t) {
  if (typeof t != "function")
    throw new TypeError(t + "is not a function");
  var e = Date.now(), r = Sv + yh - e;
  return r < 0 && (r = 0), yh = e, globalThis.self.setTimeout(function() {
    yh = Date.now(), t(performance.now());
  }, r);
});
globalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(t) {
  return clearTimeout(t);
});
Math.sign || (Math.sign = function(e) {
  return e = Number(e), e === 0 || isNaN(e) ? e : e > 0 ? 1 : -1;
});
Number.isInteger || (Number.isInteger = function(e) {
  return typeof e == "number" && isFinite(e) && Math.floor(e) === e;
});
globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array);
globalThis.Float32Array || (globalThis.Float32Array = Array);
globalThis.Uint32Array || (globalThis.Uint32Array = Array);
globalThis.Uint16Array || (globalThis.Uint16Array = Array);
globalThis.Uint8Array || (globalThis.Uint8Array = Array);
globalThis.Int32Array || (globalThis.Int32Array = Array);
/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var B0;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(B0 || (B0 = {}));
var k0;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(k0 || (k0 = {}));
var X0;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(X0 || (X0 = {}));
var V0;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(V0 || (V0 = {}));
var H0;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(H0 || (H0 = {}));
var z0;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(z0 || (z0 = {}));
var j0;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(j0 || (j0 = {}));
var W0;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(W0 || (W0 = {}));
var Y0;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(Y0 || (Y0 = {}));
var al;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(al || (al = {}));
var hl;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(hl || (hl = {}));
var ll;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(ll || (ll = {}));
var q0;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(q0 || (q0 = {}));
var Z0;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(Z0 || (Z0 = {}));
var ul;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(ul || (ul = {}));
var bo;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(bo || (bo = {}));
var J0;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(J0 || (J0 = {}));
var Q0;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(Q0 || (Q0 = {}));
var fl;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(fl || (fl = {}));
var K0;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(K0 || (K0 = {}));
var M_ = {
  /**
   * Creates a canvas element of the given size.
   * This canvas is created using the browser's native canvas element.
   * @param width - width of the canvas
   * @param height - height of the canvas
   */
  createCanvas: function(t, e) {
    var r = document.createElement("canvas");
    return r.width = t, r.height = e, r;
  },
  getWebGLRenderingContext: function() {
    return WebGLRenderingContext;
  },
  getNavigator: function() {
    return navigator;
  },
  getBaseUrl: function() {
    var t;
    return (t = document.baseURI) !== null && t !== void 0 ? t : window.location.href;
  },
  fetch: function(t, e) {
    return fetch(t, e);
  }
}, Th = /iPhone/i, tf = /iPod/i, ef = /iPad/i, rf = /\biOS-universal(?:.+)Mac\b/i, Ah = /\bAndroid(?:.+)Mobile\b/i, nf = /Android/i, vs = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i, aa = /Silk/i, sn = /Windows Phone/i, sf = /\bWindows(?:.+)ARM\b/i, of = /BlackBerry/i, af = /BB10/i, hf = /Opera Mini/i, lf = /\b(CriOS|Chrome)(?:.+)Mobile/i, uf = /Mobile(?:.+)Firefox\b/i, ff = function(t) {
  return typeof t != "undefined" && t.platform === "MacIntel" && typeof t.maxTouchPoints == "number" && t.maxTouchPoints > 1 && typeof MSStream == "undefined";
};
function Lv(t) {
  return function(e) {
    return e.test(t);
  };
}
function Ov(t) {
  var e = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !t && typeof navigator != "undefined" ? e = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof t == "string" ? e.userAgent = t : t && t.userAgent && (e = {
    userAgent: t.userAgent,
    platform: t.platform,
    maxTouchPoints: t.maxTouchPoints || 0
  });
  var r = e.userAgent, i = r.split("[FBAN");
  typeof i[1] != "undefined" && (r = i[0]), i = r.split("Twitter"), typeof i[1] != "undefined" && (r = i[0]);
  var s = Lv(r), o = {
    apple: {
      phone: s(Th) && !s(sn),
      ipod: s(tf),
      tablet: !s(Th) && (s(ef) || ff(e)) && !s(sn),
      universal: s(rf),
      device: (s(Th) || s(tf) || s(ef) || s(rf) || ff(e)) && !s(sn)
    },
    amazon: {
      phone: s(vs),
      tablet: !s(vs) && s(aa),
      device: s(vs) || s(aa)
    },
    android: {
      phone: !s(sn) && s(vs) || !s(sn) && s(Ah),
      tablet: !s(sn) && !s(vs) && !s(Ah) && (s(aa) || s(nf)),
      device: !s(sn) && (s(vs) || s(aa) || s(Ah) || s(nf)) || s(/\bokhttp\b/i)
    },
    windows: {
      phone: s(sn),
      tablet: s(sf),
      device: s(sn) || s(sf)
    },
    other: {
      blackberry: s(of),
      blackberry10: s(af),
      opera: s(hf),
      firefox: s(uf),
      chrome: s(lf),
      device: s(of) || s(af) || s(hf) || s(uf) || s(lf)
    },
    any: !1,
    phone: !1,
    tablet: !1
  };
  return o.any = o.apple.device || o.android.device || o.windows.device || o.other.device, o.phone = o.apple.phone || o.android.phone || o.windows.phone, o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet, o;
}
var gi = Ov(globalThis.navigator);
function Fv() {
  return !gi.apple.device;
}
function Mv(t) {
  var e = !0;
  if (gi.tablet || gi.phone) {
    if (gi.apple.device) {
      var r = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (r) {
        var i = parseInt(r[1], 10);
        i < 11 && (e = !1);
      }
    }
    if (gi.android.device) {
      var r = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (r) {
        var i = parseInt(r[1], 10);
        i < 7 && (e = !1);
      }
    }
  }
  return e ? t : 4;
}
var ee = {
  /**
   * This adapter is used to call methods that are platform dependent.
   * For example `document.createElement` only runs on the web but fails in node environments.
   * This allows us to support more platforms by abstracting away specific implementations per platform.
   *
   * By default the adapter is set to work in the browser. However you can create your own
   * by implementing the `IAdapter` interface. See `IAdapter` for more information.
   * @name ADAPTER
   * @memberof PIXI.settings
   * @type {PIXI.IAdapter}
   * @default PIXI.BrowserAdapter
   */
  ADAPTER: M_,
  /**
   * If set to true WebGL will attempt make textures mimpaped by default.
   * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.
   * @static
   * @name MIPMAP_TEXTURES
   * @memberof PIXI.settings
   * @type {PIXI.MIPMAP_MODES}
   * @default PIXI.MIPMAP_MODES.POW2
   */
  MIPMAP_TEXTURES: ll.POW2,
  /**
   * Default anisotropic filtering level of textures.
   * Usually from 0 to 16
   * @static
   * @name ANISOTROPIC_LEVEL
   * @memberof PIXI.settings
   * @type {number}
   * @default 0
   */
  ANISOTROPIC_LEVEL: 0,
  /**
   * Default resolution / device pixel ratio of the renderer.
   * @static
   * @name RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  RESOLUTION: 1,
  /**
   * Default filter resolution.
   * @static
   * @name FILTER_RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  FILTER_RESOLUTION: 1,
  /**
   * Default filter samples.
   * @static
   * @name FILTER_MULTISAMPLE
   * @memberof PIXI.settings
   * @type {PIXI.MSAA_QUALITY}
   * @default PIXI.MSAA_QUALITY.NONE
   */
  FILTER_MULTISAMPLE: fl.NONE,
  /**
   * The maximum textures that this device supports.
   * @static
   * @name SPRITE_MAX_TEXTURES
   * @memberof PIXI.settings
   * @type {number}
   * @default 32
   */
  SPRITE_MAX_TEXTURES: Mv(32),
  // TODO: maybe change to SPRITE.BATCH_SIZE: 2000
  // TODO: maybe add PARTICLE.BATCH_SIZE: 15000
  /**
   * The default sprite batch size.
   *
   * The default aims to balance desktop and mobile devices.
   * @static
   * @name SPRITE_BATCH_SIZE
   * @memberof PIXI.settings
   * @type {number}
   * @default 4096
   */
  SPRITE_BATCH_SIZE: 4096,
  /**
   * The default render options if none are supplied to {@link PIXI.Renderer}
   * or {@link PIXI.CanvasRenderer}.
   * @static
   * @name RENDER_OPTIONS
   * @memberof PIXI.settings
   * @type {object}
   * @property {HTMLCanvasElement} [view=null] -
   * @property {boolean} [antialias=false] -
   * @property {boolean} [autoDensity=false] -
   * @property {boolean} [useContextAlpha=true]  -
   * @property {number} [backgroundColor=0x000000] -
   * @property {number} [backgroundAlpha=1] -
   * @property {boolean} [clearBeforeRender=true] -
   * @property {boolean} [preserveDrawingBuffer=false] -
   * @property {number} [width=800] -
   * @property {number} [height=600] -
   * @property {boolean} [legacy=false] -
   */
  RENDER_OPTIONS: {
    view: null,
    antialias: !1,
    autoDensity: !1,
    backgroundColor: 0,
    backgroundAlpha: 1,
    useContextAlpha: !0,
    clearBeforeRender: !0,
    preserveDrawingBuffer: !1,
    width: 250,
    height: 350,
    legacy: !1
  },
  /**
   * Default Garbage Collection mode.
   * @static
   * @name GC_MODE
   * @memberof PIXI.settings
   * @type {PIXI.GC_MODES}
   * @default PIXI.GC_MODES.AUTO
   */
  GC_MODE: ul.AUTO,
  /**
   * Default Garbage Collection max idle.
   * @static
   * @name GC_MAX_IDLE
   * @memberof PIXI.settings
   * @type {number}
   * @default 3600
   */
  GC_MAX_IDLE: 60 * 60,
  /**
   * Default Garbage Collection maximum check count.
   * @static
   * @name GC_MAX_CHECK_COUNT
   * @memberof PIXI.settings
   * @type {number}
   * @default 600
   */
  GC_MAX_CHECK_COUNT: 60 * 10,
  /**
   * Default wrap modes that are supported by pixi.
   * @static
   * @name WRAP_MODE
   * @memberof PIXI.settings
   * @type {PIXI.WRAP_MODES}
   * @default PIXI.WRAP_MODES.CLAMP
   */
  WRAP_MODE: hl.CLAMP,
  /**
   * Default scale mode for textures.
   * @static
   * @name SCALE_MODE
   * @memberof PIXI.settings
   * @type {PIXI.SCALE_MODES}
   * @default PIXI.SCALE_MODES.LINEAR
   */
  SCALE_MODE: al.LINEAR,
  /**
   * Default specify float precision in vertex shader.
   * @static
   * @name PRECISION_VERTEX
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.HIGH
   */
  PRECISION_VERTEX: bo.HIGH,
  /**
   * Default specify float precision in fragment shader.
   * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742
   * @static
   * @name PRECISION_FRAGMENT
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.MEDIUM
   */
  PRECISION_FRAGMENT: gi.apple.device ? bo.HIGH : bo.MEDIUM,
  /**
   * Can we upload the same buffer in a single frame?
   * @static
   * @name CAN_UPLOAD_SAME_BUFFER
   * @memberof PIXI.settings
   * @type {boolean}
   */
  CAN_UPLOAD_SAME_BUFFER: Fv(),
  /**
   * Enables bitmap creation before image load. This feature is experimental.
   * @static
   * @name CREATE_IMAGE_BITMAP
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  CREATE_IMAGE_BITMAP: !1,
  /**
   * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
   * Advantages can include sharper image quality (like text) and faster rendering on canvas.
   * The main disadvantage is movement of objects may appear less smooth.
   * @static
   * @constant
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  ROUND_PIXELS: !1
}, Oi = {}, Uv = {
  get exports() {
    return Oi;
  },
  set exports(t) {
    Oi = t;
  }
};
(function(t) {
  var e = Object.prototype.hasOwnProperty, r = "~";
  function i() {
  }
  Object.create && (i.prototype = /* @__PURE__ */ Object.create(null), new i().__proto__ || (r = !1));
  function s(c, _, y) {
    this.fn = c, this.context = _, this.once = y || !1;
  }
  function o(c, _, y, w, b) {
    if (typeof y != "function")
      throw new TypeError("The listener must be a function");
    var E = new s(y, w || c, b), T = r ? r + _ : _;
    return c._events[T] ? c._events[T].fn ? c._events[T] = [c._events[T], E] : c._events[T].push(E) : (c._events[T] = E, c._eventsCount++), c;
  }
  function h(c, _) {
    --c._eventsCount === 0 ? c._events = new i() : delete c._events[_];
  }
  function l() {
    this._events = new i(), this._eventsCount = 0;
  }
  l.prototype.eventNames = function() {
    var _ = [], y, w;
    if (this._eventsCount === 0)
      return _;
    for (w in y = this._events)
      e.call(y, w) && _.push(r ? w.slice(1) : w);
    return Object.getOwnPropertySymbols ? _.concat(Object.getOwnPropertySymbols(y)) : _;
  }, l.prototype.listeners = function(_) {
    var y = r ? r + _ : _, w = this._events[y];
    if (!w)
      return [];
    if (w.fn)
      return [w.fn];
    for (var b = 0, E = w.length, T = new Array(E); b < E; b++)
      T[b] = w[b].fn;
    return T;
  }, l.prototype.listenerCount = function(_) {
    var y = r ? r + _ : _, w = this._events[y];
    return w ? w.fn ? 1 : w.length : 0;
  }, l.prototype.emit = function(_, y, w, b, E, T) {
    var P = r ? r + _ : _;
    if (!this._events[P])
      return !1;
    var O = this._events[P], H = arguments.length, Y, J;
    if (O.fn) {
      switch (O.once && this.removeListener(_, O.fn, void 0, !0), H) {
        case 1:
          return O.fn.call(O.context), !0;
        case 2:
          return O.fn.call(O.context, y), !0;
        case 3:
          return O.fn.call(O.context, y, w), !0;
        case 4:
          return O.fn.call(O.context, y, w, b), !0;
        case 5:
          return O.fn.call(O.context, y, w, b, E), !0;
        case 6:
          return O.fn.call(O.context, y, w, b, E, T), !0;
      }
      for (J = 1, Y = new Array(H - 1); J < H; J++)
        Y[J - 1] = arguments[J];
      O.fn.apply(O.context, Y);
    } else {
      var it = O.length, st;
      for (J = 0; J < it; J++)
        switch (O[J].once && this.removeListener(_, O[J].fn, void 0, !0), H) {
          case 1:
            O[J].fn.call(O[J].context);
            break;
          case 2:
            O[J].fn.call(O[J].context, y);
            break;
          case 3:
            O[J].fn.call(O[J].context, y, w);
            break;
          case 4:
            O[J].fn.call(O[J].context, y, w, b);
            break;
          default:
            if (!Y)
              for (st = 1, Y = new Array(H - 1); st < H; st++)
                Y[st - 1] = arguments[st];
            O[J].fn.apply(O[J].context, Y);
        }
    }
    return !0;
  }, l.prototype.on = function(_, y, w) {
    return o(this, _, y, w, !1);
  }, l.prototype.once = function(_, y, w) {
    return o(this, _, y, w, !0);
  }, l.prototype.removeListener = function(_, y, w, b) {
    var E = r ? r + _ : _;
    if (!this._events[E])
      return this;
    if (!y)
      return h(this, E), this;
    var T = this._events[E];
    if (T.fn)
      T.fn === y && (!b || T.once) && (!w || T.context === w) && h(this, E);
    else {
      for (var P = 0, O = [], H = T.length; P < H; P++)
        (T[P].fn !== y || b && !T[P].once || w && T[P].context !== w) && O.push(T[P]);
      O.length ? this._events[E] = O.length === 1 ? O[0] : O : h(this, E);
    }
    return this;
  }, l.prototype.removeAllListeners = function(_) {
    var y;
    return _ ? (y = r ? r + _ : _, this._events[y] && h(this, y)) : (this._events = new i(), this._eventsCount = 0), this;
  }, l.prototype.off = l.prototype.removeListener, l.prototype.addListener = l.prototype.on, l.prefixed = r, l.EventEmitter = l, t.exports = l;
})(Uv);
var Rs = {}, Gv = {
  get exports() {
    return Rs;
  },
  set exports(t) {
    Rs = t;
  }
};
Gv.exports = Qa;
Rs.default = Qa;
function Qa(t, e, r) {
  r = r || 2;
  var i = e && e.length, s = i ? e[0] * r : t.length, o = U_(t, 0, s, r, !0), h = [];
  if (!o || o.next === o.prev)
    return h;
  var l, c, _, y, w, b, E;
  if (i && (o = Vv(t, e, o, r)), t.length > 80 * r) {
    l = _ = t[0], c = y = t[1];
    for (var T = r; T < s; T += r)
      w = t[T], b = t[T + 1], w < l && (l = w), b < c && (c = b), w > _ && (_ = w), b > y && (y = b);
    E = Math.max(_ - l, y - c), E = E !== 0 ? 32767 / E : 0;
  }
  return Io(o, h, r, l, c, E, 0), h;
}
function U_(t, e, r, i, s) {
  var o, h;
  if (s === _l(t, e, r, i) > 0)
    for (o = e; o < r; o += i)
      h = cf(o, t[o], t[o + 1], h);
  else
    for (o = r - i; o >= e; o -= i)
      h = cf(o, t[o], t[o + 1], h);
  return h && Ka(h, h.next) && ($o(h), h = h.next), h;
}
function ns(t, e) {
  if (!t)
    return t;
  e || (e = t);
  var r = t, i;
  do
    if (i = !1, !r.steiner && (Ka(r, r.next) || Cr(r.prev, r, r.next) === 0)) {
      if ($o(r), r = e = r.prev, r === r.next)
        break;
      i = !0;
    } else
      r = r.next;
  while (i || r !== e);
  return e;
}
function Io(t, e, r, i, s, o, h) {
  if (t) {
    !h && o && Yv(t, i, s, o);
    for (var l = t, c, _; t.prev !== t.next; ) {
      if (c = t.prev, _ = t.next, o ? Bv(t, i, s, o) : Dv(t)) {
        e.push(c.i / r | 0), e.push(t.i / r | 0), e.push(_.i / r | 0), $o(t), t = _.next, l = _.next;
        continue;
      }
      if (t = _, t === l) {
        h ? h === 1 ? (t = kv(ns(t), e, r), Io(t, e, r, i, s, o, 2)) : h === 2 && Xv(t, e, r, i, s, o) : Io(ns(t), e, r, i, s, o, 1);
        break;
      }
    }
  }
}
function Dv(t) {
  var e = t.prev, r = t, i = t.next;
  if (Cr(e, r, i) >= 0)
    return !1;
  for (var s = e.x, o = r.x, h = i.x, l = e.y, c = r.y, _ = i.y, y = s < o ? s < h ? s : h : o < h ? o : h, w = l < c ? l < _ ? l : _ : c < _ ? c : _, b = s > o ? s > h ? s : h : o > h ? o : h, E = l > c ? l > _ ? l : _ : c > _ ? c : _, T = i.next; T !== e; ) {
    if (T.x >= y && T.x <= b && T.y >= w && T.y <= E && ws(s, l, o, c, h, _, T.x, T.y) && Cr(T.prev, T, T.next) >= 0)
      return !1;
    T = T.next;
  }
  return !0;
}
function Bv(t, e, r, i) {
  var s = t.prev, o = t, h = t.next;
  if (Cr(s, o, h) >= 0)
    return !1;
  for (var l = s.x, c = o.x, _ = h.x, y = s.y, w = o.y, b = h.y, E = l < c ? l < _ ? l : _ : c < _ ? c : _, T = y < w ? y < b ? y : b : w < b ? w : b, P = l > c ? l > _ ? l : _ : c > _ ? c : _, O = y > w ? y > b ? y : b : w > b ? w : b, H = cl(E, T, e, r, i), Y = cl(P, O, e, r, i), J = t.prevZ, it = t.nextZ; J && J.z >= H && it && it.z <= Y; ) {
    if (J.x >= E && J.x <= P && J.y >= T && J.y <= O && J !== s && J !== h && ws(l, y, c, w, _, b, J.x, J.y) && Cr(J.prev, J, J.next) >= 0 || (J = J.prevZ, it.x >= E && it.x <= P && it.y >= T && it.y <= O && it !== s && it !== h && ws(l, y, c, w, _, b, it.x, it.y) && Cr(it.prev, it, it.next) >= 0))
      return !1;
    it = it.nextZ;
  }
  for (; J && J.z >= H; ) {
    if (J.x >= E && J.x <= P && J.y >= T && J.y <= O && J !== s && J !== h && ws(l, y, c, w, _, b, J.x, J.y) && Cr(J.prev, J, J.next) >= 0)
      return !1;
    J = J.prevZ;
  }
  for (; it && it.z <= Y; ) {
    if (it.x >= E && it.x <= P && it.y >= T && it.y <= O && it !== s && it !== h && ws(l, y, c, w, _, b, it.x, it.y) && Cr(it.prev, it, it.next) >= 0)
      return !1;
    it = it.nextZ;
  }
  return !0;
}
function kv(t, e, r) {
  var i = t;
  do {
    var s = i.prev, o = i.next.next;
    !Ka(s, o) && G_(s, i, i.next, o) && Co(s, o) && Co(o, s) && (e.push(s.i / r | 0), e.push(i.i / r | 0), e.push(o.i / r | 0), $o(i), $o(i.next), i = t = o), i = i.next;
  } while (i !== t);
  return ns(i);
}
function Xv(t, e, r, i, s, o) {
  var h = t;
  do {
    for (var l = h.next.next; l !== h.prev; ) {
      if (h.i !== l.i && Jv(h, l)) {
        var c = D_(h, l);
        h = ns(h, h.next), c = ns(c, c.next), Io(h, e, r, i, s, o, 0), Io(c, e, r, i, s, o, 0);
        return;
      }
      l = l.next;
    }
    h = h.next;
  } while (h !== t);
}
function Vv(t, e, r, i) {
  var s = [], o, h, l, c, _;
  for (o = 0, h = e.length; o < h; o++)
    l = e[o] * i, c = o < h - 1 ? e[o + 1] * i : t.length, _ = U_(t, l, c, i, !1), _ === _.next && (_.steiner = !0), s.push(Zv(_));
  for (s.sort(Hv), o = 0; o < s.length; o++)
    r = zv(s[o], r);
  return r;
}
function Hv(t, e) {
  return t.x - e.x;
}
function zv(t, e) {
  var r = jv(t, e);
  if (!r)
    return e;
  var i = D_(r, t);
  return ns(i, i.next), ns(r, r.next);
}
function jv(t, e) {
  var r = e, i = t.x, s = t.y, o = -1 / 0, h;
  do {
    if (s <= r.y && s >= r.next.y && r.next.y !== r.y) {
      var l = r.x + (s - r.y) * (r.next.x - r.x) / (r.next.y - r.y);
      if (l <= i && l > o && (o = l, h = r.x < r.next.x ? r : r.next, l === i))
        return h;
    }
    r = r.next;
  } while (r !== e);
  if (!h)
    return null;
  var c = h, _ = h.x, y = h.y, w = 1 / 0, b;
  r = h;
  do
    i >= r.x && r.x >= _ && i !== r.x && ws(s < y ? i : o, s, _, y, s < y ? o : i, s, r.x, r.y) && (b = Math.abs(s - r.y) / (i - r.x), Co(r, t) && (b < w || b === w && (r.x > h.x || r.x === h.x && Wv(h, r))) && (h = r, w = b)), r = r.next;
  while (r !== c);
  return h;
}
function Wv(t, e) {
  return Cr(t.prev, t, e.prev) < 0 && Cr(e.next, t, t.next) < 0;
}
function Yv(t, e, r, i) {
  var s = t;
  do
    s.z === 0 && (s.z = cl(s.x, s.y, e, r, i)), s.prevZ = s.prev, s.nextZ = s.next, s = s.next;
  while (s !== t);
  s.prevZ.nextZ = null, s.prevZ = null, qv(s);
}
function qv(t) {
  var e, r, i, s, o, h, l, c, _ = 1;
  do {
    for (r = t, t = null, o = null, h = 0; r; ) {
      for (h++, i = r, l = 0, e = 0; e < _ && (l++, i = i.nextZ, !!i); e++)
        ;
      for (c = _; l > 0 || c > 0 && i; )
        l !== 0 && (c === 0 || !i || r.z <= i.z) ? (s = r, r = r.nextZ, l--) : (s = i, i = i.nextZ, c--), o ? o.nextZ = s : t = s, s.prevZ = o, o = s;
      r = i;
    }
    o.nextZ = null, _ *= 2;
  } while (h > 1);
  return t;
}
function cl(t, e, r, i, s) {
  return t = (t - r) * s | 0, e = (e - i) * s | 0, t = (t | t << 8) & 16711935, t = (t | t << 4) & 252645135, t = (t | t << 2) & 858993459, t = (t | t << 1) & 1431655765, e = (e | e << 8) & 16711935, e = (e | e << 4) & 252645135, e = (e | e << 2) & 858993459, e = (e | e << 1) & 1431655765, t | e << 1;
}
function Zv(t) {
  var e = t, r = t;
  do
    (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;
  while (e !== t);
  return r;
}
function ws(t, e, r, i, s, o, h, l) {
  return (s - h) * (e - l) >= (t - h) * (o - l) && (t - h) * (i - l) >= (r - h) * (e - l) && (r - h) * (o - l) >= (s - h) * (i - l);
}
function Jv(t, e) {
  return t.next.i !== e.i && t.prev.i !== e.i && !Qv(t, e) && // dones't intersect other edges
  (Co(t, e) && Co(e, t) && Kv(t, e) && // locally visible
  (Cr(t.prev, t, e.prev) || Cr(t, e.prev, e)) || // does not create opposite-facing sectors
  Ka(t, e) && Cr(t.prev, t, t.next) > 0 && Cr(e.prev, e, e.next) > 0);
}
function Cr(t, e, r) {
  return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y);
}
function Ka(t, e) {
  return t.x === e.x && t.y === e.y;
}
function G_(t, e, r, i) {
  var s = la(Cr(t, e, r)), o = la(Cr(t, e, i)), h = la(Cr(r, i, t)), l = la(Cr(r, i, e));
  return !!(s !== o && h !== l || s === 0 && ha(t, r, e) || o === 0 && ha(t, i, e) || h === 0 && ha(r, t, i) || l === 0 && ha(r, e, i));
}
function ha(t, e, r) {
  return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y);
}
function la(t) {
  return t > 0 ? 1 : t < 0 ? -1 : 0;
}
function Qv(t, e) {
  var r = t;
  do {
    if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && G_(r, r.next, t, e))
      return !0;
    r = r.next;
  } while (r !== t);
  return !1;
}
function Co(t, e) {
  return Cr(t.prev, t, t.next) < 0 ? Cr(t, e, t.next) >= 0 && Cr(t, t.prev, e) >= 0 : Cr(t, e, t.prev) < 0 || Cr(t, t.next, e) < 0;
}
function Kv(t, e) {
  var r = t, i = !1, s = (t.x + e.x) / 2, o = (t.y + e.y) / 2;
  do
    r.y > o != r.next.y > o && r.next.y !== r.y && s < (r.next.x - r.x) * (o - r.y) / (r.next.y - r.y) + r.x && (i = !i), r = r.next;
  while (r !== t);
  return i;
}
function D_(t, e) {
  var r = new dl(t.i, t.x, t.y), i = new dl(e.i, e.x, e.y), s = t.next, o = e.prev;
  return t.next = e, e.prev = t, r.next = s, s.prev = r, i.next = r, r.prev = i, o.next = i, i.prev = o, i;
}
function cf(t, e, r, i) {
  var s = new dl(t, e, r);
  return i ? (s.next = i.next, s.prev = i, i.next.prev = s, i.next = s) : (s.prev = s, s.next = s), s;
}
function $o(t) {
  t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);
}
function dl(t, e, r) {
  this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = 0, this.prevZ = null, this.nextZ = null, this.steiner = !1;
}
Qa.deviation = function(t, e, r, i) {
  var s = e && e.length, o = s ? e[0] * r : t.length, h = Math.abs(_l(t, 0, o, r));
  if (s)
    for (var l = 0, c = e.length; l < c; l++) {
      var _ = e[l] * r, y = l < c - 1 ? e[l + 1] * r : t.length;
      h -= Math.abs(_l(t, _, y, r));
    }
  var w = 0;
  for (l = 0; l < i.length; l += 3) {
    var b = i[l] * r, E = i[l + 1] * r, T = i[l + 2] * r;
    w += Math.abs(
      (t[b] - t[T]) * (t[E + 1] - t[b + 1]) - (t[b] - t[E]) * (t[T + 1] - t[b + 1])
    );
  }
  return h === 0 && w === 0 ? 0 : Math.abs((w - h) / h);
};
function _l(t, e, r, i) {
  for (var s = 0, o = e, h = r - i; o < r; o += i)
    s += (t[h] - t[o]) * (t[o + 1] + t[h + 1]), h = o;
  return s;
}
Qa.flatten = function(t) {
  for (var e = t[0][0].length, r = { vertices: [], holes: [], dimensions: e }, i = 0, s = 0; s < t.length; s++) {
    for (var o = 0; o < t[s].length; o++)
      for (var h = 0; h < e; h++)
        r.vertices.push(t[s][o][h]);
    s > 0 && (i += t[s - 1].length, r.holes.push(i));
  }
  return r;
};
var Ba = {}, tm = {
  get exports() {
    return Ba;
  },
  set exports(t) {
    Ba = t;
  }
};
/*! https://mths.be/punycode v1.3.2 by @mathias */
(function(t, e) {
  (function(r) {
    var i = e && !e.nodeType && e, s = t && !t.nodeType && t, o = typeof gh == "object" && gh;
    (o.global === o || o.window === o || o.self === o) && (r = o);
    var h, l = 2147483647, c = 36, _ = 1, y = 26, w = 38, b = 700, E = 72, T = 128, P = "-", O = /^xn--/, H = /[^\x20-\x7E]/, Y = /[\x2E\u3002\uFF0E\uFF61]/g, J = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, it = c - _, st = Math.floor, K = String.fromCharCode, At;
    function Tt(at) {
      throw RangeError(J[at]);
    }
    function dt(at, bt) {
      for (var vt = at.length, le = []; vt--; )
        le[vt] = bt(at[vt]);
      return le;
    }
    function Et(at, bt) {
      var vt = at.split("@"), le = "";
      vt.length > 1 && (le = vt[0] + "@", at = vt[1]), at = at.replace(Y, ".");
      var Gt = at.split("."), se = dt(Gt, bt).join(".");
      return le + se;
    }
    function Rt(at) {
      for (var bt = [], vt = 0, le = at.length, Gt, se; vt < le; )
        Gt = at.charCodeAt(vt++), Gt >= 55296 && Gt <= 56319 && vt < le ? (se = at.charCodeAt(vt++), (se & 64512) == 56320 ? bt.push(((Gt & 1023) << 10) + (se & 1023) + 65536) : (bt.push(Gt), vt--)) : bt.push(Gt);
      return bt;
    }
    function Ft(at) {
      return dt(at, function(bt) {
        var vt = "";
        return bt > 65535 && (bt -= 65536, vt += K(bt >>> 10 & 1023 | 55296), bt = 56320 | bt & 1023), vt += K(bt), vt;
      }).join("");
    }
    function ne(at) {
      return at - 48 < 10 ? at - 22 : at - 65 < 26 ? at - 65 : at - 97 < 26 ? at - 97 : c;
    }
    function ae(at, bt) {
      return at + 22 + 75 * (at < 26) - ((bt != 0) << 5);
    }
    function zt(at, bt, vt) {
      var le = 0;
      for (at = vt ? st(at / b) : at >> 1, at += st(at / bt); at > it * y >> 1; le += c)
        at = st(at / it);
      return st(le + (it + 1) * at / (at + w));
    }
    function Vt(at) {
      var bt = [], vt = at.length, le, Gt = 0, se = T, Pe = E, Zt, Be, _e, fe, ue, me, Nt, Ue, Ke;
      for (Zt = at.lastIndexOf(P), Zt < 0 && (Zt = 0), Be = 0; Be < Zt; ++Be)
        at.charCodeAt(Be) >= 128 && Tt("not-basic"), bt.push(at.charCodeAt(Be));
      for (_e = Zt > 0 ? Zt + 1 : 0; _e < vt; ) {
        for (fe = Gt, ue = 1, me = c; _e >= vt && Tt("invalid-input"), Nt = ne(at.charCodeAt(_e++)), (Nt >= c || Nt > st((l - Gt) / ue)) && Tt("overflow"), Gt += Nt * ue, Ue = me <= Pe ? _ : me >= Pe + y ? y : me - Pe, !(Nt < Ue); me += c)
          Ke = c - Ue, ue > st(l / Ke) && Tt("overflow"), ue *= Ke;
        le = bt.length + 1, Pe = zt(Gt - fe, le, fe == 0), st(Gt / le) > l - se && Tt("overflow"), se += st(Gt / le), Gt %= le, bt.splice(Gt++, 0, se);
      }
      return Ft(bt);
    }
    function he(at) {
      var bt, vt, le, Gt, se, Pe, Zt, Be, _e, fe, ue, me = [], Nt, Ue, Ke, ce;
      for (at = Rt(at), Nt = at.length, bt = T, vt = 0, se = E, Pe = 0; Pe < Nt; ++Pe)
        ue = at[Pe], ue < 128 && me.push(K(ue));
      for (le = Gt = me.length, Gt && me.push(P); le < Nt; ) {
        for (Zt = l, Pe = 0; Pe < Nt; ++Pe)
          ue = at[Pe], ue >= bt && ue < Zt && (Zt = ue);
        for (Ue = le + 1, Zt - bt > st((l - vt) / Ue) && Tt("overflow"), vt += (Zt - bt) * Ue, bt = Zt, Pe = 0; Pe < Nt; ++Pe)
          if (ue = at[Pe], ue < bt && ++vt > l && Tt("overflow"), ue == bt) {
            for (Be = vt, _e = c; fe = _e <= se ? _ : _e >= se + y ? y : _e - se, !(Be < fe); _e += c)
              ce = Be - fe, Ke = c - fe, me.push(
                K(ae(fe + ce % Ke, 0))
              ), Be = st(ce / Ke);
            me.push(K(ae(Be, 0))), se = zt(vt, Ue, le == Gt), vt = 0, ++le;
          }
        ++vt, ++bt;
      }
      return me.join("");
    }
    function Kt(at) {
      return Et(at, function(bt) {
        return O.test(bt) ? Vt(bt.slice(4).toLowerCase()) : bt;
      });
    }
    function ve(at) {
      return Et(at, function(bt) {
        return H.test(bt) ? "xn--" + he(bt) : bt;
      });
    }
    if (h = {
      /**
       * A string representing the current Punycode.js version number.
       * @memberOf punycode
       * @type String
       */
      version: "1.3.2",
      /**
       * An object of methods to convert from JavaScript's internal character
       * representation (UCS-2) to Unicode code points, and back.
       * @see <https://mathiasbynens.be/notes/javascript-encoding>
       * @memberOf punycode
       * @type Object
       */
      ucs2: {
        decode: Rt,
        encode: Ft
      },
      decode: Vt,
      encode: he,
      toASCII: ve,
      toUnicode: Kt
    }, i && s)
      if (t.exports == i)
        s.exports = h;
      else
        for (At in h)
          h.hasOwnProperty(At) && (i[At] = h[At]);
    else
      r.punycode = h;
  })(gh);
})(tm, Ba);
var em = {
  isString: function(t) {
    return typeof t == "string";
  },
  isObject: function(t) {
    return typeof t == "object" && t !== null;
  },
  isNull: function(t) {
    return t === null;
  },
  isNullOrUndefined: function(t) {
    return t == null;
  }
}, Ro = {};
function rm(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
}
var im = function(t, e, r, i) {
  e = e || "&", r = r || "=";
  var s = {};
  if (typeof t != "string" || t.length === 0)
    return s;
  var o = /\+/g;
  t = t.split(e);
  var h = 1e3;
  i && typeof i.maxKeys == "number" && (h = i.maxKeys);
  var l = t.length;
  h > 0 && l > h && (l = h);
  for (var c = 0; c < l; ++c) {
    var _ = t[c].replace(o, "%20"), y = _.indexOf(r), w, b, E, T;
    y >= 0 ? (w = _.substr(0, y), b = _.substr(y + 1)) : (w = _, b = ""), E = decodeURIComponent(w), T = decodeURIComponent(b), rm(s, E) ? Array.isArray(s[E]) ? s[E].push(T) : s[E] = [s[E], T] : s[E] = T;
  }
  return s;
}, to = function(t) {
  switch (typeof t) {
    case "string":
      return t;
    case "boolean":
      return t ? "true" : "false";
    case "number":
      return isFinite(t) ? t : "";
    default:
      return "";
  }
}, nm = function(t, e, r, i) {
  return e = e || "&", r = r || "=", t === null && (t = void 0), typeof t == "object" ? Object.keys(t).map(function(s) {
    var o = encodeURIComponent(to(s)) + r;
    return Array.isArray(t[s]) ? t[s].map(function(h) {
      return o + encodeURIComponent(to(h));
    }).join(e) : o + encodeURIComponent(to(t[s]));
  }).join(e) : i ? encodeURIComponent(to(i)) + r + encodeURIComponent(to(t)) : "";
};
Ro.decode = Ro.parse = im;
Ro.encode = Ro.stringify = nm;
var sm = Ba, Vi = em, om = th, am = gm, hm = mm;
function Ni() {
  this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null;
}
var lm = /^([a-z0-9.+-]+:)/i, um = /:[0-9]*$/, fm = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/, cm = ["<", ">", '"', "`", " ", "\r", `
`, "	"], dm = ["{", "}", "|", "\\", "^", "`"].concat(cm), pl = ["'"].concat(dm), df = ["%", "/", "?", ";", "#"].concat(pl), _f = ["/", "?", "#"], _m = 255, pf = /^[+a-z0-9A-Z_-]{0,63}$/, pm = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, vm = {
  javascript: !0,
  "javascript:": !0
}, vl = {
  javascript: !0,
  "javascript:": !0
}, Is = {
  http: !0,
  https: !0,
  ftp: !0,
  gopher: !0,
  file: !0,
  "http:": !0,
  "https:": !0,
  "ftp:": !0,
  "gopher:": !0,
  "file:": !0
}, ml = Ro;
function th(t, e, r) {
  if (t && Vi.isObject(t) && t instanceof Ni)
    return t;
  var i = new Ni();
  return i.parse(t, e, r), i;
}
Ni.prototype.parse = function(t, e, r) {
  if (!Vi.isString(t))
    throw new TypeError("Parameter 'url' must be a string, not " + typeof t);
  var i = t.indexOf("?"), s = i !== -1 && i < t.indexOf("#") ? "?" : "#", o = t.split(s), h = /\\/g;
  o[0] = o[0].replace(h, "/"), t = o.join(s);
  var l = t;
  if (l = l.trim(), !r && t.split("#").length === 1) {
    var c = fm.exec(l);
    if (c)
      return this.path = l, this.href = l, this.pathname = c[1], c[2] ? (this.search = c[2], e ? this.query = ml.parse(this.search.substr(1)) : this.query = this.search.substr(1)) : e && (this.search = "", this.query = {}), this;
  }
  var _ = lm.exec(l);
  if (_) {
    _ = _[0];
    var y = _.toLowerCase();
    this.protocol = y, l = l.substr(_.length);
  }
  if (r || _ || l.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var w = l.substr(0, 2) === "//";
    w && !(_ && vl[_]) && (l = l.substr(2), this.slashes = !0);
  }
  if (!vl[_] && (w || _ && !Is[_])) {
    for (var b = -1, E = 0; E < _f.length; E++) {
      var T = l.indexOf(_f[E]);
      T !== -1 && (b === -1 || T < b) && (b = T);
    }
    var P, O;
    b === -1 ? O = l.lastIndexOf("@") : O = l.lastIndexOf("@", b), O !== -1 && (P = l.slice(0, O), l = l.slice(O + 1), this.auth = decodeURIComponent(P)), b = -1;
    for (var E = 0; E < df.length; E++) {
      var T = l.indexOf(df[E]);
      T !== -1 && (b === -1 || T < b) && (b = T);
    }
    b === -1 && (b = l.length), this.host = l.slice(0, b), l = l.slice(b), this.parseHost(), this.hostname = this.hostname || "";
    var H = this.hostname[0] === "[" && this.hostname[this.hostname.length - 1] === "]";
    if (!H)
      for (var Y = this.hostname.split(/\./), E = 0, J = Y.length; E < J; E++) {
        var it = Y[E];
        if (it && !it.match(pf)) {
          for (var st = "", K = 0, At = it.length; K < At; K++)
            it.charCodeAt(K) > 127 ? st += "x" : st += it[K];
          if (!st.match(pf)) {
            var Tt = Y.slice(0, E), dt = Y.slice(E + 1), Et = it.match(pm);
            Et && (Tt.push(Et[1]), dt.unshift(Et[2])), dt.length && (l = "/" + dt.join(".") + l), this.hostname = Tt.join(".");
            break;
          }
        }
      }
    this.hostname.length > _m ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), H || (this.hostname = sm.toASCII(this.hostname));
    var Rt = this.port ? ":" + this.port : "", Ft = this.hostname || "";
    this.host = Ft + Rt, this.href += this.host, H && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), l[0] !== "/" && (l = "/" + l));
  }
  if (!vm[y])
    for (var E = 0, J = pl.length; E < J; E++) {
      var ne = pl[E];
      if (l.indexOf(ne) !== -1) {
        var ae = encodeURIComponent(ne);
        ae === ne && (ae = escape(ne)), l = l.split(ne).join(ae);
      }
    }
  var zt = l.indexOf("#");
  zt !== -1 && (this.hash = l.substr(zt), l = l.slice(0, zt));
  var Vt = l.indexOf("?");
  if (Vt !== -1 ? (this.search = l.substr(Vt), this.query = l.substr(Vt + 1), e && (this.query = ml.parse(this.query)), l = l.slice(0, Vt)) : e && (this.search = "", this.query = {}), l && (this.pathname = l), Is[y] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) {
    var Rt = this.pathname || "", he = this.search || "";
    this.path = Rt + he;
  }
  return this.href = this.format(), this;
};
function mm(t) {
  return Vi.isString(t) && (t = th(t)), t instanceof Ni ? t.format() : Ni.prototype.format.call(t);
}
Ni.prototype.format = function() {
  var t = this.auth || "";
  t && (t = encodeURIComponent(t), t = t.replace(/%3A/i, ":"), t += "@");
  var e = this.protocol || "", r = this.pathname || "", i = this.hash || "", s = !1, o = "";
  this.host ? s = t + this.host : this.hostname && (s = t + (this.hostname.indexOf(":") === -1 ? this.hostname : "[" + this.hostname + "]"), this.port && (s += ":" + this.port)), this.query && Vi.isObject(this.query) && Object.keys(this.query).length && (o = ml.stringify(this.query));
  var h = this.search || o && "?" + o || "";
  return e && e.substr(-1) !== ":" && (e += ":"), this.slashes || (!e || Is[e]) && s !== !1 ? (s = "//" + (s || ""), r && r.charAt(0) !== "/" && (r = "/" + r)) : s || (s = ""), i && i.charAt(0) !== "#" && (i = "#" + i), h && h.charAt(0) !== "?" && (h = "?" + h), r = r.replace(/[?#]/g, function(l) {
    return encodeURIComponent(l);
  }), h = h.replace("#", "%23"), e + s + r + h + i;
};
function gm(t, e) {
  return th(t, !1, !0).resolve(e);
}
Ni.prototype.resolve = function(t) {
  return this.resolveObject(th(t, !1, !0)).format();
};
Ni.prototype.resolveObject = function(t) {
  if (Vi.isString(t)) {
    var e = new Ni();
    e.parse(t, !1, !0), t = e;
  }
  for (var r = new Ni(), i = Object.keys(this), s = 0; s < i.length; s++) {
    var o = i[s];
    r[o] = this[o];
  }
  if (r.hash = t.hash, t.href === "")
    return r.href = r.format(), r;
  if (t.slashes && !t.protocol) {
    for (var h = Object.keys(t), l = 0; l < h.length; l++) {
      var c = h[l];
      c !== "protocol" && (r[c] = t[c]);
    }
    return Is[r.protocol] && r.hostname && !r.pathname && (r.path = r.pathname = "/"), r.href = r.format(), r;
  }
  if (t.protocol && t.protocol !== r.protocol) {
    if (!Is[t.protocol]) {
      for (var _ = Object.keys(t), y = 0; y < _.length; y++) {
        var w = _[y];
        r[w] = t[w];
      }
      return r.href = r.format(), r;
    }
    if (r.protocol = t.protocol, !t.host && !vl[t.protocol]) {
      for (var J = (t.pathname || "").split("/"); J.length && !(t.host = J.shift()); )
        ;
      t.host || (t.host = ""), t.hostname || (t.hostname = ""), J[0] !== "" && J.unshift(""), J.length < 2 && J.unshift(""), r.pathname = J.join("/");
    } else
      r.pathname = t.pathname;
    if (r.search = t.search, r.query = t.query, r.host = t.host || "", r.auth = t.auth, r.hostname = t.hostname || t.host, r.port = t.port, r.pathname || r.search) {
      var b = r.pathname || "", E = r.search || "";
      r.path = b + E;
    }
    return r.slashes = r.slashes || t.slashes, r.href = r.format(), r;
  }
  var T = r.pathname && r.pathname.charAt(0) === "/", P = t.host || t.pathname && t.pathname.charAt(0) === "/", O = P || T || r.host && t.pathname, H = O, Y = r.pathname && r.pathname.split("/") || [], J = t.pathname && t.pathname.split("/") || [], it = r.protocol && !Is[r.protocol];
  if (it && (r.hostname = "", r.port = null, r.host && (Y[0] === "" ? Y[0] = r.host : Y.unshift(r.host)), r.host = "", t.protocol && (t.hostname = null, t.port = null, t.host && (J[0] === "" ? J[0] = t.host : J.unshift(t.host)), t.host = null), O = O && (J[0] === "" || Y[0] === "")), P)
    r.host = t.host || t.host === "" ? t.host : r.host, r.hostname = t.hostname || t.hostname === "" ? t.hostname : r.hostname, r.search = t.search, r.query = t.query, Y = J;
  else if (J.length)
    Y || (Y = []), Y.pop(), Y = Y.concat(J), r.search = t.search, r.query = t.query;
  else if (!Vi.isNullOrUndefined(t.search)) {
    if (it) {
      r.hostname = r.host = Y.shift();
      var st = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : !1;
      st && (r.auth = st.shift(), r.host = r.hostname = st.shift());
    }
    return r.search = t.search, r.query = t.query, (!Vi.isNull(r.pathname) || !Vi.isNull(r.search)) && (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.href = r.format(), r;
  }
  if (!Y.length)
    return r.pathname = null, r.search ? r.path = "/" + r.search : r.path = null, r.href = r.format(), r;
  for (var K = Y.slice(-1)[0], At = (r.host || t.host || Y.length > 1) && (K === "." || K === "..") || K === "", Tt = 0, dt = Y.length; dt >= 0; dt--)
    K = Y[dt], K === "." ? Y.splice(dt, 1) : K === ".." ? (Y.splice(dt, 1), Tt++) : Tt && (Y.splice(dt, 1), Tt--);
  if (!O && !H)
    for (; Tt--; Tt)
      Y.unshift("..");
  O && Y[0] !== "" && (!Y[0] || Y[0].charAt(0) !== "/") && Y.unshift(""), At && Y.join("/").substr(-1) !== "/" && Y.push("");
  var Et = Y[0] === "" || Y[0] && Y[0].charAt(0) === "/";
  if (it) {
    r.hostname = r.host = Et ? "" : Y.length ? Y.shift() : "";
    var st = r.host && r.host.indexOf("@") > 0 ? r.host.split("@") : !1;
    st && (r.auth = st.shift(), r.host = r.hostname = st.shift());
  }
  return O = O || r.host && Y.length, O && !Et && Y.unshift(""), Y.length ? r.pathname = Y.join("/") : (r.pathname = null, r.path = null), (!Vi.isNull(r.pathname) || !Vi.isNull(r.search)) && (r.path = (r.pathname ? r.pathname : "") + (r.search ? r.search : "")), r.auth = t.auth || r.auth, r.slashes = r.slashes || t.slashes, r.href = r.format(), r;
};
Ni.prototype.parseHost = function() {
  var t = this.host, e = um.exec(t);
  e && (e = e[0], e !== ":" && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)), t && (this.hostname = t);
};
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Yi;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(Yi || (Yi = {}));
var Ss;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(Ss || (Ss = {}));
var So;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(So || (So = {}));
var Ae;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(Ae || (Ae = {}));
var yi;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(yi || (yi = {}));
var Ht;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Ht || (Ht = {}));
var Tn;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Tn || (Tn = {}));
var xe;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(xe || (xe = {}));
var No;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(No || (No = {}));
var zi;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(zi || (zi = {}));
var Wi;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Wi || (Wi = {}));
var qi;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(qi || (qi = {}));
var xi;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(xi || (xi = {}));
var hn;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(hn || (hn = {}));
var ka;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(ka || (ka = {}));
var Si;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Si || (Si = {}));
var Dr;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(Dr || (Dr = {}));
var gl;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(gl || (gl = {}));
var Mr;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(Mr || (Mr = {}));
var Li;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Li || (Li = {}));
/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ji = {
  parse: om,
  format: hm,
  resolve: am
};
function Ii(t) {
  if (typeof t != "string")
    throw new TypeError("Path must be a string. Received " + JSON.stringify(t));
}
function ym(t) {
  return t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function bm(t, e, r) {
  return t.replace(new RegExp(ym(e), "g"), r);
}
function xm(t, e) {
  for (var r = "", i = 0, s = -1, o = 0, h, l = 0; l <= t.length; ++l) {
    if (l < t.length)
      h = t.charCodeAt(l);
    else {
      if (h === 47)
        break;
      h = 47;
    }
    if (h === 47) {
      if (!(s === l - 1 || o === 1))
        if (s !== l - 1 && o === 2) {
          if (r.length < 2 || i !== 2 || r.charCodeAt(r.length - 1) !== 46 || r.charCodeAt(r.length - 2) !== 46) {
            if (r.length > 2) {
              var c = r.lastIndexOf("/");
              if (c !== r.length - 1) {
                c === -1 ? (r = "", i = 0) : (r = r.slice(0, c), i = r.length - 1 - r.lastIndexOf("/")), s = l, o = 0;
                continue;
              }
            } else if (r.length === 2 || r.length === 1) {
              r = "", i = 0, s = l, o = 0;
              continue;
            }
          }
          e && (r.length > 0 ? r += "/.." : r = "..", i = 2);
        } else
          r.length > 0 ? r += "/" + t.slice(s + 1, l) : r = t.slice(s + 1, l), i = l - s - 1;
      s = l, o = 0;
    } else
      h === 46 && o !== -1 ? ++o : o = -1;
  }
  return r;
}
var B_ = {
  /**
   * Converts a path to posix format.
   * @param path - The path to convert to posix
   */
  toPosix: function(t) {
    return bm(t, "\\", "/");
  },
  /**
   * Checks if the path is a URL
   * @param path - The path to check
   */
  isUrl: function(t) {
    return /^https?:/.test(this.toPosix(t));
  },
  /**
   * Checks if the path is a data URL
   * @param path - The path to check
   */
  isDataUrl: function(t) {
    return /^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t);
  },
  /**
   * Checks if the path has a protocol e.g. http://
   * This will return true for windows file paths
   * @param path - The path to check
   */
  hasProtocol: function(t) {
    return /^[^/:]+:\//.test(this.toPosix(t));
  },
  /**
   * Returns the protocol of the path e.g. http://, C:/, file:///
   * @param path - The path to get the protocol from
   */
  getProtocol: function(t) {
    Ii(t), t = this.toPosix(t);
    var e = "", r = /^file:\/\/\//.exec(t), i = /^[^/:]+:\/\//.exec(t), s = /^[^/:]+:\//.exec(t);
    if (r || i || s) {
      var o = (r == null ? void 0 : r[0]) || (i == null ? void 0 : i[0]) || (s == null ? void 0 : s[0]);
      e = o, t = t.slice(o.length);
    }
    return e;
  },
  /**
   * Converts URL to an absolute path.
   * When loading from a Web Worker, we must use absolute paths.
   * If the URL is already absolute we return it as is
   * If it's not, we convert it
   * @param url - The URL to test
   * @param customBaseUrl - The base URL to use
   * @param customRootUrl - The root URL to use
   */
  toAbsolute: function(t, e, r) {
    if (this.isDataUrl(t))
      return t;
    var i = this.toPosix(e != null ? e : ee.ADAPTER.getBaseUrl()), s = this.toPosix(r != null ? r : this.rootname(i));
    if (Ii(t), t = this.toPosix(t), t.startsWith("/"))
      return B_.join(s, t.slice(1));
    var o = this.isAbsolute(t) ? t : this.join(i, t);
    return o;
  },
  /**
   * Normalizes the given path, resolving '..' and '.' segments
   * @param path - The path to normalize
   */
  normalize: function(t) {
    if (t = this.toPosix(t), Ii(t), t.length === 0)
      return ".";
    var e = "", r = t.startsWith("/");
    this.hasProtocol(t) && (e = this.rootname(t), t = t.slice(e.length));
    var i = t.endsWith("/");
    return t = xm(t, !1), t.length > 0 && i && (t += "/"), r ? "/" + t : e + t;
  },
  /**
   * Determines if path is an absolute path.
   * Absolute paths can be urls, data urls, or paths on disk
   * @param path - The path to test
   */
  isAbsolute: function(t) {
    return Ii(t), t = this.toPosix(t), this.hasProtocol(t) ? !0 : t.startsWith("/");
  },
  /**
   * Joins all given path segments together using the platform-specific separator as a delimiter,
   * then normalizes the resulting path
   * @param segments - The segments of the path to join
   */
  join: function() {
    for (var t = arguments, e = [], r = 0; r < arguments.length; r++)
      e[r] = t[r];
    if (e.length === 0)
      return ".";
    for (var i, s = 0; s < e.length; ++s) {
      var o = e[s];
      Ii(o), o.length > 0 && (i === void 0 ? i = o : i += "/" + o);
    }
    return i === void 0 ? "." : this.normalize(i);
  },
  /**
   * Returns the directory name of a path
   * @param path - The path to parse
   */
  dirname: function(t) {
    if (Ii(t), t.length === 0)
      return ".";
    t = this.toPosix(t);
    var e = t.charCodeAt(0), r = e === 47, i = -1, s = !0, o = this.getProtocol(t), h = t;
    t = t.slice(o.length);
    for (var l = t.length - 1; l >= 1; --l)
      if (e = t.charCodeAt(l), e === 47) {
        if (!s) {
          i = l;
          break;
        }
      } else
        s = !1;
    return i === -1 ? r ? "/" : this.isUrl(h) ? o + t : o : r && i === 1 ? "//" : o + t.slice(0, i);
  },
  /**
   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/
   * @param path - The path to parse
   */
  rootname: function(t) {
    Ii(t), t = this.toPosix(t);
    var e = "";
    if (t.startsWith("/") ? e = "/" : e = this.getProtocol(t), this.isUrl(t)) {
      var r = t.indexOf("/", e.length);
      r !== -1 ? e = t.slice(0, r) : e = t, e.endsWith("/") || (e += "/");
    }
    return e;
  },
  /**
   * Returns the last portion of a path
   * @param path - The path to test
   * @param ext - Optional extension to remove
   */
  basename: function(t, e) {
    Ii(t), e && Ii(e), t = this.toPosix(t);
    var r = 0, i = -1, s = !0, o;
    if (e !== void 0 && e.length > 0 && e.length <= t.length) {
      if (e.length === t.length && e === t)
        return "";
      var h = e.length - 1, l = -1;
      for (o = t.length - 1; o >= 0; --o) {
        var c = t.charCodeAt(o);
        if (c === 47) {
          if (!s) {
            r = o + 1;
            break;
          }
        } else
          l === -1 && (s = !1, l = o + 1), h >= 0 && (c === e.charCodeAt(h) ? --h === -1 && (i = o) : (h = -1, i = l));
      }
      return r === i ? i = l : i === -1 && (i = t.length), t.slice(r, i);
    }
    for (o = t.length - 1; o >= 0; --o)
      if (t.charCodeAt(o) === 47) {
        if (!s) {
          r = o + 1;
          break;
        }
      } else
        i === -1 && (s = !1, i = o + 1);
    return i === -1 ? "" : t.slice(r, i);
  },
  /**
   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last
   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than
   * the first character of the basename of path, an empty string is returned.
   * @param path - The path to parse
   */
  extname: function(t) {
    Ii(t), t = this.toPosix(t);
    for (var e = -1, r = 0, i = -1, s = !0, o = 0, h = t.length - 1; h >= 0; --h) {
      var l = t.charCodeAt(h);
      if (l === 47) {
        if (!s) {
          r = h + 1;
          break;
        }
        continue;
      }
      i === -1 && (s = !1, i = h + 1), l === 46 ? e === -1 ? e = h : o !== 1 && (o = 1) : e !== -1 && (o = -1);
    }
    return e === -1 || i === -1 || o === 0 || o === 1 && e === i - 1 && e === r + 1 ? "" : t.slice(e, i);
  },
  /**
   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.
   * @param path - The path to parse
   */
  parse: function(t) {
    Ii(t);
    var e = { root: "", dir: "", base: "", ext: "", name: "" };
    if (t.length === 0)
      return e;
    t = this.toPosix(t);
    var r = t.charCodeAt(0), i = this.isAbsolute(t), s;
    e.root = this.rootname(t), i || this.hasProtocol(t) ? s = 1 : s = 0;
    for (var o = -1, h = 0, l = -1, c = !0, _ = t.length - 1, y = 0; _ >= s; --_) {
      if (r = t.charCodeAt(_), r === 47) {
        if (!c) {
          h = _ + 1;
          break;
        }
        continue;
      }
      l === -1 && (c = !1, l = _ + 1), r === 46 ? o === -1 ? o = _ : y !== 1 && (y = 1) : o !== -1 && (y = -1);
    }
    return o === -1 || l === -1 || y === 0 || y === 1 && o === l - 1 && o === h + 1 ? l !== -1 && (h === 0 && i ? e.base = e.name = t.slice(1, l) : e.base = e.name = t.slice(h, l)) : (h === 0 && i ? (e.name = t.slice(1, o), e.base = t.slice(1, l)) : (e.name = t.slice(h, o), e.base = t.slice(h, l)), e.ext = t.slice(o, l)), e.dir = this.dirname(t), e;
  },
  sep: "/",
  delimiter: ":"
};
ee.RETINA_PREFIX = /@([0-9\.]+)x/;
ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;
var yl = !1, vf = "6.5.2";
function k_() {
  yl = !0;
}
function X_(t) {
  var e;
  if (!yl) {
    yl = !0;
  }
}
var wh;
function V_() {
  return typeof wh == "undefined" && (wh = function() {
    var e = {
      stencil: !0,
      failIfMajorPerformanceCaveat: ee.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
    };
    try {
      if (!ee.ADAPTER.getWebGLRenderingContext())
        return !1;
      var r = ee.ADAPTER.createCanvas(), i = r.getContext("webgl", e) || r.getContext("experimental-webgl", e), s = !!(i && i.getContextAttributes().stencil);
      if (i) {
        var o = i.getExtension("WEBGL_lose_context");
        o && o.loseContext();
      }
      return i = null, s;
    } catch (h) {
      return !1;
    }
  }()), wh;
}
var Tm = "#f0f8ff", Am = "#faebd7", wm = "#00ffff", Pm = "#7fffd4", Em = "#f0ffff", Im = "#f5f5dc", Cm = "#ffe4c4", $m = "#000000", Rm = "#ffebcd", Sm = "#0000ff", Nm = "#8a2be2", Lm = "#a52a2a", Om = "#deb887", Fm = "#5f9ea0", Mm = "#7fff00", Um = "#d2691e", Gm = "#ff7f50", Dm = "#6495ed", Bm = "#fff8dc", km = "#dc143c", Xm = "#00ffff", Vm = "#00008b", Hm = "#008b8b", zm = "#b8860b", jm = "#a9a9a9", Wm = "#006400", Ym = "#a9a9a9", qm = "#bdb76b", Zm = "#8b008b", Jm = "#556b2f", Qm = "#ff8c00", Km = "#9932cc", tg = "#8b0000", eg = "#e9967a", rg = "#8fbc8f", ig = "#483d8b", ng = "#2f4f4f", sg = "#2f4f4f", og = "#00ced1", ag = "#9400d3", hg = "#ff1493", lg = "#00bfff", ug = "#696969", fg = "#696969", cg = "#1e90ff", dg = "#b22222", _g = "#fffaf0", pg = "#228b22", vg = "#ff00ff", mg = "#dcdcdc", gg = "#f8f8ff", yg = "#daa520", bg = "#ffd700", xg = "#808080", Tg = "#008000", Ag = "#adff2f", wg = "#808080", Pg = "#f0fff0", Eg = "#ff69b4", Ig = "#cd5c5c", Cg = "#4b0082", $g = "#fffff0", Rg = "#f0e68c", Sg = "#fff0f5", Ng = "#e6e6fa", Lg = "#7cfc00", Og = "#fffacd", Fg = "#add8e6", Mg = "#f08080", Ug = "#e0ffff", Gg = "#fafad2", Dg = "#d3d3d3", Bg = "#90ee90", kg = "#d3d3d3", Xg = "#ffb6c1", Vg = "#ffa07a", Hg = "#20b2aa", zg = "#87cefa", jg = "#778899", Wg = "#778899", Yg = "#b0c4de", qg = "#ffffe0", Zg = "#00ff00", Jg = "#32cd32", Qg = "#faf0e6", Kg = "#ff00ff", t1 = "#800000", e1 = "#66cdaa", r1 = "#0000cd", i1 = "#ba55d3", n1 = "#9370db", s1 = "#3cb371", o1 = "#7b68ee", a1 = "#00fa9a", h1 = "#48d1cc", l1 = "#c71585", u1 = "#191970", f1 = "#f5fffa", c1 = "#ffe4e1", d1 = "#ffe4b5", _1 = "#ffdead", p1 = "#000080", v1 = "#fdf5e6", m1 = "#808000", g1 = "#6b8e23", y1 = "#ffa500", b1 = "#ff4500", x1 = "#da70d6", T1 = "#eee8aa", A1 = "#98fb98", w1 = "#afeeee", P1 = "#db7093", E1 = "#ffefd5", I1 = "#ffdab9", C1 = "#cd853f", $1 = "#ffc0cb", R1 = "#dda0dd", S1 = "#b0e0e6", N1 = "#800080", L1 = "#663399", O1 = "#ff0000", F1 = "#bc8f8f", M1 = "#4169e1", U1 = "#8b4513", G1 = "#fa8072", D1 = "#f4a460", B1 = "#2e8b57", k1 = "#fff5ee", X1 = "#a0522d", V1 = "#c0c0c0", H1 = "#87ceeb", z1 = "#6a5acd", j1 = "#708090", W1 = "#708090", Y1 = "#fffafa", q1 = "#00ff7f", Z1 = "#4682b4", J1 = "#d2b48c", Q1 = "#008080", K1 = "#d8bfd8", ty = "#ff6347", ey = "#40e0d0", ry = "#ee82ee", iy = "#f5deb3", ny = "#ffffff", sy = "#f5f5f5", oy = "#ffff00", ay = "#9acd32", hy = {
  aliceblue: Tm,
  antiquewhite: Am,
  aqua: wm,
  aquamarine: Pm,
  azure: Em,
  beige: Im,
  bisque: Cm,
  black: $m,
  blanchedalmond: Rm,
  blue: Sm,
  blueviolet: Nm,
  brown: Lm,
  burlywood: Om,
  cadetblue: Fm,
  chartreuse: Mm,
  chocolate: Um,
  coral: Gm,
  cornflowerblue: Dm,
  cornsilk: Bm,
  crimson: km,
  cyan: Xm,
  darkblue: Vm,
  darkcyan: Hm,
  darkgoldenrod: zm,
  darkgray: jm,
  darkgreen: Wm,
  darkgrey: Ym,
  darkkhaki: qm,
  darkmagenta: Zm,
  darkolivegreen: Jm,
  darkorange: Qm,
  darkorchid: Km,
  darkred: tg,
  darksalmon: eg,
  darkseagreen: rg,
  darkslateblue: ig,
  darkslategray: ng,
  darkslategrey: sg,
  darkturquoise: og,
  darkviolet: ag,
  deeppink: hg,
  deepskyblue: lg,
  dimgray: ug,
  dimgrey: fg,
  dodgerblue: cg,
  firebrick: dg,
  floralwhite: _g,
  forestgreen: pg,
  fuchsia: vg,
  gainsboro: mg,
  ghostwhite: gg,
  goldenrod: yg,
  gold: bg,
  gray: xg,
  green: Tg,
  greenyellow: Ag,
  grey: wg,
  honeydew: Pg,
  hotpink: Eg,
  indianred: Ig,
  indigo: Cg,
  ivory: $g,
  khaki: Rg,
  lavenderblush: Sg,
  lavender: Ng,
  lawngreen: Lg,
  lemonchiffon: Og,
  lightblue: Fg,
  lightcoral: Mg,
  lightcyan: Ug,
  lightgoldenrodyellow: Gg,
  lightgray: Dg,
  lightgreen: Bg,
  lightgrey: kg,
  lightpink: Xg,
  lightsalmon: Vg,
  lightseagreen: Hg,
  lightskyblue: zg,
  lightslategray: jg,
  lightslategrey: Wg,
  lightsteelblue: Yg,
  lightyellow: qg,
  lime: Zg,
  limegreen: Jg,
  linen: Qg,
  magenta: Kg,
  maroon: t1,
  mediumaquamarine: e1,
  mediumblue: r1,
  mediumorchid: i1,
  mediumpurple: n1,
  mediumseagreen: s1,
  mediumslateblue: o1,
  mediumspringgreen: a1,
  mediumturquoise: h1,
  mediumvioletred: l1,
  midnightblue: u1,
  mintcream: f1,
  mistyrose: c1,
  moccasin: d1,
  navajowhite: _1,
  navy: p1,
  oldlace: v1,
  olive: m1,
  olivedrab: g1,
  orange: y1,
  orangered: b1,
  orchid: x1,
  palegoldenrod: T1,
  palegreen: A1,
  paleturquoise: w1,
  palevioletred: P1,
  papayawhip: E1,
  peachpuff: I1,
  peru: C1,
  pink: $1,
  plum: R1,
  powderblue: S1,
  purple: N1,
  rebeccapurple: L1,
  red: O1,
  rosybrown: F1,
  royalblue: M1,
  saddlebrown: U1,
  salmon: G1,
  sandybrown: D1,
  seagreen: B1,
  seashell: k1,
  sienna: X1,
  silver: V1,
  skyblue: H1,
  slateblue: z1,
  slategray: j1,
  slategrey: W1,
  snow: Y1,
  springgreen: q1,
  steelblue: Z1,
  tan: J1,
  teal: Q1,
  thistle: K1,
  tomato: ty,
  turquoise: ey,
  violet: ry,
  wheat: iy,
  white: ny,
  whitesmoke: sy,
  yellow: oy,
  yellowgreen: ay
};
function ss(t, e) {
  return e === void 0 && (e = []), e[0] = (t >> 16 & 255) / 255, e[1] = (t >> 8 & 255) / 255, e[2] = (t & 255) / 255, e;
}
function Tu(t) {
  var e = t.toString(16);
  return e = "000000".substring(0, 6 - e.length) + e, "#" + e;
}
function Au(t) {
  return typeof t == "string" && (t = hy[t.toLowerCase()] || t, t[0] === "#" && (t = t.slice(1))), parseInt(t, 16);
}
function ly(t) {
  return (t[0] * 255 << 16) + (t[1] * 255 << 8) + (t[2] * 255 | 0);
}
function uy() {
  for (var t = [], e = [], r = 0; r < 32; r++)
    t[r] = r, e[r] = r;
  t[Ae.NORMAL_NPM] = Ae.NORMAL, t[Ae.ADD_NPM] = Ae.ADD, t[Ae.SCREEN_NPM] = Ae.SCREEN, e[Ae.NORMAL] = Ae.NORMAL_NPM, e[Ae.ADD] = Ae.ADD_NPM, e[Ae.SCREEN] = Ae.SCREEN_NPM;
  var i = [];
  return i.push(e), i.push(t), i;
}
var wu = uy();
function Pu(t, e) {
  return wu[e ? 1 : 0][t];
}
function H_(t, e, r, i) {
  return r = r || new Float32Array(4), i || i === void 0 ? (r[0] = t[0] * e, r[1] = t[1] * e, r[2] = t[2] * e) : (r[0] = t[0], r[1] = t[1], r[2] = t[2]), r[3] = e, r;
}
function eh(t, e) {
  if (e === 1)
    return (e * 255 << 24) + t;
  if (e === 0)
    return 0;
  var r = t >> 16 & 255, i = t >> 8 & 255, s = t & 255;
  return r = r * e + 0.5 | 0, i = i * e + 0.5 | 0, s = s * e + 0.5 | 0, (e * 255 << 24) + (r << 16) + (i << 8) + s;
}
function Eu(t, e, r, i) {
  return r = r || new Float32Array(4), r[0] = (t >> 16 & 255) / 255, r[1] = (t >> 8 & 255) / 255, r[2] = (t & 255) / 255, (i || i === void 0) && (r[0] *= e, r[1] *= e, r[2] *= e), r[3] = e, r;
}
function z_(t, e) {
  e === void 0 && (e = null);
  var r = t * 6;
  if (e = e || new Uint16Array(r), e.length !== r)
    throw new Error("Out buffer length is incorrect, got " + e.length + " and expected " + r);
  for (var i = 0, s = 0; i < r; i += 6, s += 4)
    e[i + 0] = s + 0, e[i + 1] = s + 1, e[i + 2] = s + 2, e[i + 3] = s + 0, e[i + 4] = s + 2, e[i + 5] = s + 3;
  return e;
}
function rh(t) {
  if (t.BYTES_PER_ELEMENT === 4)
    return t instanceof Float32Array ? "Float32Array" : t instanceof Uint32Array ? "Uint32Array" : "Int32Array";
  if (t.BYTES_PER_ELEMENT === 2) {
    if (t instanceof Uint16Array)
      return "Uint16Array";
  } else if (t.BYTES_PER_ELEMENT === 1 && t instanceof Uint8Array)
    return "Uint8Array";
  return null;
}
var fy = { Float32Array, Uint32Array, Int32Array, Uint8Array };
function cy(t, e) {
  for (var r = 0, i = 0, s = {}, o = 0; o < t.length; o++)
    i += e[o], r += t[o].length;
  for (var h = new ArrayBuffer(r * 4), l = null, c = 0, o = 0; o < t.length; o++) {
    var _ = e[o], y = t[o], w = rh(y);
    s[w] || (s[w] = new fy[w](h)), l = s[w];
    for (var b = 0; b < y.length; b++) {
      var E = (b / _ | 0) * i + c, T = b % _;
      l[E + T] = y[b];
    }
    c += _;
  }
  return new Float32Array(h);
}
function Lo(t) {
  return t += t === 0 ? 1 : 0, --t, t |= t >>> 1, t |= t >>> 2, t |= t >>> 4, t |= t >>> 8, t |= t >>> 16, t + 1;
}
function bl(t) {
  return !(t & t - 1) && !!t;
}
function xl(t) {
  var e = (t > 65535 ? 1 : 0) << 4;
  t >>>= e;
  var r = (t > 255 ? 1 : 0) << 3;
  return t >>>= r, e |= r, r = (t > 15 ? 1 : 0) << 2, t >>>= r, e |= r, r = (t > 3 ? 1 : 0) << 1, t >>>= r, e |= r, e | t >> 1;
}
function rs(t, e, r) {
  var i = t.length, s;
  if (!(e >= i || r === 0)) {
    r = e + r > i ? i - e : r;
    var o = i - r;
    for (s = e; s < o; ++s)
      t[s] = t[s + r];
    t.length = o;
  }
}
function es(t) {
  return t === 0 ? 0 : t < 0 ? -1 : 1;
}
var dy = 0;
function Pn() {
  return ++dy;
}
var mf = {};
function ai(t, e, r) {
  if (r === void 0 && (r = 3), !mf[e]) {
    var i = new Error().stack;
    typeof i == "undefined" ? console.warn("PixiJS Deprecation Warning: ", e + `
Deprecated since v` + t) : (i = i.split(`
`).splice(r).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", e + `
Deprecated since v` + t), console.warn(i), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", e + `
Deprecated since v` + t), console.warn(i))), mf[e] = !0;
  }
}
var Tl = {}, oi = /* @__PURE__ */ Object.create(null), vi = /* @__PURE__ */ Object.create(null);
function _y() {
  var t;
  for (t in oi)
    oi[t].destroy();
  for (t in vi)
    vi[t].destroy();
}
function py() {
  var t;
  for (t in oi)
    delete oi[t];
  for (t in vi)
    delete vi[t];
}
var Al = (
  /** @class */
  function() {
    function t(e, r, i) {
      this.canvas = ee.ADAPTER.createCanvas(), this.context = this.canvas.getContext("2d"), this.resolution = i || ee.RESOLUTION, this.resize(e, r);
    }
    return t.prototype.clear = function() {
      this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }, t.prototype.resize = function(e, r) {
      this.canvas.width = Math.round(e * this.resolution), this.canvas.height = Math.round(r * this.resolution);
    }, t.prototype.destroy = function() {
      this.context = null, this.canvas = null;
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the canvas buffer in pixels.
       * @member {number}
       */
      get: function() {
        return this.canvas.width;
      },
      set: function(e) {
        this.canvas.width = Math.round(e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the canvas buffer in pixels.
       * @member {number}
       */
      get: function() {
        return this.canvas.height;
      },
      set: function(e) {
        this.canvas.height = Math.round(e);
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
);
function j_(t) {
  var e = t.width, r = t.height, i = t.getContext("2d"), s = i.getImageData(0, 0, e, r), o = s.data, h = o.length, l = {
    top: null,
    left: null,
    right: null,
    bottom: null
  }, c = null, _, y, w;
  for (_ = 0; _ < h; _ += 4)
    o[_ + 3] !== 0 && (y = _ / 4 % e, w = ~~(_ / 4 / e), l.top === null && (l.top = w), (l.left === null || y < l.left) && (l.left = y), (l.right === null || l.right < y) && (l.right = y + 1), (l.bottom === null || l.bottom < w) && (l.bottom = w));
  return l.top !== null && (e = l.right - l.left, r = l.bottom - l.top + 1, c = i.getImageData(l.left, l.top, e, r)), {
    height: r,
    width: e,
    data: c
  };
}
var W_ = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
function vy(t) {
  var e = W_.exec(t);
  if (e)
    return {
      mediaType: e[1] ? e[1].toLowerCase() : void 0,
      subType: e[2] ? e[2].toLowerCase() : void 0,
      charset: e[3] ? e[3].toLowerCase() : void 0,
      encoding: e[4] ? e[4].toLowerCase() : void 0,
      data: e[5]
    };
}
var ua;
function Y_(t, e) {
  if (e === void 0 && (e = globalThis.location), t.indexOf("data:") === 0)
    return "";
  e = e || globalThis.location, ua || (ua = document.createElement("a")), ua.href = t;
  var r = ji.parse(ua.href), i = !r.port && e.port === "" || r.port === e.port;
  return r.hostname !== e.hostname || !i || r.protocol !== e.protocol ? "anonymous" : "";
}
function Oo(t, e) {
  var r = ee.RETINA_PREFIX.exec(t);
  return r ? parseFloat(r[1]) : e !== void 0 ? e : 1;
}
const my = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  BaseTextureCache: vi,
  CanvasRenderTarget: Al,
  DATA_URI: W_,
  EventEmitter: Oi,
  ProgramCache: Tl,
  TextureCache: oi,
  clearTextureCache: py,
  correctBlendMode: Pu,
  createIndicesForQuads: z_,
  decomposeDataUri: vy,
  deprecation: ai,
  destroyTextureCache: _y,
  determineCrossOrigin: Y_,
  get earcut() {
    return Rs;
  },
  getBufferType: rh,
  getResolutionOfUrl: Oo,
  hex2rgb: ss,
  hex2string: Tu,
  interleaveTypedArrays: cy,
  isMobile: gi,
  isPow2: bl,
  isWebGLSupported: V_,
  log2: xl,
  nextPow2: Lo,
  path: B_,
  premultiplyBlendMode: wu,
  premultiplyRgba: H_,
  premultiplyTint: eh,
  premultiplyTintToRgba: Eu,
  removeItems: rs,
  rgb2hex: ly,
  sayHello: X_,
  sign: es,
  skipHello: k_,
  string2hex: Au,
  trimCanvas: j_,
  uid: Pn,
  url: ji
}, Symbol.toStringTag, { value: "Module" }));
/*!
 * @pixi/math - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Fo = Math.PI * 2, q_ = 180 / Math.PI, Z_ = Math.PI / 180, Xr;
(function(t) {
  t[t.POLY = 0] = "POLY", t[t.RECT = 1] = "RECT", t[t.CIRC = 2] = "CIRC", t[t.ELIP = 3] = "ELIP", t[t.RREC = 4] = "RREC";
})(Xr || (Xr = {}));
var _r = (
  /** @class */
  function() {
    function t(e, r) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), this.x = 0, this.y = 0, this.x = e, this.y = r;
    }
    return t.prototype.clone = function() {
      return new t(this.x, this.y);
    }, t.prototype.copyFrom = function(e) {
      return this.set(e.x, e.y), this;
    }, t.prototype.copyTo = function(e) {
      return e.set(this.x, this.y), e;
    }, t.prototype.equals = function(e) {
      return e.x === this.x && e.y === this.y;
    }, t.prototype.set = function(e, r) {
      return e === void 0 && (e = 0), r === void 0 && (r = e), this.x = e, this.y = r, this;
    }, t.prototype.toString = function() {
      return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]";
    }, t;
  }()
), fa = [new _r(), new _r(), new _r(), new _r()], Ye = (
  /** @class */
  function() {
    function t(e, r, i, s) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), i === void 0 && (i = 0), s === void 0 && (s = 0), this.x = Number(e), this.y = Number(r), this.width = Number(i), this.height = Number(s), this.type = Xr.RECT;
    }
    return Object.defineProperty(t.prototype, "left", {
      /** Returns the left edge of the rectangle. */
      get: function() {
        return this.x;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "right", {
      /** Returns the right edge of the rectangle. */
      get: function() {
        return this.x + this.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "top", {
      /** Returns the top edge of the rectangle. */
      get: function() {
        return this.y;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "bottom", {
      /** Returns the bottom edge of the rectangle. */
      get: function() {
        return this.y + this.height;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "EMPTY", {
      /** A constant empty rectangle. */
      get: function() {
        return new t(0, 0, 0, 0);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.clone = function() {
      return new t(this.x, this.y, this.width, this.height);
    }, t.prototype.copyFrom = function(e) {
      return this.x = e.x, this.y = e.y, this.width = e.width, this.height = e.height, this;
    }, t.prototype.copyTo = function(e) {
      return e.x = this.x, e.y = this.y, e.width = this.width, e.height = this.height, e;
    }, t.prototype.contains = function(e, r) {
      return this.width <= 0 || this.height <= 0 ? !1 : e >= this.x && e < this.x + this.width && r >= this.y && r < this.y + this.height;
    }, t.prototype.intersects = function(e, r) {
      if (!r) {
        var i = this.x < e.x ? e.x : this.x, s = this.right > e.right ? e.right : this.right;
        if (s <= i)
          return !1;
        var o = this.y < e.y ? e.y : this.y, h = this.bottom > e.bottom ? e.bottom : this.bottom;
        return h > o;
      }
      var l = this.left, c = this.right, _ = this.top, y = this.bottom;
      if (c <= l || y <= _)
        return !1;
      var w = fa[0].set(e.left, e.top), b = fa[1].set(e.left, e.bottom), E = fa[2].set(e.right, e.top), T = fa[3].set(e.right, e.bottom);
      if (E.x <= w.x || b.y <= w.y)
        return !1;
      var P = Math.sign(r.a * r.d - r.b * r.c);
      if (P === 0 || (r.apply(w, w), r.apply(b, b), r.apply(E, E), r.apply(T, T), Math.max(w.x, b.x, E.x, T.x) <= l || Math.min(w.x, b.x, E.x, T.x) >= c || Math.max(w.y, b.y, E.y, T.y) <= _ || Math.min(w.y, b.y, E.y, T.y) >= y))
        return !1;
      var O = P * (b.y - w.y), H = P * (w.x - b.x), Y = O * l + H * _, J = O * c + H * _, it = O * l + H * y, st = O * c + H * y;
      if (Math.max(Y, J, it, st) <= O * w.x + H * w.y || Math.min(Y, J, it, st) >= O * T.x + H * T.y)
        return !1;
      var K = P * (w.y - E.y), At = P * (E.x - w.x), Tt = K * l + At * _, dt = K * c + At * _, Et = K * l + At * y, Rt = K * c + At * y;
      return !(Math.max(Tt, dt, Et, Rt) <= K * w.x + At * w.y || Math.min(Tt, dt, Et, Rt) >= K * T.x + At * T.y);
    }, t.prototype.pad = function(e, r) {
      return e === void 0 && (e = 0), r === void 0 && (r = e), this.x -= e, this.y -= r, this.width += e * 2, this.height += r * 2, this;
    }, t.prototype.fit = function(e) {
      var r = Math.max(this.x, e.x), i = Math.min(this.x + this.width, e.x + e.width), s = Math.max(this.y, e.y), o = Math.min(this.y + this.height, e.y + e.height);
      return this.x = r, this.width = Math.max(i - r, 0), this.y = s, this.height = Math.max(o - s, 0), this;
    }, t.prototype.ceil = function(e, r) {
      e === void 0 && (e = 1), r === void 0 && (r = 1e-3);
      var i = Math.ceil((this.x + this.width - r) * e) / e, s = Math.ceil((this.y + this.height - r) * e) / e;
      return this.x = Math.floor((this.x + r) * e) / e, this.y = Math.floor((this.y + r) * e) / e, this.width = i - this.x, this.height = s - this.y, this;
    }, t.prototype.enlarge = function(e) {
      var r = Math.min(this.x, e.x), i = Math.max(this.x + this.width, e.x + e.width), s = Math.min(this.y, e.y), o = Math.max(this.y + this.height, e.y + e.height);
      return this.x = r, this.width = i - r, this.y = s, this.height = o - s, this;
    }, t.prototype.toString = function() {
      return "[@pixi/math:Rectangle x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
    }, t;
  }()
), J_ = (
  /** @class */
  function() {
    function t(e, r, i) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), i === void 0 && (i = 0), this.x = e, this.y = r, this.radius = i, this.type = Xr.CIRC;
    }
    return t.prototype.clone = function() {
      return new t(this.x, this.y, this.radius);
    }, t.prototype.contains = function(e, r) {
      if (this.radius <= 0)
        return !1;
      var i = this.radius * this.radius, s = this.x - e, o = this.y - r;
      return s *= s, o *= o, s + o <= i;
    }, t.prototype.getBounds = function() {
      return new Ye(this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2);
    }, t.prototype.toString = function() {
      return "[@pixi/math:Circle x=" + this.x + " y=" + this.y + " radius=" + this.radius + "]";
    }, t;
  }()
), Q_ = (
  /** @class */
  function() {
    function t(e, r, i, s) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), i === void 0 && (i = 0), s === void 0 && (s = 0), this.x = e, this.y = r, this.width = i, this.height = s, this.type = Xr.ELIP;
    }
    return t.prototype.clone = function() {
      return new t(this.x, this.y, this.width, this.height);
    }, t.prototype.contains = function(e, r) {
      if (this.width <= 0 || this.height <= 0)
        return !1;
      var i = (e - this.x) / this.width, s = (r - this.y) / this.height;
      return i *= i, s *= s, i + s <= 1;
    }, t.prototype.getBounds = function() {
      return new Ye(this.x - this.width, this.y - this.height, this.width, this.height);
    }, t.prototype.toString = function() {
      return "[@pixi/math:Ellipse x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]";
    }, t;
  }()
), xo = (
  /** @class */
  function() {
    function t() {
      for (var e = arguments, r = [], i = 0; i < arguments.length; i++)
        r[i] = e[i];
      var s = Array.isArray(r[0]) ? r[0] : r;
      if (typeof s[0] != "number") {
        for (var o = [], h = 0, l = s.length; h < l; h++)
          o.push(s[h].x, s[h].y);
        s = o;
      }
      this.points = s, this.type = Xr.POLY, this.closeStroke = !0;
    }
    return t.prototype.clone = function() {
      var e = this.points.slice(), r = new t(e);
      return r.closeStroke = this.closeStroke, r;
    }, t.prototype.contains = function(e, r) {
      for (var i = !1, s = this.points.length / 2, o = 0, h = s - 1; o < s; h = o++) {
        var l = this.points[o * 2], c = this.points[o * 2 + 1], _ = this.points[h * 2], y = this.points[h * 2 + 1], w = c > r != y > r && e < (_ - l) * ((r - c) / (y - c)) + l;
        w && (i = !i);
      }
      return i;
    }, t.prototype.toString = function() {
      return "[@pixi/math:Polygon" + ("closeStroke=" + this.closeStroke) + ("points=" + this.points.reduce(function(e, r) {
        return e + ", " + r;
      }, "") + "]");
    }, t;
  }()
), K_ = (
  /** @class */
  function() {
    function t(e, r, i, s, o) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), i === void 0 && (i = 0), s === void 0 && (s = 0), o === void 0 && (o = 20), this.x = e, this.y = r, this.width = i, this.height = s, this.radius = o, this.type = Xr.RREC;
    }
    return t.prototype.clone = function() {
      return new t(this.x, this.y, this.width, this.height, this.radius);
    }, t.prototype.contains = function(e, r) {
      if (this.width <= 0 || this.height <= 0)
        return !1;
      if (e >= this.x && e <= this.x + this.width && r >= this.y && r <= this.y + this.height) {
        var i = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));
        if (r >= this.y + i && r <= this.y + this.height - i || e >= this.x + i && e <= this.x + this.width - i)
          return !0;
        var s = e - (this.x + i), o = r - (this.y + i), h = i * i;
        if (s * s + o * o <= h || (s = e - (this.x + this.width - i), s * s + o * o <= h) || (o = r - (this.y + this.height - i), s * s + o * o <= h) || (s = e - (this.x + i), s * s + o * o <= h))
          return !0;
      }
      return !1;
    }, t.prototype.toString = function() {
      return "[@pixi/math:RoundedRectangle x=" + this.x + " y=" + this.y + ("width=" + this.width + " height=" + this.height + " radius=" + this.radius + "]");
    }, t;
  }()
), xn = (
  /** @class */
  function() {
    function t(e, r, i, s) {
      i === void 0 && (i = 0), s === void 0 && (s = 0), this._x = i, this._y = s, this.cb = e, this.scope = r;
    }
    return t.prototype.clone = function(e, r) {
      return e === void 0 && (e = this.cb), r === void 0 && (r = this.scope), new t(e, r, this._x, this._y);
    }, t.prototype.set = function(e, r) {
      return e === void 0 && (e = 0), r === void 0 && (r = e), (this._x !== e || this._y !== r) && (this._x = e, this._y = r, this.cb.call(this.scope)), this;
    }, t.prototype.copyFrom = function(e) {
      return (this._x !== e.x || this._y !== e.y) && (this._x = e.x, this._y = e.y, this.cb.call(this.scope)), this;
    }, t.prototype.copyTo = function(e) {
      return e.set(this._x, this._y), e;
    }, t.prototype.equals = function(e) {
      return e.x === this._x && e.y === this._y;
    }, t.prototype.toString = function() {
      return "[@pixi/math:ObservablePoint x=" + 0 + " y=" + 0 + " scope=" + this.scope + "]";
    }, Object.defineProperty(t.prototype, "x", {
      /** Position of the observable point on the x axis. */
      get: function() {
        return this._x;
      },
      set: function(e) {
        this._x !== e && (this._x = e, this.cb.call(this.scope));
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "y", {
      /** Position of the observable point on the y axis. */
      get: function() {
        return this._y;
      },
      set: function(e) {
        this._y !== e && (this._y = e, this.cb.call(this.scope));
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
), wr = (
  /** @class */
  function() {
    function t(e, r, i, s, o, h) {
      e === void 0 && (e = 1), r === void 0 && (r = 0), i === void 0 && (i = 0), s === void 0 && (s = 1), o === void 0 && (o = 0), h === void 0 && (h = 0), this.array = null, this.a = e, this.b = r, this.c = i, this.d = s, this.tx = o, this.ty = h;
    }
    return t.prototype.fromArray = function(e) {
      this.a = e[0], this.b = e[1], this.c = e[3], this.d = e[4], this.tx = e[2], this.ty = e[5];
    }, t.prototype.set = function(e, r, i, s, o, h) {
      return this.a = e, this.b = r, this.c = i, this.d = s, this.tx = o, this.ty = h, this;
    }, t.prototype.toArray = function(e, r) {
      this.array || (this.array = new Float32Array(9));
      var i = r || this.array;
      return e ? (i[0] = this.a, i[1] = this.b, i[2] = 0, i[3] = this.c, i[4] = this.d, i[5] = 0, i[6] = this.tx, i[7] = this.ty, i[8] = 1) : (i[0] = this.a, i[1] = this.c, i[2] = this.tx, i[3] = this.b, i[4] = this.d, i[5] = this.ty, i[6] = 0, i[7] = 0, i[8] = 1), i;
    }, t.prototype.apply = function(e, r) {
      r = r || new _r();
      var i = e.x, s = e.y;
      return r.x = this.a * i + this.c * s + this.tx, r.y = this.b * i + this.d * s + this.ty, r;
    }, t.prototype.applyInverse = function(e, r) {
      r = r || new _r();
      var i = 1 / (this.a * this.d + this.c * -this.b), s = e.x, o = e.y;
      return r.x = this.d * i * s + -this.c * i * o + (this.ty * this.c - this.tx * this.d) * i, r.y = this.a * i * o + -this.b * i * s + (-this.ty * this.a + this.tx * this.b) * i, r;
    }, t.prototype.translate = function(e, r) {
      return this.tx += e, this.ty += r, this;
    }, t.prototype.scale = function(e, r) {
      return this.a *= e, this.d *= r, this.c *= e, this.b *= r, this.tx *= e, this.ty *= r, this;
    }, t.prototype.rotate = function(e) {
      var r = Math.cos(e), i = Math.sin(e), s = this.a, o = this.c, h = this.tx;
      return this.a = s * r - this.b * i, this.b = s * i + this.b * r, this.c = o * r - this.d * i, this.d = o * i + this.d * r, this.tx = h * r - this.ty * i, this.ty = h * i + this.ty * r, this;
    }, t.prototype.append = function(e) {
      var r = this.a, i = this.b, s = this.c, o = this.d;
      return this.a = e.a * r + e.b * s, this.b = e.a * i + e.b * o, this.c = e.c * r + e.d * s, this.d = e.c * i + e.d * o, this.tx = e.tx * r + e.ty * s + this.tx, this.ty = e.tx * i + e.ty * o + this.ty, this;
    }, t.prototype.setTransform = function(e, r, i, s, o, h, l, c, _) {
      return this.a = Math.cos(l + _) * o, this.b = Math.sin(l + _) * o, this.c = -Math.sin(l - c) * h, this.d = Math.cos(l - c) * h, this.tx = e - (i * this.a + s * this.c), this.ty = r - (i * this.b + s * this.d), this;
    }, t.prototype.prepend = function(e) {
      var r = this.tx;
      if (e.a !== 1 || e.b !== 0 || e.c !== 0 || e.d !== 1) {
        var i = this.a, s = this.c;
        this.a = i * e.a + this.b * e.c, this.b = i * e.b + this.b * e.d, this.c = s * e.a + this.d * e.c, this.d = s * e.b + this.d * e.d;
      }
      return this.tx = r * e.a + this.ty * e.c + e.tx, this.ty = r * e.b + this.ty * e.d + e.ty, this;
    }, t.prototype.decompose = function(e) {
      var r = this.a, i = this.b, s = this.c, o = this.d, h = e.pivot, l = -Math.atan2(-s, o), c = Math.atan2(i, r), _ = Math.abs(l + c);
      return _ < 1e-5 || Math.abs(Fo - _) < 1e-5 ? (e.rotation = c, e.skew.x = e.skew.y = 0) : (e.rotation = 0, e.skew.x = l, e.skew.y = c), e.scale.x = Math.sqrt(r * r + i * i), e.scale.y = Math.sqrt(s * s + o * o), e.position.x = this.tx + (h.x * r + h.y * s), e.position.y = this.ty + (h.x * i + h.y * o), e;
    }, t.prototype.invert = function() {
      var e = this.a, r = this.b, i = this.c, s = this.d, o = this.tx, h = e * s - r * i;
      return this.a = s / h, this.b = -r / h, this.c = -i / h, this.d = e / h, this.tx = (i * this.ty - s * o) / h, this.ty = -(e * this.ty - r * o) / h, this;
    }, t.prototype.identity = function() {
      return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this;
    }, t.prototype.clone = function() {
      var e = new t();
      return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e;
    }, t.prototype.copyTo = function(e) {
      return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e;
    }, t.prototype.copyFrom = function(e) {
      return this.a = e.a, this.b = e.b, this.c = e.c, this.d = e.d, this.tx = e.tx, this.ty = e.ty, this;
    }, t.prototype.toString = function() {
      return "[@pixi/math:Matrix a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + "]";
    }, Object.defineProperty(t, "IDENTITY", {
      /**
       * A default (identity) matrix
       * @readonly
       */
      get: function() {
        return new t();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "TEMP_MATRIX", {
      /**
       * A temp matrix
       * @readonly
       */
      get: function() {
        return new t();
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
), zn = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1], jn = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1], Wn = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1], Yn = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1], wl = [], tp = [], ca = Math.sign;
function gy() {
  for (var t = 0; t < 16; t++) {
    var e = [];
    wl.push(e);
    for (var r = 0; r < 16; r++)
      for (var i = ca(zn[t] * zn[r] + Wn[t] * jn[r]), s = ca(jn[t] * zn[r] + Yn[t] * jn[r]), o = ca(zn[t] * Wn[r] + Wn[t] * Yn[r]), h = ca(jn[t] * Wn[r] + Yn[t] * Yn[r]), l = 0; l < 16; l++)
        if (zn[l] === i && jn[l] === s && Wn[l] === o && Yn[l] === h) {
          e.push(l);
          break;
        }
  }
  for (var t = 0; t < 16; t++) {
    var c = new wr();
    c.set(zn[t], jn[t], Wn[t], Yn[t], 0, 0), tp.push(c);
  }
}
gy();
var Ar = {
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 0       | East      |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  E: 0,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 45     | Southeast |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SE: 1,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 90     | South     |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  S: 2,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 135    | Southwest |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  SW: 3,
  /**
   * | Rotation | Direction |
   * |----------|-----------|
   * | 180     | West      |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  W: 4,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -135/225 | Northwest    |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NW: 5,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -90/270  | North        |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  N: 6,
  /**
   * | Rotation    | Direction    |
   * |-------------|--------------|
   * | -45/315  | Northeast    |
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  NE: 7,
  /**
   * Reflection about Y-axis.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_VERTICAL: 8,
  /**
   * Reflection about the main diagonal.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MAIN_DIAGONAL: 10,
  /**
   * Reflection about X-axis.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  MIRROR_HORIZONTAL: 12,
  /**
   * Reflection about reverse diagonal.
   * @memberof PIXI.groupD8
   * @constant {PIXI.GD8Symmetry}
   */
  REVERSE_DIAGONAL: 14,
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The X-component of the U-axis
   *    after rotating the axes.
   */
  uX: function(t) {
    return zn[t];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The Y-component of the U-axis
   *    after rotating the axes.
   */
  uY: function(t) {
    return jn[t];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The X-component of the V-axis
   *    after rotating the axes.
   */
  vX: function(t) {
    return Wn[t];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} ind - sprite rotation angle.
   * @returns {PIXI.GD8Symmetry} The Y-component of the V-axis
   *    after rotating the axes.
   */
  vY: function(t) {
    return Yn[t];
  },
  /**
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - symmetry whose opposite
   *   is needed. Only rotations have opposite symmetries while
   *   reflections don't.
   * @returns {PIXI.GD8Symmetry} The opposite symmetry of `rotation`
   */
  inv: function(t) {
    return t & 8 ? t & 15 : -t & 7;
  },
  /**
   * Composes the two D8 operations.
   *
   * Taking `^` as reflection:
   *
   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |
   * |-------|-----|-----|-----|-----|------|-------|-------|-------|
   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |
   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |
   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |
   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |
   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |
   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |
   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |
   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |
   *
   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation, which
   *   is the row in the above cayley table.
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation, which
   *   is the column in the above cayley table.
   * @returns {PIXI.GD8Symmetry} Composed operation
   */
  add: function(t, e) {
    return wl[t][e];
  },
  /**
   * Reverse of `add`.
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotationSecond - Second operation
   * @param {PIXI.GD8Symmetry} rotationFirst - First operation
   * @returns {PIXI.GD8Symmetry} Result
   */
  sub: function(t, e) {
    return wl[t][Ar.inv(e)];
  },
  /**
   * Adds 180 degrees to rotation, which is a commutative
   * operation.
   * @memberof PIXI.groupD8
   * @param {number} rotation - The number to rotate.
   * @returns {number} Rotated number
   */
  rotate180: function(t) {
    return t ^ 4;
  },
  /**
   * Checks if the rotation angle is vertical, i.e. south
   * or north. It doesn't work for reflections.
   * @memberof PIXI.groupD8
   * @param {PIXI.GD8Symmetry} rotation - The number to check.
   * @returns {boolean} Whether or not the direction is vertical
   */
  isVertical: function(t) {
    return (t & 3) === 2;
  },
  /**
   * Approximates the vector `V(dx,dy)` into one of the
   * eight directions provided by `groupD8`.
   * @memberof PIXI.groupD8
   * @param {number} dx - X-component of the vector
   * @param {number} dy - Y-component of the vector
   * @returns {PIXI.GD8Symmetry} Approximation of the vector into
   *  one of the eight symmetries.
   */
  byDirection: function(t, e) {
    return Math.abs(t) * 2 <= Math.abs(e) ? e >= 0 ? Ar.S : Ar.N : Math.abs(e) * 2 <= Math.abs(t) ? t > 0 ? Ar.E : Ar.W : e > 0 ? t > 0 ? Ar.SE : Ar.SW : t > 0 ? Ar.NE : Ar.NW;
  },
  /**
   * Helps sprite to compensate texture packer rotation.
   * @memberof PIXI.groupD8
   * @param {PIXI.Matrix} matrix - sprite world matrix
   * @param {PIXI.GD8Symmetry} rotation - The rotation factor to use.
   * @param {number} tx - sprite anchoring
   * @param {number} ty - sprite anchoring
   */
  matrixAppendRotationInv: function(t, e, r, i) {
    r === void 0 && (r = 0), i === void 0 && (i = 0);
    var s = tp[Ar.inv(e)];
    s.tx = r, s.ty = i, t.append(s);
  }
}, ih = (
  /** @class */
  function() {
    function t() {
      this.worldTransform = new wr(), this.localTransform = new wr(), this.position = new xn(this.onChange, this, 0, 0), this.scale = new xn(this.onChange, this, 1, 1), this.pivot = new xn(this.onChange, this, 0, 0), this.skew = new xn(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0;
    }
    return t.prototype.onChange = function() {
      this._localID++;
    }, t.prototype.updateSkew = function() {
      this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++;
    }, t.prototype.toString = function() {
      return "[@pixi/math:Transform " + ("position=(" + this.position.x + ", " + this.position.y + ") ") + ("rotation=" + this.rotation + " ") + ("scale=(" + this.scale.x + ", " + this.scale.y + ") ") + ("skew=(" + this.skew.x + ", " + this.skew.y + ") ") + "]";
    }, t.prototype.updateLocalTransform = function() {
      var e = this.localTransform;
      this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d), this._currentLocalID = this._localID, this._parentID = -1);
    }, t.prototype.updateTransform = function(e) {
      var r = this.localTransform;
      if (this._localID !== this._currentLocalID && (r.a = this._cx * this.scale.x, r.b = this._sx * this.scale.x, r.c = this._cy * this.scale.y, r.d = this._sy * this.scale.y, r.tx = this.position.x - (this.pivot.x * r.a + this.pivot.y * r.c), r.ty = this.position.y - (this.pivot.x * r.b + this.pivot.y * r.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== e._worldID) {
        var i = e.worldTransform, s = this.worldTransform;
        s.a = r.a * i.a + r.b * i.c, s.b = r.a * i.b + r.b * i.d, s.c = r.c * i.a + r.d * i.c, s.d = r.c * i.b + r.d * i.d, s.tx = r.tx * i.a + r.ty * i.c + i.tx, s.ty = r.tx * i.b + r.ty * i.d + i.ty, this._parentID = e._worldID, this._worldID++;
      }
    }, t.prototype.setFromMatrix = function(e) {
      e.decompose(this), this._localID++;
    }, Object.defineProperty(t.prototype, "rotation", {
      /** The rotation of the object in radians. */
      get: function() {
        return this._rotation;
      },
      set: function(e) {
        this._rotation !== e && (this._rotation = e, this.updateSkew());
      },
      enumerable: !1,
      configurable: !0
    }), t.IDENTITY = new t(), t;
  }()
);
/*!
 * @pixi/display - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
ee.SORTABLE_CHILDREN = !1;
var Mo = (
  /** @class */
  function() {
    function t() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0, this.rect = null, this.updateID = -1;
    }
    return t.prototype.isEmpty = function() {
      return this.minX > this.maxX || this.minY > this.maxY;
    }, t.prototype.clear = function() {
      this.minX = 1 / 0, this.minY = 1 / 0, this.maxX = -1 / 0, this.maxY = -1 / 0;
    }, t.prototype.getRectangle = function(e) {
      return this.minX > this.maxX || this.minY > this.maxY ? Ye.EMPTY : (e = e || new Ye(0, 0, 1, 1), e.x = this.minX, e.y = this.minY, e.width = this.maxX - this.minX, e.height = this.maxY - this.minY, e);
    }, t.prototype.addPoint = function(e) {
      this.minX = Math.min(this.minX, e.x), this.maxX = Math.max(this.maxX, e.x), this.minY = Math.min(this.minY, e.y), this.maxY = Math.max(this.maxY, e.y);
    }, t.prototype.addPointMatrix = function(e, r) {
      var i = e.a, s = e.b, o = e.c, h = e.d, l = e.tx, c = e.ty, _ = i * r.x + o * r.y + l, y = s * r.x + h * r.y + c;
      this.minX = Math.min(this.minX, _), this.maxX = Math.max(this.maxX, _), this.minY = Math.min(this.minY, y), this.maxY = Math.max(this.maxY, y);
    }, t.prototype.addQuad = function(e) {
      var r = this.minX, i = this.minY, s = this.maxX, o = this.maxY, h = e[0], l = e[1];
      r = h < r ? h : r, i = l < i ? l : i, s = h > s ? h : s, o = l > o ? l : o, h = e[2], l = e[3], r = h < r ? h : r, i = l < i ? l : i, s = h > s ? h : s, o = l > o ? l : o, h = e[4], l = e[5], r = h < r ? h : r, i = l < i ? l : i, s = h > s ? h : s, o = l > o ? l : o, h = e[6], l = e[7], r = h < r ? h : r, i = l < i ? l : i, s = h > s ? h : s, o = l > o ? l : o, this.minX = r, this.minY = i, this.maxX = s, this.maxY = o;
    }, t.prototype.addFrame = function(e, r, i, s, o) {
      this.addFrameMatrix(e.worldTransform, r, i, s, o);
    }, t.prototype.addFrameMatrix = function(e, r, i, s, o) {
      var h = e.a, l = e.b, c = e.c, _ = e.d, y = e.tx, w = e.ty, b = this.minX, E = this.minY, T = this.maxX, P = this.maxY, O = h * r + c * i + y, H = l * r + _ * i + w;
      b = O < b ? O : b, E = H < E ? H : E, T = O > T ? O : T, P = H > P ? H : P, O = h * s + c * i + y, H = l * s + _ * i + w, b = O < b ? O : b, E = H < E ? H : E, T = O > T ? O : T, P = H > P ? H : P, O = h * r + c * o + y, H = l * r + _ * o + w, b = O < b ? O : b, E = H < E ? H : E, T = O > T ? O : T, P = H > P ? H : P, O = h * s + c * o + y, H = l * s + _ * o + w, b = O < b ? O : b, E = H < E ? H : E, T = O > T ? O : T, P = H > P ? H : P, this.minX = b, this.minY = E, this.maxX = T, this.maxY = P;
    }, t.prototype.addVertexData = function(e, r, i) {
      for (var s = this.minX, o = this.minY, h = this.maxX, l = this.maxY, c = r; c < i; c += 2) {
        var _ = e[c], y = e[c + 1];
        s = _ < s ? _ : s, o = y < o ? y : o, h = _ > h ? _ : h, l = y > l ? y : l;
      }
      this.minX = s, this.minY = o, this.maxX = h, this.maxY = l;
    }, t.prototype.addVertices = function(e, r, i, s) {
      this.addVerticesMatrix(e.worldTransform, r, i, s);
    }, t.prototype.addVerticesMatrix = function(e, r, i, s, o, h) {
      o === void 0 && (o = 0), h === void 0 && (h = o);
      for (var l = e.a, c = e.b, _ = e.c, y = e.d, w = e.tx, b = e.ty, E = this.minX, T = this.minY, P = this.maxX, O = this.maxY, H = i; H < s; H += 2) {
        var Y = r[H], J = r[H + 1], it = l * Y + _ * J + w, st = y * J + c * Y + b;
        E = Math.min(E, it - o), P = Math.max(P, it + o), T = Math.min(T, st - h), O = Math.max(O, st + h);
      }
      this.minX = E, this.minY = T, this.maxX = P, this.maxY = O;
    }, t.prototype.addBounds = function(e) {
      var r = this.minX, i = this.minY, s = this.maxX, o = this.maxY;
      this.minX = e.minX < r ? e.minX : r, this.minY = e.minY < i ? e.minY : i, this.maxX = e.maxX > s ? e.maxX : s, this.maxY = e.maxY > o ? e.maxY : o;
    }, t.prototype.addBoundsMask = function(e, r) {
      var i = e.minX > r.minX ? e.minX : r.minX, s = e.minY > r.minY ? e.minY : r.minY, o = e.maxX < r.maxX ? e.maxX : r.maxX, h = e.maxY < r.maxY ? e.maxY : r.maxY;
      if (i <= o && s <= h) {
        var l = this.minX, c = this.minY, _ = this.maxX, y = this.maxY;
        this.minX = i < l ? i : l, this.minY = s < c ? s : c, this.maxX = o > _ ? o : _, this.maxY = h > y ? h : y;
      }
    }, t.prototype.addBoundsMatrix = function(e, r) {
      this.addFrameMatrix(r, e.minX, e.minY, e.maxX, e.maxY);
    }, t.prototype.addBoundsArea = function(e, r) {
      var i = e.minX > r.x ? e.minX : r.x, s = e.minY > r.y ? e.minY : r.y, o = e.maxX < r.x + r.width ? e.maxX : r.x + r.width, h = e.maxY < r.y + r.height ? e.maxY : r.y + r.height;
      if (i <= o && s <= h) {
        var l = this.minX, c = this.minY, _ = this.maxX, y = this.maxY;
        this.minX = i < l ? i : l, this.minY = s < c ? s : c, this.maxX = o > _ ? o : _, this.maxY = h > y ? h : y;
      }
    }, t.prototype.pad = function(e, r) {
      e === void 0 && (e = 0), r === void 0 && (r = e), this.isEmpty() || (this.minX -= e, this.maxX += e, this.minY -= r, this.maxY += r);
    }, t.prototype.addFramePad = function(e, r, i, s, o, h) {
      e -= o, r -= h, i += o, s += h, this.minX = this.minX < e ? this.minX : e, this.maxX = this.maxX > i ? this.maxX : i, this.minY = this.minY < r ? this.minY : r, this.maxY = this.maxY > s ? this.maxY : s;
    }, t;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Pl = function(t, e) {
  return Pl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Pl(t, e);
};
function Iu(t, e) {
  Pl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Lr = (
  /** @class */
  function(t) {
    Iu(e, t);
    function e() {
      var r = t.call(this) || this;
      return r.tempDisplayObjectParent = null, r.transform = new ih(), r.alpha = 1, r.visible = !0, r.renderable = !0, r.cullable = !1, r.cullArea = null, r.parent = null, r.worldAlpha = 1, r._lastSortedIndex = 0, r._zIndex = 0, r.filterArea = null, r.filters = null, r._enabledFilters = null, r._bounds = new Mo(), r._localBounds = null, r._boundsID = 0, r._boundsRect = null, r._localBoundsRect = null, r._mask = null, r._maskRefCount = 0, r._destroyed = !1, r.isSprite = !1, r.isMask = !1, r;
    }
    return e.mixin = function(r) {
      for (var i = Object.keys(r), s = 0; s < i.length; ++s) {
        var o = i[s];
        Object.defineProperty(e.prototype, o, Object.getOwnPropertyDescriptor(r, o));
      }
    }, Object.defineProperty(e.prototype, "destroyed", {
      /**
       * Fired when this DisplayObject is added to a Container.
       * @instance
       * @event added
       * @param {PIXI.Container} container - The container added to.
       */
      /**
       * Fired when this DisplayObject is removed from a Container.
       * @instance
       * @event removed
       * @param {PIXI.Container} container - The container removed from.
       */
      /**
       * Fired when this DisplayObject is destroyed. This event is emitted once
       * destroy is finished.
       * @instance
       * @event destroyed
       */
      /** Readonly flag for destroyed display objects. */
      get: function() {
        return this._destroyed;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._recursivePostUpdateTransform = function() {
      this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform);
    }, e.prototype.updateTransform = function() {
      this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
    }, e.prototype.getBounds = function(r, i) {
      return r || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), i || (this._boundsRect || (this._boundsRect = new Ye()), i = this._boundsRect), this._bounds.getRectangle(i);
    }, e.prototype.getLocalBounds = function(r) {
      r || (this._localBoundsRect || (this._localBoundsRect = new Ye()), r = this._localBoundsRect), this._localBounds || (this._localBounds = new Mo());
      var i = this.transform, s = this.parent;
      this.parent = null, this.transform = this._tempDisplayObjectParent.transform;
      var o = this._bounds, h = this._boundsID;
      this._bounds = this._localBounds;
      var l = this.getBounds(!1, r);
      return this.parent = s, this.transform = i, this._bounds = o, this._bounds.updateID += this._boundsID - h, l;
    }, e.prototype.toGlobal = function(r, i, s) {
      return s === void 0 && (s = !1), s || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(r, i);
    }, e.prototype.toLocal = function(r, i, s, o) {
      return i && (r = i.toGlobal(r, s, o)), o || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(r, s);
    }, e.prototype.setParent = function(r) {
      if (!r || !r.addChild)
        throw new Error("setParent: Argument must be a Container");
      return r.addChild(this), r;
    }, e.prototype.setTransform = function(r, i, s, o, h, l, c, _, y) {
      return r === void 0 && (r = 0), i === void 0 && (i = 0), s === void 0 && (s = 1), o === void 0 && (o = 1), h === void 0 && (h = 0), l === void 0 && (l = 0), c === void 0 && (c = 0), _ === void 0 && (_ = 0), y === void 0 && (y = 0), this.position.x = r, this.position.y = i, this.scale.x = s || 1, this.scale.y = o || 1, this.rotation = h, this.skew.x = l, this.skew.y = c, this.pivot.x = _, this.pivot.y = y, this;
    }, e.prototype.destroy = function(r) {
      this.parent && this.parent.removeChild(this), this._destroyed = !0, this.transform = null, this.parent = null, this._bounds = null, this.mask = null, this.cullArea = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = !1, this.interactiveChildren = !1, this.emit("destroyed"), this.removeAllListeners();
    }, Object.defineProperty(e.prototype, "_tempDisplayObjectParent", {
      /**
       * @protected
       * @member {PIXI.Container}
       */
      get: function() {
        return this.tempDisplayObjectParent === null && (this.tempDisplayObjectParent = new Cu()), this.tempDisplayObjectParent;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.enableTempParent = function() {
      var r = this.parent;
      return this.parent = this._tempDisplayObjectParent, r;
    }, e.prototype.disableTempParent = function(r) {
      this.parent = r;
    }, Object.defineProperty(e.prototype, "x", {
      /**
       * The position of the displayObject on the x axis relative to the local coordinates of the parent.
       * An alias to position.x
       */
      get: function() {
        return this.position.x;
      },
      set: function(r) {
        this.transform.position.x = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "y", {
      /**
       * The position of the displayObject on the y axis relative to the local coordinates of the parent.
       * An alias to position.y
       */
      get: function() {
        return this.position.y;
      },
      set: function(r) {
        this.transform.position.y = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "worldTransform", {
      /**
       * Current transform of the object based on world (parent) factors.
       * @readonly
       */
      get: function() {
        return this.transform.worldTransform;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "localTransform", {
      /**
       * Current transform of the object based on local factors: position, scale, other stuff.
       * @readonly
       */
      get: function() {
        return this.transform.localTransform;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "position", {
      /**
       * The coordinate of the object relative to the local coordinates of the parent.
       * @since 4.0.0
       */
      get: function() {
        return this.transform.position;
      },
      set: function(r) {
        this.transform.position.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "scale", {
      /**
       * The scale factors of this object along the local coordinate axes.
       *
       * The default scale is (1, 1).
       * @since 4.0.0
       */
      get: function() {
        return this.transform.scale;
      },
      set: function(r) {
        this.transform.scale.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "pivot", {
      /**
       * The center of rotation, scaling, and skewing for this display object in its local space. The `position`
       * is the projection of `pivot` in the parent's local space.
       *
       * By default, the pivot is the origin (0, 0).
       * @since 4.0.0
       */
      get: function() {
        return this.transform.pivot;
      },
      set: function(r) {
        this.transform.pivot.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "skew", {
      /**
       * The skew factor for the object in radians.
       * @since 4.0.0
       */
      get: function() {
        return this.transform.skew;
      },
      set: function(r) {
        this.transform.skew.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "rotation", {
      /**
       * The rotation of the object in radians.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       */
      get: function() {
        return this.transform.rotation;
      },
      set: function(r) {
        this.transform.rotation = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "angle", {
      /**
       * The angle of the object in degrees.
       * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.
       */
      get: function() {
        return this.transform.rotation * q_;
      },
      set: function(r) {
        this.transform.rotation = r * Z_;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "zIndex", {
      /**
       * The zIndex of the displayObject.
       *
       * If a container has the sortableChildren property set to true, children will be automatically
       * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,
       * and thus rendered on top of other display objects within the same container.
       * @see PIXI.Container#sortableChildren
       */
      get: function() {
        return this._zIndex;
      },
      set: function(r) {
        this._zIndex = r, this.parent && (this.parent.sortDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "worldVisible", {
      /**
       * Indicates if the object is globally visible.
       * @readonly
       */
      get: function() {
        var r = this;
        do {
          if (!r.visible)
            return !1;
          r = r.parent;
        } while (r);
        return !0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "mask", {
      /**
       * Sets a mask for the displayObject. A mask is an object that limits the visibility of an
       * object to the shape of the mask applied to it. In PixiJS a regular mask must be a
       * {@link PIXI.Graphics} or a {@link PIXI.Sprite} object. This allows for much faster masking in canvas as it
       * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.
       * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.
       * To remove a mask, set this property to `null`.
       *
       * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.
       * @example
       * const graphics = new PIXI.Graphics();
       * graphics.beginFill(0xFF3300);
       * graphics.drawRect(50, 250, 100, 100);
       * graphics.endFill();
       *
       * const sprite = new PIXI.Sprite(texture);
       * sprite.mask = graphics;
       * @todo At the moment, PIXI.CanvasRenderer doesn't support PIXI.Sprite as mask.
       */
      get: function() {
        return this._mask;
      },
      set: function(r) {
        if (this._mask !== r) {
          if (this._mask) {
            var i = this._mask.isMaskData ? this._mask.maskObject : this._mask;
            i && (i._maskRefCount--, i._maskRefCount === 0 && (i.renderable = !0, i.isMask = !1));
          }
          if (this._mask = r, this._mask) {
            var i = this._mask.isMaskData ? this._mask.maskObject : this._mask;
            i && (i._maskRefCount === 0 && (i.renderable = !1, i.isMask = !0), i._maskRefCount++);
          }
        }
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Oi)
), Cu = (
  /** @class */
  function(t) {
    Iu(e, t);
    function e() {
      var r = t !== null && t.apply(this, arguments) || this;
      return r.sortDirty = null, r;
    }
    return e;
  }(Lr)
);
Lr.prototype.displayObjectUpdateTransform = Lr.prototype.updateTransform;
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var gf;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(gf || (gf = {}));
var yf;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(yf || (yf = {}));
var bf;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(bf || (bf = {}));
var xf;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(xf || (xf = {}));
var Tf;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(Tf || (Tf = {}));
var Af;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Af || (Af = {}));
var wf;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(wf || (wf = {}));
var Pf;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(Pf || (Pf = {}));
var Ef;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(Ef || (Ef = {}));
var If;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(If || (If = {}));
var Cf;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Cf || (Cf = {}));
var $f;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})($f || ($f = {}));
var Rf;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Rf || (Rf = {}));
var Sf;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(Sf || (Sf = {}));
var Nf;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(Nf || (Nf = {}));
var Lf;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Lf || (Lf = {}));
var El;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(El || (El = {}));
var Of;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(Of || (Of = {}));
var Ff;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(Ff || (Ff = {}));
var Mf;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Mf || (Mf = {}));
function yy(t, e) {
  return t.zIndex === e.zIndex ? t._lastSortedIndex - e._lastSortedIndex : t.zIndex - e.zIndex;
}
var Ti = (
  /** @class */
  function(t) {
    Iu(e, t);
    function e() {
      var r = t.call(this) || this;
      return r.children = [], r.sortableChildren = ee.SORTABLE_CHILDREN, r.sortDirty = !1, r;
    }
    return e.prototype.onChildrenChange = function(r) {
    }, e.prototype.addChild = function() {
      for (var r = arguments, i = [], s = 0; s < arguments.length; s++)
        i[s] = r[s];
      if (i.length > 1)
        for (var o = 0; o < i.length; o++)
          this.addChild(i[o]);
      else {
        var h = i[0];
        h.parent && h.parent.removeChild(h), h.parent = this, this.sortDirty = !0, h.transform._parentID = -1, this.children.push(h), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit("childAdded", h, this, this.children.length - 1), h.emit("added", this);
      }
      return i[0];
    }, e.prototype.addChildAt = function(r, i) {
      if (i < 0 || i > this.children.length)
        throw new Error(r + "addChildAt: The index " + i + " supplied is out of bounds " + this.children.length);
      return r.parent && r.parent.removeChild(r), r.parent = this, this.sortDirty = !0, r.transform._parentID = -1, this.children.splice(i, 0, r), this._boundsID++, this.onChildrenChange(i), r.emit("added", this), this.emit("childAdded", r, this, i), r;
    }, e.prototype.swapChildren = function(r, i) {
      if (r !== i) {
        var s = this.getChildIndex(r), o = this.getChildIndex(i);
        this.children[s] = i, this.children[o] = r, this.onChildrenChange(s < o ? s : o);
      }
    }, e.prototype.getChildIndex = function(r) {
      var i = this.children.indexOf(r);
      if (i === -1)
        throw new Error("The supplied DisplayObject must be a child of the caller");
      return i;
    }, e.prototype.setChildIndex = function(r, i) {
      if (i < 0 || i >= this.children.length)
        throw new Error("The index " + i + " supplied is out of bounds " + this.children.length);
      var s = this.getChildIndex(r);
      rs(this.children, s, 1), this.children.splice(i, 0, r), this.onChildrenChange(i);
    }, e.prototype.getChildAt = function(r) {
      if (r < 0 || r >= this.children.length)
        throw new Error("getChildAt: Index (" + r + ") does not exist.");
      return this.children[r];
    }, e.prototype.removeChild = function() {
      for (var r = arguments, i = [], s = 0; s < arguments.length; s++)
        i[s] = r[s];
      if (i.length > 1)
        for (var o = 0; o < i.length; o++)
          this.removeChild(i[o]);
      else {
        var h = i[0], l = this.children.indexOf(h);
        if (l === -1)
          return null;
        h.parent = null, h.transform._parentID = -1, rs(this.children, l, 1), this._boundsID++, this.onChildrenChange(l), h.emit("removed", this), this.emit("childRemoved", h, this, l);
      }
      return i[0];
    }, e.prototype.removeChildAt = function(r) {
      var i = this.getChildAt(r);
      return i.parent = null, i.transform._parentID = -1, rs(this.children, r, 1), this._boundsID++, this.onChildrenChange(r), i.emit("removed", this), this.emit("childRemoved", i, this, r), i;
    }, e.prototype.removeChildren = function(r, i) {
      r === void 0 && (r = 0), i === void 0 && (i = this.children.length);
      var s = r, o = i, h = o - s, l;
      if (h > 0 && h <= o) {
        l = this.children.splice(s, h);
        for (var c = 0; c < l.length; ++c)
          l[c].parent = null, l[c].transform && (l[c].transform._parentID = -1);
        this._boundsID++, this.onChildrenChange(r);
        for (var c = 0; c < l.length; ++c)
          l[c].emit("removed", this), this.emit("childRemoved", l[c], this, c);
        return l;
      } else if (h === 0 && this.children.length === 0)
        return [];
      throw new RangeError("removeChildren: numeric values are outside the acceptable range.");
    }, e.prototype.sortChildren = function() {
      for (var r = !1, i = 0, s = this.children.length; i < s; ++i) {
        var o = this.children[i];
        o._lastSortedIndex = i, !r && o.zIndex !== 0 && (r = !0);
      }
      r && this.children.length > 1 && this.children.sort(yy), this.sortDirty = !1;
    }, e.prototype.updateTransform = function() {
      this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha;
      for (var r = 0, i = this.children.length; r < i; ++r) {
        var s = this.children[r];
        s.visible && s.updateTransform();
      }
    }, e.prototype.calculateBounds = function() {
      this._bounds.clear(), this._calculateBounds();
      for (var r = 0; r < this.children.length; r++) {
        var i = this.children[r];
        if (!(!i.visible || !i.renderable))
          if (i.calculateBounds(), i._mask) {
            var s = i._mask.isMaskData ? i._mask.maskObject : i._mask;
            s ? (s.calculateBounds(), this._bounds.addBoundsMask(i._bounds, s._bounds)) : this._bounds.addBounds(i._bounds);
          } else
            i.filterArea ? this._bounds.addBoundsArea(i._bounds, i.filterArea) : this._bounds.addBounds(i._bounds);
      }
      this._bounds.updateID = this._boundsID;
    }, e.prototype.getLocalBounds = function(r, i) {
      i === void 0 && (i = !1);
      var s = t.prototype.getLocalBounds.call(this, r);
      if (!i)
        for (var o = 0, h = this.children.length; o < h; ++o) {
          var l = this.children[o];
          l.visible && l.updateTransform();
        }
      return s;
    }, e.prototype._calculateBounds = function() {
    }, e.prototype._renderWithCulling = function(r) {
      var i = r.renderTexture.sourceFrame;
      if (i.width > 0 && i.height > 0) {
        var s, o;
        if (this.cullArea ? (s = this.cullArea, o = this.worldTransform) : this._render !== e.prototype._render && (s = this.getBounds(!0)), s && i.intersects(s, o))
          this._render(r);
        else if (this.cullArea)
          return;
        for (var h = 0, l = this.children.length; h < l; ++h) {
          var c = this.children[h], _ = c.cullable;
          c.cullable = _ || !this.cullArea, c.render(r), c.cullable = _;
        }
      }
    }, e.prototype.render = function(r) {
      if (!(!this.visible || this.worldAlpha <= 0 || !this.renderable))
        if (this._mask || this.filters && this.filters.length)
          this.renderAdvanced(r);
        else if (this.cullable)
          this._renderWithCulling(r);
        else {
          this._render(r);
          for (var i = 0, s = this.children.length; i < s; ++i)
            this.children[i].render(r);
        }
    }, e.prototype.renderAdvanced = function(r) {
      var i = this.filters, s = this._mask;
      if (i) {
        this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0;
        for (var o = 0; o < i.length; o++)
          i[o].enabled && this._enabledFilters.push(i[o]);
      }
      var h = i && this._enabledFilters && this._enabledFilters.length || s && (!s.isMaskData || s.enabled && (s.autoDetect || s.type !== El.NONE));
      if (h && r.batch.flush(), i && this._enabledFilters && this._enabledFilters.length && r.filter.push(this, this._enabledFilters), s && r.mask.push(this, this._mask), this.cullable)
        this._renderWithCulling(r);
      else {
        this._render(r);
        for (var o = 0, l = this.children.length; o < l; ++o)
          this.children[o].render(r);
      }
      h && r.batch.flush(), s && r.mask.pop(this), i && this._enabledFilters && this._enabledFilters.length && r.filter.pop();
    }, e.prototype._render = function(r) {
    }, e.prototype.destroy = function(r) {
      t.prototype.destroy.call(this), this.sortDirty = !1;
      var i = typeof r == "boolean" ? r : r && r.children, s = this.removeChildren(0, this.children.length);
      if (i)
        for (var o = 0; o < s.length; ++o)
          s[o].destroy(r);
    }, Object.defineProperty(e.prototype, "width", {
      /** The width of the Container, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.scale.x * this.getLocalBounds().width;
      },
      set: function(r) {
        var i = this.getLocalBounds().width;
        i !== 0 ? this.scale.x = r / i : this.scale.x = 1, this._width = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the Container, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.scale.y * this.getLocalBounds().height;
      },
      set: function(r) {
        var i = this.getLocalBounds().height;
        i !== 0 ? this.scale.y = r / i : this.scale.y = 1, this._height = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Lr)
);
Ti.prototype.containerUpdateTransform = Ti.prototype.updateTransform;
/*!
 * @pixi/extensions - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var To = function() {
  return To = Object.assign || function(e) {
    for (var r = arguments, i, s = 1, o = arguments.length; s < o; s++) {
      i = r[s];
      for (var h in i)
        Object.prototype.hasOwnProperty.call(i, h) && (e[h] = i[h]);
    }
    return e;
  }, To.apply(this, arguments);
}, or;
(function(t) {
  t.Application = "application", t.RendererPlugin = "renderer-webgl-plugin", t.CanvasRendererPlugin = "renderer-canvas-plugin", t.Loader = "loader", t.LoadParser = "load-parser", t.ResolveParser = "resolve-parser", t.CacheParser = "cache-parser", t.DetectionParser = "detection-parser";
})(or || (or = {}));
var Uf = function(t) {
  if (typeof t == "function" || typeof t == "object" && t.extension) {
    if (!t.extension)
      throw new Error("Extension class must have an extension object");
    var e = typeof t.extension != "object" ? { type: t.extension } : t.extension;
    t = To(To({}, e), { ref: t });
  }
  if (typeof t == "object")
    t = To({}, t);
  else
    throw new Error("Invalid extension type");
  return typeof t.type == "string" && (t.type = [t.type]), t;
}, Qi = {
  /** @ignore */
  _addHandlers: null,
  /** @ignore */
  _removeHandlers: null,
  /** @ignore */
  _queue: {},
  /**
   * Remove extensions from PixiJS.
   * @param extensions - Extensions to be removed.
   * @returns {PIXI.extensions} For chaining.
   */
  remove: function() {
    for (var t = arguments, e = this, r = [], i = 0; i < arguments.length; i++)
      r[i] = t[i];
    return r.map(Uf).forEach(function(s) {
      s.type.forEach(function(o) {
        var h, l;
        return (l = (h = e._removeHandlers)[o]) === null || l === void 0 ? void 0 : l.call(h, s);
      });
    }), this;
  },
  /**
   * Register new extensions with PixiJS.
   * @param extensions - The spread of extensions to add to PixiJS.
   * @returns {PIXI.extensions} For chaining.
   */
  add: function() {
    for (var t = arguments, e = this, r = [], i = 0; i < arguments.length; i++)
      r[i] = t[i];
    return r.map(Uf).forEach(function(s) {
      s.type.forEach(function(o) {
        var h = e._addHandlers, l = e._queue;
        h[o] ? h[o](s) : (l[o] = l[o] || [], l[o].push(s));
      });
    }), this;
  },
  /**
   * Internal method to handle extensions by name.
   * @param type - The extension type.
   * @param onAdd  - Function for handling when extensions are added/registered passes {@link PIXI.ExtensionFormat}.
   * @param onRemove  - Function for handling when extensions are removed/unregistered passes {@link PIXI.ExtensionFormat}.
   * @returns {PIXI.extensions} For chaining.
   */
  handle: function(t, e, r) {
    var i = this._addHandlers = this._addHandlers || {}, s = this._removeHandlers = this._removeHandlers || {};
    if (i[t] || s[t])
      throw new Error("Extension type " + t + " already has a handler");
    i[t] = e, s[t] = r;
    var o = this._queue;
    return o[t] && (o[t].forEach(function(h) {
      return e(h);
    }), delete o[t]), this;
  },
  /**
   * Handle a type, but using a map by `name` property.
   * @param type - Type of extension to handle.
   * @param map - The object map of named extensions.
   * @returns {PIXI.extensions} For chaining.
   */
  handleByMap: function(t, e) {
    return this.handle(t, function(r) {
      e[r.name] = r.ref;
    }, function(r) {
      delete e[r.name];
    });
  },
  /**
   * Handle a type, but using a list of extensions.
   * @param type - Type of extension to handle.
   * @param list - The list of extensions.
   * @returns {PIXI.extensions} For chaining.
   */
  handleByList: function(t, e) {
    return this.handle(t, function(r) {
      var i, s;
      e.push(r.ref), t === or.Loader && ((s = (i = r.ref).add) === null || s === void 0 || s.call(i));
    }, function(r) {
      var i = e.indexOf(r.ref);
      i !== -1 && e.splice(i, 1);
    });
  }
};
/*!
 * @pixi/runner - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var jr = (
  /** @class */
  function() {
    function t(e) {
      this.items = [], this._name = e, this._aliasCount = 0;
    }
    return t.prototype.emit = function(e, r, i, s, o, h, l, c) {
      if (arguments.length > 8)
        throw new Error("max arguments reached");
      var _ = this, y = _.name, w = _.items;
      this._aliasCount++;
      for (var b = 0, E = w.length; b < E; b++)
        w[b][y](e, r, i, s, o, h, l, c);
      return w === this.items && this._aliasCount--, this;
    }, t.prototype.ensureNonAliasedItems = function() {
      this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0));
    }, t.prototype.add = function(e) {
      return e[this._name] && (this.ensureNonAliasedItems(), this.remove(e), this.items.push(e)), this;
    }, t.prototype.remove = function(e) {
      var r = this.items.indexOf(e);
      return r !== -1 && (this.ensureNonAliasedItems(), this.items.splice(r, 1)), this;
    }, t.prototype.contains = function(e) {
      return this.items.indexOf(e) !== -1;
    }, t.prototype.removeAll = function() {
      return this.ensureNonAliasedItems(), this.items.length = 0, this;
    }, t.prototype.destroy = function() {
      this.removeAll(), this.items = null, this._name = null;
    }, Object.defineProperty(t.prototype, "empty", {
      /**
       * `true` if there are no this Runner contains no listeners
       * @readonly
       */
      get: function() {
        return this.items.length === 0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "name", {
      /**
       * The name of the runner.
       * @readonly
       */
      get: function() {
        return this._name;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
);
Object.defineProperties(jr.prototype, {
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method dispatch
   * @see PIXI.Runner#emit
   */
  dispatch: { value: jr.prototype.emit },
  /**
   * Alias for `emit`
   * @memberof PIXI.Runner#
   * @method run
   * @see PIXI.Runner#emit
   */
  run: { value: jr.prototype.emit }
});
/*!
 * @pixi/ticker - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
ee.TARGET_FPMS = 0.06;
var Zi;
(function(t) {
  t[t.INTERACTION = 50] = "INTERACTION", t[t.HIGH = 25] = "HIGH", t[t.NORMAL = 0] = "NORMAL", t[t.LOW = -25] = "LOW", t[t.UTILITY = -50] = "UTILITY";
})(Zi || (Zi = {}));
var Ph = (
  /** @class */
  function() {
    function t(e, r, i, s) {
      r === void 0 && (r = null), i === void 0 && (i = 0), s === void 0 && (s = !1), this.next = null, this.previous = null, this._destroyed = !1, this.fn = e, this.context = r, this.priority = i, this.once = s;
    }
    return t.prototype.match = function(e, r) {
      return r === void 0 && (r = null), this.fn === e && this.context === r;
    }, t.prototype.emit = function(e) {
      this.fn && (this.context ? this.fn.call(this.context, e) : this.fn(e));
      var r = this.next;
      return this.once && this.destroy(!0), this._destroyed && (this.next = null), r;
    }, t.prototype.connect = function(e) {
      this.previous = e, e.next && (e.next.previous = this), this.next = e.next, e.next = this;
    }, t.prototype.destroy = function(e) {
      e === void 0 && (e = !1), this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous);
      var r = this.next;
      return this.next = e ? null : r, this.previous = null, r;
    }, t;
  }()
), Hr = (
  /** @class */
  function() {
    function t() {
      var e = this;
      this.autoStart = !1, this.deltaTime = 1, this.lastTime = -1, this.speed = 1, this.started = !1, this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this._protected = !1, this._lastFrame = -1, this._head = new Ph(null, null, 1 / 0), this.deltaMS = 1 / ee.TARGET_FPMS, this.elapsedMS = 1 / ee.TARGET_FPMS, this._tick = function(r) {
        e._requestId = null, e.started && (e.update(r), e.started && e._requestId === null && e._head.next && (e._requestId = requestAnimationFrame(e._tick)));
      };
    }
    return t.prototype._requestIfNeeded = function() {
      this._requestId === null && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick));
    }, t.prototype._cancelIfNeeded = function() {
      this._requestId !== null && (cancelAnimationFrame(this._requestId), this._requestId = null);
    }, t.prototype._startIfPossible = function() {
      this.started ? this._requestIfNeeded() : this.autoStart && this.start();
    }, t.prototype.add = function(e, r, i) {
      return i === void 0 && (i = Zi.NORMAL), this._addListener(new Ph(e, r, i));
    }, t.prototype.addOnce = function(e, r, i) {
      return i === void 0 && (i = Zi.NORMAL), this._addListener(new Ph(e, r, i, !0));
    }, t.prototype._addListener = function(e) {
      var r = this._head.next, i = this._head;
      if (!r)
        e.connect(i);
      else {
        for (; r; ) {
          if (e.priority > r.priority) {
            e.connect(i);
            break;
          }
          i = r, r = r.next;
        }
        e.previous || e.connect(i);
      }
      return this._startIfPossible(), this;
    }, t.prototype.remove = function(e, r) {
      for (var i = this._head.next; i; )
        i.match(e, r) ? i = i.destroy() : i = i.next;
      return this._head.next || this._cancelIfNeeded(), this;
    }, Object.defineProperty(t.prototype, "count", {
      /**
       * The number of listeners on this ticker, calculated by walking through linked list
       * @readonly
       * @member {number}
       */
      get: function() {
        if (!this._head)
          return 0;
        for (var e = 0, r = this._head; r = r.next; )
          e++;
        return e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.start = function() {
      this.started || (this.started = !0, this._requestIfNeeded());
    }, t.prototype.stop = function() {
      this.started && (this.started = !1, this._cancelIfNeeded());
    }, t.prototype.destroy = function() {
      if (!this._protected) {
        this.stop();
        for (var e = this._head.next; e; )
          e = e.destroy(!0);
        this._head.destroy(), this._head = null;
      }
    }, t.prototype.update = function(e) {
      e === void 0 && (e = performance.now());
      var r;
      if (e > this.lastTime) {
        if (r = this.elapsedMS = e - this.lastTime, r > this._maxElapsedMS && (r = this._maxElapsedMS), r *= this.speed, this._minElapsedMS) {
          var i = e - this._lastFrame | 0;
          if (i < this._minElapsedMS)
            return;
          this._lastFrame = e - i % this._minElapsedMS;
        }
        this.deltaMS = r, this.deltaTime = this.deltaMS * ee.TARGET_FPMS;
        for (var s = this._head, o = s.next; o; )
          o = o.emit(this.deltaTime);
        s.next || this._cancelIfNeeded();
      } else
        this.deltaTime = this.deltaMS = this.elapsedMS = 0;
      this.lastTime = e;
    }, Object.defineProperty(t.prototype, "FPS", {
      /**
       * The frames per second at which this ticker is running.
       * The default is approximately 60 in most modern browsers.
       * **Note:** This does not factor in the value of
       * {@link PIXI.Ticker#speed}, which is specific
       * to scaling {@link PIXI.Ticker#deltaTime}.
       * @member {number}
       * @readonly
       */
      get: function() {
        return 1e3 / this.elapsedMS;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "minFPS", {
      /**
       * Manages the maximum amount of milliseconds allowed to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This value is used to cap {@link PIXI.Ticker#deltaTime},
       * but does not effect the measured value of {@link PIXI.Ticker#FPS}.
       * When setting this property it is clamped to a value between
       * `0` and `PIXI.settings.TARGET_FPMS * 1000`.
       * @member {number}
       * @default 10
       */
      get: function() {
        return 1e3 / this._maxElapsedMS;
      },
      set: function(e) {
        var r = Math.min(this.maxFPS, e), i = Math.min(Math.max(0, r) / 1e3, ee.TARGET_FPMS);
        this._maxElapsedMS = 1 / i;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "maxFPS", {
      /**
       * Manages the minimum amount of milliseconds required to
       * elapse between invoking {@link PIXI.Ticker#update}.
       * This will effect the measured value of {@link PIXI.Ticker#FPS}.
       * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.
       * Otherwise it will be at least `minFPS`
       * @member {number}
       * @default 0
       */
      get: function() {
        return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0;
      },
      set: function(e) {
        if (e === 0)
          this._minElapsedMS = 0;
        else {
          var r = Math.max(this.minFPS, e);
          this._minElapsedMS = 1 / (r / 1e3);
        }
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "shared", {
      /**
       * The shared ticker instance used by {@link PIXI.AnimatedSprite} and by
       * {@link PIXI.VideoResource} to update animation frames / video textures.
       *
       * It may also be used by {@link PIXI.Application} if created with the `sharedTicker` option property set to true.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.
       * @example
       * let ticker = PIXI.Ticker.shared;
       * // Set this to prevent starting this ticker when listeners are added.
       * // By default this is true only for the PIXI.Ticker.shared instance.
       * ticker.autoStart = false;
       * // FYI, call this to ensure the ticker is stopped. It should be stopped
       * // if you have not attempted to render anything yet.
       * ticker.stop();
       * // Call this when you are ready for a running shared ticker.
       * ticker.start();
       * @example
       * // You may use the shared ticker to render...
       * let renderer = PIXI.autoDetectRenderer();
       * let stage = new PIXI.Container();
       * document.body.appendChild(renderer.view);
       * ticker.add(function (time) {
       *     renderer.render(stage);
       * });
       * @example
       * // Or you can just update it manually.
       * ticker.autoStart = false;
       * ticker.stop();
       * function animate(time) {
       *     ticker.update(time);
       *     renderer.render(stage);
       *     requestAnimationFrame(animate);
       * }
       * animate(performance.now());
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!t._shared) {
          var e = t._shared = new t();
          e.autoStart = !0, e._protected = !0;
        }
        return t._shared;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "system", {
      /**
       * The system ticker instance used by {@link PIXI.InteractionManager} and by
       * {@link PIXI.BasePrepare} for core timing functionality that shouldn't usually need to be paused,
       * unlike the `shared` ticker which drives visual animations and rendering which may want to be paused.
       *
       * The property {@link PIXI.Ticker#autoStart} is set to `true` for this instance.
       * @member {PIXI.Ticker}
       * @static
       */
      get: function() {
        if (!t._system) {
          var e = t._system = new t();
          e.autoStart = !0, e._protected = !0;
        }
        return t._system;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
), ep = (
  /** @class */
  function() {
    function t() {
    }
    return t.init = function(e) {
      var r = this;
      e = Object.assign({
        autoStart: !0,
        sharedTicker: !1
      }, e), Object.defineProperty(this, "ticker", {
        set: function(i) {
          this._ticker && this._ticker.remove(this.render, this), this._ticker = i, i && i.add(this.render, this, Zi.LOW);
        },
        get: function() {
          return this._ticker;
        }
      }), this.stop = function() {
        r._ticker.stop();
      }, this.start = function() {
        r._ticker.start();
      }, this._ticker = null, this.ticker = e.sharedTicker ? Hr.shared : new Hr(), e.autoStart && this.start();
    }, t.destroy = function() {
      if (this._ticker) {
        var e = this._ticker;
        this.ticker = null, e.destroy();
      }
    }, t.extension = or.Application, t;
  }()
);
/*!
 * @pixi/core - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
ee.PREFER_ENV = gi.any ? Yi.WEBGL : Yi.WEBGL2;
ee.STRICT_TEXTURE_CACHE = !1;
var Uo = [];
function nh(t, e) {
  if (!t)
    return null;
  var r = "";
  if (typeof t == "string") {
    var i = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
    i && (r = i[1].toLowerCase());
  }
  for (var s = Uo.length - 1; s >= 0; --s) {
    var o = Uo[s];
    if (o.test && o.test(t, r))
      return new o(t, e);
  }
  throw new Error("Unrecognized source type to auto-detect Resource");
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Il = function(t, e) {
  return Il = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Il(t, e);
};
function yr(t, e) {
  Il(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Cl = function() {
  return Cl = Object.assign || function(e) {
    for (var r = arguments, i, s = 1, o = arguments.length; s < o; s++) {
      i = r[s];
      for (var h in i)
        Object.prototype.hasOwnProperty.call(i, h) && (e[h] = i[h]);
    }
    return e;
  }, Cl.apply(this, arguments);
};
function by(t, e) {
  var r = {};
  for (var i in t)
    Object.prototype.hasOwnProperty.call(t, i) && e.indexOf(i) < 0 && (r[i] = t[i]);
  if (t != null && typeof Object.getOwnPropertySymbols == "function")
    for (var s = 0, i = Object.getOwnPropertySymbols(t); s < i.length; s++)
      e.indexOf(i[s]) < 0 && Object.prototype.propertyIsEnumerable.call(t, i[s]) && (r[i[s]] = t[i[s]]);
  return r;
}
var os = (
  /** @class */
  function() {
    function t(e, r) {
      e === void 0 && (e = 0), r === void 0 && (r = 0), this._width = e, this._height = r, this.destroyed = !1, this.internal = !1, this.onResize = new jr("setRealSize"), this.onUpdate = new jr("update"), this.onError = new jr("onError");
    }
    return t.prototype.bind = function(e) {
      this.onResize.add(e), this.onUpdate.add(e), this.onError.add(e), (this._width || this._height) && this.onResize.emit(this._width, this._height);
    }, t.prototype.unbind = function(e) {
      this.onResize.remove(e), this.onUpdate.remove(e), this.onError.remove(e);
    }, t.prototype.resize = function(e, r) {
      (e !== this._width || r !== this._height) && (this._width = e, this._height = r, this.onResize.emit(e, r));
    }, Object.defineProperty(t.prototype, "valid", {
      /**
       * Has been validated
       * @readonly
       */
      get: function() {
        return !!this._width && !!this._height;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.update = function() {
      this.destroyed || this.onUpdate.emit();
    }, t.prototype.load = function() {
      return Promise.resolve(this);
    }, Object.defineProperty(t.prototype, "width", {
      /**
       * The width of the resource.
       * @readonly
       */
      get: function() {
        return this._width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      /**
       * The height of the resource.
       * @readonly
       */
      get: function() {
        return this._height;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.style = function(e, r, i) {
      return !1;
    }, t.prototype.dispose = function() {
    }, t.prototype.destroy = function() {
      this.destroyed || (this.destroyed = !0, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null);
    }, t.test = function(e, r) {
      return !1;
    }, t;
  }()
), ls = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this, o = i || {}, h = o.width, l = o.height;
      if (!h || !l)
        throw new Error("BufferResource width or height invalid");
      return s = t.call(this, h, l) || this, s.data = r, s;
    }
    return e.prototype.upload = function(r, i, s) {
      var o = r.gl;
      o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === xi.UNPACK);
      var h = i.realWidth, l = i.realHeight;
      return s.width === h && s.height === l ? o.texSubImage2D(i.target, 0, 0, 0, h, l, i.format, s.type, this.data) : (s.width = h, s.height = l, o.texImage2D(i.target, 0, s.internalFormat, h, l, 0, i.format, s.type, this.data)), !0;
    }, e.prototype.dispose = function() {
      this.data = null;
    }, e.test = function(r) {
      return r instanceof Float32Array || r instanceof Uint8Array || r instanceof Uint32Array;
    }, e;
  }(os)
), xy = {
  scaleMode: zi.NEAREST,
  format: Ht.RGBA,
  alphaMode: xi.NPM
}, We = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      r === void 0 && (r = null), i === void 0 && (i = null);
      var s = t.call(this) || this;
      i = i || {};
      var o = i.alphaMode, h = i.mipmap, l = i.anisotropicLevel, c = i.scaleMode, _ = i.width, y = i.height, w = i.wrapMode, b = i.format, E = i.type, T = i.target, P = i.resolution, O = i.resourceOptions;
      return r && !(r instanceof os) && (r = nh(r, O), r.internal = !0), s.resolution = P || ee.RESOLUTION, s.width = Math.round((_ || 0) * s.resolution) / s.resolution, s.height = Math.round((y || 0) * s.resolution) / s.resolution, s._mipmap = h !== void 0 ? h : ee.MIPMAP_TEXTURES, s.anisotropicLevel = l !== void 0 ? l : ee.ANISOTROPIC_LEVEL, s._wrapMode = w || ee.WRAP_MODE, s._scaleMode = c !== void 0 ? c : ee.SCALE_MODE, s.format = b || Ht.RGBA, s.type = E || xe.UNSIGNED_BYTE, s.target = T || Tn.TEXTURE_2D, s.alphaMode = o !== void 0 ? o : xi.UNPACK, s.uid = Pn(), s.touched = 0, s.isPowerOfTwo = !1, s._refreshPOT(), s._glTextures = {}, s.dirtyId = 0, s.dirtyStyleId = 0, s.cacheId = null, s.valid = _ > 0 && y > 0, s.textureCacheIds = [], s.destroyed = !1, s.resource = null, s._batchEnabled = 0, s._batchLocation = 0, s.parentTextureArray = null, s.setResource(r), s;
    }
    return Object.defineProperty(e.prototype, "realWidth", {
      /**
       * Pixel width of the source of this texture
       * @readonly
       */
      get: function() {
        return Math.round(this.width * this.resolution);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "realHeight", {
      /**
       * Pixel height of the source of this texture
       * @readonly
       */
      get: function() {
        return Math.round(this.height * this.resolution);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "mipmap", {
      /**
       * Mipmap mode of the texture, affects downscaled images
       * @default PIXI.settings.MIPMAP_TEXTURES
       */
      get: function() {
        return this._mipmap;
      },
      set: function(r) {
        this._mipmap !== r && (this._mipmap = r, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "scaleMode", {
      /**
       * The scale mode to apply when scaling this texture
       * @default PIXI.settings.SCALE_MODE
       */
      get: function() {
        return this._scaleMode;
      },
      set: function(r) {
        this._scaleMode !== r && (this._scaleMode = r, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "wrapMode", {
      /**
       * How the texture wraps
       * @default PIXI.settings.WRAP_MODE
       */
      get: function() {
        return this._wrapMode;
      },
      set: function(r) {
        this._wrapMode !== r && (this._wrapMode = r, this.dirtyStyleId++);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.setStyle = function(r, i) {
      var s;
      return r !== void 0 && r !== this.scaleMode && (this.scaleMode = r, s = !0), i !== void 0 && i !== this.mipmap && (this.mipmap = i, s = !0), s && this.dirtyStyleId++, this;
    }, e.prototype.setSize = function(r, i, s) {
      return s = s || this.resolution, this.setRealSize(r * s, i * s, s);
    }, e.prototype.setRealSize = function(r, i, s) {
      return this.resolution = s || this.resolution, this.width = Math.round(r) / this.resolution, this.height = Math.round(i) / this.resolution, this._refreshPOT(), this.update(), this;
    }, e.prototype._refreshPOT = function() {
      this.isPowerOfTwo = bl(this.realWidth) && bl(this.realHeight);
    }, e.prototype.setResolution = function(r) {
      var i = this.resolution;
      return i === r ? this : (this.resolution = r, this.valid && (this.width = Math.round(this.width * i) / r, this.height = Math.round(this.height * i) / r, this.emit("update", this)), this._refreshPOT(), this);
    }, e.prototype.setResource = function(r) {
      if (this.resource === r)
        return this;
      if (this.resource)
        throw new Error("Resource can be set only once");
      return r.bind(this), this.resource = r, this;
    }, e.prototype.update = function() {
      this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this)) : this.width > 0 && this.height > 0 && (this.valid = !0, this.emit("loaded", this), this.emit("update", this));
    }, e.prototype.onError = function(r) {
      this.emit("error", this, r);
    }, e.prototype.destroy = function() {
      this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete vi[this.cacheId], delete oi[this.cacheId], this.cacheId = null), this.dispose(), e.removeFromCache(this), this.textureCacheIds = null, this.destroyed = !0;
    }, e.prototype.dispose = function() {
      this.emit("dispose", this);
    }, e.prototype.castToBaseTexture = function() {
      return this;
    }, e.from = function(r, i, s) {
      s === void 0 && (s = ee.STRICT_TEXTURE_CACHE);
      var o = typeof r == "string", h = null;
      if (o)
        h = r;
      else {
        if (!r._pixiId) {
          var l = i && i.pixiIdPrefix || "pixiid";
          r._pixiId = l + "_" + Pn();
        }
        h = r._pixiId;
      }
      var c = vi[h];
      if (o && s && !c)
        throw new Error('The cacheId "' + h + '" does not exist in BaseTextureCache.');
      return c || (c = new e(r, i), c.cacheId = h, e.addToCache(c, h)), c;
    }, e.fromBuffer = function(r, i, s, o) {
      r = r || new Float32Array(i * s * 4);
      var h = new ls(r, { width: i, height: s }), l = r instanceof Float32Array ? xe.FLOAT : xe.UNSIGNED_BYTE;
      return new e(h, Object.assign(xy, o || { width: i, height: s, type: l }));
    }, e.addToCache = function(r, i) {
      i && (r.textureCacheIds.indexOf(i) === -1 && r.textureCacheIds.push(i), vi[i] && console.warn("BaseTexture added to the cache with an id [" + i + "] that already had an entry"), vi[i] = r);
    }, e.removeFromCache = function(r) {
      if (typeof r == "string") {
        var i = vi[r];
        if (i) {
          var s = i.textureCacheIds.indexOf(r);
          return s > -1 && i.textureCacheIds.splice(s, 1), delete vi[r], i;
        }
      } else if (r && r.textureCacheIds) {
        for (var o = 0; o < r.textureCacheIds.length; ++o)
          delete vi[r.textureCacheIds[o]];
        return r.textureCacheIds.length = 0, r;
      }
      return null;
    }, e._globalBatch = 0, e;
  }(Oi)
), sh = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this, o = i || {}, h = o.width, l = o.height;
      s = t.call(this, h, l) || this, s.items = [], s.itemDirtyIds = [];
      for (var c = 0; c < r; c++) {
        var _ = new We();
        s.items.push(_), s.itemDirtyIds.push(-2);
      }
      return s.length = r, s._load = null, s.baseTexture = null, s;
    }
    return e.prototype.initFromArray = function(r, i) {
      for (var s = 0; s < this.length; s++)
        r[s] && (r[s].castToBaseTexture ? this.addBaseTextureAt(r[s].castToBaseTexture(), s) : r[s] instanceof os ? this.addResourceAt(r[s], s) : this.addResourceAt(nh(r[s], i), s));
    }, e.prototype.dispose = function() {
      for (var r = 0, i = this.length; r < i; r++)
        this.items[r].destroy();
      this.items = null, this.itemDirtyIds = null, this._load = null;
    }, e.prototype.addResourceAt = function(r, i) {
      if (!this.items[i])
        throw new Error("Index " + i + " is out of bounds");
      return r.valid && !this.valid && this.resize(800, 800), this.items[i].setResource(r), this;
    }, e.prototype.bind = function(r) {
      if (this.baseTexture !== null)
        throw new Error("Only one base texture per TextureArray is allowed");
      t.prototype.bind.call(this, r);
      for (var i = 0; i < this.length; i++)
        this.items[i].parentTextureArray = r, this.items[i].on("update", r.update, r);
    }, e.prototype.unbind = function(r) {
      t.prototype.unbind.call(this, r);
      for (var i = 0; i < this.length; i++)
        this.items[i].parentTextureArray = null, this.items[i].off("update", r.update, r);
    }, e.prototype.load = function() {
      var r = this;
      if (this._load)
        return this._load;
      var i = this.items.map(function(o) {
        return o.resource;
      }).filter(function(o) {
        return o;
      }), s = i.map(function(o) {
        return o.load();
      });
      return this._load = Promise.all(s).then(function() {
        var o = r.items[0], h = o.realWidth, l = o.realHeight;
        return r.resize(h, l), Promise.resolve(r);
      }), this._load;
    }, e;
  }(os)
), $u = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this, o = i || {}, h = o.width, l = o.height, c, _;
      return Array.isArray(r) ? (c = r, _ = r.length) : _ = r, s = t.call(this, _, { width: h, height: l }) || this, c && s.initFromArray(c, i), s;
    }
    return e.prototype.addBaseTextureAt = function(r, i) {
      if (r.resource)
        this.addResourceAt(r.resource, i);
      else
        throw new Error("ArrayResource does not support RenderTexture");
      return this;
    }, e.prototype.bind = function(r) {
      t.prototype.bind.call(this, r), r.target = Tn.TEXTURE_2D_ARRAY;
    }, e.prototype.upload = function(r, i, s) {
      var o = this, h = o.length, l = o.itemDirtyIds, c = o.items, _ = r.gl;
      s.dirtyId < 0 && _.texImage3D(_.TEXTURE_2D_ARRAY, 0, s.internalFormat, this._width, this._height, h, 0, i.format, s.type, null);
      for (var y = 0; y < h; y++) {
        var w = c[y];
        l[y] < w.dirtyId && (l[y] = w.dirtyId, w.valid && _.texSubImage3D(
          _.TEXTURE_2D_ARRAY,
          0,
          0,
          // xoffset
          0,
          // yoffset
          y,
          // zoffset
          w.resource.width,
          w.resource.height,
          1,
          i.format,
          s.type,
          w.resource.source
        ));
      }
      return !0;
    }, e;
  }(sh)
), Ji = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      var i = this, s = r, o = s.naturalWidth || s.videoWidth || s.width, h = s.naturalHeight || s.videoHeight || s.height;
      return i = t.call(this, o, h) || this, i.source = r, i.noSubImage = !1, i;
    }
    return e.crossOrigin = function(r, i, s) {
      s === void 0 && i.indexOf("data:") !== 0 ? r.crossOrigin = Y_(i) : s !== !1 && (r.crossOrigin = typeof s == "string" ? s : "anonymous");
    }, e.prototype.upload = function(r, i, s, o) {
      var h = r.gl, l = i.realWidth, c = i.realHeight;
      if (o = o || this.source, o instanceof HTMLImageElement) {
        if (!o.complete || o.naturalWidth === 0)
          return !1;
      } else if (o instanceof HTMLVideoElement && o.readyState <= 1)
        return !1;
      return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === xi.UNPACK), !this.noSubImage && i.target === h.TEXTURE_2D && s.width === l && s.height === c ? h.texSubImage2D(h.TEXTURE_2D, 0, 0, 0, i.format, s.type, o) : (s.width = l, s.height = c, h.texImage2D(i.target, 0, s.internalFormat, i.format, s.type, o)), !0;
    }, e.prototype.update = function() {
      if (!this.destroyed) {
        var r = this.source, i = r.naturalWidth || r.videoWidth || r.width, s = r.naturalHeight || r.videoHeight || r.height;
        this.resize(i, s), t.prototype.update.call(this);
      }
    }, e.prototype.dispose = function() {
      this.source = null;
    }, e;
  }(os)
), Ru = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      return t.call(this, r) || this;
    }
    return e.test = function(r) {
      var i = globalThis.OffscreenCanvas;
      return i && r instanceof i ? !0 : globalThis.HTMLCanvasElement && r instanceof HTMLCanvasElement;
    }, e;
  }(Ji)
), Su = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this, o = i || {}, h = o.width, l = o.height, c = o.autoLoad, _ = o.linkBaseTexture;
      if (r && r.length !== e.SIDES)
        throw new Error("Invalid length. Got " + r.length + ", expected 6");
      s = t.call(this, 6, { width: h, height: l }) || this;
      for (var y = 0; y < e.SIDES; y++)
        s.items[y].target = Tn.TEXTURE_CUBE_MAP_POSITIVE_X + y;
      return s.linkBaseTexture = _ !== !1, r && s.initFromArray(r, i), c !== !1 && s.load(), s;
    }
    return e.prototype.bind = function(r) {
      t.prototype.bind.call(this, r), r.target = Tn.TEXTURE_CUBE_MAP;
    }, e.prototype.addBaseTextureAt = function(r, i, s) {
      if (!this.items[i])
        throw new Error("Index " + i + " is out of bounds");
      if (!this.linkBaseTexture || r.parentTextureArray || Object.keys(r._glTextures).length > 0)
        if (r.resource)
          this.addResourceAt(r.resource, i);
        else
          throw new Error("CubeResource does not support copying of renderTexture.");
      else
        r.target = Tn.TEXTURE_CUBE_MAP_POSITIVE_X + i, r.parentTextureArray = this.baseTexture, this.items[i] = r;
      return r.valid && !this.valid && this.resize(r.realWidth, r.realHeight), this.items[i] = r, this;
    }, e.prototype.upload = function(r, i, s) {
      for (var o = this.itemDirtyIds, h = 0; h < e.SIDES; h++) {
        var l = this.items[h];
        (o[h] < l.dirtyId || s.dirtyId < i.dirtyId) && (l.valid && l.resource ? (l.resource.upload(r, l, s), o[h] = l.dirtyId) : o[h] < -1 && (r.gl.texImage2D(l.target, 0, s.internalFormat, i.realWidth, i.realHeight, 0, i.format, s.type, null), o[h] = -1));
      }
      return !0;
    }, e.test = function(r) {
      return Array.isArray(r) && r.length === e.SIDES;
    }, e.SIDES = 6, e;
  }(sh)
), oh = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this;
      if (i = i || {}, !(r instanceof HTMLImageElement)) {
        var o = new Image();
        Ji.crossOrigin(o, r, i.crossorigin), o.src = r, r = o;
      }
      return s = t.call(this, r) || this, !r.complete && s._width && s._height && (s._width = 0, s._height = 0), s.url = r.src, s._process = null, s.preserveBitmap = !1, s.createBitmap = (i.createBitmap !== void 0 ? i.createBitmap : ee.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap, s.alphaMode = typeof i.alphaMode == "number" ? i.alphaMode : null, s.bitmap = null, s._load = null, i.autoLoad !== !1 && s.load(), s;
    }
    return e.prototype.load = function(r) {
      var i = this;
      return this._load ? this._load : (r !== void 0 && (this.createBitmap = r), this._load = new Promise(function(s, o) {
        var h = i.source;
        i.url = h.src;
        var l = function() {
          i.destroyed || (h.onload = null, h.onerror = null, i.resize(h.width, h.height), i._load = null, i.createBitmap ? s(i.process()) : s(i));
        };
        h.complete && h.src ? l() : (h.onload = l, h.onerror = function(c) {
          o(c), i.onError.emit(c);
        });
      }), this._load);
    }, e.prototype.process = function() {
      var r = this, i = this.source;
      if (this._process !== null)
        return this._process;
      if (this.bitmap !== null || !globalThis.createImageBitmap)
        return Promise.resolve(this);
      var s = globalThis.createImageBitmap, o = !i.crossOrigin || i.crossOrigin === "anonymous";
      return this._process = fetch(i.src, {
        mode: o ? "cors" : "no-cors"
      }).then(function(h) {
        return h.blob();
      }).then(function(h) {
        return s(h, 0, 0, i.width, i.height, {
          premultiplyAlpha: r.alphaMode === xi.UNPACK ? "premultiply" : "none"
        });
      }).then(function(h) {
        return r.destroyed ? Promise.reject() : (r.bitmap = h, r.update(), r._process = null, Promise.resolve(r));
      }), this._process;
    }, e.prototype.upload = function(r, i, s) {
      if (typeof this.alphaMode == "number" && (i.alphaMode = this.alphaMode), !this.createBitmap)
        return t.prototype.upload.call(this, r, i, s);
      if (!this.bitmap && (this.process(), !this.bitmap))
        return !1;
      if (t.prototype.upload.call(this, r, i, s, this.bitmap), !this.preserveBitmap) {
        var o = !0, h = i._glTextures;
        for (var l in h) {
          var c = h[l];
          if (c !== s && c.dirtyId !== i.dirtyId) {
            o = !1;
            break;
          }
        }
        o && (this.bitmap.close && this.bitmap.close(), this.bitmap = null);
      }
      return !0;
    }, e.prototype.dispose = function() {
      this.source.onload = null, this.source.onerror = null, t.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null;
    }, e.test = function(r) {
      return typeof r == "string" || r instanceof HTMLImageElement;
    }, e;
  }(Ji)
), Nu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this;
      return i = i || {}, s = t.call(this, ee.ADAPTER.createCanvas()) || this, s._width = 0, s._height = 0, s.svg = r, s.scale = i.scale || 1, s._overrideWidth = i.width, s._overrideHeight = i.height, s._resolve = null, s._crossorigin = i.crossorigin, s._load = null, i.autoLoad !== !1 && s.load(), s;
    }
    return e.prototype.load = function() {
      var r = this;
      return this._load ? this._load : (this._load = new Promise(function(i) {
        if (r._resolve = function() {
          r.resize(r.source.width, r.source.height), i(r);
        }, e.SVG_XML.test(r.svg.trim())) {
          if (!btoa)
            throw new Error("Your browser doesn't support base64 conversions.");
          r.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(r.svg)));
        }
        r._loadSvg();
      }), this._load);
    }, e.prototype._loadSvg = function() {
      var r = this, i = new Image();
      Ji.crossOrigin(i, this.svg, this._crossorigin), i.src = this.svg, i.onerror = function(s) {
        r._resolve && (i.onerror = null, r.onError.emit(s));
      }, i.onload = function() {
        if (r._resolve) {
          var s = i.width, o = i.height;
          if (!s || !o)
            throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
          var h = s * r.scale, l = o * r.scale;
          (r._overrideWidth || r._overrideHeight) && (h = r._overrideWidth || r._overrideHeight / o * s, l = r._overrideHeight || r._overrideWidth / s * o), h = Math.round(h), l = Math.round(l);
          var c = r.source;
          c.width = h, c.height = l, c._pixiId = "canvas_" + Pn(), c.getContext("2d").drawImage(i, 0, 0, s, o, 0, 0, h, l), r._resolve(), r._resolve = null;
        }
      };
    }, e.getSize = function(r) {
      var i = e.SVG_SIZE.exec(r), s = {};
      return i && (s[i[1]] = Math.round(parseFloat(i[3])), s[i[5]] = Math.round(parseFloat(i[7]))), s;
    }, e.prototype.dispose = function() {
      t.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null;
    }, e.test = function(r, i) {
      return i === "svg" || typeof r == "string" && /^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r) || typeof r == "string" && e.SVG_XML.test(r);
    }, e.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m, e.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, e;
  }(Ji)
), Lu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = this;
      if (i = i || {}, !(r instanceof HTMLVideoElement)) {
        var o = document.createElement("video");
        o.setAttribute("preload", "auto"), o.setAttribute("webkit-playsinline", ""), o.setAttribute("playsinline", ""), typeof r == "string" && (r = [r]);
        var h = r[0].src || r[0];
        Ji.crossOrigin(o, h, i.crossorigin);
        for (var l = 0; l < r.length; ++l) {
          var c = document.createElement("source"), _ = r[l], y = _.src, w = _.mime;
          y = y || r[l];
          var b = y.split("?").shift().toLowerCase(), E = b.slice(b.lastIndexOf(".") + 1);
          w = w || e.MIME_TYPES[E] || "video/" + E, c.src = y, c.type = w, o.appendChild(c);
        }
        r = o;
      }
      return s = t.call(this, r) || this, s.noSubImage = !0, s._autoUpdate = !0, s._isConnectedToTicker = !1, s._updateFPS = i.updateFPS || 0, s._msToNextUpdate = 0, s.autoPlay = i.autoPlay !== !1, s._load = null, s._resolve = null, s._onCanPlay = s._onCanPlay.bind(s), s._onError = s._onError.bind(s), i.autoLoad !== !1 && s.load(), s;
    }
    return e.prototype.update = function(r) {
      if (!this.destroyed) {
        var i = Hr.shared.elapsedMS * this.source.playbackRate;
        this._msToNextUpdate = Math.floor(this._msToNextUpdate - i), (!this._updateFPS || this._msToNextUpdate <= 0) && (t.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0);
      }
    }, e.prototype.load = function() {
      var r = this;
      if (this._load)
        return this._load;
      var i = this.source;
      return (i.readyState === i.HAVE_ENOUGH_DATA || i.readyState === i.HAVE_FUTURE_DATA) && i.width && i.height && (i.complete = !0), i.addEventListener("play", this._onPlayStart.bind(this)), i.addEventListener("pause", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (i.addEventListener("canplay", this._onCanPlay), i.addEventListener("canplaythrough", this._onCanPlay), i.addEventListener("error", this._onError, !0)), this._load = new Promise(function(s) {
        r.valid ? s(r) : (r._resolve = s, i.load());
      }), this._load;
    }, e.prototype._onError = function(r) {
      this.source.removeEventListener("error", this._onError, !0), this.onError.emit(r);
    }, e.prototype._isSourcePlaying = function() {
      var r = this.source;
      return r.currentTime > 0 && r.paused === !1 && r.ended === !1 && r.readyState > 2;
    }, e.prototype._isSourceReady = function() {
      var r = this.source;
      return r.readyState === 3 || r.readyState === 4;
    }, e.prototype._onPlayStart = function() {
      this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (Hr.shared.add(this.update, this), this._isConnectedToTicker = !0);
    }, e.prototype._onPlayStop = function() {
      this._isConnectedToTicker && (Hr.shared.remove(this.update, this), this._isConnectedToTicker = !1);
    }, e.prototype._onCanPlay = function() {
      var r = this.source;
      r.removeEventListener("canplay", this._onCanPlay), r.removeEventListener("canplaythrough", this._onCanPlay);
      var i = this.valid;
      this.resize(r.videoWidth, r.videoHeight), !i && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && r.play();
    }, e.prototype.dispose = function() {
      this._isConnectedToTicker && (Hr.shared.remove(this.update, this), this._isConnectedToTicker = !1);
      var r = this.source;
      r && (r.removeEventListener("error", this._onError, !0), r.pause(), r.src = "", r.load()), t.prototype.dispose.call(this);
    }, Object.defineProperty(e.prototype, "autoUpdate", {
      /** Should the base texture automatically update itself, set to true by default. */
      get: function() {
        return this._autoUpdate;
      },
      set: function(r) {
        r !== this._autoUpdate && (this._autoUpdate = r, !this._autoUpdate && this._isConnectedToTicker ? (Hr.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (Hr.shared.add(this.update, this), this._isConnectedToTicker = !0));
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "updateFPS", {
      /**
       * How many times a second to update the texture from the video. Leave at 0 to update at every render.
       * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.
       */
      get: function() {
        return this._updateFPS;
      },
      set: function(r) {
        r !== this._updateFPS && (this._updateFPS = r);
      },
      enumerable: !1,
      configurable: !0
    }), e.test = function(r, i) {
      return globalThis.HTMLVideoElement && r instanceof HTMLVideoElement || e.TYPES.indexOf(i) > -1;
    }, e.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"], e.MIME_TYPES = {
      ogv: "video/ogg",
      mov: "video/quicktime",
      m4v: "video/mp4"
    }, e;
  }(Ji)
), Ou = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      return t.call(this, r) || this;
    }
    return e.test = function(r) {
      return !!globalThis.createImageBitmap && typeof ImageBitmap != "undefined" && r instanceof ImageBitmap;
    }, e;
  }(Ji)
);
Uo.push(oh, Ou, Ru, Lu, Nu, ls, Su, $u);
var rp = {
  __proto__: null,
  Resource: os,
  BaseImageResource: Ji,
  INSTALLED: Uo,
  autoDetectResource: nh,
  AbstractMultiResource: sh,
  ArrayResource: $u,
  BufferResource: ls,
  CanvasResource: Ru,
  CubeResource: Su,
  ImageResource: oh,
  SVGResource: Nu,
  VideoResource: Lu,
  ImageBitmapResource: Ou
}, Ty = (
  /** @class */
  function(t) {
    yr(e, t);
    function e() {
      return t !== null && t.apply(this, arguments) || this;
    }
    return e.prototype.upload = function(r, i, s) {
      var o = r.gl;
      o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.alphaMode === xi.UNPACK);
      var h = i.realWidth, l = i.realHeight;
      return s.width === h && s.height === l ? o.texSubImage2D(i.target, 0, 0, 0, h, l, i.format, s.type, this.data) : (s.width = h, s.height = l, o.texImage2D(i.target, 0, s.internalFormat, h, l, 0, i.format, s.type, this.data)), !0;
    }, e;
  }(ls)
), Xa = (
  /** @class */
  function() {
    function t(e, r) {
      this.width = Math.round(e || 100), this.height = Math.round(r || 100), this.stencil = !1, this.depth = !1, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new jr("disposeFramebuffer"), this.multisample = Mr.NONE;
    }
    return Object.defineProperty(t.prototype, "colorTexture", {
      /**
       * Reference to the colorTexture.
       * @readonly
       */
      get: function() {
        return this.colorTextures[0];
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.addColorTexture = function(e, r) {
      return e === void 0 && (e = 0), this.colorTextures[e] = r || new We(null, {
        scaleMode: zi.NEAREST,
        resolution: 1,
        mipmap: qi.OFF,
        width: this.width,
        height: this.height
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, t.prototype.addDepthTexture = function(e) {
      return this.depthTexture = e || new We(new Ty(null, { width: this.width, height: this.height }), {
        scaleMode: zi.NEAREST,
        resolution: 1,
        width: this.width,
        height: this.height,
        mipmap: qi.OFF,
        format: Ht.DEPTH_COMPONENT,
        type: xe.UNSIGNED_SHORT
      }), this.dirtyId++, this.dirtyFormat++, this;
    }, t.prototype.enableDepth = function() {
      return this.depth = !0, this.dirtyId++, this.dirtyFormat++, this;
    }, t.prototype.enableStencil = function() {
      return this.stencil = !0, this.dirtyId++, this.dirtyFormat++, this;
    }, t.prototype.resize = function(e, r) {
      if (e = Math.round(e), r = Math.round(r), !(e === this.width && r === this.height)) {
        this.width = e, this.height = r, this.dirtyId++, this.dirtySize++;
        for (var i = 0; i < this.colorTextures.length; i++) {
          var s = this.colorTextures[i], o = s.resolution;
          s.setSize(e / o, r / o);
        }
        if (this.depthTexture) {
          var o = this.depthTexture.resolution;
          this.depthTexture.setSize(e / o, r / o);
        }
      }
    }, t.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, t.prototype.destroyDepthTexture = function() {
      this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat);
    }, t;
  }()
), Fu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      r === void 0 && (r = {});
      var i = this;
      if (typeof r == "number") {
        var s = arguments[0], o = arguments[1], h = arguments[2], l = arguments[3];
        r = { width: s, height: o, scaleMode: h, resolution: l };
      }
      return r.width = r.width || 100, r.height = r.height || 100, r.multisample = r.multisample !== void 0 ? r.multisample : Mr.NONE, i = t.call(this, null, r) || this, i.mipmap = qi.OFF, i.valid = !0, i.clearColor = [0, 0, 0, 0], i.framebuffer = new Xa(i.realWidth, i.realHeight).addColorTexture(0, i), i.framebuffer.multisample = r.multisample, i.maskStack = [], i.filterStack = [{}], i;
    }
    return e.prototype.resize = function(r, i) {
      this.framebuffer.resize(r * this.resolution, i * this.resolution), this.setRealSize(this.framebuffer.width, this.framebuffer.height);
    }, e.prototype.dispose = function() {
      this.framebuffer.dispose(), t.prototype.dispose.call(this);
    }, e.prototype.destroy = function() {
      t.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null;
    }, e;
  }(We)
), Mu = (
  /** @class */
  function() {
    function t() {
      this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8);
    }
    return t.prototype.set = function(e, r, i) {
      var s = r.width, o = r.height;
      if (i) {
        var h = e.width / 2 / s, l = e.height / 2 / o, c = e.x / s + h, _ = e.y / o + l;
        i = Ar.add(i, Ar.NW), this.x0 = c + h * Ar.uX(i), this.y0 = _ + l * Ar.uY(i), i = Ar.add(i, 2), this.x1 = c + h * Ar.uX(i), this.y1 = _ + l * Ar.uY(i), i = Ar.add(i, 2), this.x2 = c + h * Ar.uX(i), this.y2 = _ + l * Ar.uY(i), i = Ar.add(i, 2), this.x3 = c + h * Ar.uX(i), this.y3 = _ + l * Ar.uY(i);
      } else
        this.x0 = e.x / s, this.y0 = e.y / o, this.x1 = (e.x + e.width) / s, this.y1 = e.y / o, this.x2 = (e.x + e.width) / s, this.y2 = (e.y + e.height) / o, this.x3 = e.x / s, this.y3 = (e.y + e.height) / o;
      this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3;
    }, t.prototype.toString = function() {
      return "[@pixi/core:TextureUvs " + ("x0=" + this.x0 + " y0=" + this.y0 + " ") + ("x1=" + this.x1 + " y1=" + this.y1 + " x2=" + this.x2 + " ") + ("y2=" + this.y2 + " x3=" + this.x3 + " y3=" + this.y3) + "]";
    }, t;
  }()
), Gf = new Mu();
function da(t) {
  t.destroy = function() {
  }, t.on = function() {
  }, t.once = function() {
  }, t.emit = function() {
  };
}
var Me = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i, s, o, h, l) {
      var c = t.call(this) || this;
      if (c.noFrame = !1, i || (c.noFrame = !0, i = new Ye(0, 0, 1, 1)), r instanceof e && (r = r.baseTexture), c.baseTexture = r, c._frame = i, c.trim = o, c.valid = !1, c._uvs = Gf, c.uvMatrix = null, c.orig = s || i, c._rotate = Number(h || 0), h === !0)
        c._rotate = 2;
      else if (c._rotate % 2 !== 0)
        throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
      return c.defaultAnchor = l ? new _r(l.x, l.y) : new _r(0, 0), c._updateID = 0, c.textureCacheIds = [], r.valid ? c.noFrame ? r.valid && c.onBaseTextureUpdated(r) : c.frame = i : r.once("loaded", c.onBaseTextureUpdated, c), c.noFrame && r.on("update", c.onBaseTextureUpdated, c), c;
    }
    return e.prototype.update = function() {
      this.baseTexture.resource && this.baseTexture.resource.update();
    }, e.prototype.onBaseTextureUpdated = function(r) {
      if (this.noFrame) {
        if (!this.baseTexture.valid)
          return;
        this._frame.width = r.width, this._frame.height = r.height, this.valid = !0, this.updateUvs();
      } else
        this.frame = this._frame;
      this.emit("update", this);
    }, e.prototype.destroy = function(r) {
      if (this.baseTexture) {
        if (r) {
          var i = this.baseTexture.resource;
          i && i.url && oi[i.url] && e.removeFromCache(i.url), this.baseTexture.destroy();
        }
        this.baseTexture.off("loaded", this.onBaseTextureUpdated, this), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture = null;
      }
      this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, e.removeFromCache(this), this.textureCacheIds = null;
    }, e.prototype.clone = function() {
      var r = this._frame.clone(), i = this._frame === this.orig ? r : this.orig.clone(), s = new e(this.baseTexture, !this.noFrame && r, i, this.trim && this.trim.clone(), this.rotate, this.defaultAnchor);
      return this.noFrame && (s._frame = r), s;
    }, e.prototype.updateUvs = function() {
      this._uvs === Gf && (this._uvs = new Mu()), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++;
    }, e.from = function(r, i, s) {
      i === void 0 && (i = {}), s === void 0 && (s = ee.STRICT_TEXTURE_CACHE);
      var o = typeof r == "string", h = null;
      if (o)
        h = r;
      else if (r instanceof We) {
        if (!r.cacheId) {
          var l = i && i.pixiIdPrefix || "pixiid";
          r.cacheId = l + "-" + Pn(), We.addToCache(r, r.cacheId);
        }
        h = r.cacheId;
      } else {
        if (!r._pixiId) {
          var l = i && i.pixiIdPrefix || "pixiid";
          r._pixiId = l + "_" + Pn();
        }
        h = r._pixiId;
      }
      var c = oi[h];
      if (o && s && !c)
        throw new Error('The cacheId "' + h + '" does not exist in TextureCache.');
      return !c && !(r instanceof We) ? (i.resolution || (i.resolution = Oo(r)), c = new e(new We(r, i)), c.baseTexture.cacheId = h, We.addToCache(c.baseTexture, h), e.addToCache(c, h)) : !c && r instanceof We && (c = new e(r), e.addToCache(c, h)), c;
    }, e.fromURL = function(r, i) {
      var s = Object.assign({ autoLoad: !1 }, i == null ? void 0 : i.resourceOptions), o = e.from(r, Object.assign({ resourceOptions: s }, i), !1), h = o.baseTexture.resource;
      return o.baseTexture.valid ? Promise.resolve(o) : h.load().then(function() {
        return Promise.resolve(o);
      });
    }, e.fromBuffer = function(r, i, s, o) {
      return new e(We.fromBuffer(r, i, s, o));
    }, e.fromLoader = function(r, i, s, o) {
      var h = new We(r, Object.assign({
        scaleMode: ee.SCALE_MODE,
        resolution: Oo(i)
      }, o)), l = h.resource;
      l instanceof oh && (l.url = i);
      var c = new e(h);
      return s || (s = i), We.addToCache(c.baseTexture, s), e.addToCache(c, s), s !== i && (We.addToCache(c.baseTexture, i), e.addToCache(c, i)), c.baseTexture.valid ? Promise.resolve(c) : new Promise(function(_) {
        c.baseTexture.once("loaded", function() {
          return _(c);
        });
      });
    }, e.addToCache = function(r, i) {
      i && (r.textureCacheIds.indexOf(i) === -1 && r.textureCacheIds.push(i), oi[i] && console.warn("Texture added to the cache with an id [" + i + "] that already had an entry"), oi[i] = r);
    }, e.removeFromCache = function(r) {
      if (typeof r == "string") {
        var i = oi[r];
        if (i) {
          var s = i.textureCacheIds.indexOf(r);
          return s > -1 && i.textureCacheIds.splice(s, 1), delete oi[r], i;
        }
      } else if (r && r.textureCacheIds) {
        for (var o = 0; o < r.textureCacheIds.length; ++o)
          oi[r.textureCacheIds[o]] === r && delete oi[r.textureCacheIds[o]];
        return r.textureCacheIds.length = 0, r;
      }
      return null;
    }, Object.defineProperty(e.prototype, "resolution", {
      /**
       * Returns resolution of baseTexture
       * @readonly
       */
      get: function() {
        return this.baseTexture.resolution;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "frame", {
      /**
       * The frame specifies the region of the base texture that this texture uses.
       * Please call `updateUvs()` after you change coordinates of `frame` manually.
       */
      get: function() {
        return this._frame;
      },
      set: function(r) {
        this._frame = r, this.noFrame = !1;
        var i = r.x, s = r.y, o = r.width, h = r.height, l = i + o > this.baseTexture.width, c = s + h > this.baseTexture.height;
        if (l || c) {
          var _ = l && c ? "and" : "or", y = "X: " + i + " + " + o + " = " + (i + o) + " > " + this.baseTexture.width, w = "Y: " + s + " + " + h + " = " + (s + h) + " > " + this.baseTexture.height;
          throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + (y + " " + _ + " " + w));
        }
        this.valid = o && h && this.baseTexture.valid, !this.trim && !this.rotate && (this.orig = r), this.valid && this.updateUvs();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "rotate", {
      /**
       * Indicates whether the texture is rotated inside the atlas
       * set to 2 to compensate for texture packer rotation
       * set to 6 to compensate for spine packer rotation
       * can be used to rotate or mirror sprites
       * See {@link PIXI.groupD8} for explanation
       */
      get: function() {
        return this._rotate;
      },
      set: function(r) {
        this._rotate = r, this.valid && this.updateUvs();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      /** The width of the Texture in pixels. */
      get: function() {
        return this.orig.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the Texture in pixels. */
      get: function() {
        return this.orig.height;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.castToBaseTexture = function() {
      return this.baseTexture;
    }, Object.defineProperty(e, "EMPTY", {
      /** An empty texture, used often to not have to create multiple empty textures. Can not be destroyed. */
      get: function() {
        return e._EMPTY || (e._EMPTY = new e(new We()), da(e._EMPTY), da(e._EMPTY.baseTexture)), e._EMPTY;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e, "WHITE", {
      /** A white texture of 16x16 size, used for graphics and other things Can not be destroyed. */
      get: function() {
        if (!e._WHITE) {
          var r = ee.ADAPTER.createCanvas(16, 16), i = r.getContext("2d");
          r.width = 16, r.height = 16, i.fillStyle = "white", i.fillRect(0, 0, 16, 16), e._WHITE = new e(We.from(r)), da(e._WHITE), da(e._WHITE.baseTexture);
        }
        return e._WHITE;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Oi)
), En = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      var s = t.call(this, r, i) || this;
      return s.valid = !0, s.filterFrame = null, s.filterPoolKey = null, s.updateUvs(), s;
    }
    return Object.defineProperty(e.prototype, "framebuffer", {
      /**
       * Shortcut to `this.baseTexture.framebuffer`, saves baseTexture cast.
       * @readonly
       */
      get: function() {
        return this.baseTexture.framebuffer;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "multisample", {
      /**
       * Shortcut to `this.framebuffer.multisample`.
       * @default PIXI.MSAA_QUALITY.NONE
       */
      get: function() {
        return this.framebuffer.multisample;
      },
      set: function(r) {
        this.framebuffer.multisample = r;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.resize = function(r, i, s) {
      s === void 0 && (s = !0);
      var o = this.baseTexture.resolution, h = Math.round(r * o) / o, l = Math.round(i * o) / o;
      this.valid = h > 0 && l > 0, this._frame.width = this.orig.width = h, this._frame.height = this.orig.height = l, s && this.baseTexture.resize(h, l), this.updateUvs();
    }, e.prototype.setResolution = function(r) {
      var i = this.baseTexture;
      i.resolution !== r && (i.setResolution(r), this.resize(i.width, i.height, !1));
    }, e.create = function(r) {
      for (var i = arguments, s = [], o = 1; o < arguments.length; o++)
        s[o - 1] = i[o];
      return typeof r == "number" && (ai("6.0.0", "Arguments (width, height, scaleMode, resolution) have been deprecated."), r = {
        width: r,
        height: s[0],
        scaleMode: s[1],
        resolution: s[2]
      }), new e(new Fu(r));
    }, e;
  }(Me)
), ip = (
  /** @class */
  function() {
    function t(e) {
      this.texturePool = {}, this.textureOptions = e || {}, this.enableFullScreen = !1, this._pixelsWidth = 0, this._pixelsHeight = 0;
    }
    return t.prototype.createTexture = function(e, r, i) {
      i === void 0 && (i = Mr.NONE);
      var s = new Fu(Object.assign({
        width: e,
        height: r,
        resolution: 1,
        multisample: i
      }, this.textureOptions));
      return new En(s);
    }, t.prototype.getOptimalTexture = function(e, r, i, s) {
      i === void 0 && (i = 1), s === void 0 && (s = Mr.NONE);
      var o;
      e = Math.ceil(e * i - 1e-6), r = Math.ceil(r * i - 1e-6), !this.enableFullScreen || e !== this._pixelsWidth || r !== this._pixelsHeight ? (e = Lo(e), r = Lo(r), o = ((e & 65535) << 16 | r & 65535) >>> 0, s > 1 && (o += s * 4294967296)) : o = s > 1 ? -s : -1, this.texturePool[o] || (this.texturePool[o] = []);
      var h = this.texturePool[o].pop();
      return h || (h = this.createTexture(e, r, s)), h.filterPoolKey = o, h.setResolution(i), h;
    }, t.prototype.getFilterTexture = function(e, r, i) {
      var s = this.getOptimalTexture(e.width, e.height, r || e.resolution, i || Mr.NONE);
      return s.filterFrame = e.filterFrame, s;
    }, t.prototype.returnTexture = function(e) {
      var r = e.filterPoolKey;
      e.filterFrame = null, this.texturePool[r].push(e);
    }, t.prototype.returnFilterTexture = function(e) {
      this.returnTexture(e);
    }, t.prototype.clear = function(e) {
      if (e = e !== !1, e)
        for (var r in this.texturePool) {
          var i = this.texturePool[r];
          if (i)
            for (var s = 0; s < i.length; s++)
              i[s].destroy(!0);
        }
      this.texturePool = {};
    }, t.prototype.setScreenSize = function(e) {
      if (!(e.width === this._pixelsWidth && e.height === this._pixelsHeight)) {
        this.enableFullScreen = e.width > 0 && e.height > 0;
        for (var r in this.texturePool)
          if (Number(r) < 0) {
            var i = this.texturePool[r];
            if (i)
              for (var s = 0; s < i.length; s++)
                i[s].destroy(!0);
            this.texturePool[r] = [];
          }
        this._pixelsWidth = e.width, this._pixelsHeight = e.height;
      }
    }, t.SCREEN_KEY = -1, t;
  }()
), $l = (
  /** @class */
  function() {
    function t(e, r, i, s, o, h, l) {
      r === void 0 && (r = 0), i === void 0 && (i = !1), s === void 0 && (s = xe.FLOAT), this.buffer = e, this.size = r, this.normalized = i, this.type = s, this.stride = o, this.start = h, this.instance = l;
    }
    return t.prototype.destroy = function() {
      this.buffer = null;
    }, t.from = function(e, r, i, s, o) {
      return new t(e, r, i, s, o);
    }, t;
  }()
), Ay = 0, Br = (
  /** @class */
  function() {
    function t(e, r, i) {
      r === void 0 && (r = !0), i === void 0 && (i = !1), this.data = e || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = i, this.static = r, this.id = Ay++, this.disposeRunner = new jr("disposeBuffer");
    }
    return t.prototype.update = function(e) {
      e instanceof Array && (e = new Float32Array(e)), this.data = e || this.data, this._updateID++;
    }, t.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, t.prototype.destroy = function() {
      this.dispose(), this.data = null;
    }, Object.defineProperty(t.prototype, "index", {
      get: function() {
        return this.type === Li.ELEMENT_ARRAY_BUFFER;
      },
      /**
       * Flags whether this is an index buffer.
       *
       * Index buffers are of type `ELEMENT_ARRAY_BUFFER`. Note that setting this property to false will make
       * the buffer of type `ARRAY_BUFFER`.
       *
       * For backwards compatibility.
       */
      set: function(e) {
        this.type = e ? Li.ELEMENT_ARRAY_BUFFER : Li.ARRAY_BUFFER;
      },
      enumerable: !1,
      configurable: !0
    }), t.from = function(e) {
      return e instanceof Array && (e = new Float32Array(e)), new t(e);
    }, t;
  }()
), wy = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array
};
function Py(t, e) {
  for (var r = 0, i = 0, s = {}, o = 0; o < t.length; o++)
    i += e[o], r += t[o].length;
  for (var h = new ArrayBuffer(r * 4), l = null, c = 0, o = 0; o < t.length; o++) {
    var _ = e[o], y = t[o], w = rh(y);
    s[w] || (s[w] = new wy[w](h)), l = s[w];
    for (var b = 0; b < y.length; b++) {
      var E = (b / _ | 0) * i + c, T = b % _;
      l[E + T] = y[b];
    }
    c += _;
  }
  return new Float32Array(h);
}
var Df = { 5126: 4, 5123: 2, 5121: 1 }, Ey = 0, Iy = {
  Float32Array,
  Uint32Array,
  Int32Array,
  Uint8Array,
  Uint16Array
}, Gs = (
  /** @class */
  function() {
    function t(e, r) {
      e === void 0 && (e = []), r === void 0 && (r = {}), this.buffers = e, this.indexBuffer = null, this.attributes = r, this.glVertexArrayObjects = {}, this.id = Ey++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new jr("disposeGeometry"), this.refCount = 0;
    }
    return t.prototype.addAttribute = function(e, r, i, s, o, h, l, c) {
      if (i === void 0 && (i = 0), s === void 0 && (s = !1), c === void 0 && (c = !1), !r)
        throw new Error("You must pass a buffer when creating an attribute");
      r instanceof Br || (r instanceof Array && (r = new Float32Array(r)), r = new Br(r));
      var _ = e.split("|");
      if (_.length > 1) {
        for (var y = 0; y < _.length; y++)
          this.addAttribute(_[y], r, i, s, o);
        return this;
      }
      var w = this.buffers.indexOf(r);
      return w === -1 && (this.buffers.push(r), w = this.buffers.length - 1), this.attributes[e] = new $l(w, i, s, o, h, l, c), this.instanced = this.instanced || c, this;
    }, t.prototype.getAttribute = function(e) {
      return this.attributes[e];
    }, t.prototype.getBuffer = function(e) {
      return this.buffers[this.getAttribute(e).buffer];
    }, t.prototype.addIndex = function(e) {
      return e instanceof Br || (e instanceof Array && (e = new Uint16Array(e)), e = new Br(e)), e.type = Li.ELEMENT_ARRAY_BUFFER, this.indexBuffer = e, this.buffers.indexOf(e) === -1 && this.buffers.push(e), this;
    }, t.prototype.getIndex = function() {
      return this.indexBuffer;
    }, t.prototype.interleave = function() {
      if (this.buffers.length === 1 || this.buffers.length === 2 && this.indexBuffer)
        return this;
      var e = [], r = [], i = new Br(), s;
      for (s in this.attributes) {
        var o = this.attributes[s], h = this.buffers[o.buffer];
        e.push(h.data), r.push(o.size * Df[o.type] / 4), o.buffer = 0;
      }
      for (i.data = Py(e, r), s = 0; s < this.buffers.length; s++)
        this.buffers[s] !== this.indexBuffer && this.buffers[s].destroy();
      return this.buffers = [i], this.indexBuffer && this.buffers.push(this.indexBuffer), this;
    }, t.prototype.getSize = function() {
      for (var e in this.attributes) {
        var r = this.attributes[e], i = this.buffers[r.buffer];
        return i.data.length / (r.stride / 4 || r.size);
      }
      return 0;
    }, t.prototype.dispose = function() {
      this.disposeRunner.emit(this, !1);
    }, t.prototype.destroy = function() {
      this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null;
    }, t.prototype.clone = function() {
      for (var e = new t(), r = 0; r < this.buffers.length; r++)
        e.buffers[r] = new Br(this.buffers[r].data.slice(0));
      for (var r in this.attributes) {
        var i = this.attributes[r];
        e.attributes[r] = new $l(i.buffer, i.size, i.normalized, i.type, i.stride, i.start, i.instance);
      }
      return this.indexBuffer && (e.indexBuffer = e.buffers[this.buffers.indexOf(this.indexBuffer)], e.indexBuffer.type = Li.ELEMENT_ARRAY_BUFFER), e;
    }, t.merge = function(e) {
      for (var r = new t(), i = [], s = [], o = [], h, l = 0; l < e.length; l++) {
        h = e[l];
        for (var c = 0; c < h.buffers.length; c++)
          s[c] = s[c] || 0, s[c] += h.buffers[c].data.length, o[c] = 0;
      }
      for (var l = 0; l < h.buffers.length; l++)
        i[l] = new Iy[rh(h.buffers[l].data)](s[l]), r.buffers[l] = new Br(i[l]);
      for (var l = 0; l < e.length; l++) {
        h = e[l];
        for (var c = 0; c < h.buffers.length; c++)
          i[c].set(h.buffers[c].data, o[c]), o[c] += h.buffers[c].data.length;
      }
      if (r.attributes = h.attributes, h.indexBuffer) {
        r.indexBuffer = r.buffers[h.buffers.indexOf(h.indexBuffer)], r.indexBuffer.type = Li.ELEMENT_ARRAY_BUFFER;
        for (var _ = 0, y = 0, w = 0, b = 0, l = 0; l < h.buffers.length; l++)
          if (h.buffers[l] !== h.indexBuffer) {
            b = l;
            break;
          }
        for (var l in h.attributes) {
          var E = h.attributes[l];
          (E.buffer | 0) === b && (y += E.size * Df[E.type] / 4);
        }
        for (var l = 0; l < e.length; l++) {
          for (var T = e[l].indexBuffer.data, c = 0; c < T.length; c++)
            r.indexBuffer.data[c + w] += _;
          _ += e[l].buffers[b].data.length / y, w += T.length;
        }
      }
      return r;
    }, t;
  }()
), np = (
  /** @class */
  function(t) {
    yr(e, t);
    function e() {
      var r = t.call(this) || this;
      return r.addAttribute("aVertexPosition", new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ])).addIndex([0, 1, 3, 2]), r;
    }
    return e;
  }(Gs)
), Uu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e() {
      var r = t.call(this) || this;
      return r.vertices = new Float32Array([
        -1,
        -1,
        1,
        -1,
        1,
        1,
        -1,
        1
      ]), r.uvs = new Float32Array([
        0,
        0,
        1,
        0,
        1,
        1,
        0,
        1
      ]), r.vertexBuffer = new Br(r.vertices), r.uvBuffer = new Br(r.uvs), r.addAttribute("aVertexPosition", r.vertexBuffer).addAttribute("aTextureCoord", r.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), r;
    }
    return e.prototype.map = function(r, i) {
      var s = 0, o = 0;
      return this.uvs[0] = s, this.uvs[1] = o, this.uvs[2] = s + i.width / r.width, this.uvs[3] = o, this.uvs[4] = s + i.width / r.width, this.uvs[5] = o + i.height / r.height, this.uvs[6] = s, this.uvs[7] = o + i.height / r.height, s = i.x, o = i.y, this.vertices[0] = s, this.vertices[1] = o, this.vertices[2] = s + i.width, this.vertices[3] = o, this.vertices[4] = s + i.width, this.vertices[5] = o + i.height, this.vertices[6] = s, this.vertices[7] = o + i.height, this.invalidate(), this;
    }, e.prototype.invalidate = function() {
      return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this;
    }, e;
  }(Gs)
), Cy = 0, An = (
  /** @class */
  function() {
    function t(e, r, i) {
      this.group = !0, this.syncUniforms = {}, this.dirtyId = 0, this.id = Cy++, this.static = !!r, this.ubo = !!i, e instanceof Br ? (this.buffer = e, this.buffer.type = Li.UNIFORM_BUFFER, this.autoManage = !1, this.ubo = !0) : (this.uniforms = e, this.ubo && (this.buffer = new Br(new Float32Array(1)), this.buffer.type = Li.UNIFORM_BUFFER, this.autoManage = !0));
    }
    return t.prototype.update = function() {
      this.dirtyId++, !this.autoManage && this.buffer && this.buffer.update();
    }, t.prototype.add = function(e, r, i) {
      if (!this.ubo)
        this.uniforms[e] = new t(r, i);
      else
        throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");
    }, t.from = function(e, r, i) {
      return new t(e, r, i);
    }, t.uboFrom = function(e, r) {
      return new t(e, r != null ? r : !0, !0);
    }, t;
  }()
), sp = (
  /** @class */
  function() {
    function t() {
      this.renderTexture = null, this.target = null, this.legacy = !1, this.resolution = 1, this.multisample = Mr.NONE, this.sourceFrame = new Ye(), this.destinationFrame = new Ye(), this.bindingSourceFrame = new Ye(), this.bindingDestinationFrame = new Ye(), this.filters = [], this.transform = null;
    }
    return t.prototype.clear = function() {
      this.target = null, this.filters = null, this.renderTexture = null;
    }, t;
  }()
), _a = [new _r(), new _r(), new _r(), new _r()], Eh = new wr(), Gu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.defaultFilterStack = [{}], this.texturePool = new ip(), this.texturePool.setScreenSize(e.view), this.statePool = [], this.quad = new np(), this.quadUv = new Uu(), this.tempRect = new Ye(), this.activeState = {}, this.globalUniforms = new An({
        outputFrame: new Ye(),
        inputSize: new Float32Array(4),
        inputPixel: new Float32Array(4),
        inputClamp: new Float32Array(4),
        resolution: 1,
        // legacy variables
        filterArea: new Float32Array(4),
        filterClamp: new Float32Array(4)
      }, !0), this.forceClear = !1, this.useMaxPadding = !1;
    }
    return t.prototype.push = function(e, r) {
      for (var i, s, o = this.renderer, h = this.defaultFilterStack, l = this.statePool.pop() || new sp(), c = this.renderer.renderTexture, _ = r[0].resolution, y = r[0].multisample, w = r[0].padding, b = r[0].autoFit, E = (i = r[0].legacy) !== null && i !== void 0 ? i : !0, T = 1; T < r.length; T++) {
        var P = r[T];
        _ = Math.min(_, P.resolution), y = Math.min(y, P.multisample), w = this.useMaxPadding ? Math.max(w, P.padding) : w + P.padding, b = b && P.autoFit, E = E || ((s = P.legacy) !== null && s !== void 0 ? s : !0);
      }
      h.length === 1 && (this.defaultFilterStack[0].renderTexture = c.current), h.push(l), l.resolution = _, l.multisample = y, l.legacy = E, l.target = e, l.sourceFrame.copyFrom(e.filterArea || e.getBounds(!0)), l.sourceFrame.pad(w);
      var O = this.tempRect.copyFrom(c.sourceFrame);
      o.projection.transform && this.transformAABB(Eh.copyFrom(o.projection.transform).invert(), O), b ? (l.sourceFrame.fit(O), (l.sourceFrame.width <= 0 || l.sourceFrame.height <= 0) && (l.sourceFrame.width = 0, l.sourceFrame.height = 0)) : l.sourceFrame.intersects(O) || (l.sourceFrame.width = 0, l.sourceFrame.height = 0), this.roundFrame(l.sourceFrame, c.current ? c.current.resolution : o.resolution, c.sourceFrame, c.destinationFrame, o.projection.transform), l.renderTexture = this.getOptimalFilterTexture(l.sourceFrame.width, l.sourceFrame.height, _, y), l.filters = r, l.destinationFrame.width = l.renderTexture.width, l.destinationFrame.height = l.renderTexture.height;
      var H = this.tempRect;
      H.x = 0, H.y = 0, H.width = l.sourceFrame.width, H.height = l.sourceFrame.height, l.renderTexture.filterFrame = l.sourceFrame, l.bindingSourceFrame.copyFrom(c.sourceFrame), l.bindingDestinationFrame.copyFrom(c.destinationFrame), l.transform = o.projection.transform, o.projection.transform = null, c.bind(l.renderTexture, l.sourceFrame, H), o.framebuffer.clear(0, 0, 0, 0);
    }, t.prototype.pop = function() {
      var e = this.defaultFilterStack, r = e.pop(), i = r.filters;
      this.activeState = r;
      var s = this.globalUniforms.uniforms;
      s.outputFrame = r.sourceFrame, s.resolution = r.resolution;
      var o = s.inputSize, h = s.inputPixel, l = s.inputClamp;
      if (o[0] = r.destinationFrame.width, o[1] = r.destinationFrame.height, o[2] = 1 / o[0], o[3] = 1 / o[1], h[0] = Math.round(o[0] * r.resolution), h[1] = Math.round(o[1] * r.resolution), h[2] = 1 / h[0], h[3] = 1 / h[1], l[0] = 0.5 * h[2], l[1] = 0.5 * h[3], l[2] = r.sourceFrame.width * o[2] - 0.5 * h[2], l[3] = r.sourceFrame.height * o[3] - 0.5 * h[3], r.legacy) {
        var c = s.filterArea;
        c[0] = r.destinationFrame.width, c[1] = r.destinationFrame.height, c[2] = r.sourceFrame.x, c[3] = r.sourceFrame.y, s.filterClamp = s.inputClamp;
      }
      this.globalUniforms.update();
      var _ = e[e.length - 1];
      if (this.renderer.framebuffer.blit(), i.length === 1)
        i[0].apply(this, r.renderTexture, _.renderTexture, hn.BLEND, r), this.returnFilterTexture(r.renderTexture);
      else {
        var y = r.renderTexture, w = this.getOptimalFilterTexture(y.width, y.height, r.resolution);
        w.filterFrame = y.filterFrame;
        var b = 0;
        for (b = 0; b < i.length - 1; ++b) {
          b === 1 && r.multisample > 1 && (w = this.getOptimalFilterTexture(y.width, y.height, r.resolution), w.filterFrame = y.filterFrame), i[b].apply(this, y, w, hn.CLEAR, r);
          var E = y;
          y = w, w = E;
        }
        i[b].apply(this, y, _.renderTexture, hn.BLEND, r), b > 1 && r.multisample > 1 && this.returnFilterTexture(r.renderTexture), this.returnFilterTexture(y), this.returnFilterTexture(w);
      }
      r.clear(), this.statePool.push(r);
    }, t.prototype.bindAndClear = function(e, r) {
      r === void 0 && (r = hn.CLEAR);
      var i = this.renderer, s = i.renderTexture, o = i.state;
      if (e === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null, e && e.filterFrame) {
        var h = this.tempRect;
        h.x = 0, h.y = 0, h.width = e.filterFrame.width, h.height = e.filterFrame.height, s.bind(e, e.filterFrame, h);
      } else
        e !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? s.bind(e) : this.renderer.renderTexture.bind(e, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);
      var l = o.stateId & 1 || this.forceClear;
      (r === hn.CLEAR || r === hn.BLIT && l) && this.renderer.framebuffer.clear(0, 0, 0, 0);
    }, t.prototype.applyFilter = function(e, r, i, s) {
      var o = this.renderer;
      o.state.set(e.state), this.bindAndClear(i, s), e.uniforms.uSampler = r, e.uniforms.filterGlobals = this.globalUniforms, o.shader.bind(e), e.legacy = !!e.program.attributeData.aTextureCoord, e.legacy ? (this.quadUv.map(r._frame, r.filterFrame), o.geometry.bind(this.quadUv), o.geometry.draw(yi.TRIANGLES)) : (o.geometry.bind(this.quad), o.geometry.draw(yi.TRIANGLE_STRIP));
    }, t.prototype.calculateSpriteMatrix = function(e, r) {
      var i = this.activeState, s = i.sourceFrame, o = i.destinationFrame, h = r._texture.orig, l = e.set(o.width, 0, 0, o.height, s.x, s.y), c = r.worldTransform.copyTo(wr.TEMP_MATRIX);
      return c.invert(), l.prepend(c), l.scale(1 / h.width, 1 / h.height), l.translate(r.anchor.x, r.anchor.y), l;
    }, t.prototype.destroy = function() {
      this.renderer = null, this.texturePool.clear(!1);
    }, t.prototype.getOptimalFilterTexture = function(e, r, i, s) {
      return i === void 0 && (i = 1), s === void 0 && (s = Mr.NONE), this.texturePool.getOptimalTexture(e, r, i, s);
    }, t.prototype.getFilterTexture = function(e, r, i) {
      if (typeof e == "number") {
        var s = e;
        e = r, r = s;
      }
      e = e || this.activeState.renderTexture;
      var o = this.texturePool.getOptimalTexture(e.width, e.height, r || e.resolution, i || Mr.NONE);
      return o.filterFrame = e.filterFrame, o;
    }, t.prototype.returnFilterTexture = function(e) {
      this.texturePool.returnTexture(e);
    }, t.prototype.emptyPool = function() {
      this.texturePool.clear(!0);
    }, t.prototype.resize = function() {
      this.texturePool.setScreenSize(this.renderer.view);
    }, t.prototype.transformAABB = function(e, r) {
      var i = _a[0], s = _a[1], o = _a[2], h = _a[3];
      i.set(r.left, r.top), s.set(r.left, r.bottom), o.set(r.right, r.top), h.set(r.right, r.bottom), e.apply(i, i), e.apply(s, s), e.apply(o, o), e.apply(h, h);
      var l = Math.min(i.x, s.x, o.x, h.x), c = Math.min(i.y, s.y, o.y, h.y), _ = Math.max(i.x, s.x, o.x, h.x), y = Math.max(i.y, s.y, o.y, h.y);
      r.x = l, r.y = c, r.width = _ - l, r.height = y - c;
    }, t.prototype.roundFrame = function(e, r, i, s, o) {
      if (!(e.width <= 0 || e.height <= 0 || i.width <= 0 || i.height <= 0)) {
        if (o) {
          var h = o.a, l = o.b, c = o.c, _ = o.d;
          if ((Math.abs(l) > 1e-4 || Math.abs(c) > 1e-4) && (Math.abs(h) > 1e-4 || Math.abs(_) > 1e-4))
            return;
        }
        o = o ? Eh.copyFrom(o) : Eh.identity(), o.translate(-i.x, -i.y).scale(s.width / i.width, s.height / i.height).translate(s.x, s.y), this.transformAABB(o, e), e.ceil(r), this.transformAABB(o.invert(), e);
      }
    }, t;
  }()
), Zo = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e;
    }
    return t.prototype.flush = function() {
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t.prototype.start = function() {
    }, t.prototype.stop = function() {
      this.flush();
    }, t.prototype.render = function(e) {
    }, t;
  }()
), Du = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.emptyRenderer = new Zo(e), this.currentRenderer = this.emptyRenderer;
    }
    return t.prototype.setObjectRenderer = function(e) {
      this.currentRenderer !== e && (this.currentRenderer.stop(), this.currentRenderer = e, this.currentRenderer.start());
    }, t.prototype.flush = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, t.prototype.reset = function() {
      this.setObjectRenderer(this.emptyRenderer);
    }, t.prototype.copyBoundTextures = function(e, r) {
      for (var i = this.renderer.texture.boundTextures, s = r - 1; s >= 0; --s)
        e[s] = i[s] || null, e[s] && (e[s]._batchLocation = s);
    }, t.prototype.boundArray = function(e, r, i, s) {
      for (var o = e.elements, h = e.ids, l = e.count, c = 0, _ = 0; _ < l; _++) {
        var y = o[_], w = y._batchLocation;
        if (w >= 0 && w < s && r[w] === y) {
          h[_] = w;
          continue;
        }
        for (; c < s; ) {
          var b = r[c];
          if (b && b._batchEnabled === i && b._batchLocation === c) {
            c++;
            continue;
          }
          h[_] = c, y._batchLocation = c, r[c] = y;
          break;
        }
      }
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), Bf = 0, Bu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.webGLVersion = 1, this.extensions = {}, this.supports = {
        uint32Indices: !1
      }, this.handleContextLost = this.handleContextLost.bind(this), this.handleContextRestored = this.handleContextRestored.bind(this), e.view.addEventListener("webglcontextlost", this.handleContextLost, !1), e.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1);
    }
    return Object.defineProperty(t.prototype, "isLost", {
      /**
       * `true` if the context is lost
       * @readonly
       */
      get: function() {
        return !this.gl || this.gl.isContextLost();
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.contextChange = function(e) {
      this.gl = e, this.renderer.gl = e, this.renderer.CONTEXT_UID = Bf++, e.isContextLost() && e.getExtension("WEBGL_lose_context") && e.getExtension("WEBGL_lose_context").restoreContext();
    }, t.prototype.initFromContext = function(e) {
      this.gl = e, this.validateContext(e), this.renderer.gl = e, this.renderer.CONTEXT_UID = Bf++, this.renderer.runners.contextChange.emit(e);
    }, t.prototype.initFromOptions = function(e) {
      var r = this.createContext(this.renderer.view, e);
      this.initFromContext(r);
    }, t.prototype.createContext = function(e, r) {
      var i;
      if (ee.PREFER_ENV >= Yi.WEBGL2 && (i = e.getContext("webgl2", r)), i)
        this.webGLVersion = 2;
      else if (this.webGLVersion = 1, i = e.getContext("webgl", r) || e.getContext("experimental-webgl", r), !i)
        throw new Error("This browser does not support WebGL. Try using the canvas renderer");
      return this.gl = i, this.getExtensions(), this.gl;
    }, t.prototype.getExtensions = function() {
      var e = this.gl, r = {
        anisotropicFiltering: e.getExtension("EXT_texture_filter_anisotropic"),
        floatTextureLinear: e.getExtension("OES_texture_float_linear"),
        s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
        s3tc_sRGB: e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
        etc: e.getExtension("WEBGL_compressed_texture_etc"),
        etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
        pvrtc: e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
        atc: e.getExtension("WEBGL_compressed_texture_atc"),
        astc: e.getExtension("WEBGL_compressed_texture_astc")
      };
      this.webGLVersion === 1 ? Object.assign(this.extensions, r, {
        drawBuffers: e.getExtension("WEBGL_draw_buffers"),
        depthTexture: e.getExtension("WEBGL_depth_texture"),
        loseContext: e.getExtension("WEBGL_lose_context"),
        vertexArrayObject: e.getExtension("OES_vertex_array_object") || e.getExtension("MOZ_OES_vertex_array_object") || e.getExtension("WEBKIT_OES_vertex_array_object"),
        uint32ElementIndex: e.getExtension("OES_element_index_uint"),
        // Floats and half-floats
        floatTexture: e.getExtension("OES_texture_float"),
        floatTextureLinear: e.getExtension("OES_texture_float_linear"),
        textureHalfFloat: e.getExtension("OES_texture_half_float"),
        textureHalfFloatLinear: e.getExtension("OES_texture_half_float_linear")
      }) : this.webGLVersion === 2 && Object.assign(this.extensions, r, {
        // Floats and half-floats
        colorBufferFloat: e.getExtension("EXT_color_buffer_float")
      });
    }, t.prototype.handleContextLost = function(e) {
      e.preventDefault();
    }, t.prototype.handleContextRestored = function() {
      this.renderer.runners.contextChange.emit(this.gl);
    }, t.prototype.destroy = function() {
      var e = this.renderer.view;
      this.renderer = null, e.removeEventListener("webglcontextlost", this.handleContextLost), e.removeEventListener("webglcontextrestored", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext();
    }, t.prototype.postrender = function() {
      this.renderer.renderingToScreen && this.gl.flush();
    }, t.prototype.validateContext = function(e) {
      var r = e.getContextAttributes(), i = "WebGL2RenderingContext" in globalThis && e instanceof globalThis.WebGL2RenderingContext;
      i && (this.webGLVersion = 2), r && !r.stencil && console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
      var s = i || !!e.getExtension("OES_element_index_uint");
      this.supports.uint32Indices = s, s || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly");
    }, t;
  }()
), op = (
  /** @class */
  function() {
    function t(e) {
      this.framebuffer = e, this.stencil = null, this.dirtyId = -1, this.dirtyFormat = -1, this.dirtySize = -1, this.multisample = Mr.NONE, this.msaaBuffer = null, this.blitFramebuffer = null, this.mipLevel = 0;
    }
    return t;
  }()
), $y = new Ye(), ku = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.managedFramebuffers = [], this.unknownFramebuffer = new Xa(10, 10), this.msaaSamples = null;
    }
    return t.prototype.contextChange = function() {
      var e = this.gl = this.renderer.gl;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new Ye(), this.hasMRT = !0, this.writeDepthTexture = !0, this.disposeAll(!0), this.renderer.context.webGLVersion === 1) {
        var r = this.renderer.context.extensions.drawBuffers, i = this.renderer.context.extensions.depthTexture;
        ee.PREFER_ENV === Yi.WEBGL_LEGACY && (r = null, i = null), r ? e.drawBuffers = function(s) {
          return r.drawBuffersWEBGL(s);
        } : (this.hasMRT = !1, e.drawBuffers = function() {
        }), i || (this.writeDepthTexture = !1);
      } else
        this.msaaSamples = e.getInternalformatParameter(e.RENDERBUFFER, e.RGBA8, e.SAMPLES);
    }, t.prototype.bind = function(e, r, i) {
      i === void 0 && (i = 0);
      var s = this.gl;
      if (e) {
        var o = e.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(e);
        this.current !== e && (this.current = e, s.bindFramebuffer(s.FRAMEBUFFER, o.framebuffer)), o.mipLevel !== i && (e.dirtyId++, e.dirtyFormat++, o.mipLevel = i), o.dirtyId !== e.dirtyId && (o.dirtyId = e.dirtyId, o.dirtyFormat !== e.dirtyFormat ? (o.dirtyFormat = e.dirtyFormat, o.dirtySize = e.dirtySize, this.updateFramebuffer(e, i)) : o.dirtySize !== e.dirtySize && (o.dirtySize = e.dirtySize, this.resizeFramebuffer(e)));
        for (var h = 0; h < e.colorTextures.length; h++) {
          var l = e.colorTextures[h];
          this.renderer.texture.unbind(l.parentTextureArray || l);
        }
        if (e.depthTexture && this.renderer.texture.unbind(e.depthTexture), r) {
          var c = r.width >> i, _ = r.height >> i, y = c / r.width;
          this.setViewport(r.x * y, r.y * y, c, _);
        } else {
          var c = e.width >> i, _ = e.height >> i;
          this.setViewport(0, 0, c, _);
        }
      } else
        this.current && (this.current = null, s.bindFramebuffer(s.FRAMEBUFFER, null)), r ? this.setViewport(r.x, r.y, r.width, r.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height);
    }, t.prototype.setViewport = function(e, r, i, s) {
      var o = this.viewport;
      e = Math.round(e), r = Math.round(r), i = Math.round(i), s = Math.round(s), (o.width !== i || o.height !== s || o.x !== e || o.y !== r) && (o.x = e, o.y = r, o.width = i, o.height = s, this.gl.viewport(e, r, i, s));
    }, Object.defineProperty(t.prototype, "size", {
      /**
       * Get the size of the current width and height. Returns object with `width` and `height` values.
       * @readonly
       */
      get: function() {
        return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height };
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.clear = function(e, r, i, s, o) {
      o === void 0 && (o = So.COLOR | So.DEPTH);
      var h = this.gl;
      h.clearColor(e, r, i, s), h.clear(o);
    }, t.prototype.initFramebuffer = function(e) {
      var r = this.gl, i = new op(r.createFramebuffer());
      return i.multisample = this.detectSamples(e.multisample), e.glFramebuffers[this.CONTEXT_UID] = i, this.managedFramebuffers.push(e), e.disposeRunner.add(this), i;
    }, t.prototype.resizeFramebuffer = function(e) {
      var r = this.gl, i = e.glFramebuffers[this.CONTEXT_UID];
      i.msaaBuffer && (r.bindRenderbuffer(r.RENDERBUFFER, i.msaaBuffer), r.renderbufferStorageMultisample(r.RENDERBUFFER, i.multisample, r.RGBA8, e.width, e.height)), i.stencil && (r.bindRenderbuffer(r.RENDERBUFFER, i.stencil), i.msaaBuffer ? r.renderbufferStorageMultisample(r.RENDERBUFFER, i.multisample, r.DEPTH24_STENCIL8, e.width, e.height) : r.renderbufferStorage(r.RENDERBUFFER, r.DEPTH_STENCIL, e.width, e.height));
      var s = e.colorTextures, o = s.length;
      r.drawBuffers || (o = Math.min(o, 1));
      for (var h = 0; h < o; h++) {
        var l = s[h], c = l.parentTextureArray || l;
        this.renderer.texture.bind(c, 0);
      }
      e.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(e.depthTexture, 0);
    }, t.prototype.updateFramebuffer = function(e, r) {
      var i = this.gl, s = e.glFramebuffers[this.CONTEXT_UID], o = e.colorTextures, h = o.length;
      i.drawBuffers || (h = Math.min(h, 1)), s.multisample > 1 && this.canMultisampleFramebuffer(e) ? (s.msaaBuffer = s.msaaBuffer || i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, s.msaaBuffer), i.renderbufferStorageMultisample(i.RENDERBUFFER, s.multisample, i.RGBA8, e.width, e.height), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.RENDERBUFFER, s.msaaBuffer)) : s.msaaBuffer && (i.deleteRenderbuffer(s.msaaBuffer), s.msaaBuffer = null, s.blitFramebuffer && (s.blitFramebuffer.dispose(), s.blitFramebuffer = null));
      for (var l = [], c = 0; c < h; c++) {
        var _ = o[c], y = _.parentTextureArray || _;
        this.renderer.texture.bind(y, 0), !(c === 0 && s.msaaBuffer) && (i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0 + c, _.target, y._glTextures[this.CONTEXT_UID].texture, r), l.push(i.COLOR_ATTACHMENT0 + c));
      }
      if (l.length > 1 && i.drawBuffers(l), e.depthTexture) {
        var w = this.writeDepthTexture;
        if (w) {
          var b = e.depthTexture;
          this.renderer.texture.bind(b, 0), i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_2D, b._glTextures[this.CONTEXT_UID].texture, r);
        }
      }
      (e.stencil || e.depth) && !(e.depthTexture && this.writeDepthTexture) ? (s.stencil = s.stencil || i.createRenderbuffer(), i.bindRenderbuffer(i.RENDERBUFFER, s.stencil), s.msaaBuffer ? i.renderbufferStorageMultisample(i.RENDERBUFFER, s.multisample, i.DEPTH24_STENCIL8, e.width, e.height) : i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, e.width, e.height), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, s.stencil)) : s.stencil && (i.deleteRenderbuffer(s.stencil), s.stencil = null);
    }, t.prototype.canMultisampleFramebuffer = function(e) {
      return this.renderer.context.webGLVersion !== 1 && e.colorTextures.length <= 1 && !e.depthTexture;
    }, t.prototype.detectSamples = function(e) {
      var r = this.msaaSamples, i = Mr.NONE;
      if (e <= 1 || r === null)
        return i;
      for (var s = 0; s < r.length; s++)
        if (r[s] <= e) {
          i = r[s];
          break;
        }
      return i === 1 && (i = Mr.NONE), i;
    }, t.prototype.blit = function(e, r, i) {
      var s = this, o = s.current, h = s.renderer, l = s.gl, c = s.CONTEXT_UID;
      if (h.context.webGLVersion === 2 && o) {
        var _ = o.glFramebuffers[c];
        if (_) {
          if (!e) {
            if (!_.msaaBuffer)
              return;
            var y = o.colorTextures[0];
            if (!y)
              return;
            _.blitFramebuffer || (_.blitFramebuffer = new Xa(o.width, o.height), _.blitFramebuffer.addColorTexture(0, y)), e = _.blitFramebuffer, e.colorTextures[0] !== y && (e.colorTextures[0] = y, e.dirtyId++, e.dirtyFormat++), (e.width !== o.width || e.height !== o.height) && (e.width = o.width, e.height = o.height, e.dirtyId++, e.dirtySize++);
          }
          r || (r = $y, r.width = o.width, r.height = o.height), i || (i = r);
          var w = r.width === i.width && r.height === i.height;
          this.bind(e), l.bindFramebuffer(l.READ_FRAMEBUFFER, _.framebuffer), l.blitFramebuffer(r.left, r.top, r.right, r.bottom, i.left, i.top, i.right, i.bottom, l.COLOR_BUFFER_BIT, w ? l.NEAREST : l.LINEAR);
        }
      }
    }, t.prototype.disposeFramebuffer = function(e, r) {
      var i = e.glFramebuffers[this.CONTEXT_UID], s = this.gl;
      if (i) {
        delete e.glFramebuffers[this.CONTEXT_UID];
        var o = this.managedFramebuffers.indexOf(e);
        o >= 0 && this.managedFramebuffers.splice(o, 1), e.disposeRunner.remove(this), r || (s.deleteFramebuffer(i.framebuffer), i.msaaBuffer && s.deleteRenderbuffer(i.msaaBuffer), i.stencil && s.deleteRenderbuffer(i.stencil)), i.blitFramebuffer && i.blitFramebuffer.dispose();
      }
    }, t.prototype.disposeAll = function(e) {
      var r = this.managedFramebuffers;
      this.managedFramebuffers = [];
      for (var i = 0; i < r.length; i++)
        this.disposeFramebuffer(r[i], e);
    }, t.prototype.forceStencil = function() {
      var e = this.current;
      if (e) {
        var r = e.glFramebuffers[this.CONTEXT_UID];
        if (!(!r || r.stencil)) {
          e.stencil = !0;
          var i = e.width, s = e.height, o = this.gl, h = o.createRenderbuffer();
          o.bindRenderbuffer(o.RENDERBUFFER, h), r.msaaBuffer ? o.renderbufferStorageMultisample(o.RENDERBUFFER, r.multisample, o.DEPTH24_STENCIL8, i, s) : o.renderbufferStorage(o.RENDERBUFFER, o.DEPTH_STENCIL, i, s), r.stencil = h, o.framebufferRenderbuffer(o.FRAMEBUFFER, o.DEPTH_STENCIL_ATTACHMENT, o.RENDERBUFFER, h);
        }
      }
    }, t.prototype.reset = function() {
      this.current = this.unknownFramebuffer, this.viewport = new Ye();
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), Ih = { 5126: 4, 5123: 2, 5121: 1 }, Xu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this._activeGeometry = null, this._activeVao = null, this.hasVao = !0, this.hasInstance = !0, this.canUseUInt32ElementIndex = !1, this.managedGeometries = {};
    }
    return t.prototype.contextChange = function() {
      this.disposeAll(!0);
      var e = this.gl = this.renderer.gl, r = this.renderer.context;
      if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, r.webGLVersion !== 2) {
        var i = this.renderer.context.extensions.vertexArrayObject;
        ee.PREFER_ENV === Yi.WEBGL_LEGACY && (i = null), i ? (e.createVertexArray = function() {
          return i.createVertexArrayOES();
        }, e.bindVertexArray = function(o) {
          return i.bindVertexArrayOES(o);
        }, e.deleteVertexArray = function(o) {
          return i.deleteVertexArrayOES(o);
        }) : (this.hasVao = !1, e.createVertexArray = function() {
          return null;
        }, e.bindVertexArray = function() {
          return null;
        }, e.deleteVertexArray = function() {
          return null;
        });
      }
      if (r.webGLVersion !== 2) {
        var s = e.getExtension("ANGLE_instanced_arrays");
        s ? (e.vertexAttribDivisor = function(o, h) {
          return s.vertexAttribDivisorANGLE(o, h);
        }, e.drawElementsInstanced = function(o, h, l, c, _) {
          return s.drawElementsInstancedANGLE(o, h, l, c, _);
        }, e.drawArraysInstanced = function(o, h, l, c) {
          return s.drawArraysInstancedANGLE(o, h, l, c);
        }) : this.hasInstance = !1;
      }
      this.canUseUInt32ElementIndex = r.webGLVersion === 2 || !!r.extensions.uint32ElementIndex;
    }, t.prototype.bind = function(e, r) {
      r = r || this.renderer.shader.shader;
      var i = this.gl, s = e.glVertexArrayObjects[this.CONTEXT_UID], o = !1;
      s || (this.managedGeometries[e.id] = e, e.disposeRunner.add(this), e.glVertexArrayObjects[this.CONTEXT_UID] = s = {}, o = !0);
      var h = s[r.program.id] || this.initGeometryVao(e, r, o);
      this._activeGeometry = e, this._activeVao !== h && (this._activeVao = h, this.hasVao ? i.bindVertexArray(h) : this.activateVao(e, r.program)), this.updateBuffers();
    }, t.prototype.reset = function() {
      this.unbind();
    }, t.prototype.updateBuffers = function() {
      for (var e = this._activeGeometry, r = this.renderer.buffer, i = 0; i < e.buffers.length; i++) {
        var s = e.buffers[i];
        r.update(s);
      }
    }, t.prototype.checkCompatibility = function(e, r) {
      var i = e.attributes, s = r.attributeData;
      for (var o in s)
        if (!i[o])
          throw new Error('shader and geometry incompatible, geometry missing the "' + o + '" attribute');
    }, t.prototype.getSignature = function(e, r) {
      var i = e.attributes, s = r.attributeData, o = ["g", e.id];
      for (var h in i)
        s[h] && o.push(h, s[h].location);
      return o.join("-");
    }, t.prototype.initGeometryVao = function(e, r, i) {
      i === void 0 && (i = !0);
      var s = this.gl, o = this.CONTEXT_UID, h = this.renderer.buffer, l = r.program;
      l.glPrograms[o] || this.renderer.shader.generateProgram(r), this.checkCompatibility(e, l);
      var c = this.getSignature(e, l), _ = e.glVertexArrayObjects[this.CONTEXT_UID], y = _[c];
      if (y)
        return _[l.id] = y, y;
      var w = e.buffers, b = e.attributes, E = {}, T = {};
      for (var P in w)
        E[P] = 0, T[P] = 0;
      for (var P in b)
        !b[P].size && l.attributeData[P] ? b[P].size = l.attributeData[P].size : b[P].size || console.warn("PIXI Geometry attribute '" + P + "' size cannot be determined (likely the bound shader does not have the attribute)"), E[b[P].buffer] += b[P].size * Ih[b[P].type];
      for (var P in b) {
        var O = b[P], H = O.size;
        O.stride === void 0 && (E[O.buffer] === H * Ih[O.type] ? O.stride = 0 : O.stride = E[O.buffer]), O.start === void 0 && (O.start = T[O.buffer], T[O.buffer] += H * Ih[O.type]);
      }
      y = s.createVertexArray(), s.bindVertexArray(y);
      for (var Y = 0; Y < w.length; Y++) {
        var J = w[Y];
        h.bind(J), i && J._glBuffers[o].refCount++;
      }
      return this.activateVao(e, l), this._activeVao = y, _[l.id] = y, _[c] = y, y;
    }, t.prototype.disposeGeometry = function(e, r) {
      var i;
      if (this.managedGeometries[e.id]) {
        delete this.managedGeometries[e.id];
        var s = e.glVertexArrayObjects[this.CONTEXT_UID], o = this.gl, h = e.buffers, l = (i = this.renderer) === null || i === void 0 ? void 0 : i.buffer;
        if (e.disposeRunner.remove(this), !!s) {
          if (l)
            for (var c = 0; c < h.length; c++) {
              var _ = h[c]._glBuffers[this.CONTEXT_UID];
              _ && (_.refCount--, _.refCount === 0 && !r && l.dispose(h[c], r));
            }
          if (!r) {
            for (var y in s)
              if (y[0] === "g") {
                var w = s[y];
                this._activeVao === w && this.unbind(), o.deleteVertexArray(w);
              }
          }
          delete e.glVertexArrayObjects[this.CONTEXT_UID];
        }
      }
    }, t.prototype.disposeAll = function(e) {
      for (var r = Object.keys(this.managedGeometries), i = 0; i < r.length; i++)
        this.disposeGeometry(this.managedGeometries[r[i]], e);
    }, t.prototype.activateVao = function(e, r) {
      var i = this.gl, s = this.CONTEXT_UID, o = this.renderer.buffer, h = e.buffers, l = e.attributes;
      e.indexBuffer && o.bind(e.indexBuffer);
      var c = null;
      for (var _ in l) {
        var y = l[_], w = h[y.buffer], b = w._glBuffers[s];
        if (r.attributeData[_]) {
          c !== b && (o.bind(w), c = b);
          var E = r.attributeData[_].location;
          if (i.enableVertexAttribArray(E), i.vertexAttribPointer(E, y.size, y.type || i.FLOAT, y.normalized, y.stride, y.start), y.instance)
            if (this.hasInstance)
              i.vertexAttribDivisor(E, 1);
            else
              throw new Error("geometry error, GPU Instancing is not supported on this device");
        }
      }
    }, t.prototype.draw = function(e, r, i, s) {
      var o = this.gl, h = this._activeGeometry;
      if (h.indexBuffer) {
        var l = h.indexBuffer.data.BYTES_PER_ELEMENT, c = l === 2 ? o.UNSIGNED_SHORT : o.UNSIGNED_INT;
        l === 2 || l === 4 && this.canUseUInt32ElementIndex ? h.instanced ? o.drawElementsInstanced(e, r || h.indexBuffer.data.length, c, (i || 0) * l, s || 1) : o.drawElements(e, r || h.indexBuffer.data.length, c, (i || 0) * l) : console.warn("unsupported index buffer type: uint32");
      } else
        h.instanced ? o.drawArraysInstanced(e, i, r || h.getSize(), s || 1) : o.drawArrays(e, i, r || h.getSize());
      return this;
    }, t.prototype.unbind = function() {
      this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null;
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), ap = (
  /** @class */
  function() {
    function t(e) {
      e === void 0 && (e = null), this.type = Dr.NONE, this.autoDetect = !0, this.maskObject = e || null, this.pooled = !1, this.isMaskData = !0, this.resolution = null, this.multisample = ee.FILTER_MULTISAMPLE, this.enabled = !0, this.colorMask = 15, this._filters = null, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._scissorRectLocal = null, this._colorMask = 15, this._target = null;
    }
    return Object.defineProperty(t.prototype, "filter", {
      /**
       * The sprite mask filter.
       * If set to `null`, the default sprite mask filter is used.
       * @default null
       */
      get: function() {
        return this._filters ? this._filters[0] : null;
      },
      set: function(e) {
        e ? this._filters ? this._filters[0] = e : this._filters = [e] : this._filters = null;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.reset = function() {
      this.pooled && (this.maskObject = null, this.type = Dr.NONE, this.autoDetect = !0), this._target = null, this._scissorRectLocal = null;
    }, t.prototype.copyCountersOrReset = function(e) {
      e ? (this._stencilCounter = e._stencilCounter, this._scissorCounter = e._scissorCounter, this._scissorRect = e._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null);
    }, t;
  }()
);
function kf(t, e, r) {
  var i = t.createShader(e);
  return t.shaderSource(i, r), t.compileShader(i), i;
}
function Xf(t, e) {
  var r = t.getShaderSource(e).split(`
`).map(function(_, y) {
    return y + ": " + _;
  }), i = t.getShaderInfoLog(e), s = i.split(`
`), o = {}, h = s.map(function(_) {
    return parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"));
  }).filter(function(_) {
    return _ && !o[_] ? (o[_] = !0, !0) : !1;
  }), l = [""];
  h.forEach(function(_) {
    r[_ - 1] = "%c" + r[_ - 1] + "%c", l.push("background: #FF0000; color:#FFFFFF; font-size: 10px", "font-size: 10px");
  });
  var c = r.join(`
`);
  l[0] = c, console.error(i), console.groupCollapsed("click to view full shader code"), console.warn.apply(console, l), console.groupEnd();
}
function Ry(t, e, r, i) {
  t.getProgramParameter(e, t.LINK_STATUS) || (t.getShaderParameter(r, t.COMPILE_STATUS) || Xf(t, r), t.getShaderParameter(i, t.COMPILE_STATUS) || Xf(t, i), console.error("PixiJS Error: Could not initialize shader."), t.getProgramInfoLog(e) !== "" && console.warn("PixiJS Warning: gl.getProgramInfoLog()", t.getProgramInfoLog(e)));
}
function Ch(t) {
  for (var e = new Array(t), r = 0; r < e.length; r++)
    e[r] = !1;
  return e;
}
function hp(t, e) {
  switch (t) {
    case "float":
      return 0;
    case "vec2":
      return new Float32Array(2 * e);
    case "vec3":
      return new Float32Array(3 * e);
    case "vec4":
      return new Float32Array(4 * e);
    case "int":
    case "uint":
    case "sampler2D":
    case "sampler2DArray":
      return 0;
    case "ivec2":
      return new Int32Array(2 * e);
    case "ivec3":
      return new Int32Array(3 * e);
    case "ivec4":
      return new Int32Array(4 * e);
    case "uvec2":
      return new Uint32Array(2 * e);
    case "uvec3":
      return new Uint32Array(3 * e);
    case "uvec4":
      return new Uint32Array(4 * e);
    case "bool":
      return !1;
    case "bvec2":
      return Ch(2 * e);
    case "bvec3":
      return Ch(3 * e);
    case "bvec4":
      return Ch(4 * e);
    case "mat2":
      return new Float32Array([
        1,
        0,
        0,
        1
      ]);
    case "mat3":
      return new Float32Array([
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1
      ]);
    case "mat4":
      return new Float32Array([
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        1
      ]);
  }
  return null;
}
var lp = {}, eo = lp;
function up() {
  if (eo === lp || eo && eo.isContextLost()) {
    var t = ee.ADAPTER.createCanvas(), e = void 0;
    ee.PREFER_ENV >= Yi.WEBGL2 && (e = t.getContext("webgl2", {})), e || (e = t.getContext("webgl", {}) || t.getContext("experimental-webgl", {}), e ? e.getExtension("WEBGL_draw_buffers") : e = null), eo = e;
  }
  return eo;
}
var pa;
function Sy() {
  if (!pa) {
    pa = Si.MEDIUM;
    var t = up();
    if (t && t.getShaderPrecisionFormat) {
      var e = t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT);
      pa = e.precision ? Si.HIGH : Si.MEDIUM;
    }
  }
  return pa;
}
function Vf(t, e, r) {
  if (t.substring(0, 9) !== "precision") {
    var i = e;
    return e === Si.HIGH && r !== Si.HIGH && (i = Si.MEDIUM), "precision " + i + ` float;
` + t;
  } else if (r !== Si.HIGH && t.substring(0, 15) === "precision highp")
    return t.replace("precision highp", "precision mediump");
  return t;
}
var Ny = {
  float: 1,
  vec2: 2,
  vec3: 3,
  vec4: 4,
  int: 1,
  ivec2: 2,
  ivec3: 3,
  ivec4: 4,
  uint: 1,
  uvec2: 2,
  uvec3: 3,
  uvec4: 4,
  bool: 1,
  bvec2: 2,
  bvec3: 3,
  bvec4: 4,
  mat2: 4,
  mat3: 9,
  mat4: 16,
  sampler2D: 1
};
function fp(t) {
  return Ny[t];
}
var va = null, Hf = {
  FLOAT: "float",
  FLOAT_VEC2: "vec2",
  FLOAT_VEC3: "vec3",
  FLOAT_VEC4: "vec4",
  INT: "int",
  INT_VEC2: "ivec2",
  INT_VEC3: "ivec3",
  INT_VEC4: "ivec4",
  UNSIGNED_INT: "uint",
  UNSIGNED_INT_VEC2: "uvec2",
  UNSIGNED_INT_VEC3: "uvec3",
  UNSIGNED_INT_VEC4: "uvec4",
  BOOL: "bool",
  BOOL_VEC2: "bvec2",
  BOOL_VEC3: "bvec3",
  BOOL_VEC4: "bvec4",
  FLOAT_MAT2: "mat2",
  FLOAT_MAT3: "mat3",
  FLOAT_MAT4: "mat4",
  SAMPLER_2D: "sampler2D",
  INT_SAMPLER_2D: "sampler2D",
  UNSIGNED_INT_SAMPLER_2D: "sampler2D",
  SAMPLER_CUBE: "samplerCube",
  INT_SAMPLER_CUBE: "samplerCube",
  UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
  SAMPLER_2D_ARRAY: "sampler2DArray",
  INT_SAMPLER_2D_ARRAY: "sampler2DArray",
  UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
};
function cp(t, e) {
  if (!va) {
    var r = Object.keys(Hf);
    va = {};
    for (var i = 0; i < r.length; ++i) {
      var s = r[i];
      va[t[s]] = Hf[s];
    }
  }
  return va[e];
}
var is = [
  // a float cache layer
  {
    test: function(t) {
      return t.type === "float" && t.size === 1;
    },
    code: function(t) {
      return `
            if(uv["` + t + '"] !== ud["' + t + `"].value)
            {
                ud["` + t + '"].value = uv["' + t + `"]
                gl.uniform1f(ud["` + t + '"].location, uv["' + t + `"])
            }
            `;
    }
  },
  // handling samplers
  {
    test: function(t) {
      return (t.type === "sampler2D" || t.type === "samplerCube" || t.type === "sampler2DArray") && t.size === 1 && !t.isArray;
    },
    code: function(t) {
      return `t = syncData.textureCount++;

            renderer.texture.bind(uv["` + t + `"], t);

            if(ud["` + t + `"].value !== t)
            {
                ud["` + t + `"].value = t;
                gl.uniform1i(ud["` + t + `"].location, t);
; // eslint-disable-line max-len
            }`;
    }
  },
  // uploading pixi matrix object to mat3
  {
    test: function(t, e) {
      return t.type === "mat3" && t.size === 1 && e.a !== void 0;
    },
    code: function(t) {
      return `
            gl.uniformMatrix3fv(ud["` + t + '"].location, false, uv["' + t + `"].toArray(true));
            `;
    },
    codeUbo: function(t) {
      return `
                var ` + t + "_matrix = uv." + t + `.toArray(true);

                data[offset] = ` + t + `_matrix[0];
                data[offset+1] = ` + t + `_matrix[1];
                data[offset+2] = ` + t + `_matrix[2];
        
                data[offset + 4] = ` + t + `_matrix[3];
                data[offset + 5] = ` + t + `_matrix[4];
                data[offset + 6] = ` + t + `_matrix[5];
        
                data[offset + 8] = ` + t + `_matrix[6];
                data[offset + 9] = ` + t + `_matrix[7];
                data[offset + 10] = ` + t + `_matrix[8];
            `;
    }
  },
  // uploading a pixi point as a vec2 with caching layer
  {
    test: function(t, e) {
      return t.type === "vec2" && t.size === 1 && e.x !== void 0;
    },
    code: function(t) {
      return `
                cv = ud["` + t + `"].value;
                v = uv["` + t + `"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["` + t + `"].location, v.x, v.y);
                }`;
    },
    codeUbo: function(t) {
      return `
                v = uv.` + t + `;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `;
    }
  },
  // caching layer for a vec2
  {
    test: function(t) {
      return t.type === "vec2" && t.size === 1;
    },
    code: function(t) {
      return `
                cv = ud["` + t + `"].value;
                v = uv["` + t + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["` + t + `"].location, v[0], v[1]);
                }
            `;
    }
  },
  // upload a pixi rectangle as a vec4 with caching layer
  {
    test: function(t, e) {
      return t.type === "vec4" && t.size === 1 && e.width !== void 0;
    },
    code: function(t) {
      return `
                cv = ud["` + t + `"].value;
                v = uv["` + t + `"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["` + t + `"].location, v.x, v.y, v.width, v.height)
                }`;
    },
    codeUbo: function(t) {
      return `
                    v = uv.` + t + `;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `;
    }
  },
  // a caching layer for vec4 uploading
  {
    test: function(t) {
      return t.type === "vec4" && t.size === 1;
    },
    code: function(t) {
      return `
                cv = ud["` + t + `"].value;
                v = uv["` + t + `"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["` + t + `"].location, v[0], v[1], v[2], v[3])
                }`;
    }
  }
], Ly = {
  float: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,
  vec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,
  vec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,
  vec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,
  int: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,
  ivec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  ivec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  ivec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  uint: `
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,
  uvec2: `
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,
  uvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,
  uvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,
  bool: `
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,
  bvec2: `
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,
  bvec3: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,
  bvec4: `
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  sampler2D: "gl.uniform1i(location, v)",
  samplerCube: "gl.uniform1i(location, v)",
  sampler2DArray: "gl.uniform1i(location, v)"
}, Oy = {
  float: "gl.uniform1fv(location, v)",
  vec2: "gl.uniform2fv(location, v)",
  vec3: "gl.uniform3fv(location, v)",
  vec4: "gl.uniform4fv(location, v)",
  mat4: "gl.uniformMatrix4fv(location, false, v)",
  mat3: "gl.uniformMatrix3fv(location, false, v)",
  mat2: "gl.uniformMatrix2fv(location, false, v)",
  int: "gl.uniform1iv(location, v)",
  ivec2: "gl.uniform2iv(location, v)",
  ivec3: "gl.uniform3iv(location, v)",
  ivec4: "gl.uniform4iv(location, v)",
  uint: "gl.uniform1uiv(location, v)",
  uvec2: "gl.uniform2uiv(location, v)",
  uvec3: "gl.uniform3uiv(location, v)",
  uvec4: "gl.uniform4uiv(location, v)",
  bool: "gl.uniform1iv(location, v)",
  bvec2: "gl.uniform2iv(location, v)",
  bvec3: "gl.uniform3iv(location, v)",
  bvec4: "gl.uniform4iv(location, v)",
  sampler2D: "gl.uniform1iv(location, v)",
  samplerCube: "gl.uniform1iv(location, v)",
  sampler2DArray: "gl.uniform1iv(location, v)"
};
function Fy(t, e) {
  var r, i = [`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];
  for (var s in t.uniforms) {
    var o = e[s];
    if (!o) {
      !((r = t.uniforms[s]) === null || r === void 0) && r.group && (t.uniforms[s].ubo ? i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.` + s + ", '" + s + `');
                    `) : i.push(`
                        renderer.shader.syncUniformGroup(uv.` + s + `, syncData);
                    `));
      continue;
    }
    for (var h = t.uniforms[s], l = !1, c = 0; c < is.length; c++)
      if (is[c].test(o, h)) {
        i.push(is[c].code(s, h)), l = !0;
        break;
      }
    if (!l) {
      var _ = o.size === 1 ? Ly : Oy, y = _[o.type].replace("location", 'ud["' + s + '"].location');
      i.push(`
            cu = ud["` + s + `"];
            cv = cu.value;
            v = uv["` + s + `"];
            ` + y + ";");
    }
  }
  return new Function("ud", "uv", "renderer", "syncData", i.join(`
`));
}
var My = [
  "precision mediump float;",
  "void main(void){",
  "float test = 0.1;",
  "%forloop%",
  "gl_FragColor = vec4(0.0);",
  "}"
].join(`
`);
function Uy(t) {
  for (var e = "", r = 0; r < t; ++r)
    r > 0 && (e += `
else `), r < t - 1 && (e += "if(test == " + r + ".0){}");
  return e;
}
function dp(t, e) {
  if (t === 0)
    throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
  for (var r = e.createShader(e.FRAGMENT_SHADER); ; ) {
    var i = My.replace(/%forloop%/gi, Uy(t));
    if (e.shaderSource(r, i), e.compileShader(r), !e.getShaderParameter(r, e.COMPILE_STATUS))
      t = t / 2 | 0;
    else
      break;
  }
  return t;
}
var ro;
function Gy() {
  if (typeof ro == "boolean")
    return ro;
  try {
    var t = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
    ro = t({ a: "b" }, "a", "b") === !0;
  } catch (e) {
    ro = !1;
  }
  return ro;
}
var Dy = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`, By = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`, ky = 0, ma = {}, Ds = (
  /** @class */
  function() {
    function t(e, r, i) {
      i === void 0 && (i = "pixi-shader"), this.id = ky++, this.vertexSrc = e || t.defaultVertexSrc, this.fragmentSrc = r || t.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), this.vertexSrc.substring(0, 8) !== "#version" && (i = i.replace(/\s+/g, "-"), ma[i] ? (ma[i]++, i += "-" + ma[i]) : ma[i] = 1, this.vertexSrc = "#define SHADER_NAME " + i + `
` + this.vertexSrc, this.fragmentSrc = "#define SHADER_NAME " + i + `
` + this.fragmentSrc, this.vertexSrc = Vf(this.vertexSrc, ee.PRECISION_VERTEX, Si.HIGH), this.fragmentSrc = Vf(this.fragmentSrc, ee.PRECISION_FRAGMENT, Sy())), this.glPrograms = {}, this.syncUniforms = null;
    }
    return Object.defineProperty(t, "defaultVertexSrc", {
      /**
       * The default vertex shader source.
       * @constant
       */
      get: function() {
        return By;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "defaultFragmentSrc", {
      /**
       * The default fragment shader source.
       * @constant
       */
      get: function() {
        return Dy;
      },
      enumerable: !1,
      configurable: !0
    }), t.from = function(e, r, i) {
      var s = e + r, o = Tl[s];
      return o || (Tl[s] = o = new t(e, r, i)), o;
    }, t;
  }()
), cn = (
  /** @class */
  function() {
    function t(e, r) {
      this.uniformBindCount = 0, this.program = e, r ? r instanceof An ? this.uniformGroup = r : this.uniformGroup = new An(r) : this.uniformGroup = new An({});
    }
    return t.prototype.checkUniformExists = function(e, r) {
      if (r.uniforms[e])
        return !0;
      for (var i in r.uniforms) {
        var s = r.uniforms[i];
        if (s.group && this.checkUniformExists(e, s))
          return !0;
      }
      return !1;
    }, t.prototype.destroy = function() {
      this.uniformGroup = null;
    }, Object.defineProperty(t.prototype, "uniforms", {
      /**
       * Shader uniform values, shortcut for `uniformGroup.uniforms`.
       * @readonly
       */
      get: function() {
        return this.uniformGroup.uniforms;
      },
      enumerable: !1,
      configurable: !0
    }), t.from = function(e, r, i) {
      var s = Ds.from(e, r);
      return new t(s, i);
    }, t;
  }()
), $h = 0, Rh = 1, Sh = 2, Nh = 3, Lh = 4, Oh = 5, Cn = (
  /** @class */
  function() {
    function t() {
      this.data = 0, this.blendMode = Ae.NORMAL, this.polygonOffset = 0, this.blend = !0, this.depthMask = !0;
    }
    return Object.defineProperty(t.prototype, "blend", {
      /**
       * Activates blending of the computed fragment color values.
       * @default true
       */
      get: function() {
        return !!(this.data & 1 << $h);
      },
      set: function(e) {
        !!(this.data & 1 << $h) !== e && (this.data ^= 1 << $h);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "offsets", {
      /**
       * Activates adding an offset to depth values of polygon's fragments
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Rh);
      },
      set: function(e) {
        !!(this.data & 1 << Rh) !== e && (this.data ^= 1 << Rh);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "culling", {
      /**
       * Activates culling of polygons.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Sh);
      },
      set: function(e) {
        !!(this.data & 1 << Sh) !== e && (this.data ^= 1 << Sh);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "depthTest", {
      /**
       * Activates depth comparisons and updates to the depth buffer.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Nh);
      },
      set: function(e) {
        !!(this.data & 1 << Nh) !== e && (this.data ^= 1 << Nh);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "depthMask", {
      /**
       * Enables or disables writing to the depth buffer.
       * @default true
       */
      get: function() {
        return !!(this.data & 1 << Oh);
      },
      set: function(e) {
        !!(this.data & 1 << Oh) !== e && (this.data ^= 1 << Oh);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "clockwiseFrontFace", {
      /**
       * Specifies whether or not front or back-facing polygons can be culled.
       * @default false
       */
      get: function() {
        return !!(this.data & 1 << Lh);
      },
      set: function(e) {
        !!(this.data & 1 << Lh) !== e && (this.data ^= 1 << Lh);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "blendMode", {
      /**
       * The blend mode to be applied when this state is set. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       * Setting this mode to anything other than NO_BLEND will automatically switch blending on.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this._blendMode;
      },
      set: function(e) {
        this.blend = e !== Ae.NONE, this._blendMode = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "polygonOffset", {
      /**
       * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.
       * @default 0
       */
      get: function() {
        return this._polygonOffset;
      },
      set: function(e) {
        this.offsets = !!e, this._polygonOffset = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.toString = function() {
      return "[@pixi/core:State " + ("blendMode=" + this.blendMode + " ") + ("clockwiseFrontFace=" + this.clockwiseFrontFace + " ") + ("culling=" + this.culling + " ") + ("depthMask=" + this.depthMask + " ") + ("polygonOffset=" + this.polygonOffset) + "]";
    }, t.for2d = function() {
      var e = new t();
      return e.depthTest = !1, e.blend = !0, e;
    }, t;
  }()
), Xy = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`, Vy = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, dn = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i, s) {
      var o = this, h = Ds.from(r || e.defaultVertexSrc, i || e.defaultFragmentSrc);
      return o = t.call(this, h, s) || this, o.padding = 0, o.resolution = ee.FILTER_RESOLUTION, o.multisample = ee.FILTER_MULTISAMPLE, o.enabled = !0, o.autoFit = !0, o.state = new Cn(), o;
    }
    return e.prototype.apply = function(r, i, s, o, h) {
      r.applyFilter(this, i, s, o);
    }, Object.defineProperty(e.prototype, "blendMode", {
      /**
       * Sets the blend mode of the filter.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.state.blendMode;
      },
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "resolution", {
      /**
       * The resolution of the filter. Setting this to be lower will lower the quality but
       * increase the performance of the filter.
       */
      get: function() {
        return this._resolution;
      },
      set: function(r) {
        this._resolution = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       * @constant
       */
      get: function() {
        return Vy;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e, "defaultFragmentSrc", {
      /**
       * The default fragment shader source
       * @constant
       */
      get: function() {
        return Xy;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(cn)
), Hy = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`, zy = `varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`, zf = new wr(), ah = (
  /** @class */
  function() {
    function t(e, r) {
      this._texture = e, this.mapCoord = new wr(), this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = typeof r == "undefined" ? 0.5 : r, this.isSimple = !1;
    }
    return Object.defineProperty(t.prototype, "texture", {
      /** Texture property. */
      get: function() {
        return this._texture;
      },
      set: function(e) {
        this._texture = e, this._textureID = -1;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.multiplyUvs = function(e, r) {
      r === void 0 && (r = e);
      for (var i = this.mapCoord, s = 0; s < e.length; s += 2) {
        var o = e[s], h = e[s + 1];
        r[s] = o * i.a + h * i.c + i.tx, r[s + 1] = o * i.b + h * i.d + i.ty;
      }
      return r;
    }, t.prototype.update = function(e) {
      var r = this._texture;
      if (!r || !r.valid || !e && this._textureID === r._updateID)
        return !1;
      this._textureID = r._updateID, this._updateID++;
      var i = r._uvs;
      this.mapCoord.set(i.x1 - i.x0, i.y1 - i.y0, i.x3 - i.x0, i.y3 - i.y0, i.x0, i.y0);
      var s = r.orig, o = r.trim;
      o && (zf.set(s.width / o.width, 0, 0, s.height / o.height, -o.x / o.width, -o.y / o.height), this.mapCoord.append(zf));
      var h = r.baseTexture, l = this.uClampFrame, c = this.clampMargin / h.resolution, _ = this.clampOffset;
      return l[0] = (r._frame.x + c + _) / h.width, l[1] = (r._frame.y + c + _) / h.height, l[2] = (r._frame.x + r._frame.width - c + _) / h.width, l[3] = (r._frame.y + r._frame.height - c + _) / h.height, this.uClampOffset[0] = _ / h.realWidth, this.uClampOffset[1] = _ / h.realHeight, this.isSimple = r._frame.width === h.width && r._frame.height === h.height && r.rotate === 0, !0;
    }, t;
  }()
), _p = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i, s) {
      var o = this, h = null;
      return typeof r != "string" && i === void 0 && s === void 0 && (h = r, r = void 0, i = void 0, s = void 0), o = t.call(this, r || Hy, i || zy, s) || this, o.maskSprite = h, o.maskMatrix = new wr(), o;
    }
    return Object.defineProperty(e.prototype, "maskSprite", {
      /**
       * Sprite mask
       * @type {PIXI.DisplayObject}
       */
      get: function() {
        return this._maskSprite;
      },
      set: function(r) {
        this._maskSprite = r, this._maskSprite && (this._maskSprite.renderable = !1);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.apply = function(r, i, s, o) {
      var h = this._maskSprite, l = h._texture;
      l.valid && (l.uvMatrix || (l.uvMatrix = new ah(l, 0)), l.uvMatrix.update(), this.uniforms.npmAlpha = l.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = l, this.uniforms.otherMatrix = r.calculateSpriteMatrix(this.maskMatrix, h).prepend(l.uvMatrix.mapCoord), this.uniforms.alpha = h.worldAlpha, this.uniforms.maskClamp = l.uvMatrix.uClampFrame, r.applyFilter(this, i, s, o));
    }, e;
  }(dn)
), Vu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.enableScissor = !0, this.alphaMaskPool = [], this.maskDataPool = [], this.maskStack = [], this.alphaMaskIndex = 0;
    }
    return t.prototype.setMaskStack = function(e) {
      this.maskStack = e, this.renderer.scissor.setMaskStack(e), this.renderer.stencil.setMaskStack(e);
    }, t.prototype.push = function(e, r) {
      var i = r;
      if (!i.isMaskData) {
        var s = this.maskDataPool.pop() || new ap();
        s.pooled = !0, s.maskObject = r, i = s;
      }
      var o = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null;
      if (i.copyCountersOrReset(o), i._colorMask = o ? o._colorMask : 15, i.autoDetect && this.detect(i), i._target = e, i.type !== Dr.SPRITE && this.maskStack.push(i), i.enabled)
        switch (i.type) {
          case Dr.SCISSOR:
            this.renderer.scissor.push(i);
            break;
          case Dr.STENCIL:
            this.renderer.stencil.push(i);
            break;
          case Dr.SPRITE:
            i.copyCountersOrReset(null), this.pushSpriteMask(i);
            break;
          case Dr.COLOR:
            this.pushColorMask(i);
            break;
        }
      i.type === Dr.SPRITE && this.maskStack.push(i);
    }, t.prototype.pop = function(e) {
      var r = this.maskStack.pop();
      if (!(!r || r._target !== e)) {
        if (r.enabled)
          switch (r.type) {
            case Dr.SCISSOR:
              this.renderer.scissor.pop(r);
              break;
            case Dr.STENCIL:
              this.renderer.stencil.pop(r.maskObject);
              break;
            case Dr.SPRITE:
              this.popSpriteMask(r);
              break;
            case Dr.COLOR:
              this.popColorMask(r);
              break;
          }
        if (r.reset(), r.pooled && this.maskDataPool.push(r), this.maskStack.length !== 0) {
          var i = this.maskStack[this.maskStack.length - 1];
          i.type === Dr.SPRITE && i._filters && (i._filters[0].maskSprite = i.maskObject);
        }
      }
    }, t.prototype.detect = function(e) {
      var r = e.maskObject;
      r ? r.isSprite ? e.type = Dr.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(e) ? e.type = Dr.SCISSOR : e.type = Dr.STENCIL : e.type = Dr.COLOR;
    }, t.prototype.pushSpriteMask = function(e) {
      var r, i, s = e.maskObject, o = e._target, h = e._filters;
      h || (h = this.alphaMaskPool[this.alphaMaskIndex], h || (h = this.alphaMaskPool[this.alphaMaskIndex] = [new _p()]));
      var l = this.renderer, c = l.renderTexture, _, y;
      if (c.current) {
        var w = c.current;
        _ = e.resolution || w.resolution, y = (r = e.multisample) !== null && r !== void 0 ? r : w.multisample;
      } else
        _ = e.resolution || l.resolution, y = (i = e.multisample) !== null && i !== void 0 ? i : l.multisample;
      h[0].resolution = _, h[0].multisample = y, h[0].maskSprite = s;
      var b = o.filterArea;
      o.filterArea = s.getBounds(!0), l.filter.push(o, h), o.filterArea = b, e._filters || this.alphaMaskIndex++;
    }, t.prototype.popSpriteMask = function(e) {
      this.renderer.filter.pop(), e._filters ? e._filters[0].maskSprite = null : (this.alphaMaskIndex--, this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null);
    }, t.prototype.pushColorMask = function(e) {
      var r = e._colorMask, i = e._colorMask = r & e.colorMask;
      i !== r && this.renderer.gl.colorMask((i & 1) !== 0, (i & 2) !== 0, (i & 4) !== 0, (i & 8) !== 0);
    }, t.prototype.popColorMask = function(e) {
      var r = e._colorMask, i = this.maskStack.length > 0 ? this.maskStack[this.maskStack.length - 1]._colorMask : 15;
      i !== r && this.renderer.gl.colorMask((i & 1) !== 0, (i & 2) !== 0, (i & 4) !== 0, (i & 8) !== 0);
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), pp = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.maskStack = [], this.glConst = 0;
    }
    return t.prototype.getStackLength = function() {
      return this.maskStack.length;
    }, t.prototype.setMaskStack = function(e) {
      var r = this.renderer.gl, i = this.getStackLength();
      this.maskStack = e;
      var s = this.getStackLength();
      s !== i && (s === 0 ? r.disable(this.glConst) : (r.enable(this.glConst), this._useCurrent()));
    }, t.prototype._useCurrent = function() {
    }, t.prototype.destroy = function() {
      this.renderer = null, this.maskStack = null;
    }, t;
  }()
), jf = new wr(), Wf = [], Hu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return i.glConst = ee.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST, i;
    }
    return e.prototype.getStackLength = function() {
      var r = this.maskStack[this.maskStack.length - 1];
      return r ? r._scissorCounter : 0;
    }, e.prototype.calcScissorRect = function(r) {
      var i;
      if (!r._scissorRectLocal) {
        var s = r._scissorRect, o = r.maskObject, h = this.renderer, l = h.renderTexture, c = o.getBounds(!0, (i = Wf.pop()) !== null && i !== void 0 ? i : new Ye());
        this.roundFrameToPixels(c, l.current ? l.current.resolution : h.resolution, l.sourceFrame, l.destinationFrame, h.projection.transform), s && c.fit(s), r._scissorRectLocal = c;
      }
    }, e.isMatrixRotated = function(r) {
      if (!r)
        return !1;
      var i = r.a, s = r.b, o = r.c, h = r.d;
      return (Math.abs(s) > 1e-4 || Math.abs(o) > 1e-4) && (Math.abs(i) > 1e-4 || Math.abs(h) > 1e-4);
    }, e.prototype.testScissor = function(r) {
      var i = r.maskObject;
      if (!i.isFastRect || !i.isFastRect() || e.isMatrixRotated(i.worldTransform) || e.isMatrixRotated(this.renderer.projection.transform))
        return !1;
      this.calcScissorRect(r);
      var s = r._scissorRectLocal;
      return s.width > 0 && s.height > 0;
    }, e.prototype.roundFrameToPixels = function(r, i, s, o, h) {
      e.isMatrixRotated(h) || (h = h ? jf.copyFrom(h) : jf.identity(), h.translate(-s.x, -s.y).scale(o.width / s.width, o.height / s.height).translate(o.x, o.y), this.renderer.filter.transformAABB(h, r), r.fit(o), r.x = Math.round(r.x * i), r.y = Math.round(r.y * i), r.width = Math.round(r.width * i), r.height = Math.round(r.height * i));
    }, e.prototype.push = function(r) {
      r._scissorRectLocal || this.calcScissorRect(r);
      var i = this.renderer.gl;
      r._scissorRect || i.enable(i.SCISSOR_TEST), r._scissorCounter++, r._scissorRect = r._scissorRectLocal, this._useCurrent();
    }, e.prototype.pop = function(r) {
      var i = this.renderer.gl;
      r && Wf.push(r._scissorRectLocal), this.getStackLength() > 0 ? this._useCurrent() : i.disable(i.SCISSOR_TEST);
    }, e.prototype._useCurrent = function() {
      var r = this.maskStack[this.maskStack.length - 1]._scissorRect, i;
      this.renderer.renderTexture.current ? i = r.y : i = this.renderer.height - r.height - r.y, this.renderer.gl.scissor(r.x, i, r.width, r.height);
    }, e;
  }(pp)
), zu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return i.glConst = ee.ADAPTER.getWebGLRenderingContext().STENCIL_TEST, i;
    }
    return e.prototype.getStackLength = function() {
      var r = this.maskStack[this.maskStack.length - 1];
      return r ? r._stencilCounter : 0;
    }, e.prototype.push = function(r) {
      var i = r.maskObject, s = this.renderer.gl, o = r._stencilCounter;
      o === 0 && (this.renderer.framebuffer.forceStencil(), s.clearStencil(0), s.clear(s.STENCIL_BUFFER_BIT), s.enable(s.STENCIL_TEST)), r._stencilCounter++;
      var h = r._colorMask;
      h !== 0 && (r._colorMask = 0, s.colorMask(!1, !1, !1, !1)), s.stencilFunc(s.EQUAL, o, 4294967295), s.stencilOp(s.KEEP, s.KEEP, s.INCR), i.renderable = !0, i.render(this.renderer), this.renderer.batch.flush(), i.renderable = !1, h !== 0 && (r._colorMask = h, s.colorMask((h & 1) !== 0, (h & 2) !== 0, (h & 4) !== 0, (h & 8) !== 0)), this._useCurrent();
    }, e.prototype.pop = function(r) {
      var i = this.renderer.gl;
      if (this.getStackLength() === 0)
        i.disable(i.STENCIL_TEST);
      else {
        var s = this.maskStack.length !== 0 ? this.maskStack[this.maskStack.length - 1] : null, o = s ? s._colorMask : 15;
        o !== 0 && (s._colorMask = 0, i.colorMask(!1, !1, !1, !1)), i.stencilOp(i.KEEP, i.KEEP, i.DECR), r.renderable = !0, r.render(this.renderer), this.renderer.batch.flush(), r.renderable = !1, o !== 0 && (s._colorMask = o, i.colorMask((o & 1) !== 0, (o & 2) !== 0, (o & 4) !== 0, (o & 8) !== 0)), this._useCurrent();
      }
    }, e.prototype._useCurrent = function() {
      var r = this.renderer.gl;
      r.stencilFunc(r.EQUAL, this.getStackLength(), 4294967295), r.stencilOp(r.KEEP, r.KEEP, r.KEEP);
    }, e;
  }(pp)
), ju = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.destinationFrame = null, this.sourceFrame = null, this.defaultFrame = null, this.projectionMatrix = new wr(), this.transform = null;
    }
    return t.prototype.update = function(e, r, i, s) {
      this.destinationFrame = e || this.destinationFrame || this.defaultFrame, this.sourceFrame = r || this.sourceFrame || e, this.calculateProjection(this.destinationFrame, this.sourceFrame, i, s), this.transform && this.projectionMatrix.append(this.transform);
      var o = this.renderer;
      o.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, o.globalUniforms.update(), o.shader.shader && o.shader.syncUniformGroup(o.shader.shader.uniforms.globals);
    }, t.prototype.calculateProjection = function(e, r, i, s) {
      var o = this.projectionMatrix, h = s ? -1 : 1;
      o.identity(), o.a = 1 / r.width * 2, o.d = h * (1 / r.height * 2), o.tx = -1 - r.x * o.a, o.ty = -h - r.y * o.d;
    }, t.prototype.setTransform = function(e) {
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), Gn = new Ye(), io = new Ye(), Wu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.clearColor = e._backgroundColorRgba, this.defaultMaskStack = [], this.current = null, this.sourceFrame = new Ye(), this.destinationFrame = new Ye(), this.viewportFrame = new Ye();
    }
    return t.prototype.bind = function(e, r, i) {
      e === void 0 && (e = null);
      var s = this.renderer;
      this.current = e;
      var o, h, l;
      e ? (o = e.baseTexture, l = o.resolution, r || (Gn.width = e.frame.width, Gn.height = e.frame.height, r = Gn), i || (io.x = e.frame.x, io.y = e.frame.y, io.width = r.width, io.height = r.height, i = io), h = o.framebuffer) : (l = s.resolution, r || (Gn.width = s.screen.width, Gn.height = s.screen.height, r = Gn), i || (i = Gn, i.width = r.width, i.height = r.height));
      var c = this.viewportFrame;
      c.x = i.x * l, c.y = i.y * l, c.width = i.width * l, c.height = i.height * l, e || (c.y = s.view.height - (c.y + c.height)), c.ceil(), this.renderer.framebuffer.bind(h, c), this.renderer.projection.update(i, r, l, !h), e ? this.renderer.mask.setMaskStack(o.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(r), this.destinationFrame.copyFrom(i);
    }, t.prototype.clear = function(e, r) {
      this.current ? e = e || this.current.baseTexture.clearColor : e = e || this.clearColor;
      var i = this.destinationFrame, s = this.current ? this.current.baseTexture : this.renderer.screen, o = i.width !== s.width || i.height !== s.height;
      if (o) {
        var h = this.viewportFrame, l = h.x, c = h.y, _ = h.width, y = h.height;
        l = Math.round(l), c = Math.round(c), _ = Math.round(_), y = Math.round(y), this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST), this.renderer.gl.scissor(l, c, _, y);
      }
      this.renderer.framebuffer.clear(e[0], e[1], e[2], e[3], r), o && this.renderer.scissor.pop();
    }, t.prototype.resize = function() {
      this.bind(null);
    }, t.prototype.reset = function() {
      this.bind(null);
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
);
function jy(t, e, r, i, s) {
  r.buffer.update(s);
}
var Wy = {
  float: `
        data[offset] = v;
    `,
  vec2: `
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,
  vec3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,
  vec4: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,
  mat2: `
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,
  mat3: `
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,
  mat4: `
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `
}, vp = {
  float: 4,
  vec2: 8,
  vec3: 12,
  vec4: 16,
  int: 4,
  ivec2: 8,
  ivec3: 12,
  ivec4: 16,
  uint: 4,
  uvec2: 8,
  uvec3: 12,
  uvec4: 16,
  bool: 4,
  bvec2: 8,
  bvec3: 12,
  bvec4: 16,
  mat2: 16 * 2,
  mat3: 16 * 3,
  mat4: 16 * 4
};
function mp(t) {
  for (var e = t.map(function(c) {
    return {
      data: c,
      offset: 0,
      dataLen: 0,
      dirty: 0
    };
  }), r = 0, i = 0, s = 0, o = 0; o < e.length; o++) {
    var h = e[o];
    if (r = vp[h.data.type], h.data.size > 1 && (r = Math.max(r, 16) * h.data.size), h.dataLen = r, i % r !== 0 && i < 16) {
      var l = i % r % 16;
      i += l, s += l;
    }
    i + r > 16 ? (s = Math.ceil(s / 16) * 16, h.offset = s, s += r, i = r) : (h.offset = s, i += r, s += r);
  }
  return s = Math.ceil(s / 16) * 16, { uboElements: e, size: s };
}
function gp(t, e) {
  var r = [];
  for (var i in t)
    e[i] && r.push(e[i]);
  return r.sort(function(s, o) {
    return s.index - o.index;
  }), r;
}
function yp(t, e) {
  if (!t.autoManage)
    return { size: 0, syncFunc: jy };
  for (var r = gp(t.uniforms, e), i = mp(r), s = i.uboElements, o = i.size, h = [`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `], l = 0; l < s.length; l++) {
    for (var c = s[l], _ = t.uniforms[c.data.name], y = c.data.name, w = !1, b = 0; b < is.length; b++) {
      var E = is[b];
      if (E.codeUbo && E.test(c.data, _)) {
        h.push("offset = " + c.offset / 4 + ";", is[b].codeUbo(c.data.name, _)), w = !0;
        break;
      }
    }
    if (!w)
      if (c.data.size > 1) {
        var T = fp(c.data.type), P = Math.max(vp[c.data.type] / 16, 1), O = T / P, H = (4 - O % 4) % 4;
        h.push(`
                cv = ud.` + y + `.value;
                v = uv.` + y + `;
                offset = ` + c.offset / 4 + `;

                t = 0;

                for(var i=0; i < ` + c.data.size * P + `; i++)
                {
                    for(var j = 0; j < ` + O + `; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ` + H + `;
                }

                `);
      } else {
        var Y = Wy[c.data.type];
        h.push(`
                cv = ud.` + y + `.value;
                v = uv.` + y + `;
                offset = ` + c.offset / 4 + `;
                ` + Y + `;
                `);
      }
  }
  return h.push(`
       renderer.buffer.update(buffer);
    `), {
    size: o,
    // eslint-disable-next-line no-new-func
    syncFunc: new Function("ud", "uv", "renderer", "syncData", "buffer", h.join(`
`))
  };
}
var Yy = (
  /** @class */
  function() {
    function t() {
    }
    return t;
  }()
), bp = (
  /** @class */
  function() {
    function t(e, r) {
      this.program = e, this.uniformData = r, this.uniformGroups = {}, this.uniformDirtyGroups = {}, this.uniformBufferBindings = {};
    }
    return t.prototype.destroy = function() {
      this.uniformData = null, this.uniformGroups = null, this.uniformDirtyGroups = null, this.uniformBufferBindings = null, this.program = null;
    }, t;
  }()
);
function qy(t, e) {
  for (var r = {}, i = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), s = 0; s < i; s++) {
    var o = e.getActiveAttrib(t, s);
    if (o.name.indexOf("gl_") !== 0) {
      var h = cp(e, o.type), l = {
        type: h,
        name: o.name,
        size: fp(h),
        location: e.getAttribLocation(t, o.name)
      };
      r[o.name] = l;
    }
  }
  return r;
}
function Zy(t, e) {
  for (var r = {}, i = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), s = 0; s < i; s++) {
    var o = e.getActiveUniform(t, s), h = o.name.replace(/\[.*?\]$/, ""), l = !!o.name.match(/\[.*?\]$/), c = cp(e, o.type);
    r[h] = {
      name: h,
      index: s,
      type: c,
      size: o.size,
      isArray: l,
      value: hp(c, o.size)
    };
  }
  return r;
}
function xp(t, e) {
  var r = kf(t, t.VERTEX_SHADER, e.vertexSrc), i = kf(t, t.FRAGMENT_SHADER, e.fragmentSrc), s = t.createProgram();
  if (t.attachShader(s, r), t.attachShader(s, i), t.linkProgram(s), t.getProgramParameter(s, t.LINK_STATUS) || Ry(t, s, r, i), e.attributeData = qy(s, t), e.uniformData = Zy(s, t), !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)) {
    var o = Object.keys(e.attributeData);
    o.sort(function(y, w) {
      return y > w ? 1 : -1;
    });
    for (var h = 0; h < o.length; h++)
      e.attributeData[o[h]].location = h, t.bindAttribLocation(s, h, o[h]);
    t.linkProgram(s);
  }
  t.deleteShader(r), t.deleteShader(i);
  var l = {};
  for (var h in e.uniformData) {
    var c = e.uniformData[h];
    l[h] = {
      location: t.getUniformLocation(s, h),
      value: hp(c.type, c.size)
    };
  }
  var _ = new bp(s, l);
  return _;
}
var Jy = 0, ga = { textureCount: 0, uboCount: 0 }, Yu = (
  /** @class */
  function() {
    function t(e) {
      this.destroyed = !1, this.renderer = e, this.systemCheck(), this.gl = null, this.shader = null, this.program = null, this.cache = {}, this._uboCache = {}, this.id = Jy++;
    }
    return t.prototype.systemCheck = function() {
      if (!Gy())
        throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.");
    }, t.prototype.contextChange = function(e) {
      this.gl = e, this.reset();
    }, t.prototype.bind = function(e, r) {
      e.uniforms.globals = this.renderer.globalUniforms;
      var i = e.program, s = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(e);
      return this.shader = e, this.program !== i && (this.program = i, this.gl.useProgram(s.program)), r || (ga.textureCount = 0, ga.uboCount = 0, this.syncUniformGroup(e.uniformGroup, ga)), s;
    }, t.prototype.setUniforms = function(e) {
      var r = this.shader.program, i = r.glPrograms[this.renderer.CONTEXT_UID];
      r.syncUniforms(i.uniformData, e, this.renderer);
    }, t.prototype.syncUniformGroup = function(e, r) {
      var i = this.getGlProgram();
      (!e.static || e.dirtyId !== i.uniformDirtyGroups[e.id]) && (i.uniformDirtyGroups[e.id] = e.dirtyId, this.syncUniforms(e, i, r));
    }, t.prototype.syncUniforms = function(e, r, i) {
      var s = e.syncUniforms[this.shader.program.id] || this.createSyncGroups(e);
      s(r.uniformData, e.uniforms, this.renderer, i);
    }, t.prototype.createSyncGroups = function(e) {
      var r = this.getSignature(e, this.shader.program.uniformData, "u");
      return this.cache[r] || (this.cache[r] = Fy(e, this.shader.program.uniformData)), e.syncUniforms[this.shader.program.id] = this.cache[r], e.syncUniforms[this.shader.program.id];
    }, t.prototype.syncUniformBufferGroup = function(e, r) {
      var i = this.getGlProgram();
      if (!e.static || e.dirtyId !== 0 || !i.uniformGroups[e.id]) {
        e.dirtyId = 0;
        var s = i.uniformGroups[e.id] || this.createSyncBufferGroup(e, i, r);
        e.buffer.update(), s(i.uniformData, e.uniforms, this.renderer, ga, e.buffer);
      }
      this.renderer.buffer.bindBufferBase(e.buffer, i.uniformBufferBindings[r]);
    }, t.prototype.createSyncBufferGroup = function(e, r, i) {
      var s = this.renderer.gl;
      this.renderer.buffer.bind(e.buffer);
      var o = this.gl.getUniformBlockIndex(r.program, i);
      r.uniformBufferBindings[i] = this.shader.uniformBindCount, s.uniformBlockBinding(r.program, o, this.shader.uniformBindCount), this.shader.uniformBindCount++;
      var h = this.getSignature(e, this.shader.program.uniformData, "ubo"), l = this._uboCache[h];
      if (l || (l = this._uboCache[h] = yp(e, this.shader.program.uniformData)), e.autoManage) {
        var c = new Float32Array(l.size / 4);
        e.buffer.update(c);
      }
      return r.uniformGroups[e.id] = l.syncFunc, r.uniformGroups[e.id];
    }, t.prototype.getSignature = function(e, r, i) {
      var s = e.uniforms, o = [i + "-"];
      for (var h in s)
        o.push(h), r[h] && o.push(r[h].type);
      return o.join("-");
    }, t.prototype.getGlProgram = function() {
      return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null;
    }, t.prototype.generateProgram = function(e) {
      var r = this.gl, i = e.program, s = xp(r, i);
      return i.glPrograms[this.renderer.CONTEXT_UID] = s, s;
    }, t.prototype.reset = function() {
      this.program = null, this.shader = null;
    }, t.prototype.destroy = function() {
      this.renderer = null, this.destroyed = !0;
    }, t;
  }()
);
function Qy(t, e) {
  return e === void 0 && (e = []), e[Ae.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.ADD] = [t.ONE, t.ONE], e[Ae.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.SCREEN] = [t.ONE, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.NONE] = [0, 0], e[Ae.NORMAL_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE], e[Ae.SCREEN_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[Ae.SRC_IN] = [t.DST_ALPHA, t.ZERO], e[Ae.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO], e[Ae.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA], e[Ae.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE], e[Ae.DST_IN] = [t.ZERO, t.SRC_ALPHA], e[Ae.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA], e[Ae.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA], e[Ae.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA], e[Ae.SUBTRACT] = [t.ONE, t.ONE, t.ONE, t.ONE, t.FUNC_REVERSE_SUBTRACT, t.FUNC_ADD], e;
}
var Ky = 0, tb = 1, eb = 2, rb = 3, ib = 4, nb = 5, qu = (
  /** @class */
  function() {
    function t() {
      this.gl = null, this.stateId = 0, this.polygonOffset = 0, this.blendMode = Ae.NONE, this._blendEq = !1, this.map = [], this.map[Ky] = this.setBlend, this.map[tb] = this.setOffset, this.map[eb] = this.setCullFace, this.map[rb] = this.setDepthTest, this.map[ib] = this.setFrontFace, this.map[nb] = this.setDepthMask, this.checks = [], this.defaultState = new Cn(), this.defaultState.blend = !0;
    }
    return t.prototype.contextChange = function(e) {
      this.gl = e, this.blendModes = Qy(e), this.set(this.defaultState), this.reset();
    }, t.prototype.set = function(e) {
      if (e = e || this.defaultState, this.stateId !== e.data) {
        for (var r = this.stateId ^ e.data, i = 0; r; )
          r & 1 && this.map[i].call(this, !!(e.data & 1 << i)), r = r >> 1, i++;
        this.stateId = e.data;
      }
      for (var i = 0; i < this.checks.length; i++)
        this.checks[i](this, e);
    }, t.prototype.forceState = function(e) {
      e = e || this.defaultState;
      for (var r = 0; r < this.map.length; r++)
        this.map[r].call(this, !!(e.data & 1 << r));
      for (var r = 0; r < this.checks.length; r++)
        this.checks[r](this, e);
      this.stateId = e.data;
    }, t.prototype.setBlend = function(e) {
      this.updateCheck(t.checkBlendMode, e), this.gl[e ? "enable" : "disable"](this.gl.BLEND);
    }, t.prototype.setOffset = function(e) {
      this.updateCheck(t.checkPolygonOffset, e), this.gl[e ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL);
    }, t.prototype.setDepthTest = function(e) {
      this.gl[e ? "enable" : "disable"](this.gl.DEPTH_TEST);
    }, t.prototype.setDepthMask = function(e) {
      this.gl.depthMask(e);
    }, t.prototype.setCullFace = function(e) {
      this.gl[e ? "enable" : "disable"](this.gl.CULL_FACE);
    }, t.prototype.setFrontFace = function(e) {
      this.gl.frontFace(this.gl[e ? "CW" : "CCW"]);
    }, t.prototype.setBlendMode = function(e) {
      if (e !== this.blendMode) {
        this.blendMode = e;
        var r = this.blendModes[e], i = this.gl;
        r.length === 2 ? i.blendFunc(r[0], r[1]) : i.blendFuncSeparate(r[0], r[1], r[2], r[3]), r.length === 6 ? (this._blendEq = !0, i.blendEquationSeparate(r[4], r[5])) : this._blendEq && (this._blendEq = !1, i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD));
      }
    }, t.prototype.setPolygonOffset = function(e, r) {
      this.gl.polygonOffset(e, r);
    }, t.prototype.reset = function() {
      this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.forceState(this.defaultState), this._blendEq = !0, this.blendMode = -1, this.setBlendMode(0);
    }, t.prototype.updateCheck = function(e, r) {
      var i = this.checks.indexOf(e);
      r && i === -1 ? this.checks.push(e) : !r && i !== -1 && this.checks.splice(i, 1);
    }, t.checkBlendMode = function(e, r) {
      e.setBlendMode(r.blendMode);
    }, t.checkPolygonOffset = function(e, r) {
      e.setPolygonOffset(1, r.polygonOffset);
    }, t.prototype.destroy = function() {
      this.gl = null;
    }, t;
  }()
), Zu = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.count = 0, this.checkCount = 0, this.maxIdle = ee.GC_MAX_IDLE, this.checkCountMax = ee.GC_MAX_CHECK_COUNT, this.mode = ee.GC_MODE;
    }
    return t.prototype.postrender = function() {
      this.renderer.renderingToScreen && (this.count++, this.mode !== ka.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run())));
    }, t.prototype.run = function() {
      for (var e = this.renderer.texture, r = e.managedTextures, i = !1, s = 0; s < r.length; s++) {
        var o = r[s];
        !o.framebuffer && this.count - o.touched > this.maxIdle && (e.destroyTexture(o, !0), r[s] = null, i = !0);
      }
      if (i) {
        for (var h = 0, s = 0; s < r.length; s++)
          r[s] !== null && (r[h++] = r[s]);
        r.length = h;
      }
    }, t.prototype.unload = function(e) {
      var r = this.renderer.texture, i = e._texture;
      i && !i.framebuffer && r.destroyTexture(i);
      for (var s = e.children.length - 1; s >= 0; s--)
        this.unload(e.children[s]);
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
);
function sb(t) {
  var e, r, i, s, o, h, l, c, _, y, w, b, E, T, P, O, H, Y, J, it, st, K, At;
  return "WebGL2RenderingContext" in globalThis && t instanceof globalThis.WebGL2RenderingContext ? At = (e = {}, e[xe.UNSIGNED_BYTE] = (r = {}, r[Ht.RGBA] = t.RGBA8, r[Ht.RGB] = t.RGB8, r[Ht.RG] = t.RG8, r[Ht.RED] = t.R8, r[Ht.RGBA_INTEGER] = t.RGBA8UI, r[Ht.RGB_INTEGER] = t.RGB8UI, r[Ht.RG_INTEGER] = t.RG8UI, r[Ht.RED_INTEGER] = t.R8UI, r[Ht.ALPHA] = t.ALPHA, r[Ht.LUMINANCE] = t.LUMINANCE, r[Ht.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA, r), e[xe.BYTE] = (i = {}, i[Ht.RGBA] = t.RGBA8_SNORM, i[Ht.RGB] = t.RGB8_SNORM, i[Ht.RG] = t.RG8_SNORM, i[Ht.RED] = t.R8_SNORM, i[Ht.RGBA_INTEGER] = t.RGBA8I, i[Ht.RGB_INTEGER] = t.RGB8I, i[Ht.RG_INTEGER] = t.RG8I, i[Ht.RED_INTEGER] = t.R8I, i), e[xe.UNSIGNED_SHORT] = (s = {}, s[Ht.RGBA_INTEGER] = t.RGBA16UI, s[Ht.RGB_INTEGER] = t.RGB16UI, s[Ht.RG_INTEGER] = t.RG16UI, s[Ht.RED_INTEGER] = t.R16UI, s[Ht.DEPTH_COMPONENT] = t.DEPTH_COMPONENT16, s), e[xe.SHORT] = (o = {}, o[Ht.RGBA_INTEGER] = t.RGBA16I, o[Ht.RGB_INTEGER] = t.RGB16I, o[Ht.RG_INTEGER] = t.RG16I, o[Ht.RED_INTEGER] = t.R16I, o), e[xe.UNSIGNED_INT] = (h = {}, h[Ht.RGBA_INTEGER] = t.RGBA32UI, h[Ht.RGB_INTEGER] = t.RGB32UI, h[Ht.RG_INTEGER] = t.RG32UI, h[Ht.RED_INTEGER] = t.R32UI, h[Ht.DEPTH_COMPONENT] = t.DEPTH_COMPONENT24, h), e[xe.INT] = (l = {}, l[Ht.RGBA_INTEGER] = t.RGBA32I, l[Ht.RGB_INTEGER] = t.RGB32I, l[Ht.RG_INTEGER] = t.RG32I, l[Ht.RED_INTEGER] = t.R32I, l), e[xe.FLOAT] = (c = {}, c[Ht.RGBA] = t.RGBA32F, c[Ht.RGB] = t.RGB32F, c[Ht.RG] = t.RG32F, c[Ht.RED] = t.R32F, c[Ht.DEPTH_COMPONENT] = t.DEPTH_COMPONENT32F, c), e[xe.HALF_FLOAT] = (_ = {}, _[Ht.RGBA] = t.RGBA16F, _[Ht.RGB] = t.RGB16F, _[Ht.RG] = t.RG16F, _[Ht.RED] = t.R16F, _), e[xe.UNSIGNED_SHORT_5_6_5] = (y = {}, y[Ht.RGB] = t.RGB565, y), e[xe.UNSIGNED_SHORT_4_4_4_4] = (w = {}, w[Ht.RGBA] = t.RGBA4, w), e[xe.UNSIGNED_SHORT_5_5_5_1] = (b = {}, b[Ht.RGBA] = t.RGB5_A1, b), e[xe.UNSIGNED_INT_2_10_10_10_REV] = (E = {}, E[Ht.RGBA] = t.RGB10_A2, E[Ht.RGBA_INTEGER] = t.RGB10_A2UI, E), e[xe.UNSIGNED_INT_10F_11F_11F_REV] = (T = {}, T[Ht.RGB] = t.R11F_G11F_B10F, T), e[xe.UNSIGNED_INT_5_9_9_9_REV] = (P = {}, P[Ht.RGB] = t.RGB9_E5, P), e[xe.UNSIGNED_INT_24_8] = (O = {}, O[Ht.DEPTH_STENCIL] = t.DEPTH24_STENCIL8, O), e[xe.FLOAT_32_UNSIGNED_INT_24_8_REV] = (H = {}, H[Ht.DEPTH_STENCIL] = t.DEPTH32F_STENCIL8, H), e) : At = (Y = {}, Y[xe.UNSIGNED_BYTE] = (J = {}, J[Ht.RGBA] = t.RGBA, J[Ht.RGB] = t.RGB, J[Ht.ALPHA] = t.ALPHA, J[Ht.LUMINANCE] = t.LUMINANCE, J[Ht.LUMINANCE_ALPHA] = t.LUMINANCE_ALPHA, J), Y[xe.UNSIGNED_SHORT_5_6_5] = (it = {}, it[Ht.RGB] = t.RGB, it), Y[xe.UNSIGNED_SHORT_4_4_4_4] = (st = {}, st[Ht.RGBA] = t.RGBA, st), Y[xe.UNSIGNED_SHORT_5_5_5_1] = (K = {}, K[Ht.RGBA] = t.RGBA, K), Y), At;
}
var Oa = (
  /** @class */
  function() {
    function t(e) {
      this.texture = e, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = !1, this.wrapMode = 33071, this.type = xe.UNSIGNED_BYTE, this.internalFormat = Ht.RGBA, this.samplerType = 0;
    }
    return t;
  }()
), Ju = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.boundTextures = [], this.currentLocation = -1, this.managedTextures = [], this._unknownBoundTextures = !1, this.unknownTexture = new We(), this.hasIntegerTextures = !1;
    }
    return t.prototype.contextChange = function() {
      var e = this.gl = this.renderer.gl;
      this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion, this.internalFormats = sb(e);
      var r = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);
      this.boundTextures.length = r;
      for (var i = 0; i < r; i++)
        this.boundTextures[i] = null;
      this.emptyTextures = {};
      var s = new Oa(e.createTexture());
      e.bindTexture(e.TEXTURE_2D, s.texture), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[e.TEXTURE_2D] = s, this.emptyTextures[e.TEXTURE_CUBE_MAP] = new Oa(e.createTexture()), e.bindTexture(e.TEXTURE_CUBE_MAP, this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);
      for (var i = 0; i < 6; i++)
        e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, null);
      e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MIN_FILTER, e.LINEAR);
      for (var i = 0; i < this.boundTextures.length; i++)
        this.bind(null, i);
    }, t.prototype.bind = function(e, r) {
      r === void 0 && (r = 0);
      var i = this.gl;
      if (e = e == null ? void 0 : e.castToBaseTexture(), e && e.valid && !e.parentTextureArray) {
        e.touched = this.renderer.textureGC.count;
        var s = e._glTextures[this.CONTEXT_UID] || this.initTexture(e);
        this.boundTextures[r] !== e && (this.currentLocation !== r && (this.currentLocation = r, i.activeTexture(i.TEXTURE0 + r)), i.bindTexture(e.target, s.texture)), s.dirtyId !== e.dirtyId && (this.currentLocation !== r && (this.currentLocation = r, i.activeTexture(i.TEXTURE0 + r)), this.updateTexture(e)), this.boundTextures[r] = e;
      } else
        this.currentLocation !== r && (this.currentLocation = r, i.activeTexture(i.TEXTURE0 + r)), i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture), this.boundTextures[r] = null;
    }, t.prototype.reset = function() {
      this._unknownBoundTextures = !0, this.hasIntegerTextures = !1, this.currentLocation = -1;
      for (var e = 0; e < this.boundTextures.length; e++)
        this.boundTextures[e] = this.unknownTexture;
    }, t.prototype.unbind = function(e) {
      var r = this, i = r.gl, s = r.boundTextures;
      if (this._unknownBoundTextures) {
        this._unknownBoundTextures = !1;
        for (var o = 0; o < s.length; o++)
          s[o] === this.unknownTexture && this.bind(null, o);
      }
      for (var o = 0; o < s.length; o++)
        s[o] === e && (this.currentLocation !== o && (i.activeTexture(i.TEXTURE0 + o), this.currentLocation = o), i.bindTexture(e.target, this.emptyTextures[e.target].texture), s[o] = null);
    }, t.prototype.ensureSamplerType = function(e) {
      var r = this, i = r.boundTextures, s = r.hasIntegerTextures, o = r.CONTEXT_UID;
      if (s)
        for (var h = e - 1; h >= 0; --h) {
          var l = i[h];
          if (l) {
            var c = l._glTextures[o];
            c.samplerType !== No.FLOAT && this.renderer.texture.unbind(l);
          }
        }
    }, t.prototype.initTexture = function(e) {
      var r = new Oa(this.gl.createTexture());
      return r.dirtyId = -1, e._glTextures[this.CONTEXT_UID] = r, this.managedTextures.push(e), e.on("dispose", this.destroyTexture, this), r;
    }, t.prototype.initTextureType = function(e, r) {
      var i, s;
      r.internalFormat = (s = (i = this.internalFormats[e.type]) === null || i === void 0 ? void 0 : i[e.format]) !== null && s !== void 0 ? s : e.format, this.webGLVersion === 2 && e.type === xe.HALF_FLOAT ? r.type = this.gl.HALF_FLOAT : r.type = e.type;
    }, t.prototype.updateTexture = function(e) {
      var r = e._glTextures[this.CONTEXT_UID];
      if (r) {
        var i = this.renderer;
        if (this.initTextureType(e, r), e.resource && e.resource.upload(i, e, r))
          r.samplerType !== No.FLOAT && (this.hasIntegerTextures = !0);
        else {
          var s = e.realWidth, o = e.realHeight, h = i.gl;
          (r.width !== s || r.height !== o || r.dirtyId < 0) && (r.width = s, r.height = o, h.texImage2D(e.target, 0, r.internalFormat, s, o, 0, e.format, r.type, null));
        }
        e.dirtyStyleId !== r.dirtyStyleId && this.updateTextureStyle(e), r.dirtyId = e.dirtyId;
      }
    }, t.prototype.destroyTexture = function(e, r) {
      var i = this.gl;
      if (e = e.castToBaseTexture(), e._glTextures[this.CONTEXT_UID] && (this.unbind(e), i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture), e.off("dispose", this.destroyTexture, this), delete e._glTextures[this.CONTEXT_UID], !r)) {
        var s = this.managedTextures.indexOf(e);
        s !== -1 && rs(this.managedTextures, s, 1);
      }
    }, t.prototype.updateTextureStyle = function(e) {
      var r = e._glTextures[this.CONTEXT_UID];
      r && ((e.mipmap === qi.POW2 || this.webGLVersion !== 2) && !e.isPowerOfTwo ? r.mipmap = !1 : r.mipmap = e.mipmap >= 1, this.webGLVersion !== 2 && !e.isPowerOfTwo ? r.wrapMode = Wi.CLAMP : r.wrapMode = e.wrapMode, e.resource && e.resource.style(this.renderer, e, r) || this.setStyle(e, r), r.dirtyStyleId = e.dirtyStyleId);
    }, t.prototype.setStyle = function(e, r) {
      var i = this.gl;
      if (r.mipmap && e.mipmap !== qi.ON_MANUAL && i.generateMipmap(e.target), i.texParameteri(e.target, i.TEXTURE_WRAP_S, r.wrapMode), i.texParameteri(e.target, i.TEXTURE_WRAP_T, r.wrapMode), r.mipmap) {
        i.texParameteri(e.target, i.TEXTURE_MIN_FILTER, e.scaleMode === zi.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST);
        var s = this.renderer.context.extensions.anisotropicFiltering;
        if (s && e.anisotropicLevel > 0 && e.scaleMode === zi.LINEAR) {
          var o = Math.min(e.anisotropicLevel, i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
          i.texParameterf(e.target, s.TEXTURE_MAX_ANISOTROPY_EXT, o);
        }
      } else
        i.texParameteri(e.target, i.TEXTURE_MIN_FILTER, e.scaleMode === zi.LINEAR ? i.LINEAR : i.NEAREST);
      i.texParameteri(e.target, i.TEXTURE_MAG_FILTER, e.scaleMode === zi.LINEAR ? i.LINEAR : i.NEAREST);
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), Tp = {
  __proto__: null,
  FilterSystem: Gu,
  BatchSystem: Du,
  ContextSystem: Bu,
  FramebufferSystem: ku,
  GeometrySystem: Xu,
  MaskSystem: Vu,
  ScissorSystem: Hu,
  StencilSystem: zu,
  ProjectionSystem: ju,
  RenderTextureSystem: Wu,
  ShaderSystem: Yu,
  StateSystem: qu,
  TextureGCSystem: Zu,
  TextureSystem: Ju
}, Fh = new wr(), Ap = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r, i) {
      r === void 0 && (r = Ss.UNKNOWN);
      var s = t.call(this) || this;
      return i = Object.assign({}, ee.RENDER_OPTIONS, i), s.options = i, s.type = r, s.screen = new Ye(0, 0, i.width, i.height), s.view = i.view || ee.ADAPTER.createCanvas(), s.resolution = i.resolution || ee.RESOLUTION, s.useContextAlpha = i.useContextAlpha, s.autoDensity = !!i.autoDensity, s.preserveDrawingBuffer = i.preserveDrawingBuffer, s.clearBeforeRender = i.clearBeforeRender, s._backgroundColor = 0, s._backgroundColorRgba = [0, 0, 0, 1], s._backgroundColorString = "#000000", s.backgroundColor = i.backgroundColor || s._backgroundColor, s.backgroundAlpha = i.backgroundAlpha, i.transparent !== void 0 && (ai("6.0.0", "Option transparent is deprecated, please use backgroundAlpha instead."), s.useContextAlpha = i.transparent, s.backgroundAlpha = i.transparent ? 0 : 1), s._lastObjectRendered = null, s.plugins = {}, s;
    }
    return e.prototype.initPlugins = function(r) {
      for (var i in r)
        this.plugins[i] = new r[i](this);
    }, Object.defineProperty(e.prototype, "width", {
      /**
       * Same as view.width, actual number of pixels in the canvas by horizontal.
       * @member {number}
       * @readonly
       * @default 800
       */
      get: function() {
        return this.view.width;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /**
       * Same as view.height, actual number of pixels in the canvas by vertical.
       * @member {number}
       * @readonly
       * @default 600
       */
      get: function() {
        return this.view.height;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.resize = function(r, i) {
      this.view.width = Math.round(r * this.resolution), this.view.height = Math.round(i * this.resolution);
      var s = this.view.width / this.resolution, o = this.view.height / this.resolution;
      this.screen.width = s, this.screen.height = o, this.autoDensity && (this.view.style.width = s + "px", this.view.style.height = o + "px"), this.emit("resize", s, o);
    }, e.prototype.generateTexture = function(r, i, s, o) {
      i === void 0 && (i = {}), typeof i == "number" && (ai("6.1.0", "generateTexture options (scaleMode, resolution, region) are now object options."), i = { scaleMode: i, resolution: s, region: o });
      var h = i.region, l = by(i, ["region"]);
      o = h || r.getLocalBounds(null, !0), o.width === 0 && (o.width = 1), o.height === 0 && (o.height = 1);
      var c = En.create(Cl({ width: o.width, height: o.height }, l));
      return Fh.tx = -o.x, Fh.ty = -o.y, this.render(r, {
        renderTexture: c,
        clear: !1,
        transform: Fh,
        skipUpdateTransform: !!r.parent
      }), c;
    }, e.prototype.destroy = function(r) {
      for (var i in this.plugins)
        this.plugins[i].destroy(), this.plugins[i] = null;
      r && this.view.parentNode && this.view.parentNode.removeChild(this.view);
      var s = this;
      s.plugins = null, s.type = Ss.UNKNOWN, s.view = null, s.screen = null, s._tempDisplayObjectParent = null, s.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null;
    }, Object.defineProperty(e.prototype, "backgroundColor", {
      /**
       * The background color to fill if not transparent
       * @member {number}
       */
      get: function() {
        return this._backgroundColor;
      },
      set: function(r) {
        this._backgroundColor = r, this._backgroundColorString = Tu(r), ss(r, this._backgroundColorRgba);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "backgroundAlpha", {
      /**
       * The background color alpha. Setting this to 0 will make the canvas transparent.
       * @member {number}
       */
      get: function() {
        return this._backgroundColorRgba[3];
      },
      set: function(r) {
        this._backgroundColorRgba[3] = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Oi)
), ob = (
  /** @class */
  function() {
    function t(e) {
      this.buffer = e || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0;
    }
    return t;
  }()
), ab = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e, this.managedBuffers = {}, this.boundBufferBases = {};
    }
    return t.prototype.destroy = function() {
      this.renderer = null;
    }, t.prototype.contextChange = function() {
      this.disposeAll(!0), this.gl = this.renderer.gl, this.CONTEXT_UID = this.renderer.CONTEXT_UID;
    }, t.prototype.bind = function(e) {
      var r = this, i = r.gl, s = r.CONTEXT_UID, o = e._glBuffers[s] || this.createGLBuffer(e);
      i.bindBuffer(e.type, o.buffer);
    }, t.prototype.bindBufferBase = function(e, r) {
      var i = this, s = i.gl, o = i.CONTEXT_UID;
      if (this.boundBufferBases[r] !== e) {
        var h = e._glBuffers[o] || this.createGLBuffer(e);
        this.boundBufferBases[r] = e, s.bindBufferBase(s.UNIFORM_BUFFER, r, h.buffer);
      }
    }, t.prototype.bindBufferRange = function(e, r, i) {
      var s = this, o = s.gl, h = s.CONTEXT_UID;
      i = i || 0;
      var l = e._glBuffers[h] || this.createGLBuffer(e);
      o.bindBufferRange(o.UNIFORM_BUFFER, r || 0, l.buffer, i * 256, 256);
    }, t.prototype.update = function(e) {
      var r = this, i = r.gl, s = r.CONTEXT_UID, o = e._glBuffers[s];
      if (e._updateID !== o.updateID)
        if (o.updateID = e._updateID, i.bindBuffer(e.type, o.buffer), o.byteLength >= e.data.byteLength)
          i.bufferSubData(e.type, 0, e.data);
        else {
          var h = e.static ? i.STATIC_DRAW : i.DYNAMIC_DRAW;
          o.byteLength = e.data.byteLength, i.bufferData(e.type, e.data, h);
        }
    }, t.prototype.dispose = function(e, r) {
      if (this.managedBuffers[e.id]) {
        delete this.managedBuffers[e.id];
        var i = e._glBuffers[this.CONTEXT_UID], s = this.gl;
        e.disposeRunner.remove(this), i && (r || s.deleteBuffer(i.buffer), delete e._glBuffers[this.CONTEXT_UID]);
      }
    }, t.prototype.disposeAll = function(e) {
      for (var r = Object.keys(this.managedBuffers), i = 0; i < r.length; i++)
        this.dispose(this.managedBuffers[r[i]], e);
    }, t.prototype.createGLBuffer = function(e) {
      var r = this, i = r.CONTEXT_UID, s = r.gl;
      return e._glBuffers[i] = new ob(s.createBuffer()), this.managedBuffers[e.id] = e, e.disposeRunner.add(this), e._glBuffers[i];
    }, t;
  }()
), Qu = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      var i = t.call(this, Ss.WEBGL, r) || this;
      return r = i.options, i.gl = null, i.CONTEXT_UID = 0, i.runners = {
        destroy: new jr("destroy"),
        contextChange: new jr("contextChange"),
        reset: new jr("reset"),
        update: new jr("update"),
        postrender: new jr("postrender"),
        prerender: new jr("prerender"),
        resize: new jr("resize")
      }, i.runners.contextChange.add(i), i.globalUniforms = new An({
        projectionMatrix: new wr()
      }, !0), i.addSystem(Vu, "mask").addSystem(Bu, "context").addSystem(qu, "state").addSystem(Yu, "shader").addSystem(Ju, "texture").addSystem(ab, "buffer").addSystem(Xu, "geometry").addSystem(ku, "framebuffer").addSystem(Hu, "scissor").addSystem(zu, "stencil").addSystem(ju, "projection").addSystem(Zu, "textureGC").addSystem(Gu, "filter").addSystem(Wu, "renderTexture").addSystem(Du, "batch"), i.initPlugins(e.__plugins), i.multisample = void 0, r.context ? i.context.initFromContext(r.context) : i.context.initFromOptions({
        alpha: !!i.useContextAlpha,
        antialias: r.antialias,
        premultipliedAlpha: i.useContextAlpha && i.useContextAlpha !== "notMultiplied",
        stencil: !0,
        preserveDrawingBuffer: r.preserveDrawingBuffer,
        powerPreference: i.options.powerPreference
      }), i.renderingToScreen = !0, X_(i.context.webGLVersion === 2 ? "WebGL 2" : "WebGL 1"), i.resize(i.options.width, i.options.height), i;
    }
    return e.create = function(r) {
      if (V_())
        return new e(r);
      throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.');
    }, e.prototype.contextChange = function() {
      var r = this.gl, i;
      if (this.context.webGLVersion === 1) {
        var s = r.getParameter(r.FRAMEBUFFER_BINDING);
        r.bindFramebuffer(r.FRAMEBUFFER, null), i = r.getParameter(r.SAMPLES), r.bindFramebuffer(r.FRAMEBUFFER, s);
      } else {
        var s = r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);
        r.bindFramebuffer(r.DRAW_FRAMEBUFFER, null), i = r.getParameter(r.SAMPLES), r.bindFramebuffer(r.DRAW_FRAMEBUFFER, s);
      }
      i >= Mr.HIGH ? this.multisample = Mr.HIGH : i >= Mr.MEDIUM ? this.multisample = Mr.MEDIUM : i >= Mr.LOW ? this.multisample = Mr.LOW : this.multisample = Mr.NONE;
    }, e.prototype.addSystem = function(r, i) {
      var s = new r(this);
      if (this[i])
        throw new Error('Whoops! The name "' + i + '" is already in use');
      this[i] = s;
      for (var o in this.runners)
        this.runners[o].add(s);
      return this;
    }, e.prototype.render = function(r, i) {
      var s, o, h, l;
      if (i && (i instanceof En ? (ai("6.0.0", "Renderer#render arguments changed, use options instead."), s = i, o = arguments[2], h = arguments[3], l = arguments[4]) : (s = i.renderTexture, o = i.clear, h = i.transform, l = i.skipUpdateTransform)), this.renderingToScreen = !s, this.runners.prerender.emit(), this.emit("prerender"), this.projection.transform = h, !this.context.isLost) {
        if (s || (this._lastObjectRendered = r), !l) {
          var c = r.enableTempParent();
          r.updateTransform(), r.disableTempParent(c);
        }
        this.renderTexture.bind(s), this.batch.currentRenderer.start(), (o !== void 0 ? o : this.clearBeforeRender) && this.renderTexture.clear(), r.render(this), this.batch.currentRenderer.flush(), s && s.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit("postrender");
      }
    }, e.prototype.generateTexture = function(r, i, s, o) {
      i === void 0 && (i = {});
      var h = t.prototype.generateTexture.call(this, r, i, s, o);
      return this.framebuffer.blit(), h;
    }, e.prototype.resize = function(r, i) {
      t.prototype.resize.call(this, r, i), this.runners.resize.emit(this.screen.height, this.screen.width);
    }, e.prototype.reset = function() {
      return this.runners.reset.emit(), this;
    }, e.prototype.clear = function() {
      this.renderTexture.bind(), this.renderTexture.clear();
    }, e.prototype.destroy = function(r) {
      this.runners.destroy.emit();
      for (var i in this.runners)
        this.runners[i].destroy();
      t.prototype.destroy.call(this, r), this.gl = null;
    }, Object.defineProperty(e.prototype, "extract", {
      /**
       * Please use `plugins.extract` instead.
       * @member {PIXI.Extract} extract
       * @deprecated since 6.0.0
       * @readonly
       */
      get: function() {
        return ai("6.0.0", "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."), this.plugins.extract;
      },
      enumerable: !1,
      configurable: !0
    }), e.registerPlugin = function(r, i) {
      ai("6.5.0", "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."), Qi.add({
        name: r,
        type: or.RendererPlugin,
        ref: i
      });
    }, e.__plugins = {}, e;
  }(Ap)
);
Qi.handleByMap(or.RendererPlugin, Qu.__plugins);
function wp(t) {
  return Qu.create(t);
}
var hb = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`, lb = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`, Pp = hb, Ku = lb, ub = (
  /** @class */
  function() {
    function t(e) {
      ai("6.1.0", "System class is deprecated, implemement ISystem interface instead."), this.renderer = e;
    }
    return t.prototype.destroy = function() {
      this.renderer = null;
    }, t;
  }()
), Va = (
  /** @class */
  function() {
    function t() {
      this.texArray = null, this.blend = 0, this.type = yi.TRIANGLES, this.start = 0, this.size = 0, this.data = null;
    }
    return t;
  }()
), Ha = (
  /** @class */
  function() {
    function t() {
      this.elements = [], this.ids = [], this.count = 0;
    }
    return t.prototype.clear = function() {
      for (var e = 0; e < this.count; e++)
        this.elements[e] = null;
      this.count = 0;
    }, t;
  }()
), za = (
  /** @class */
  function() {
    function t(e) {
      typeof e == "number" ? this.rawBinaryData = new ArrayBuffer(e) : e instanceof Uint8Array ? this.rawBinaryData = e.buffer : this.rawBinaryData = e, this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData);
    }
    return Object.defineProperty(t.prototype, "int8View", {
      /** View on the raw binary data as a `Int8Array`. */
      get: function() {
        return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "uint8View", {
      /** View on the raw binary data as a `Uint8Array`. */
      get: function() {
        return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "int16View", {
      /**  View on the raw binary data as a `Int16Array`. */
      get: function() {
        return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "uint16View", {
      /** View on the raw binary data as a `Uint16Array`. */
      get: function() {
        return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "int32View", {
      /** View on the raw binary data as a `Int32Array`. */
      get: function() {
        return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.view = function(e) {
      return this[e + "View"];
    }, t.prototype.destroy = function() {
      this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null;
    }, t.sizeOf = function(e) {
      switch (e) {
        case "int8":
        case "uint8":
          return 1;
        case "int16":
        case "uint16":
          return 2;
        case "int32":
        case "uint32":
        case "float32":
          return 4;
        default:
          throw new Error(e + " isn't a valid view type");
      }
    }, t;
  }()
), Ep = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return i.shaderGenerator = null, i.geometryClass = null, i.vertexSize = null, i.state = Cn.for2d(), i.size = ee.SPRITE_BATCH_SIZE * 4, i._vertexCount = 0, i._indexCount = 0, i._bufferedElements = [], i._bufferedTextures = [], i._bufferSize = 0, i._shader = null, i._packedGeometries = [], i._packedGeometryPoolSize = 2, i._flushId = 0, i._aBuffers = {}, i._iBuffers = {}, i.MAX_TEXTURES = 1, i.renderer.on("prerender", i.onPrerender, i), r.runners.contextChange.add(i), i._dcIndex = 0, i._aIndex = 0, i._iIndex = 0, i._attributeBuffer = null, i._indexBuffer = null, i._tempBoundTextures = [], i;
    }
    return e.prototype.contextChange = function() {
      var r = this.renderer.gl;
      ee.PREFER_ENV === Yi.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS), ee.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = dp(this.MAX_TEXTURES, r)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
      for (var i = 0; i < this._packedGeometryPoolSize; i++)
        this._packedGeometries[i] = new this.geometryClass();
      this.initFlushBuffers();
    }, e.prototype.initFlushBuffers = function() {
      for (var r = e._drawCallPool, i = e._textureArrayPool, s = this.size / 4, o = Math.floor(s / this.MAX_TEXTURES) + 1; r.length < s; )
        r.push(new Va());
      for (; i.length < o; )
        i.push(new Ha());
      for (var h = 0; h < this.MAX_TEXTURES; h++)
        this._tempBoundTextures[h] = null;
    }, e.prototype.onPrerender = function() {
      this._flushId = 0;
    }, e.prototype.render = function(r) {
      r._texture.valid && (this._vertexCount + r.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += r.vertexData.length / 2, this._indexCount += r.indices.length, this._bufferedTextures[this._bufferSize] = r._texture.baseTexture, this._bufferedElements[this._bufferSize++] = r);
    }, e.prototype.buildTexturesAndDrawCalls = function() {
      var r = this, i = r._bufferedTextures, s = r.MAX_TEXTURES, o = e._textureArrayPool, h = this.renderer.batch, l = this._tempBoundTextures, c = this.renderer.textureGC.count, _ = ++We._globalBatch, y = 0, w = o[0], b = 0;
      h.copyBoundTextures(l, s);
      for (var E = 0; E < this._bufferSize; ++E) {
        var T = i[E];
        i[E] = null, T._batchEnabled !== _ && (w.count >= s && (h.boundArray(w, l, _, s), this.buildDrawCalls(w, b, E), b = E, w = o[++y], ++_), T._batchEnabled = _, T.touched = c, w.elements[w.count++] = T);
      }
      w.count > 0 && (h.boundArray(w, l, _, s), this.buildDrawCalls(w, b, this._bufferSize), ++y, ++_);
      for (var E = 0; E < l.length; E++)
        l[E] = null;
      We._globalBatch = _;
    }, e.prototype.buildDrawCalls = function(r, i, s) {
      var o = this, h = o._bufferedElements, l = o._attributeBuffer, c = o._indexBuffer, _ = o.vertexSize, y = e._drawCallPool, w = this._dcIndex, b = this._aIndex, E = this._iIndex, T = y[w];
      T.start = this._iIndex, T.texArray = r;
      for (var P = i; P < s; ++P) {
        var O = h[P], H = O._texture.baseTexture, Y = wu[H.alphaMode ? 1 : 0][O.blendMode];
        h[P] = null, i < P && T.blend !== Y && (T.size = E - T.start, i = P, T = y[++w], T.texArray = r, T.start = E), this.packInterleavedGeometry(O, l, c, b, E), b += O.vertexData.length / 2 * _, E += O.indices.length, T.blend = Y;
      }
      i < s && (T.size = E - T.start, ++w), this._dcIndex = w, this._aIndex = b, this._iIndex = E;
    }, e.prototype.bindAndClearTexArray = function(r) {
      for (var i = this.renderer.texture, s = 0; s < r.count; s++)
        i.bind(r.elements[s], r.ids[s]), r.elements[s] = null;
      r.count = 0;
    }, e.prototype.updateGeometry = function() {
      var r = this, i = r._packedGeometries, s = r._attributeBuffer, o = r._indexBuffer;
      ee.CAN_UPLOAD_SAME_BUFFER ? (i[this._flushId]._buffer.update(s.rawBinaryData), i[this._flushId]._indexBuffer.update(o), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, i[this._flushId] = new this.geometryClass()), i[this._flushId]._buffer.update(s.rawBinaryData), i[this._flushId]._indexBuffer.update(o), this.renderer.geometry.bind(i[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++);
    }, e.prototype.drawBatches = function() {
      for (var r = this._dcIndex, i = this.renderer, s = i.gl, o = i.state, h = e._drawCallPool, l = null, c = 0; c < r; c++) {
        var _ = h[c], y = _.texArray, w = _.type, b = _.size, E = _.start, T = _.blend;
        l !== y && (l = y, this.bindAndClearTexArray(y)), this.state.blendMode = T, o.set(this.state), s.drawElements(w, b, s.UNSIGNED_SHORT, E * 2);
      }
    }, e.prototype.flush = function() {
      this._vertexCount !== 0 && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0);
    }, e.prototype.start = function() {
      this.renderer.state.set(this.state), this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES), this.renderer.shader.bind(this._shader), ee.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]);
    }, e.prototype.stop = function() {
      this.flush();
    }, e.prototype.destroy = function() {
      for (var r = 0; r < this._packedGeometryPoolSize; r++)
        this._packedGeometries[r] && this._packedGeometries[r].destroy();
      this.renderer.off("prerender", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), t.prototype.destroy.call(this);
    }, e.prototype.getAttributeBuffer = function(r) {
      var i = Lo(Math.ceil(r / 8)), s = xl(i), o = i * 8;
      this._aBuffers.length <= s && (this._iBuffers.length = s + 1);
      var h = this._aBuffers[o];
      return h || (this._aBuffers[o] = h = new za(o * this.vertexSize * 4)), h;
    }, e.prototype.getIndexBuffer = function(r) {
      var i = Lo(Math.ceil(r / 12)), s = xl(i), o = i * 12;
      this._iBuffers.length <= s && (this._iBuffers.length = s + 1);
      var h = this._iBuffers[s];
      return h || (this._iBuffers[s] = h = new Uint16Array(o)), h;
    }, e.prototype.packInterleavedGeometry = function(r, i, s, o, h) {
      for (var l = i.uint32View, c = i.float32View, _ = o / this.vertexSize, y = r.uvs, w = r.indices, b = r.vertexData, E = r._texture.baseTexture._batchLocation, T = Math.min(r.worldAlpha, 1), P = T < 1 && r._texture.baseTexture.alphaMode ? eh(r._tintRGB, T) : r._tintRGB + (T * 255 << 24), O = 0; O < b.length; O += 2)
        c[o++] = b[O], c[o++] = b[O + 1], c[o++] = y[O], c[o++] = y[O + 1], l[o++] = P, c[o++] = E;
      for (var O = 0; O < w.length; O++)
        s[h++] = _ + w[O];
    }, e._drawCallPool = [], e._textureArrayPool = [], e;
  }(Zo)
), Ip = (
  /** @class */
  function() {
    function t(e, r) {
      if (this.vertexSrc = e, this.fragTemplate = r, this.programCache = {}, this.defaultGroupCache = {}, r.indexOf("%count%") < 0)
        throw new Error('Fragment template must contain "%count%".');
      if (r.indexOf("%forloop%") < 0)
        throw new Error('Fragment template must contain "%forloop%".');
    }
    return t.prototype.generateShader = function(e) {
      if (!this.programCache[e]) {
        for (var r = new Int32Array(e), i = 0; i < e; i++)
          r[i] = i;
        this.defaultGroupCache[e] = An.from({ uSamplers: r }, !0);
        var s = this.fragTemplate;
        s = s.replace(/%count%/gi, "" + e), s = s.replace(/%forloop%/gi, this.generateSampleSrc(e)), this.programCache[e] = new Ds(this.vertexSrc, s);
      }
      var o = {
        tint: new Float32Array([1, 1, 1, 1]),
        translationMatrix: new wr(),
        default: this.defaultGroupCache[e]
      };
      return new cn(this.programCache[e], o);
    }, t.prototype.generateSampleSrc = function(e) {
      var r = "";
      r += `
`, r += `
`;
      for (var i = 0; i < e; i++)
        i > 0 && (r += `
else `), i < e - 1 && (r += "if(vTextureId < " + i + ".5)"), r += `
{`, r += `
	color = texture2D(uSamplers[` + i + "], vTextureCoord);", r += `
}`;
      return r += `
`, r += `
`, r;
    }, t;
  }()
), t0 = (
  /** @class */
  function(t) {
    yr(e, t);
    function e(r) {
      r === void 0 && (r = !1);
      var i = t.call(this) || this;
      return i._buffer = new Br(null, r, !1), i._indexBuffer = new Br(null, r, !0), i.addAttribute("aVertexPosition", i._buffer, 2, !1, xe.FLOAT).addAttribute("aTextureCoord", i._buffer, 2, !1, xe.FLOAT).addAttribute("aColor", i._buffer, 4, !0, xe.UNSIGNED_BYTE).addAttribute("aTextureId", i._buffer, 1, !0, xe.FLOAT).addIndex(i._indexBuffer), i;
    }
    return e;
  }(Gs)
), Yf = `precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`, qf = `varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`, Cp = (
  /** @class */
  function() {
    function t() {
    }
    return t.create = function(e) {
      var r = Object.assign({
        vertex: Yf,
        fragment: qf,
        geometryClass: t0,
        vertexSize: 6
      }, e), i = r.vertex, s = r.fragment, o = r.vertexSize, h = r.geometryClass;
      return (
        /** @class */
        function(l) {
          yr(c, l);
          function c(_) {
            var y = l.call(this, _) || this;
            return y.shaderGenerator = new Ip(i, s), y.geometryClass = h, y.vertexSize = o, y;
          }
          return c;
        }(Ep)
      );
    }, Object.defineProperty(t, "defaultVertexSrc", {
      /**
       * The default vertex shader source
       * @readonly
       */
      get: function() {
        return Yf;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "defaultFragmentTemplate", {
      /**
       * The default fragment shader source
       * @readonly
       */
      get: function() {
        return qf;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
), e0 = Cp.create();
Object.assign(e0, {
  extension: {
    name: "batch",
    type: or.RendererPlugin
  }
});
var $p = {}, fb = function(t) {
  Object.defineProperty($p, t, {
    get: function() {
      return ai("6.0.0", "PIXI.systems." + t + " has moved to PIXI." + t), rp[t];
    }
  });
};
for (var r0 in rp)
  fb(r0);
var Rp = {}, cb = function(t) {
  Object.defineProperty(Rp, t, {
    get: function() {
      return ai("6.0.0", "PIXI.resources." + t + " has moved to PIXI." + t), Tp[t];
    }
  });
};
for (var r0 in Tp)
  cb(r0);
var db = "6.5.2";
/*!
 * @pixi/accessibility - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Sp = {
  /**
   *  Flag for if the object is accessible. If true AccessibilityManager will overlay a
   *   shadow div with attributes set
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  accessible: !1,
  /**
   * Sets the title attribute of the shadow div
   * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'
   * @member {?string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleTitle: null,
  /**
   * Sets the aria-label attribute of the shadow div
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  accessibleHint: null,
  /**
   * @member {number}
   * @memberof PIXI.DisplayObject#
   * @private
   * @todo Needs docs.
   */
  tabIndex: 0,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleActive: !1,
  /**
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @todo Needs docs.
   */
  _accessibleDiv: null,
  /**
   * Specify the type of div the accessible layer is. Screen readers treat the element differently
   * depending on this type. Defaults to button.
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'button'
   */
  accessibleType: "button",
  /**
   * Specify the pointer-events the accessible div will use
   * Defaults to auto.
   * @member {string}
   * @memberof PIXI.DisplayObject#
   * @default 'auto'
   */
  accessiblePointerEvents: "auto",
  /**
   * Setting to false will prevent any children inside this container to
   * be accessible. Defaults to true.
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   * @default true
   */
  accessibleChildren: !0,
  renderId: -1
};
Lr.mixin(Sp);
var _b = 9, ya = 100, pb = 0, vb = 0, Zf = 2, Jf = 1, mb = -1e3, gb = -1e3, yb = 2, Np = (
  /** @class */
  function() {
    function t(e) {
      this.debug = !1, this._isActive = !1, this._isMobileAccessibility = !1, this.pool = [], this.renderId = 0, this.children = [], this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, this._hookDiv = null, (gi.tablet || gi.phone) && this.createTouchHook();
      var r = document.createElement("div");
      r.style.width = ya + "px", r.style.height = ya + "px", r.style.position = "absolute", r.style.top = pb + "px", r.style.left = vb + "px", r.style.zIndex = Zf.toString(), this.div = r, this.renderer = e, this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), globalThis.addEventListener("keydown", this._onKeyDown, !1);
    }
    return Object.defineProperty(t.prototype, "isActive", {
      /**
       * Value of `true` if accessibility is currently active and accessibility layers are showing.
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isActive;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "isMobileAccessibility", {
      /**
       * Value of `true` if accessibility is enabled for touch devices.
       * @member {boolean}
       * @readonly
       */
      get: function() {
        return this._isMobileAccessibility;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.createTouchHook = function() {
      var e = this, r = document.createElement("button");
      r.style.width = Jf + "px", r.style.height = Jf + "px", r.style.position = "absolute", r.style.top = mb + "px", r.style.left = gb + "px", r.style.zIndex = yb.toString(), r.style.backgroundColor = "#FF0000", r.title = "select to enable accessibility for this content", r.addEventListener("focus", function() {
        e._isMobileAccessibility = !0, e.activate(), e.destroyTouchHook();
      }), document.body.appendChild(r), this._hookDiv = r;
    }, t.prototype.destroyTouchHook = function() {
      this._hookDiv && (document.body.removeChild(this._hookDiv), this._hookDiv = null);
    }, t.prototype.activate = function() {
      var e;
      this._isActive || (this._isActive = !0, globalThis.document.addEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), (e = this.renderer.view.parentNode) === null || e === void 0 || e.appendChild(this.div));
    }, t.prototype.deactivate = function() {
      var e;
      !this._isActive || this._isMobileAccessibility || (this._isActive = !1, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), (e = this.div.parentNode) === null || e === void 0 || e.removeChild(this.div));
    }, t.prototype.updateAccessibleObjects = function(e) {
      if (!(!e.visible || !e.accessibleChildren)) {
        e.accessible && e.interactive && (e._accessibleActive || this.addChild(e), e.renderId = this.renderId);
        var r = e.children;
        if (r)
          for (var i = 0; i < r.length; i++)
            this.updateAccessibleObjects(r[i]);
      }
    }, t.prototype.update = function() {
      var e = performance.now();
      if (!(gi.android.device && e < this.androidUpdateCount) && (this.androidUpdateCount = e + this.androidUpdateFrequency, !!this.renderer.renderingToScreen)) {
        this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
        var r = this.renderer.view.getBoundingClientRect(), i = r.left, s = r.top, o = r.width, h = r.height, l = this.renderer, c = l.width, _ = l.height, y = l.resolution, w = o / c * y, b = h / _ * y, E = this.div;
        E.style.left = i + "px", E.style.top = s + "px", E.style.width = c + "px", E.style.height = _ + "px";
        for (var T = 0; T < this.children.length; T++) {
          var P = this.children[T];
          if (P.renderId !== this.renderId)
            P._accessibleActive = !1, rs(this.children, T, 1), this.div.removeChild(P._accessibleDiv), this.pool.push(P._accessibleDiv), P._accessibleDiv = null, T--;
          else {
            E = P._accessibleDiv;
            var O = P.hitArea, H = P.worldTransform;
            P.hitArea ? (E.style.left = (H.tx + O.x * H.a) * w + "px", E.style.top = (H.ty + O.y * H.d) * b + "px", E.style.width = O.width * H.a * w + "px", E.style.height = O.height * H.d * b + "px") : (O = P.getBounds(), this.capHitArea(O), E.style.left = O.x * w + "px", E.style.top = O.y * b + "px", E.style.width = O.width * w + "px", E.style.height = O.height * b + "px", E.title !== P.accessibleTitle && P.accessibleTitle !== null && (E.title = P.accessibleTitle), E.getAttribute("aria-label") !== P.accessibleHint && P.accessibleHint !== null && E.setAttribute("aria-label", P.accessibleHint)), (P.accessibleTitle !== E.title || P.tabIndex !== E.tabIndex) && (E.title = P.accessibleTitle, E.tabIndex = P.tabIndex, this.debug && this.updateDebugHTML(E));
          }
        }
        this.renderId++;
      }
    }, t.prototype.updateDebugHTML = function(e) {
      e.innerHTML = "type: " + e.type + "</br> title : " + e.title + "</br> tabIndex: " + e.tabIndex;
    }, t.prototype.capHitArea = function(e) {
      e.x < 0 && (e.width += e.x, e.x = 0), e.y < 0 && (e.height += e.y, e.y = 0);
      var r = this.renderer, i = r.width, s = r.height;
      e.x + e.width > i && (e.width = i - e.x), e.y + e.height > s && (e.height = s - e.y);
    }, t.prototype.addChild = function(e) {
      var r = this.pool.pop();
      r || (r = document.createElement("button"), r.style.width = ya + "px", r.style.height = ya + "px", r.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent", r.style.position = "absolute", r.style.zIndex = Zf.toString(), r.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? r.setAttribute("aria-live", "off") : r.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? r.setAttribute("aria-relevant", "additions") : r.setAttribute("aria-relevant", "text"), r.addEventListener("click", this._onClick.bind(this)), r.addEventListener("focus", this._onFocus.bind(this)), r.addEventListener("focusout", this._onFocusOut.bind(this))), r.style.pointerEvents = e.accessiblePointerEvents, r.type = e.accessibleType, e.accessibleTitle && e.accessibleTitle !== null ? r.title = e.accessibleTitle : (!e.accessibleHint || e.accessibleHint === null) && (r.title = "displayObject " + e.tabIndex), e.accessibleHint && e.accessibleHint !== null && r.setAttribute("aria-label", e.accessibleHint), this.debug && this.updateDebugHTML(r), e._accessibleActive = !0, e._accessibleDiv = r, r.displayObject = e, this.children.push(e), this.div.appendChild(e._accessibleDiv), e._accessibleDiv.tabIndex = e.tabIndex;
    }, t.prototype._onClick = function(e) {
      var r = this.renderer.plugins.interaction, i = e.target.displayObject, s = r.eventData;
      r.dispatchEvent(i, "click", s), r.dispatchEvent(i, "pointertap", s), r.dispatchEvent(i, "tap", s);
    }, t.prototype._onFocus = function(e) {
      e.target.getAttribute("aria-live") || e.target.setAttribute("aria-live", "assertive");
      var r = this.renderer.plugins.interaction, i = e.target.displayObject, s = r.eventData;
      r.dispatchEvent(i, "mouseover", s);
    }, t.prototype._onFocusOut = function(e) {
      e.target.getAttribute("aria-live") || e.target.setAttribute("aria-live", "polite");
      var r = this.renderer.plugins.interaction, i = e.target.displayObject, s = r.eventData;
      r.dispatchEvent(i, "mouseout", s);
    }, t.prototype._onKeyDown = function(e) {
      e.keyCode === _b && this.activate();
    }, t.prototype._onMouseMove = function(e) {
      e.movementX === 0 && e.movementY === 0 || this.deactivate();
    }, t.prototype.destroy = function() {
      this.destroyTouchHook(), this.div = null, globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0), globalThis.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null;
    }, t.extension = {
      name: "accessibility",
      type: [
        or.RendererPlugin,
        or.CanvasRendererPlugin
      ]
    }, t;
  }()
);
/*!
 * @pixi/interaction - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Rl = (
  /** @class */
  function() {
    function t() {
      this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new _r(), this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0;
    }
    return Object.defineProperty(t.prototype, "pointerId", {
      /**
       * The unique identifier of the pointer. It will be the same as `identifier`.
       * @readonly
       * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId
       */
      get: function() {
        return this.identifier;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getLocalPosition = function(e, r, i) {
      return e.worldTransform.applyInverse(i || this.global, r);
    }, t.prototype.copyEvent = function(e) {
      "isPrimary" in e && e.isPrimary && (this.isPrimary = !0), this.button = "button" in e && e.button;
      var r = "buttons" in e && e.buttons;
      this.buttons = Number.isInteger(r) ? r : "which" in e && e.which, this.width = "width" in e && e.width, this.height = "height" in e && e.height, this.tiltX = "tiltX" in e && e.tiltX, this.tiltY = "tiltY" in e && e.tiltY, this.pointerType = "pointerType" in e && e.pointerType, this.pressure = "pressure" in e && e.pressure, this.rotationAngle = "rotationAngle" in e && e.rotationAngle, this.twist = "twist" in e && e.twist || 0, this.tangentialPressure = "tangentialPressure" in e && e.tangentialPressure || 0;
    }, t.prototype.reset = function() {
      this.isPrimary = !1;
    }, t;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Sl = function(t, e) {
  return Sl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Sl(t, e);
};
function bb(t, e) {
  Sl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Lp = (
  /** @class */
  function() {
    function t() {
      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null;
    }
    return t.prototype.stopPropagation = function() {
      this.stopped = !0, this.stopPropagationHint = !0, this.stopsPropagatingAt = this.currentTarget;
    }, t.prototype.reset = function() {
      this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.currentTarget = null, this.target = null;
    }, t;
  }()
), Fa = (
  /** @class */
  function() {
    function t(e) {
      this._pointerId = e, this._flags = t.FLAGS.NONE;
    }
    return t.prototype._doSet = function(e, r) {
      r ? this._flags = this._flags | e : this._flags = this._flags & ~e;
    }, Object.defineProperty(t.prototype, "pointerId", {
      /**
       * Unique pointer id of the event
       * @readonly
       * @private
       * @member {number}
       */
      get: function() {
        return this._pointerId;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "flags", {
      /**
       * State of the tracking data, expressed as bit flags
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags;
      },
      set: function(e) {
        this._flags = e;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "none", {
      /**
       * Is the tracked event inactive (not over or down)?
       * @private
       * @member {number}
       */
      get: function() {
        return this._flags === t.FLAGS.NONE;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "over", {
      /**
       * Is the tracked event over the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & t.FLAGS.OVER) !== 0;
      },
      set: function(e) {
        this._doSet(t.FLAGS.OVER, e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "rightDown", {
      /**
       * Did the right mouse button come down in the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & t.FLAGS.RIGHT_DOWN) !== 0;
      },
      set: function(e) {
        this._doSet(t.FLAGS.RIGHT_DOWN, e);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "leftDown", {
      /**
       * Did the left mouse button come down in the DisplayObject?
       * @private
       * @member {boolean}
       */
      get: function() {
        return (this._flags & t.FLAGS.LEFT_DOWN) !== 0;
      },
      set: function(e) {
        this._doSet(t.FLAGS.LEFT_DOWN, e);
      },
      enumerable: !1,
      configurable: !0
    }), t.FLAGS = Object.freeze({
      NONE: 0,
      OVER: 1 << 0,
      LEFT_DOWN: 1 << 1,
      RIGHT_DOWN: 1 << 2
    }), t;
  }()
), xb = (
  /** @class */
  function() {
    function t() {
      this._tempPoint = new _r();
    }
    return t.prototype.recursiveFindHit = function(e, r, i, s, o) {
      var h;
      if (!r || !r.visible)
        return !1;
      var l = e.data.global;
      o = r.interactive || o;
      var c = !1, _ = o, y = !0;
      if (r.hitArea)
        s && (r.worldTransform.applyInverse(l, this._tempPoint), r.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? c = !0 : (s = !1, y = !1)), _ = !1;
      else if (r._mask && s) {
        var w = r._mask.isMaskData ? r._mask.maskObject : r._mask;
        w && !(!((h = w.containsPoint) === null || h === void 0) && h.call(w, l)) && (s = !1);
      }
      if (y && r.interactiveChildren && r.children)
        for (var b = r.children, E = b.length - 1; E >= 0; E--) {
          var T = b[E], P = this.recursiveFindHit(e, T, i, s, _);
          if (P) {
            if (!T.parent)
              continue;
            _ = !1, P && (e.target && (s = !1), c = !0);
          }
        }
      return o && (s && !e.target && !r.hitArea && r.containsPoint && r.containsPoint(l) && (c = !0), r.interactive && (c && !e.target && (e.target = r), i && i(e, r, !!c))), c;
    }, t.prototype.findHit = function(e, r, i, s) {
      this.recursiveFindHit(e, r, i, s, !1);
    }, t;
  }()
), Op = {
  interactive: !1,
  interactiveChildren: !0,
  hitArea: null,
  /**
   * If enabled, the mouse cursor use the pointer behavior when hovered over the displayObject if it is interactive
   * Setting this changes the 'cursor' property to `'pointer'`.
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.buttonMode = true;
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  get buttonMode() {
    return this.cursor === "pointer";
  },
  set buttonMode(t) {
    t ? this.cursor = "pointer" : this.cursor === "pointer" && (this.cursor = null);
  },
  /**
   * This defines what cursor mode is used when the mouse cursor
   * is hovered over the displayObject.
   * @example
   * const sprite = new PIXI.Sprite(texture);
   * sprite.interactive = true;
   * sprite.cursor = 'wait';
   * @see https://developer.mozilla.org/en/docs/Web/CSS/cursor
   * @member {string}
   * @memberof PIXI.DisplayObject#
   */
  cursor: null,
  /**
   * Internal set of all active pointers, by identifier
   * @member {Map<number, InteractionTrackingData>}
   * @memberof PIXI.DisplayObject#
   * @private
   */
  get trackedPointers() {
    return this._trackedPointers === void 0 && (this._trackedPointers = {}), this._trackedPointers;
  },
  /**
   * Map of all tracked pointers, by identifier. Use trackedPointers to access.
   * @private
   * @type {Map<number, InteractionTrackingData>}
   */
  _trackedPointers: void 0
};
Lr.mixin(Op);
var ba = 1, xa = {
  target: null,
  data: {
    global: null
  }
}, Fp = (
  /** @class */
  function(t) {
    bb(e, t);
    function e(r, i) {
      var s = t.call(this) || this;
      window.hijackedMouse = s
      return i = i || {}, s.renderer = r, s.autoPreventDefault = i.autoPreventDefault !== void 0 ? i.autoPreventDefault : !0, s.interactionFrequency = i.interactionFrequency || 10, s.mouse = new Rl(), s.mouse.identifier = ba, s.mouse.global.set(-999999), s.activeInteractionData = {}, s.activeInteractionData[ba] = s.mouse, s.interactionDataPool = [], s.eventData = new Lp(), s.interactionDOMElement = null, s.moveWhenInside = !1, s.eventsAdded = !1, s.tickerAdded = !1, s.mouseOverRenderer = !("PointerEvent" in globalThis), s.supportsTouchEvents = "ontouchstart" in globalThis, s.supportsPointerEvents = !!globalThis.PointerEvent, s.onPointerUp = s.onPointerUp.bind(s), s.processPointerUp = s.processPointerUp.bind(s), s.onPointerCancel = s.onPointerCancel.bind(s), s.processPointerCancel = s.processPointerCancel.bind(s), s.onPointerDown = s.onPointerDown.bind(s), s.processPointerDown = s.processPointerDown.bind(s), s.onPointerMove = s.onPointerMove.bind(s), s.processPointerMove = s.processPointerMove.bind(s), s.onPointerOut = s.onPointerOut.bind(s), s.processPointerOverOut = s.processPointerOverOut.bind(s), s.onPointerOver = s.onPointerOver.bind(s), s.cursorStyles = {
        default: "inherit",
        pointer: "pointer"
      }, s.currentCursorMode = null, s.cursor = null, s.resolution = 1, s.delayedEvents = [], s.search = new xb(), s._tempDisplayObject = new Cu(), s._eventListenerOptions = { capture: !0, passive: !1 }, s._useSystemTicker = i.useSystemTicker !== void 0 ? i.useSystemTicker : !0, s.setTargetElement(s.renderer.view, s.renderer.resolution), s;
    }
    return Object.defineProperty(e.prototype, "useSystemTicker", {
      /**
       * Should the InteractionManager automatically add {@link tickerUpdate} to {@link PIXI.Ticker.system}.
       * @default true
       */
      get: function() {
        return this._useSystemTicker;
      },
      set: function(r) {
        this._useSystemTicker = r, r ? this.addTickerListener() : this.removeTickerListener();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "lastObjectRendered", {
      /**
       * Last rendered object or temp object.
       * @readonly
       * @protected
       */
      get: function() {
        return this.renderer._lastObjectRendered || this._tempDisplayObject;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.hitTest = function(r, i) {
      return xa.target = null, xa.data.global = r, i || (i = this.lastObjectRendered), this.processInteractive(xa, i, null, !0), xa.target;
    }, e.prototype.setTargetElement = function(r, i) {
      i === void 0 && (i = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = r, this.resolution = i, this.addEvents(), this.addTickerListener();
    }, e.prototype.addTickerListener = function() {
      this.tickerAdded || !this.interactionDOMElement || !this._useSystemTicker || (Hr.system.add(this.tickerUpdate, this, Zi.INTERACTION), this.tickerAdded = !0);
    }, e.prototype.removeTickerListener = function() {
      this.tickerAdded && (Hr.system.remove(this.tickerUpdate, this), this.tickerAdded = !1);
    }, e.prototype.addEvents = function() {
      if (!(this.eventsAdded || !this.interactionDOMElement)) {
        var r = this.interactionDOMElement.style;
        globalThis.navigator.msPointerEnabled ? (r.msContentZooming = "none", r.msTouchAction = "none") : this.supportsPointerEvents && (r.touchAction = "none"), this.supportsPointerEvents ? (globalThis.document.addEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.addEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.addEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.eventsAdded = !0;
      }
    }, e.prototype.removeEvents = function() {
      if (!(!this.eventsAdded || !this.interactionDOMElement)) {
        var r = this.interactionDOMElement.style;
        globalThis.navigator.msPointerEnabled ? (r.msContentZooming = "", r.msTouchAction = "") : this.supportsPointerEvents && (r.touchAction = ""), this.supportsPointerEvents ? (globalThis.document.removeEventListener("pointermove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions), globalThis.removeEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener("mousemove", this.onPointerMove, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, this._eventListenerOptions), globalThis.removeEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, this._eventListenerOptions), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)), this.interactionDOMElement = null, this.eventsAdded = !1;
      }
    }, e.prototype.tickerUpdate = function(r) {
      this._deltaTime += r, !(this._deltaTime < this.interactionFrequency) && (this._deltaTime = 0, this.update());
    }, e.prototype.update = function() {
      if (this.interactionDOMElement) {
        if (this._didMove) {
          this._didMove = !1;
          return;
        }
        this.cursor = null;
        for (var r in this.activeInteractionData)
          if (this.activeInteractionData.hasOwnProperty(r)) {
            var i = this.activeInteractionData[r];
            if (i.originalEvent && i.pointerType !== "touch") {
              var s = this.configureInteractionEventForDOMEvent(this.eventData, i.originalEvent, i);
              this.processInteractive(s, this.lastObjectRendered, this.processPointerOverOut, !0);
            }
          }
        this.setCursorMode(this.cursor);
      }
    }, e.prototype.setCursorMode = function(r) {
      r = r || "default";
      var i = !0;
      if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (i = !1), this.currentCursorMode !== r) {
        this.currentCursorMode = r;
        var s = this.cursorStyles[r];
        if (s)
          switch (typeof s) {
            case "string":
              i && (this.interactionDOMElement.style.cursor = s);
              break;
            case "function":
              s(r);
              break;
            case "object":
              i && Object.assign(this.interactionDOMElement.style, s);
              break;
          }
        else
          i && typeof r == "string" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, r) && (this.interactionDOMElement.style.cursor = r);
      }
    }, e.prototype.dispatchEvent = function(r, i, s) {
      (!s.stopPropagationHint || r === s.stopsPropagatingAt) && (s.currentTarget = r, s.type = i, r.emit(i, s), r[i] && r[i](s));
    }, e.prototype.delayDispatchEvent = function(r, i, s) {
      this.delayedEvents.push({ displayObject: r, eventString: i, eventData: s });
    }, e.prototype.mapPositionToPoint = function(r, i, s) {
      var o;
      this.interactionDOMElement.parentElement ? o = this.interactionDOMElement.getBoundingClientRect() : o = {
        x: 0,
        y: 0,
        width: this.interactionDOMElement.width,
        height: this.interactionDOMElement.height,
        left: 0,
        top: 0
      };
      var h = 1 / this.resolution;
      r.x = (i - o.left) * (this.interactionDOMElement.width / o.width) * h, r.y = (s - o.top) * (this.interactionDOMElement.height / o.height) * h;
    }, e.prototype.processInteractive = function(r, i, s, o) {
      var h = this.search.findHit(r, i, s, o), l = this.delayedEvents;
      if (!l.length)
        return h;
      r.stopPropagationHint = !1;
      var c = l.length;
      this.delayedEvents = [];
      for (var _ = 0; _ < c; _++) {
        var y = l[_], w = y.displayObject, b = y.eventString, E = y.eventData;
        E.stopsPropagatingAt === w && (E.stopPropagationHint = !0), this.dispatchEvent(w, b, E);
      }
      return h;
    }, e.prototype.onPointerDown = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var i = this.normalizeToPointerData(r);
        if (this.autoPreventDefault && i[0].isNormalized) {
          var s = r.cancelable || !("cancelable" in r);
          s && r.preventDefault();
        }
        for (var o = i.length, h = 0; h < o; h++) {
          var l = i[h], c = this.getInteractionDataForPointerId(l), _ = this.configureInteractionEventForDOMEvent(this.eventData, l, c);
          if (_.data.originalEvent = r, this.processInteractive(_, this.lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", _), l.pointerType === "touch")
            this.emit("touchstart", _);
          else if (l.pointerType === "mouse" || l.pointerType === "pen") {
            var y = l.button === 2;
            this.emit(y ? "rightdown" : "mousedown", this.eventData);
          }
        }
      }
    }, e.prototype.processPointerDown = function(r, i, s) {
      var o = r.data, h = r.data.identifier;
      if (s) {
        if (i.trackedPointers[h] || (i.trackedPointers[h] = new Fa(h)), this.dispatchEvent(i, "pointerdown", r), o.pointerType === "touch")
          this.dispatchEvent(i, "touchstart", r);
        else if (o.pointerType === "mouse" || o.pointerType === "pen") {
          var l = o.button === 2;
          l ? i.trackedPointers[h].rightDown = !0 : i.trackedPointers[h].leftDown = !0, this.dispatchEvent(i, l ? "rightdown" : "mousedown", r);
        }
      }
    }, e.prototype.onPointerComplete = function(r, i, s) {
      var o = this.normalizeToPointerData(r), h = o.length, l = r.target;
      r.composedPath && r.composedPath().length > 0 && (l = r.composedPath()[0]);
      for (var c = l !== this.interactionDOMElement ? "outside" : "", _ = 0; _ < h; _++) {
        var y = o[_], w = this.getInteractionDataForPointerId(y), b = this.configureInteractionEventForDOMEvent(this.eventData, y, w);
        if (b.data.originalEvent = r, this.processInteractive(b, this.lastObjectRendered, s, i || !c), this.emit(i ? "pointercancel" : "pointerup" + c, b), y.pointerType === "mouse" || y.pointerType === "pen") {
          var E = y.button === 2;
          this.emit(E ? "rightup" + c : "mouseup" + c, b);
        } else
          y.pointerType === "touch" && (this.emit(i ? "touchcancel" : "touchend" + c, b), this.releaseInteractionDataForPointerId(y.pointerId));
      }
    }, e.prototype.onPointerCancel = function(r) {
      this.supportsTouchEvents && r.pointerType === "touch" || this.onPointerComplete(r, !0, this.processPointerCancel);
    }, e.prototype.processPointerCancel = function(r, i) {
      var s = r.data, o = r.data.identifier;
      i.trackedPointers[o] !== void 0 && (delete i.trackedPointers[o], this.dispatchEvent(i, "pointercancel", r), s.pointerType === "touch" && this.dispatchEvent(i, "touchcancel", r));
    }, e.prototype.onPointerUp = function(r) {
      this.supportsTouchEvents && r.pointerType === "touch" || this.onPointerComplete(r, !1, this.processPointerUp);
    }, e.prototype.processPointerUp = function(r, i, s) {
      var o = r.data, h = r.data.identifier, l = i.trackedPointers[h], c = o.pointerType === "touch", _ = o.pointerType === "mouse" || o.pointerType === "pen", y = !1;
      if (_) {
        var w = o.button === 2, b = Fa.FLAGS, E = w ? b.RIGHT_DOWN : b.LEFT_DOWN, T = l !== void 0 && l.flags & E;
        s ? (this.dispatchEvent(i, w ? "rightup" : "mouseup", r), T && (this.dispatchEvent(i, w ? "rightclick" : "click", r), y = !0)) : T && this.dispatchEvent(i, w ? "rightupoutside" : "mouseupoutside", r), l && (w ? l.rightDown = !1 : l.leftDown = !1);
      }
      s ? (this.dispatchEvent(i, "pointerup", r), c && this.dispatchEvent(i, "touchend", r), l && ((!_ || y) && this.dispatchEvent(i, "pointertap", r), c && (this.dispatchEvent(i, "tap", r), l.over = !1))) : l && (this.dispatchEvent(i, "pointerupoutside", r), c && this.dispatchEvent(i, "touchendoutside", r)), l && l.none && delete i.trackedPointers[h];
    }, e.prototype.onPointerMove = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var i = this.normalizeToPointerData(r);
        (i[0].pointerType === "mouse" || i[0].pointerType === "pen") && (this._didMove = !0, this.cursor = null);
        for (var s = i.length, o = 0; o < s; o++) {
          var h = i[o], l = this.getInteractionDataForPointerId(h), c = this.configureInteractionEventForDOMEvent(this.eventData, h, l);
          c.data.originalEvent = r, this.processInteractive(c, this.lastObjectRendered, this.processPointerMove, !0), this.emit("pointermove", c), h.pointerType === "touch" && this.emit("touchmove", c), (h.pointerType === "mouse" || h.pointerType === "pen") && this.emit("mousemove", c);
        }
        i[0].pointerType === "mouse" && this.setCursorMode(this.cursor);
      }
    }, e.prototype.processPointerMove = function(r, i, s) {
      var o = r.data, h = o.pointerType === "touch", l = o.pointerType === "mouse" || o.pointerType === "pen";
      l && this.processPointerOverOut(r, i, s), (!this.moveWhenInside || s) && (this.dispatchEvent(i, "pointermove", r), h && this.dispatchEvent(i, "touchmove", r), l && this.dispatchEvent(i, "mousemove", r));
    }, e.prototype.onPointerOut = function(r) {
      if (!(this.supportsTouchEvents && r.pointerType === "touch")) {
        var i = this.normalizeToPointerData(r), s = i[0];
        s.pointerType === "mouse" && (this.mouseOverRenderer = !1, this.setCursorMode(null));
        var o = this.getInteractionDataForPointerId(s), h = this.configureInteractionEventForDOMEvent(this.eventData, s, o);
        h.data.originalEvent = s, this.processInteractive(h, this.lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", h), s.pointerType === "mouse" || s.pointerType === "pen" ? this.emit("mouseout", h) : this.releaseInteractionDataForPointerId(o.identifier);
      }
    }, e.prototype.processPointerOverOut = function(r, i, s) {
      var o = r.data, h = r.data.identifier, l = o.pointerType === "mouse" || o.pointerType === "pen", c = i.trackedPointers[h];
      s && !c && (c = i.trackedPointers[h] = new Fa(h)), c !== void 0 && (s && this.mouseOverRenderer ? (c.over || (c.over = !0, this.delayDispatchEvent(i, "pointerover", r), l && this.delayDispatchEvent(i, "mouseover", r)), l && this.cursor === null && (this.cursor = i.cursor)) : c.over && (c.over = !1, this.dispatchEvent(i, "pointerout", this.eventData), l && this.dispatchEvent(i, "mouseout", r), c.none && delete i.trackedPointers[h]));
    }, e.prototype.onPointerOver = function(r) {
      var i = this.normalizeToPointerData(r), s = i[0], o = this.getInteractionDataForPointerId(s), h = this.configureInteractionEventForDOMEvent(this.eventData, s, o);
      h.data.originalEvent = s, s.pointerType === "mouse" && (this.mouseOverRenderer = !0), this.emit("pointerover", h), (s.pointerType === "mouse" || s.pointerType === "pen") && this.emit("mouseover", h);
    }, e.prototype.getInteractionDataForPointerId = function(r) {
      var i = r.pointerId, s;
      return i === ba || r.pointerType === "mouse" ? s = this.mouse : this.activeInteractionData[i] ? s = this.activeInteractionData[i] : (s = this.interactionDataPool.pop() || new Rl(), s.identifier = i, this.activeInteractionData[i] = s), s.copyEvent(r), s;
    }, e.prototype.releaseInteractionDataForPointerId = function(r) {
      var i = this.activeInteractionData[r];
      i && (delete this.activeInteractionData[r], i.reset(), this.interactionDataPool.push(i));
    }, e.prototype.configureInteractionEventForDOMEvent = function(r, i, s) {
      return r.data = s, this.mapPositionToPoint(s.global, i.clientX, i.clientY), i.pointerType === "touch" && (i.globalX = s.global.x, i.globalY = s.global.y), s.originalEvent = i, r.reset(), r;
    }, e.prototype.normalizeToPointerData = function(r) {
      var i = [];
      if (this.supportsTouchEvents && r instanceof TouchEvent)
        for (var s = 0, o = r.changedTouches.length; s < o; s++) {
          var h = r.changedTouches[s];
          typeof h.button == "undefined" && (h.button = r.touches.length ? 1 : 0), typeof h.buttons == "undefined" && (h.buttons = r.touches.length ? 1 : 0), typeof h.isPrimary == "undefined" && (h.isPrimary = r.touches.length === 1 && r.type === "touchstart"), typeof h.width == "undefined" && (h.width = h.radiusX || 1), typeof h.height == "undefined" && (h.height = h.radiusY || 1), typeof h.tiltX == "undefined" && (h.tiltX = 0), typeof h.tiltY == "undefined" && (h.tiltY = 0), typeof h.pointerType == "undefined" && (h.pointerType = "touch"), typeof h.pointerId == "undefined" && (h.pointerId = h.identifier || 0), typeof h.pressure == "undefined" && (h.pressure = h.force || 0.5), typeof h.twist == "undefined" && (h.twist = 0), typeof h.tangentialPressure == "undefined" && (h.tangentialPressure = 0), typeof h.layerX == "undefined" && (h.layerX = h.offsetX = h.clientX), typeof h.layerY == "undefined" && (h.layerY = h.offsetY = h.clientY), h.isNormalized = !0, i.push(h);
        }
      else if (!globalThis.MouseEvent || r instanceof MouseEvent && (!this.supportsPointerEvents || !(r instanceof globalThis.PointerEvent))) {
        var l = r;
        typeof l.isPrimary == "undefined" && (l.isPrimary = !0), typeof l.width == "undefined" && (l.width = 1), typeof l.height == "undefined" && (l.height = 1), typeof l.tiltX == "undefined" && (l.tiltX = 0), typeof l.tiltY == "undefined" && (l.tiltY = 0), typeof l.pointerType == "undefined" && (l.pointerType = "mouse"), typeof l.pointerId == "undefined" && (l.pointerId = ba), typeof l.pressure == "undefined" && (l.pressure = 0.5), typeof l.twist == "undefined" && (l.twist = 0), typeof l.tangentialPressure == "undefined" && (l.tangentialPressure = 0), l.isNormalized = !0, i.push(l);
      } else
        i.push(r);
      return i;
    }, e.prototype.destroy = function() {
      this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null;
    }, e.extension = {
      name: "interaction",
      type: [
        or.RendererPlugin,
        or.CanvasRendererPlugin
      ]
    },e;
  }(Oi)
);
/*!
 * @pixi/extract - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Qf = new Ye(), Kf = 4, Mp = (
  /** @class */
  function() {
    function t(e) {
      this.renderer = e;
    }
    return t.prototype.image = function(e, r, i) {
      var s = new Image();
      return s.src = this.base64(e, r, i), s;
    }, t.prototype.base64 = function(e, r, i) {
      return this.canvas(e).toDataURL(r, i);
    }, t.prototype.canvas = function(e, r) {
      var i = this.renderer, s, o = !1, h, l = !1;
      e && (e instanceof En ? h = e : (h = this.renderer.generateTexture(e), l = !0)), h ? (s = h.baseTexture.resolution, r = r != null ? r : h.frame, o = !1, i.renderTexture.bind(h)) : (s = i.resolution, r || (r = Qf, r.width = i.width, r.height = i.height), o = !0, i.renderTexture.bind(null));
      var c = Math.round(r.width * s), _ = Math.round(r.height * s), y = new Al(c, _, 1), w = new Uint8Array(Kf * c * _), b = i.gl;
      b.readPixels(Math.round(r.x * s), Math.round(r.y * s), c, _, b.RGBA, b.UNSIGNED_BYTE, w);
      var E = y.context.getImageData(0, 0, c, _);
      if (t.arrayPostDivide(w, E.data), y.context.putImageData(E, 0, 0), o) {
        var T = new Al(y.width, y.height, 1);
        T.context.scale(1, -1), T.context.drawImage(y.canvas, 0, -_), y.destroy(), y = T;
      }
      return l && h.destroy(!0), y.canvas;
    }, t.prototype.pixels = function(e, r) {
      var i = this.renderer, s, o, h = !1;
      e && (e instanceof En ? o = e : (o = this.renderer.generateTexture(e), h = !0)), o ? (s = o.baseTexture.resolution, r = r != null ? r : o.frame, i.renderTexture.bind(o)) : (s = i.resolution, r || (r = Qf, r.width = i.width, r.height = i.height), i.renderTexture.bind(null));
      var l = Math.round(r.width * s), c = Math.round(r.height * s), _ = new Uint8Array(Kf * l * c), y = i.gl;
      return y.readPixels(Math.round(r.x * s), Math.round(r.y * s), l, c, y.RGBA, y.UNSIGNED_BYTE, _), h && o.destroy(!0), t.arrayPostDivide(_, _), _;
    }, t.prototype.destroy = function() {
      this.renderer = null;
    }, t.arrayPostDivide = function(e, r) {
      for (var i = 0; i < e.length; i += 4) {
        var s = r[i + 3] = e[i + 3];
        s !== 0 ? (r[i] = Math.round(Math.min(e[i] * 255 / s, 255)), r[i + 1] = Math.round(Math.min(e[i + 1] * 255 / s, 255)), r[i + 2] = Math.round(Math.min(e[i + 2] * 255 / s, 255))) : (r[i] = e[i], r[i + 1] = e[i + 1], r[i + 2] = e[i + 2]);
      }
    }, t.extension = {
      name: "extract",
      type: or.RendererPlugin
    }, t;
  }()
);
/*!
 * @pixi/loaders - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ta = (
  /** @class */
  function() {
    function t(e, r, i) {
      r === void 0 && (r = !1), this._fn = e, this._once = r, this._thisArg = i, this._next = this._prev = this._owner = null;
    }
    return t.prototype.detach = function() {
      return this._owner === null ? !1 : (this._owner.detach(this), !0);
    }, t;
  }()
);
function tc(t, e) {
  return t._head ? (t._tail._next = e, e._prev = t._tail, t._tail = e) : (t._head = e, t._tail = e), e._owner = t, e;
}
var ln = (
  /** @class */
  function() {
    function t() {
      this._head = this._tail = void 0;
    }
    return t.prototype.handlers = function(e) {
      e === void 0 && (e = !1);
      var r = this._head;
      if (e)
        return !!r;
      for (var i = []; r; )
        i.push(r), r = r._next;
      return i;
    }, t.prototype.has = function(e) {
      if (!(e instanceof Ta))
        throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");
      return e._owner === this;
    }, t.prototype.dispatch = function() {
      for (var e = arguments, r = [], i = 0; i < arguments.length; i++)
        r[i] = e[i];
      var s = this._head;
      if (!s)
        return !1;
      for (; s; )
        s._once && this.detach(s), s._fn.apply(s._thisArg, r), s = s._next;
      return !0;
    }, t.prototype.add = function(e, r) {
      if (r === void 0 && (r = null), typeof e != "function")
        throw new Error("MiniSignal#add(): First arg must be a Function.");
      return tc(this, new Ta(e, !1, r));
    }, t.prototype.once = function(e, r) {
      if (r === void 0 && (r = null), typeof e != "function")
        throw new Error("MiniSignal#once(): First arg must be a Function.");
      return tc(this, new Ta(e, !0, r));
    }, t.prototype.detach = function(e) {
      if (!(e instanceof Ta))
        throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");
      return e._owner !== this ? this : (e._prev && (e._prev._next = e._next), e._next && (e._next._prev = e._prev), e === this._head ? (this._head = e._next, e._next === null && (this._tail = null)) : e === this._tail && (this._tail = e._prev, this._tail._next = null), e._owner = null, this);
    }, t.prototype.detachAll = function() {
      var e = this._head;
      if (!e)
        return this;
      for (this._head = this._tail = null; e; )
        e._owner = null, e = e._next;
      return this;
    }, t;
  }()
);
function Up(t, e) {
  e = e || {};
  for (var r = {
    // eslint-disable-next-line max-len
    key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
    q: {
      name: "queryKey",
      parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
      // eslint-disable-next-line max-len
      strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
      // eslint-disable-next-line max-len
      loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
  }, i = r.parser[e.strictMode ? "strict" : "loose"].exec(t), s = {}, o = 14; o--; )
    s[r.key[o]] = i[o] || "";
  return s[r.q.name] = {}, s[r.key[12]].replace(r.q.parser, function(h, l, c) {
    l && (s[r.q.name][l] = c);
  }), s;
}
var Mh, Aa = null, Tb = 0, ec = 200, Ab = 204, wb = 1223, Pb = 2;
function rc() {
}
function ic(t, e, r) {
  e && e.indexOf(".") === 0 && (e = e.substring(1)), e && (t[e] = r);
}
function Uh(t) {
  return t.toString().replace("object ", "");
}
var $r = (
  /** @class */
  function() {
    function t(e, r, i) {
      if (this._dequeue = rc, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = null, this._boundOnError = null, this._boundOnProgress = null, this._boundOnTimeout = null, this._boundXhrOnError = null, this._boundXhrOnTimeout = null, this._boundXhrOnAbort = null, this._boundXhrOnLoad = null, typeof e != "string" || typeof r != "string")
        throw new Error("Both name and url are required for constructing a resource.");
      i = i || {}, this._flags = 0, this._setFlag(t.STATUS_FLAGS.DATA_URL, r.indexOf("data:") === 0), this.name = e, this.url = r, this.extension = this._getExtension(), this.data = null, this.crossOrigin = i.crossOrigin === !0 ? "anonymous" : i.crossOrigin, this.timeout = i.timeout || 0, this.loadType = i.loadType || this._determineLoadType(), this.xhrType = i.xhrType, this.metadata = i.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = t.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = rc, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new ln(), this.onProgress = new ln(), this.onComplete = new ln(), this.onAfterMiddleware = new ln();
    }
    return t.setExtensionLoadType = function(e, r) {
      ic(t._loadTypeMap, e, r);
    }, t.setExtensionXhrType = function(e, r) {
      ic(t._xhrTypeMap, e, r);
    }, Object.defineProperty(t.prototype, "isDataUrl", {
      /**
       * When the resource starts to load.
       * @memberof PIXI.LoaderResource
       * @callback OnStartSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       */
      /**
       * When the resource reports loading progress.
       * @memberof PIXI.LoaderResource
       * @callback OnProgressSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       * @param {number} percentage - The progress of the load in the range [0, 1].
       */
      /**
       * When the resource finishes loading.
       * @memberof PIXI.LoaderResource
       * @callback OnCompleteSignal
       * @param {PIXI.Resource} resource - The resource that the event happened on.
       */
      /**
       * @memberof PIXI.LoaderResource
       * @typedef {object} IMetadata
       * @property {HTMLImageElement|HTMLAudioElement|HTMLVideoElement} [loadElement=null] - The
       *      element to use for loading, instead of creating one.
       * @property {boolean} [skipSource=false] - Skips adding source(s) to the load element. This
       *      is useful if you want to pass in a `loadElement` that you already added load sources to.
       * @property {string|string[]} [mimeType] - The mime type to use for the source element
       *      of a video/audio elment. If the urls are an array, you can pass this as an array as well
       *      where each index is the mime type to use for the corresponding url index.
       */
      /**
       * Stores whether or not this url is a data url.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(t.STATUS_FLAGS.DATA_URL);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "isComplete", {
      /**
       * Describes if this resource has finished loading. Is true when the resource has completely
       * loaded.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(t.STATUS_FLAGS.COMPLETE);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "isLoading", {
      /**
       * Describes if this resource is currently loading. Is true when the resource starts loading,
       * and is false again when complete.
       * @readonly
       * @member {boolean}
       */
      get: function() {
        return this._hasFlag(t.STATUS_FLAGS.LOADING);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.complete = function() {
      this._clearEvents(), this._finish();
    }, t.prototype.abort = function(e) {
      if (!this.error) {
        if (this.error = new Error(e), this._clearEvents(), this.xhr)
          this.xhr.abort();
        else if (this.xdr)
          this.xdr.abort();
        else if (this.data)
          if (this.data.src)
            this.data.src = t.EMPTY_GIF;
          else
            for (; this.data.firstChild; )
              this.data.removeChild(this.data.firstChild);
        this._finish();
      }
    }, t.prototype.load = function(e) {
      var r = this;
      if (!this.isLoading) {
        if (this.isComplete) {
          e && setTimeout(function() {
            return e(r);
          }, 1);
          return;
        } else
          e && this.onComplete.once(e);
        switch (this._setFlag(t.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), (this.crossOrigin === !1 || typeof this.crossOrigin != "string") && (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
          case t.LOAD_TYPE.IMAGE:
            this.type = t.TYPE.IMAGE, this._loadElement("image");
            break;
          case t.LOAD_TYPE.AUDIO:
            this.type = t.TYPE.AUDIO, this._loadSourceElement("audio");
            break;
          case t.LOAD_TYPE.VIDEO:
            this.type = t.TYPE.VIDEO, this._loadSourceElement("video");
            break;
          case t.LOAD_TYPE.XHR:
          default:
            typeof Mh == "undefined" && (Mh = !!(globalThis.XDomainRequest && !("withCredentials" in new XMLHttpRequest()))), Mh && this.crossOrigin ? this._loadXdr() : this._loadXhr();
            break;
        }
      }
    }, t.prototype._hasFlag = function(e) {
      return (this._flags & e) !== 0;
    }, t.prototype._setFlag = function(e, r) {
      this._flags = r ? this._flags | e : this._flags & ~e;
    }, t.prototype._clearEvents = function() {
      clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null));
    }, t.prototype._finish = function() {
      if (this.isComplete)
        throw new Error("Complete called again for an already completed resource.");
      this._setFlag(t.STATUS_FLAGS.COMPLETE, !0), this._setFlag(t.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this);
    }, t.prototype._loadElement = function(e) {
      this.metadata.loadElement ? this.data = this.metadata.loadElement : e === "image" && typeof globalThis.Image != "undefined" ? this.data = new Image() : this.data = document.createElement(e), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
    }, t.prototype._loadSourceElement = function(e) {
      if (this.metadata.loadElement ? this.data = this.metadata.loadElement : e === "audio" && typeof globalThis.Audio != "undefined" ? this.data = new Audio() : this.data = document.createElement(e), this.data === null) {
        this.abort("Unsupported element: " + e);
        return;
      }
      if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)
        if (navigator.isCocoonJS)
          this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
        else if (Array.isArray(this.url))
          for (var r = this.metadata.mimeType, i = 0; i < this.url.length; ++i)
            this.data.appendChild(this._createSource(e, this.url[i], Array.isArray(r) ? r[i] : r));
        else {
          var r = this.metadata.mimeType;
          this.data.appendChild(this._createSource(e, this.url, Array.isArray(r) ? r[0] : r));
        }
      this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout));
    }, t.prototype._loadXhr = function() {
      typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
      var e = this.xhr = new XMLHttpRequest();
      this.crossOrigin === "use-credentials" && (e.withCredentials = !0), e.open("GET", this.url, !0), e.timeout = this.timeout, this.xhrType === t.XHR_RESPONSE_TYPE.JSON || this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT ? e.responseType = t.XHR_RESPONSE_TYPE.TEXT : e.responseType = this.xhrType, e.addEventListener("error", this._boundXhrOnError, !1), e.addEventListener("timeout", this._boundXhrOnTimeout, !1), e.addEventListener("abort", this._boundXhrOnAbort, !1), e.addEventListener("progress", this._boundOnProgress, !1), e.addEventListener("load", this._boundXhrOnLoad, !1), e.send();
    }, t.prototype._loadXdr = function() {
      typeof this.xhrType != "string" && (this.xhrType = this._determineXhrType());
      var e = this.xhr = new globalThis.XDomainRequest();
      e.timeout = this.timeout || 5e3, e.onerror = this._boundXhrOnError, e.ontimeout = this._boundXhrOnTimeout, e.onprogress = this._boundOnProgress, e.onload = this._boundXhrOnLoad, e.open("GET", this.url, !0), setTimeout(function() {
        return e.send();
      }, 1);
    }, t.prototype._createSource = function(e, r, i) {
      i || (i = e + "/" + this._getExtension(r));
      var s = document.createElement("source");
      return s.src = r, s.type = i, s;
    }, t.prototype._onError = function(e) {
      this.abort("Failed to load element using: " + e.target.nodeName);
    }, t.prototype._onProgress = function(e) {
      e && e.lengthComputable && this.onProgress.dispatch(this, e.loaded / e.total);
    }, t.prototype._onTimeout = function() {
      this.abort("Load timed out.");
    }, t.prototype._xhrOnError = function() {
      var e = this.xhr;
      this.abort(Uh(e) + " Request failed. Status: " + e.status + ', text: "' + e.statusText + '"');
    }, t.prototype._xhrOnTimeout = function() {
      var e = this.xhr;
      this.abort(Uh(e) + " Request timed out.");
    }, t.prototype._xhrOnAbort = function() {
      var e = this.xhr;
      this.abort(Uh(e) + " Request was aborted by the user.");
    }, t.prototype._xhrOnLoad = function() {
      var e = this.xhr, r = "", i = typeof e.status == "undefined" ? ec : e.status;
      (e.responseType === "" || e.responseType === "text" || typeof e.responseType == "undefined") && (r = e.responseText), i === Tb && (r.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER) ? i = ec : i === wb && (i = Ab);
      var s = i / 100 | 0;
      if (s === Pb)
        if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT)
          this.data = r, this.type = t.TYPE.TEXT;
        else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON)
          try {
            this.data = JSON.parse(r), this.type = t.TYPE.JSON;
          } catch (l) {
            this.abort("Error trying to parse loaded json: " + l);
            return;
          }
        else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT)
          try {
            if (globalThis.DOMParser) {
              var o = new DOMParser();
              this.data = o.parseFromString(r, "text/xml");
            } else {
              var h = document.createElement("div");
              h.innerHTML = r, this.data = h;
            }
            this.type = t.TYPE.XML;
          } catch (l) {
            this.abort("Error trying to parse loaded xml: " + l);
            return;
          }
        else
          this.data = e.response || r;
      else {
        this.abort("[" + e.status + "] " + e.statusText + ": " + e.responseURL);
        return;
      }
      this.complete();
    }, t.prototype._determineCrossOrigin = function(e, r) {
      if (e.indexOf("data:") === 0)
        return "";
      if (globalThis.origin !== globalThis.location.origin)
        return "anonymous";
      r = r || globalThis.location, Aa || (Aa = document.createElement("a")), Aa.href = e;
      var i = Up(Aa.href, { strictMode: !0 }), s = !i.port && r.port === "" || i.port === r.port, o = i.protocol ? i.protocol + ":" : "";
      return i.host !== r.hostname || !s || o !== r.protocol ? "anonymous" : "";
    }, t.prototype._determineXhrType = function() {
      return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT;
    }, t.prototype._determineLoadType = function() {
      return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR;
    }, t.prototype._getExtension = function(e) {
      e === void 0 && (e = this.url);
      var r = "";
      if (this.isDataUrl) {
        var i = e.indexOf("/");
        r = e.substring(i + 1, e.indexOf(";", i));
      } else {
        var s = e.indexOf("?"), o = e.indexOf("#"), h = Math.min(s > -1 ? s : e.length, o > -1 ? o : e.length);
        e = e.substring(0, h), r = e.substring(e.lastIndexOf(".") + 1);
      }
      return r.toLowerCase();
    }, t.prototype._getMimeFromXhrType = function(e) {
      switch (e) {
        case t.XHR_RESPONSE_TYPE.BUFFER:
          return "application/octet-binary";
        case t.XHR_RESPONSE_TYPE.BLOB:
          return "application/blob";
        case t.XHR_RESPONSE_TYPE.DOCUMENT:
          return "application/xml";
        case t.XHR_RESPONSE_TYPE.JSON:
          return "application/json";
        case t.XHR_RESPONSE_TYPE.DEFAULT:
        case t.XHR_RESPONSE_TYPE.TEXT:
        default:
          return "text/plain";
      }
    }, t;
  }()
);
(function(t) {
  (function(e) {
    e[e.NONE = 0] = "NONE", e[e.DATA_URL = 1] = "DATA_URL", e[e.COMPLETE = 2] = "COMPLETE", e[e.LOADING = 4] = "LOADING";
  })(t.STATUS_FLAGS || (t.STATUS_FLAGS = {})), function(e) {
    e[e.UNKNOWN = 0] = "UNKNOWN", e[e.JSON = 1] = "JSON", e[e.XML = 2] = "XML", e[e.IMAGE = 3] = "IMAGE", e[e.AUDIO = 4] = "AUDIO", e[e.VIDEO = 5] = "VIDEO", e[e.TEXT = 6] = "TEXT";
  }(t.TYPE || (t.TYPE = {})), function(e) {
    e[e.XHR = 1] = "XHR", e[e.IMAGE = 2] = "IMAGE", e[e.AUDIO = 3] = "AUDIO", e[e.VIDEO = 4] = "VIDEO";
  }(t.LOAD_TYPE || (t.LOAD_TYPE = {})), function(e) {
    e.DEFAULT = "text", e.BUFFER = "arraybuffer", e.BLOB = "blob", e.DOCUMENT = "document", e.JSON = "json", e.TEXT = "text";
  }(t.XHR_RESPONSE_TYPE || (t.XHR_RESPONSE_TYPE = {})), t._loadTypeMap = {
    // images
    gif: t.LOAD_TYPE.IMAGE,
    png: t.LOAD_TYPE.IMAGE,
    bmp: t.LOAD_TYPE.IMAGE,
    jpg: t.LOAD_TYPE.IMAGE,
    jpeg: t.LOAD_TYPE.IMAGE,
    tif: t.LOAD_TYPE.IMAGE,
    tiff: t.LOAD_TYPE.IMAGE,
    webp: t.LOAD_TYPE.IMAGE,
    tga: t.LOAD_TYPE.IMAGE,
    svg: t.LOAD_TYPE.IMAGE,
    "svg+xml": t.LOAD_TYPE.IMAGE,
    // audio
    mp3: t.LOAD_TYPE.AUDIO,
    ogg: t.LOAD_TYPE.AUDIO,
    wav: t.LOAD_TYPE.AUDIO,
    // videos
    mp4: t.LOAD_TYPE.VIDEO,
    webm: t.LOAD_TYPE.VIDEO
  }, t._xhrTypeMap = {
    // xml
    xhtml: t.XHR_RESPONSE_TYPE.DOCUMENT,
    html: t.XHR_RESPONSE_TYPE.DOCUMENT,
    htm: t.XHR_RESPONSE_TYPE.DOCUMENT,
    xml: t.XHR_RESPONSE_TYPE.DOCUMENT,
    tmx: t.XHR_RESPONSE_TYPE.DOCUMENT,
    svg: t.XHR_RESPONSE_TYPE.DOCUMENT,
    // This was added to handle Tiled Tileset XML, but .tsx is also a TypeScript React Component.
    // Since it is way less likely for people to be loading TypeScript files instead of Tiled files,
    // this should probably be fine.
    tsx: t.XHR_RESPONSE_TYPE.DOCUMENT,
    // images
    gif: t.XHR_RESPONSE_TYPE.BLOB,
    png: t.XHR_RESPONSE_TYPE.BLOB,
    bmp: t.XHR_RESPONSE_TYPE.BLOB,
    jpg: t.XHR_RESPONSE_TYPE.BLOB,
    jpeg: t.XHR_RESPONSE_TYPE.BLOB,
    tif: t.XHR_RESPONSE_TYPE.BLOB,
    tiff: t.XHR_RESPONSE_TYPE.BLOB,
    webp: t.XHR_RESPONSE_TYPE.BLOB,
    tga: t.XHR_RESPONSE_TYPE.BLOB,
    // json
    json: t.XHR_RESPONSE_TYPE.JSON,
    // text
    text: t.XHR_RESPONSE_TYPE.TEXT,
    txt: t.XHR_RESPONSE_TYPE.TEXT,
    // fonts
    ttf: t.XHR_RESPONSE_TYPE.BUFFER,
    otf: t.XHR_RESPONSE_TYPE.BUFFER
  }, t.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
})($r || ($r = {}));
function Dn() {
}
function Eb(t) {
  return function() {
    for (var r = arguments, i = [], s = 0; s < arguments.length; s++)
      i[s] = r[s];
    if (t === null)
      throw new Error("Callback was already called.");
    var o = t;
    t = null, o.apply(this, i);
  };
}
var Ib = (
  /** @class */
  function() {
    function t(e, r) {
      this.data = e, this.callback = r;
    }
    return t;
  }()
), Gh = (
  /** @class */
  function() {
    function t(e, r) {
      var i = this;
      if (r === void 0 && (r = 1), this.workers = 0, this.saturated = Dn, this.unsaturated = Dn, this.empty = Dn, this.drain = Dn, this.error = Dn, this.started = !1, this.paused = !1, this._tasks = [], this._insert = function(s, o, h) {
        if (h && typeof h != "function")
          throw new Error("task callback must be a function");
        if (i.started = !0, s == null && i.idle()) {
          setTimeout(function() {
            return i.drain();
          }, 1);
          return;
        }
        var l = new Ib(s, typeof h == "function" ? h : Dn);
        o ? i._tasks.unshift(l) : i._tasks.push(l), setTimeout(i.process, 1);
      }, this.process = function() {
        for (; !i.paused && i.workers < i.concurrency && i._tasks.length; ) {
          var s = i._tasks.shift();
          i._tasks.length === 0 && i.empty(), i.workers += 1, i.workers === i.concurrency && i.saturated(), i._worker(s.data, Eb(i._next(s)));
        }
      }, this._worker = e, r === 0)
        throw new Error("Concurrency must not be zero");
      this.concurrency = r, this.buffer = r / 4;
    }
    return t.prototype._next = function(e) {
      var r = this;
      return function() {
        for (var i = arguments, s = [], o = 0; o < arguments.length; o++)
          s[o] = i[o];
        r.workers -= 1, e.callback.apply(e, s), s[0] != null && r.error(s[0], e.data), r.workers <= r.concurrency - r.buffer && r.unsaturated(), r.idle() && r.drain(), r.process();
      };
    }, t.prototype.push = function(e, r) {
      this._insert(e, !1, r);
    }, t.prototype.kill = function() {
      this.workers = 0, this.drain = Dn, this.started = !1, this._tasks = [];
    }, t.prototype.unshift = function(e, r) {
      this._insert(e, !0, r);
    }, t.prototype.length = function() {
      return this._tasks.length;
    }, t.prototype.running = function() {
      return this.workers;
    }, t.prototype.idle = function() {
      return this._tasks.length + this.workers === 0;
    }, t.prototype.pause = function() {
      this.paused !== !0 && (this.paused = !0);
    }, t.prototype.resume = function() {
      if (this.paused !== !1) {
        this.paused = !1;
        for (var e = 1; e <= this.concurrency; e++)
          this.process();
      }
    }, t.eachSeries = function(e, r, i, s) {
      var o = 0, h = e.length;
      function l(c) {
        if (c || o === h) {
          i && i(c);
          return;
        }
        s ? setTimeout(function() {
          r(e[o++], l);
        }, 1) : r(e[o++], l);
      }
      l();
    }, t.queue = function(e, r) {
      return new t(e, r);
    }, t;
  }()
), Dh = 100, Cb = /(#[\w-]+)?$/, Go = (
  /** @class */
  function() {
    function t(e, r) {
      var i = this;
      e === void 0 && (e = ""), r === void 0 && (r = 10), this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(c, _) {
        return i._loadResource(c, _);
      }, this.resources = {}, this.baseUrl = e, this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(c, _) {
        return i._loadResource(c, _);
      }, this._queue = Gh.queue(this._boundLoadResource, r), this._queue.pause(), this.resources = {}, this.onProgress = new ln(), this.onError = new ln(), this.onLoad = new ln(), this.onStart = new ln(), this.onComplete = new ln();
      for (var s = 0; s < t._plugins.length; ++s) {
        var o = t._plugins[s], h = o.pre, l = o.use;
        h && this.pre(h), l && this.use(l);
      }
      this._protected = !1;
    }
    return t.prototype._add = function(e, r, i, s) {
      if (this.loading && (!i || !i.parentResource))
        throw new Error("Cannot add resources while the loader is running.");
      if (this.resources[e])
        throw new Error('Resource named "' + e + '" already exists.');
      if (r = this._prepareUrl(r), this.resources[e] = new $r(e, r, i), typeof s == "function" && this.resources[e].onAfterMiddleware.once(s), this.loading) {
        for (var o = i.parentResource, h = [], l = 0; l < o.children.length; ++l)
          o.children[l].isComplete || h.push(o.children[l]);
        var c = o.progressChunk * (h.length + 1), _ = c / (h.length + 2);
        o.children.push(this.resources[e]), o.progressChunk = _;
        for (var l = 0; l < h.length; ++l)
          h[l].progressChunk = _;
        this.resources[e].progressChunk = _;
      }
      return this._queue.push(this.resources[e]), this;
    }, t.prototype.pre = function(e) {
      return this._beforeMiddleware.push(e), this;
    }, t.prototype.use = function(e) {
      return this._afterMiddleware.push(e), this;
    }, t.prototype.reset = function() {
      this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause();
      for (var e in this.resources) {
        var r = this.resources[e];
        r._onLoadBinding && r._onLoadBinding.detach(), r.isLoading && r.abort("loader reset");
      }
      return this.resources = {}, this;
    }, t.prototype.load = function(e) {
      if (ai("6.5.0", "@pixi/loaders is being replaced with @pixi/assets in the next major release."), typeof e == "function" && this.onComplete.once(e), this.loading)
        return this;
      if (this._queue.idle())
        this._onStart(), this._onComplete();
      else {
        for (var r = this._queue._tasks.length, i = Dh / r, s = 0; s < this._queue._tasks.length; ++s)
          this._queue._tasks[s].data.progressChunk = i;
        this._onStart(), this._queue.resume();
      }
      return this;
    }, Object.defineProperty(t.prototype, "concurrency", {
      /**
       * The number of resources to load concurrently.
       * @default 10
       */
      get: function() {
        return this._queue.concurrency;
      },
      set: function(e) {
        this._queue.concurrency = e;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype._prepareUrl = function(e) {
      var r = Up(e, { strictMode: !0 }), i;
      if (r.protocol || !r.path || e.indexOf("//") === 0 ? i = e : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && e.charAt(0) !== "/" ? i = this.baseUrl + "/" + e : i = this.baseUrl + e, this.defaultQueryString) {
        var s = Cb.exec(i)[0];
        i = i.slice(0, i.length - s.length), i.indexOf("?") !== -1 ? i += "&" + this.defaultQueryString : i += "?" + this.defaultQueryString, i += s;
      }
      return i;
    }, t.prototype._loadResource = function(e, r) {
      var i = this;
      e._dequeue = r, Gh.eachSeries(this._beforeMiddleware, function(s, o) {
        s.call(i, e, function() {
          o(e.isComplete ? {} : null);
        });
      }, function() {
        e.isComplete ? i._onLoad(e) : (e._onLoadBinding = e.onComplete.once(i._onLoad, i), e.load());
      }, !0);
    }, t.prototype._onStart = function() {
      this.progress = 0, this.loading = !0, this.onStart.dispatch(this);
    }, t.prototype._onComplete = function() {
      this.progress = Dh, this.loading = !1, this.onComplete.dispatch(this, this.resources);
    }, t.prototype._onLoad = function(e) {
      var r = this;
      e._onLoadBinding = null, this._resourcesParsing.push(e), e._dequeue(), Gh.eachSeries(this._afterMiddleware, function(i, s) {
        i.call(r, e, s);
      }, function() {
        e.onAfterMiddleware.dispatch(e), r.progress = Math.min(Dh, r.progress + e.progressChunk), r.onProgress.dispatch(r, e), e.error ? r.onError.dispatch(e.error, r, e) : r.onLoad.dispatch(r, e), r._resourcesParsing.splice(r._resourcesParsing.indexOf(e), 1), r._queue.idle() && r._resourcesParsing.length === 0 && r._onComplete();
      }, !0);
    }, t.prototype.destroy = function() {
      this._protected || this.reset();
    }, Object.defineProperty(t, "shared", {
      /** A premade instance of the loader that can be used to load resources. */
      get: function() {
        var e = t._shared;
        return e || (e = new t(), e._protected = !0, t._shared = e), e;
      },
      enumerable: !1,
      configurable: !0
    }), t.registerPlugin = function(e) {
      return ai("6.5.0", "Loader.registerPlugin() is deprecated, use extensions.add() instead."), Qi.add({
        type: or.Loader,
        ref: e
      }), t;
    }, t._plugins = [], t;
  }()
);
Qi.handleByList(or.Loader, Go._plugins);
Go.prototype.add = function(e, r, i, s) {
  if (Array.isArray(e)) {
    for (var o = 0; o < e.length; ++o)
      this.add(e[o]);
    return this;
  }
  if (typeof e == "object" && (i = e, s = r || i.callback || i.onComplete, r = i.url, e = i.name || i.key || i.url), typeof r != "string" && (s = i, i = r, r = e), typeof r != "string")
    throw new Error("No url passed to add resource to loader.");
  return typeof i == "function" && (s = i, i = null), this._add(e, r, i, s);
};
var Gp = (
  /** @class */
  function() {
    function t() {
    }
    return t.init = function(e) {
      e = Object.assign({
        sharedLoader: !1
      }, e), this.loader = e.sharedLoader ? Go.shared : new Go();
    }, t.destroy = function() {
      this.loader && (this.loader.destroy(), this.loader = null);
    }, t.extension = or.Application, t;
  }()
), Dp = (
  /** @class */
  function() {
    function t() {
    }
    return t.add = function() {
      $r.setExtensionLoadType("svg", $r.LOAD_TYPE.XHR), $r.setExtensionXhrType("svg", $r.XHR_RESPONSE_TYPE.TEXT);
    }, t.use = function(e, r) {
      if (e.data && (e.type === $r.TYPE.IMAGE || e.extension === "svg")) {
        var i = e.data, s = e.url, o = e.name, h = e.metadata;
        Me.fromLoader(i, s, o, h).then(function(l) {
          e.texture = l, r();
        }).catch(r);
      } else
        r();
    }, t.extension = or.Loader, t;
  }()
), $b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function Rb(t) {
  for (var e = "", r = 0; r < t.length; ) {
    for (var i = [0, 0, 0], s = [0, 0, 0, 0], o = 0; o < i.length; ++o)
      r < t.length ? i[o] = t.charCodeAt(r++) & 255 : i[o] = 0;
    s[0] = i[0] >> 2, s[1] = (i[0] & 3) << 4 | i[1] >> 4, s[2] = (i[1] & 15) << 2 | i[2] >> 6, s[3] = i[2] & 63;
    var h = r - (t.length - 1);
    switch (h) {
      case 2:
        s[3] = 64, s[2] = 64;
        break;
      case 1:
        s[3] = 64;
        break;
    }
    for (var o = 0; o < s.length; ++o)
      e += $b.charAt(s[o]);
  }
  return e;
}
function Sb(t, e) {
  if (!t.data) {
    e();
    return;
  }
  if (t.xhr && t.xhrType === $r.XHR_RESPONSE_TYPE.BLOB) {
    if (!self.Blob || typeof t.data == "string") {
      var r = t.xhr.getResponseHeader("content-type");
      if (r && r.indexOf("image") === 0) {
        t.data = new Image(), t.data.src = "data:" + r + ";base64," + Rb(t.xhr.responseText), t.type = $r.TYPE.IMAGE, t.data.onload = function() {
          t.data.onload = null, e();
        };
        return;
      }
    } else if (t.data.type.indexOf("image") === 0) {
      var i = globalThis.URL || globalThis.webkitURL, s = i.createObjectURL(t.data);
      t.blob = t.data, t.data = new Image(), t.data.src = s, t.type = $r.TYPE.IMAGE, t.data.onload = function() {
        i.revokeObjectURL(s), t.data.onload = null, e();
      };
      return;
    }
  }
  e();
}
var Nb = (
  /** @class */
  function() {
    function t() {
    }
    return t.extension = or.Loader, t.use = Sb, t;
  }()
);
Qi.add(Dp, Nb);
/*!
 * @pixi/compressed-textures - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var fr, ke;
(function(t) {
  t[t.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = "COMPRESSED_RGB_S3TC_DXT1_EXT", t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = "COMPRESSED_RGBA_S3TC_DXT1_EXT", t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = "COMPRESSED_RGBA_S3TC_DXT3_EXT", t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = "COMPRESSED_RGBA_S3TC_DXT5_EXT", t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT", t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT", t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT", t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = "COMPRESSED_SRGB_S3TC_DXT1_EXT", t[t.COMPRESSED_R11_EAC = 37488] = "COMPRESSED_R11_EAC", t[t.COMPRESSED_SIGNED_R11_EAC = 37489] = "COMPRESSED_SIGNED_R11_EAC", t[t.COMPRESSED_RG11_EAC = 37490] = "COMPRESSED_RG11_EAC", t[t.COMPRESSED_SIGNED_RG11_EAC = 37491] = "COMPRESSED_SIGNED_RG11_EAC", t[t.COMPRESSED_RGB8_ETC2 = 37492] = "COMPRESSED_RGB8_ETC2", t[t.COMPRESSED_RGBA8_ETC2_EAC = 37496] = "COMPRESSED_RGBA8_ETC2_EAC", t[t.COMPRESSED_SRGB8_ETC2 = 37493] = "COMPRESSED_SRGB8_ETC2", t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC", t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2", t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2", t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = "COMPRESSED_RGB_PVRTC_4BPPV1_IMG", t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG", t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = "COMPRESSED_RGB_PVRTC_2BPPV1_IMG", t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG", t[t.COMPRESSED_RGB_ETC1_WEBGL = 36196] = "COMPRESSED_RGB_ETC1_WEBGL", t[t.COMPRESSED_RGB_ATC_WEBGL = 35986] = "COMPRESSED_RGB_ATC_WEBGL", t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL", t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL";
})(ke || (ke = {}));
var Do = (fr = {}, // WEBGL_compressed_texture_s3tc
fr[ke.COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5, fr[ke.COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5, fr[ke.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1, fr[ke.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_s3tc
fr[ke.COMPRESSED_SRGB_S3TC_DXT1_EXT] = 0.5, fr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = 0.5, fr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1, fr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1, // WEBGL_compressed_texture_etc
fr[ke.COMPRESSED_R11_EAC] = 0.5, fr[ke.COMPRESSED_SIGNED_R11_EAC] = 0.5, fr[ke.COMPRESSED_RG11_EAC] = 1, fr[ke.COMPRESSED_SIGNED_RG11_EAC] = 1, fr[ke.COMPRESSED_RGB8_ETC2] = 0.5, fr[ke.COMPRESSED_RGBA8_ETC2_EAC] = 1, fr[ke.COMPRESSED_SRGB8_ETC2] = 0.5, fr[ke.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1, fr[ke.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, fr[ke.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = 0.5, // WEBGL_compressed_texture_pvrtc
fr[ke.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5, fr[ke.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5, fr[ke.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25, fr[ke.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25, // WEBGL_compressed_texture_etc1
fr[ke.COMPRESSED_RGB_ETC1_WEBGL] = 0.5, // @see https://www.khronos.org/registry/OpenGL/extensions/AMD/AMD_compressed_ATC_texture.txt
// WEBGL_compressed_texture_atc
fr[ke.COMPRESSED_RGB_ATC_WEBGL] = 0.5, fr[ke.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1, fr[ke.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1, fr);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Nl = function(t, e) {
  return Nl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Nl(t, e);
};
function Bp(t, e) {
  Nl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
function Lb(t, e, r, i) {
  function s(o) {
    return o instanceof r ? o : new r(function(h) {
      h(o);
    });
  }
  return new (r || (r = Promise))(function(o, h) {
    function l(y) {
      try {
        _(i.next(y));
      } catch (w) {
        h(w);
      }
    }
    function c(y) {
      try {
        _(i.throw(y));
      } catch (w) {
        h(w);
      }
    }
    function _(y) {
      y.done ? o(y.value) : s(y.value).then(l, c);
    }
    _((i = i.apply(t, e || [])).next());
  });
}
function Ob(t, e) {
  var r = { label: 0, sent: function() {
    if (o[0] & 1)
      throw o[1];
    return o[1];
  }, trys: [], ops: [] }, i, s, o, h;
  return h = { next: l(0), throw: l(1), return: l(2) }, typeof Symbol == "function" && (h[Symbol.iterator] = function() {
    return this;
  }), h;
  function l(_) {
    return function(y) {
      return c([_, y]);
    };
  }
  function c(_) {
    if (i)
      throw new TypeError("Generator is already executing.");
    for (; r; )
      try {
        if (i = 1, s && (o = _[0] & 2 ? s.return : _[0] ? s.throw || ((o = s.return) && o.call(s), 0) : s.next) && !(o = o.call(s, _[1])).done)
          return o;
        switch (s = 0, o && (_ = [_[0] & 2, o.value]), _[0]) {
          case 0:
          case 1:
            o = _;
            break;
          case 4:
            return r.label++, { value: _[1], done: !1 };
          case 5:
            r.label++, s = _[1], _ = [0];
            continue;
          case 7:
            _ = r.ops.pop(), r.trys.pop();
            continue;
          default:
            if (o = r.trys, !(o = o.length > 0 && o[o.length - 1]) && (_[0] === 6 || _[0] === 2)) {
              r = 0;
              continue;
            }
            if (_[0] === 3 && (!o || _[1] > o[0] && _[1] < o[3])) {
              r.label = _[1];
              break;
            }
            if (_[0] === 6 && r.label < o[1]) {
              r.label = o[1], o = _;
              break;
            }
            if (o && r.label < o[2]) {
              r.label = o[2], r.ops.push(_);
              break;
            }
            o[2] && r.ops.pop(), r.trys.pop();
            continue;
        }
        _ = e.call(t, r);
      } catch (y) {
        _ = [6, y], s = 0;
      } finally {
        i = o = 0;
      }
    if (_[0] & 5)
      throw _[1];
    return { value: _[0] ? _[1] : void 0, done: !0 };
  }
}
var kp = (
  /** @class */
  function(t) {
    Bp(e, t);
    function e(r, i) {
      i === void 0 && (i = { width: 1, height: 1, autoLoad: !0 });
      var s = this, o, h;
      return typeof r == "string" ? (o = r, h = new Uint8Array()) : (o = null, h = r), s = t.call(this, h, i) || this, s.origin = o, s.buffer = h ? new za(h) : null, s.origin && i.autoLoad !== !1 && s.load(), h && h.length && (s.loaded = !0, s.onBlobLoaded(s.buffer.rawBinaryData)), s;
    }
    return e.prototype.onBlobLoaded = function(r) {
    }, e.prototype.load = function() {
      return Lb(this, void 0, Promise, function() {
        var r, i, s;
        return Ob(this, function(o) {
          switch (o.label) {
            case 0:
              return [4, fetch(this.origin)];
            case 1:
              return r = o.sent(), [4, r.blob()];
            case 2:
              return i = o.sent(), [4, i.arrayBuffer()];
            case 3:
              return s = o.sent(), this.data = new Uint32Array(s), this.buffer = new za(s), this.loaded = !0, this.onBlobLoaded(s), this.update(), [2, this];
          }
        });
      });
    }, e;
  }(ls)
), ja = (
  /** @class */
  function(t) {
    Bp(e, t);
    function e(r, i) {
      var s = t.call(this, r, i) || this;
      return s.format = i.format, s.levels = i.levels || 1, s._width = i.width, s._height = i.height, s._extension = e._formatToExtension(s.format), (i.levelBuffers || s.buffer) && (s._levelBuffers = i.levelBuffers || e._createLevelBuffers(
        r instanceof Uint8Array ? r : s.buffer.uint8View,
        s.format,
        s.levels,
        4,
        4,
        // PVRTC has 8x4 blocks in 2bpp mode
        s.width,
        s.height
      )), s;
    }
    return e.prototype.upload = function(r, i, s) {
      var o = r.gl, h = r.context.extensions[this._extension];
      if (!h)
        throw new Error(this._extension + " textures are not supported on the current machine");
      if (!this._levelBuffers)
        return !1;
      for (var l = 0, c = this.levels; l < c; l++) {
        var _ = this._levelBuffers[l], y = _.levelID, w = _.levelWidth, b = _.levelHeight, E = _.levelBuffer;
        o.compressedTexImage2D(o.TEXTURE_2D, y, this.format, w, b, 0, E);
      }
      return !0;
    }, e.prototype.onBlobLoaded = function() {
      this._levelBuffers = e._createLevelBuffers(
        this.buffer.uint8View,
        this.format,
        this.levels,
        4,
        4,
        // PVRTC has 8x4 blocks in 2bpp mode
        this.width,
        this.height
      );
    }, e._formatToExtension = function(r) {
      if (r >= 33776 && r <= 33779)
        return "s3tc";
      if (r >= 37488 && r <= 37497)
        return "etc";
      if (r >= 35840 && r <= 35843)
        return "pvrtc";
      if (r >= 36196)
        return "etc1";
      if (r >= 35986 && r <= 34798)
        return "atc";
      throw new Error("Invalid (compressed) texture format given!");
    }, e._createLevelBuffers = function(r, i, s, o, h, l, c) {
      for (var _ = new Array(s), y = r.byteOffset, w = l, b = c, E = w + o - 1 & ~(o - 1), T = b + h - 1 & ~(h - 1), P = E * T * Do[i], O = 0; O < s; O++)
        _[O] = {
          levelID: O,
          levelWidth: s > 1 ? w : E,
          levelHeight: s > 1 ? b : T,
          levelBuffer: new Uint8Array(r.buffer, y, P)
        }, y += P, w = w >> 1 || 1, b = b >> 1 || 1, E = w + o - 1 & ~(o - 1), T = b + h - 1 & ~(h - 1), P = E * T * Do[i];
      return _;
    }, e;
  }(kp)
), Xp = (
  /** @class */
  function() {
    function t() {
    }
    return t.use = function(e, r) {
      var i = e.data, s = this;
      if (e.type === $r.TYPE.JSON && i && i.cacheID && i.textures) {
        for (var o = i.textures, h = void 0, l = void 0, c = 0, _ = o.length; c < _; c++) {
          var y = o[c], w = y.src, b = y.format;
          if (b || (l = w), t.textureFormats[b]) {
            h = w;
            break;
          }
        }
        if (h = h || l, !h) {
          r(new Error("Cannot load compressed-textures in " + e.url + ", make sure you provide a fallback"));
          return;
        }
        if (h === e.url) {
          r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));
          return;
        }
        var E = {
          crossOrigin: e.crossOrigin,
          metadata: e.metadata.imageMetadata,
          parentResource: e
        }, T = ji.resolve(e.url.replace(s.baseUrl, ""), h), P = i.cacheID;
        s.add(P, T, E, function(O) {
          if (O.error) {
            r(O.error);
            return;
          }
          var H = O.texture, Y = H === void 0 ? null : H, J = O.textures, it = J === void 0 ? {} : J;
          Object.assign(e, { texture: Y, textures: it }), r();
        });
      } else
        r();
    }, Object.defineProperty(t, "textureExtensions", {
      /**  Map of available texture extensions. */
      get: function() {
        if (!t._textureExtensions) {
          var e = ee.ADAPTER.createCanvas(), r = e.getContext("webgl");
          if (!r)
            return console.warn("WebGL not available for compressed textures. Silently failing."), {};
          var i = {
            s3tc: r.getExtension("WEBGL_compressed_texture_s3tc"),
            s3tc_sRGB: r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
            etc: r.getExtension("WEBGL_compressed_texture_etc"),
            etc1: r.getExtension("WEBGL_compressed_texture_etc1"),
            pvrtc: r.getExtension("WEBGL_compressed_texture_pvrtc") || r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
            atc: r.getExtension("WEBGL_compressed_texture_atc"),
            astc: r.getExtension("WEBGL_compressed_texture_astc")
          };
          t._textureExtensions = i;
        }
        return t._textureExtensions;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "textureFormats", {
      /** Map of available texture formats. */
      get: function() {
        if (!t._textureFormats) {
          var e = t.textureExtensions;
          t._textureFormats = {};
          for (var r in e) {
            var i = e[r];
            i && Object.assign(t._textureFormats, Object.getPrototypeOf(i));
          }
        }
        return t._textureFormats;
      },
      enumerable: !1,
      configurable: !0
    }), t.extension = or.Loader, t;
  }()
);
function Vp(t, e, r) {
  var i = {
    textures: {},
    texture: null
  };
  if (!e)
    return i;
  var s = e.map(function(o) {
    return new Me(new We(o, Object.assign({
      mipmap: qi.OFF,
      alphaMode: xi.NO_PREMULTIPLIED_ALPHA
    }, r)));
  });
  return s.forEach(function(o, h) {
    var l = o.baseTexture, c = t + "-" + (h + 1);
    We.addToCache(l, c), Me.addToCache(o, c), h === 0 && (We.addToCache(l, t), Me.addToCache(o, t), i.texture = o), i.textures[c] = o;
  }), i;
}
var no, Ci, Bh = 4, wa = 124, Fb = 32, nc = 20, Mb = 542327876, Pa = {
  SIZE: 1,
  FLAGS: 2,
  HEIGHT: 3,
  WIDTH: 4,
  MIPMAP_COUNT: 7,
  PIXEL_FORMAT: 19
}, Ub = {
  SIZE: 0,
  FLAGS: 1,
  FOURCC: 2,
  RGB_BITCOUNT: 3,
  R_BIT_MASK: 4,
  G_BIT_MASK: 5,
  B_BIT_MASK: 6,
  A_BIT_MASK: 7
}, Ea = {
  DXGI_FORMAT: 0,
  RESOURCE_DIMENSION: 1,
  MISC_FLAG: 2,
  ARRAY_SIZE: 3,
  MISC_FLAGS2: 4
}, Ri;
(function(t) {
  t[t.DXGI_FORMAT_UNKNOWN = 0] = "DXGI_FORMAT_UNKNOWN", t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = "DXGI_FORMAT_R32G32B32A32_TYPELESS", t[t.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = "DXGI_FORMAT_R32G32B32A32_FLOAT", t[t.DXGI_FORMAT_R32G32B32A32_UINT = 3] = "DXGI_FORMAT_R32G32B32A32_UINT", t[t.DXGI_FORMAT_R32G32B32A32_SINT = 4] = "DXGI_FORMAT_R32G32B32A32_SINT", t[t.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = "DXGI_FORMAT_R32G32B32_TYPELESS", t[t.DXGI_FORMAT_R32G32B32_FLOAT = 6] = "DXGI_FORMAT_R32G32B32_FLOAT", t[t.DXGI_FORMAT_R32G32B32_UINT = 7] = "DXGI_FORMAT_R32G32B32_UINT", t[t.DXGI_FORMAT_R32G32B32_SINT = 8] = "DXGI_FORMAT_R32G32B32_SINT", t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = "DXGI_FORMAT_R16G16B16A16_TYPELESS", t[t.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = "DXGI_FORMAT_R16G16B16A16_FLOAT", t[t.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = "DXGI_FORMAT_R16G16B16A16_UNORM", t[t.DXGI_FORMAT_R16G16B16A16_UINT = 12] = "DXGI_FORMAT_R16G16B16A16_UINT", t[t.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = "DXGI_FORMAT_R16G16B16A16_SNORM", t[t.DXGI_FORMAT_R16G16B16A16_SINT = 14] = "DXGI_FORMAT_R16G16B16A16_SINT", t[t.DXGI_FORMAT_R32G32_TYPELESS = 15] = "DXGI_FORMAT_R32G32_TYPELESS", t[t.DXGI_FORMAT_R32G32_FLOAT = 16] = "DXGI_FORMAT_R32G32_FLOAT", t[t.DXGI_FORMAT_R32G32_UINT = 17] = "DXGI_FORMAT_R32G32_UINT", t[t.DXGI_FORMAT_R32G32_SINT = 18] = "DXGI_FORMAT_R32G32_SINT", t[t.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = "DXGI_FORMAT_R32G8X24_TYPELESS", t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = "DXGI_FORMAT_D32_FLOAT_S8X24_UINT", t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS", t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT", t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = "DXGI_FORMAT_R10G10B10A2_TYPELESS", t[t.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = "DXGI_FORMAT_R10G10B10A2_UNORM", t[t.DXGI_FORMAT_R10G10B10A2_UINT = 25] = "DXGI_FORMAT_R10G10B10A2_UINT", t[t.DXGI_FORMAT_R11G11B10_FLOAT = 26] = "DXGI_FORMAT_R11G11B10_FLOAT", t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = "DXGI_FORMAT_R8G8B8A8_TYPELESS", t[t.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = "DXGI_FORMAT_R8G8B8A8_UNORM", t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB", t[t.DXGI_FORMAT_R8G8B8A8_UINT = 30] = "DXGI_FORMAT_R8G8B8A8_UINT", t[t.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = "DXGI_FORMAT_R8G8B8A8_SNORM", t[t.DXGI_FORMAT_R8G8B8A8_SINT = 32] = "DXGI_FORMAT_R8G8B8A8_SINT", t[t.DXGI_FORMAT_R16G16_TYPELESS = 33] = "DXGI_FORMAT_R16G16_TYPELESS", t[t.DXGI_FORMAT_R16G16_FLOAT = 34] = "DXGI_FORMAT_R16G16_FLOAT", t[t.DXGI_FORMAT_R16G16_UNORM = 35] = "DXGI_FORMAT_R16G16_UNORM", t[t.DXGI_FORMAT_R16G16_UINT = 36] = "DXGI_FORMAT_R16G16_UINT", t[t.DXGI_FORMAT_R16G16_SNORM = 37] = "DXGI_FORMAT_R16G16_SNORM", t[t.DXGI_FORMAT_R16G16_SINT = 38] = "DXGI_FORMAT_R16G16_SINT", t[t.DXGI_FORMAT_R32_TYPELESS = 39] = "DXGI_FORMAT_R32_TYPELESS", t[t.DXGI_FORMAT_D32_FLOAT = 40] = "DXGI_FORMAT_D32_FLOAT", t[t.DXGI_FORMAT_R32_FLOAT = 41] = "DXGI_FORMAT_R32_FLOAT", t[t.DXGI_FORMAT_R32_UINT = 42] = "DXGI_FORMAT_R32_UINT", t[t.DXGI_FORMAT_R32_SINT = 43] = "DXGI_FORMAT_R32_SINT", t[t.DXGI_FORMAT_R24G8_TYPELESS = 44] = "DXGI_FORMAT_R24G8_TYPELESS", t[t.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = "DXGI_FORMAT_D24_UNORM_S8_UINT", t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = "DXGI_FORMAT_R24_UNORM_X8_TYPELESS", t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = "DXGI_FORMAT_X24_TYPELESS_G8_UINT", t[t.DXGI_FORMAT_R8G8_TYPELESS = 48] = "DXGI_FORMAT_R8G8_TYPELESS", t[t.DXGI_FORMAT_R8G8_UNORM = 49] = "DXGI_FORMAT_R8G8_UNORM", t[t.DXGI_FORMAT_R8G8_UINT = 50] = "DXGI_FORMAT_R8G8_UINT", t[t.DXGI_FORMAT_R8G8_SNORM = 51] = "DXGI_FORMAT_R8G8_SNORM", t[t.DXGI_FORMAT_R8G8_SINT = 52] = "DXGI_FORMAT_R8G8_SINT", t[t.DXGI_FORMAT_R16_TYPELESS = 53] = "DXGI_FORMAT_R16_TYPELESS", t[t.DXGI_FORMAT_R16_FLOAT = 54] = "DXGI_FORMAT_R16_FLOAT", t[t.DXGI_FORMAT_D16_UNORM = 55] = "DXGI_FORMAT_D16_UNORM", t[t.DXGI_FORMAT_R16_UNORM = 56] = "DXGI_FORMAT_R16_UNORM", t[t.DXGI_FORMAT_R16_UINT = 57] = "DXGI_FORMAT_R16_UINT", t[t.DXGI_FORMAT_R16_SNORM = 58] = "DXGI_FORMAT_R16_SNORM", t[t.DXGI_FORMAT_R16_SINT = 59] = "DXGI_FORMAT_R16_SINT", t[t.DXGI_FORMAT_R8_TYPELESS = 60] = "DXGI_FORMAT_R8_TYPELESS", t[t.DXGI_FORMAT_R8_UNORM = 61] = "DXGI_FORMAT_R8_UNORM", t[t.DXGI_FORMAT_R8_UINT = 62] = "DXGI_FORMAT_R8_UINT", t[t.DXGI_FORMAT_R8_SNORM = 63] = "DXGI_FORMAT_R8_SNORM", t[t.DXGI_FORMAT_R8_SINT = 64] = "DXGI_FORMAT_R8_SINT", t[t.DXGI_FORMAT_A8_UNORM = 65] = "DXGI_FORMAT_A8_UNORM", t[t.DXGI_FORMAT_R1_UNORM = 66] = "DXGI_FORMAT_R1_UNORM", t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = "DXGI_FORMAT_R9G9B9E5_SHAREDEXP", t[t.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = "DXGI_FORMAT_R8G8_B8G8_UNORM", t[t.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = "DXGI_FORMAT_G8R8_G8B8_UNORM", t[t.DXGI_FORMAT_BC1_TYPELESS = 70] = "DXGI_FORMAT_BC1_TYPELESS", t[t.DXGI_FORMAT_BC1_UNORM = 71] = "DXGI_FORMAT_BC1_UNORM", t[t.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = "DXGI_FORMAT_BC1_UNORM_SRGB", t[t.DXGI_FORMAT_BC2_TYPELESS = 73] = "DXGI_FORMAT_BC2_TYPELESS", t[t.DXGI_FORMAT_BC2_UNORM = 74] = "DXGI_FORMAT_BC2_UNORM", t[t.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = "DXGI_FORMAT_BC2_UNORM_SRGB", t[t.DXGI_FORMAT_BC3_TYPELESS = 76] = "DXGI_FORMAT_BC3_TYPELESS", t[t.DXGI_FORMAT_BC3_UNORM = 77] = "DXGI_FORMAT_BC3_UNORM", t[t.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = "DXGI_FORMAT_BC3_UNORM_SRGB", t[t.DXGI_FORMAT_BC4_TYPELESS = 79] = "DXGI_FORMAT_BC4_TYPELESS", t[t.DXGI_FORMAT_BC4_UNORM = 80] = "DXGI_FORMAT_BC4_UNORM", t[t.DXGI_FORMAT_BC4_SNORM = 81] = "DXGI_FORMAT_BC4_SNORM", t[t.DXGI_FORMAT_BC5_TYPELESS = 82] = "DXGI_FORMAT_BC5_TYPELESS", t[t.DXGI_FORMAT_BC5_UNORM = 83] = "DXGI_FORMAT_BC5_UNORM", t[t.DXGI_FORMAT_BC5_SNORM = 84] = "DXGI_FORMAT_BC5_SNORM", t[t.DXGI_FORMAT_B5G6R5_UNORM = 85] = "DXGI_FORMAT_B5G6R5_UNORM", t[t.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = "DXGI_FORMAT_B5G5R5A1_UNORM", t[t.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = "DXGI_FORMAT_B8G8R8A8_UNORM", t[t.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = "DXGI_FORMAT_B8G8R8X8_UNORM", t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM", t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = "DXGI_FORMAT_B8G8R8A8_TYPELESS", t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB", t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = "DXGI_FORMAT_B8G8R8X8_TYPELESS", t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB", t[t.DXGI_FORMAT_BC6H_TYPELESS = 94] = "DXGI_FORMAT_BC6H_TYPELESS", t[t.DXGI_FORMAT_BC6H_UF16 = 95] = "DXGI_FORMAT_BC6H_UF16", t[t.DXGI_FORMAT_BC6H_SF16 = 96] = "DXGI_FORMAT_BC6H_SF16", t[t.DXGI_FORMAT_BC7_TYPELESS = 97] = "DXGI_FORMAT_BC7_TYPELESS", t[t.DXGI_FORMAT_BC7_UNORM = 98] = "DXGI_FORMAT_BC7_UNORM", t[t.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = "DXGI_FORMAT_BC7_UNORM_SRGB", t[t.DXGI_FORMAT_AYUV = 100] = "DXGI_FORMAT_AYUV", t[t.DXGI_FORMAT_Y410 = 101] = "DXGI_FORMAT_Y410", t[t.DXGI_FORMAT_Y416 = 102] = "DXGI_FORMAT_Y416", t[t.DXGI_FORMAT_NV12 = 103] = "DXGI_FORMAT_NV12", t[t.DXGI_FORMAT_P010 = 104] = "DXGI_FORMAT_P010", t[t.DXGI_FORMAT_P016 = 105] = "DXGI_FORMAT_P016", t[t.DXGI_FORMAT_420_OPAQUE = 106] = "DXGI_FORMAT_420_OPAQUE", t[t.DXGI_FORMAT_YUY2 = 107] = "DXGI_FORMAT_YUY2", t[t.DXGI_FORMAT_Y210 = 108] = "DXGI_FORMAT_Y210", t[t.DXGI_FORMAT_Y216 = 109] = "DXGI_FORMAT_Y216", t[t.DXGI_FORMAT_NV11 = 110] = "DXGI_FORMAT_NV11", t[t.DXGI_FORMAT_AI44 = 111] = "DXGI_FORMAT_AI44", t[t.DXGI_FORMAT_IA44 = 112] = "DXGI_FORMAT_IA44", t[t.DXGI_FORMAT_P8 = 113] = "DXGI_FORMAT_P8", t[t.DXGI_FORMAT_A8P8 = 114] = "DXGI_FORMAT_A8P8", t[t.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = "DXGI_FORMAT_B4G4R4A4_UNORM", t[t.DXGI_FORMAT_P208 = 116] = "DXGI_FORMAT_P208", t[t.DXGI_FORMAT_V208 = 117] = "DXGI_FORMAT_V208", t[t.DXGI_FORMAT_V408 = 118] = "DXGI_FORMAT_V408", t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE", t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE", t[t.DXGI_FORMAT_FORCE_UINT = 121] = "DXGI_FORMAT_FORCE_UINT";
})(Ri || (Ri = {}));
var Ll;
(function(t) {
  t[t.DDS_DIMENSION_TEXTURE1D = 2] = "DDS_DIMENSION_TEXTURE1D", t[t.DDS_DIMENSION_TEXTURE2D = 3] = "DDS_DIMENSION_TEXTURE2D", t[t.DDS_DIMENSION_TEXTURE3D = 6] = "DDS_DIMENSION_TEXTURE3D";
})(Ll || (Ll = {}));
var Gb = 1, Db = 2, Bb = 4, kb = 64, Xb = 512, Vb = 131072, Hb = 827611204, zb = 861165636, jb = 894720068, Wb = 808540228, Yb = 4, qb = (no = {}, no[Hb] = ke.COMPRESSED_RGBA_S3TC_DXT1_EXT, no[zb] = ke.COMPRESSED_RGBA_S3TC_DXT3_EXT, no[jb] = ke.COMPRESSED_RGBA_S3TC_DXT5_EXT, no), Zb = (Ci = {}, // WEBGL_compressed_texture_s3tc
Ci[Ri.DXGI_FORMAT_BC1_TYPELESS] = ke.COMPRESSED_RGBA_S3TC_DXT1_EXT, Ci[Ri.DXGI_FORMAT_BC1_UNORM] = ke.COMPRESSED_RGBA_S3TC_DXT1_EXT, Ci[Ri.DXGI_FORMAT_BC2_TYPELESS] = ke.COMPRESSED_RGBA_S3TC_DXT3_EXT, Ci[Ri.DXGI_FORMAT_BC2_UNORM] = ke.COMPRESSED_RGBA_S3TC_DXT3_EXT, Ci[Ri.DXGI_FORMAT_BC3_TYPELESS] = ke.COMPRESSED_RGBA_S3TC_DXT5_EXT, Ci[Ri.DXGI_FORMAT_BC3_UNORM] = ke.COMPRESSED_RGBA_S3TC_DXT5_EXT, // WEBGL_compressed_texture_s3tc_srgb
Ci[Ri.DXGI_FORMAT_BC1_UNORM_SRGB] = ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT, Ci[Ri.DXGI_FORMAT_BC2_UNORM_SRGB] = ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT, Ci[Ri.DXGI_FORMAT_BC3_UNORM_SRGB] = ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT, Ci);
function Hp(t) {
  var e = new Uint32Array(t), r = e[0];
  if (r !== Mb)
    throw new Error("Invalid DDS file magic word");
  var i = new Uint32Array(t, 0, wa / Uint32Array.BYTES_PER_ELEMENT), s = i[Pa.HEIGHT], o = i[Pa.WIDTH], h = i[Pa.MIPMAP_COUNT], l = new Uint32Array(t, Pa.PIXEL_FORMAT * Uint32Array.BYTES_PER_ELEMENT, Fb / Uint32Array.BYTES_PER_ELEMENT), c = l[Gb];
  if (c & Bb) {
    var _ = l[Ub.FOURCC];
    if (_ !== Wb) {
      var y = qb[_], w = Bh + wa, b = new Uint8Array(t, w), E = new ja(b, {
        format: y,
        width: o,
        height: s,
        levels: h
        // CompressedTextureResource will separate the levelBuffers for us!
      });
      return [E];
    }
    var T = Bh + wa, P = new Uint32Array(e.buffer, T, nc / Uint32Array.BYTES_PER_ELEMENT), O = P[Ea.DXGI_FORMAT], H = P[Ea.RESOURCE_DIMENSION], Y = P[Ea.MISC_FLAG], J = P[Ea.ARRAY_SIZE], it = Zb[O];
    if (it === void 0)
      throw new Error("DDSParser cannot parse texture data with DXGI format " + O);
    if (Y === Yb)
      throw new Error("DDSParser does not support cubemap textures");
    if (H === Ll.DDS_DIMENSION_TEXTURE3D)
      throw new Error("DDSParser does not supported 3D texture data");
    var st = new Array(), K = Bh + wa + nc;
    if (J === 1)
      st.push(new Uint8Array(t, K));
    else {
      for (var At = Do[it], Tt = 0, dt = o, Et = s, Rt = 0; Rt < h; Rt++) {
        var Ft = Math.max(1, dt + 3 & -4), ne = Math.max(1, Et + 3 & -4), ae = Ft * ne * At;
        Tt += ae, dt = dt >>> 1, Et = Et >>> 1;
      }
      for (var zt = K, Rt = 0; Rt < J; Rt++)
        st.push(new Uint8Array(t, zt, Tt)), zt += Tt;
    }
    return st.map(function(Vt) {
      return new ja(Vt, {
        format: it,
        width: o,
        height: s,
        levels: h
      });
    });
  }
  throw c & kb ? new Error("DDSParser does not support uncompressed texture data.") : c & Xb ? new Error("DDSParser does not supported YUV uncompressed texture data.") : c & Vb ? new Error("DDSParser does not support single-channel (lumninance) texture data!") : c & Db ? new Error("DDSParser does not support single-channel (alpha) texture data!") : new Error("DDSParser failed to load a texture file due to an unknown reason!");
}
var gn, on, so, sc = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10], Jb = 67305985, $i = {
  FILE_IDENTIFIER: 0,
  ENDIANNESS: 12,
  GL_TYPE: 16,
  GL_TYPE_SIZE: 20,
  GL_FORMAT: 24,
  GL_INTERNAL_FORMAT: 28,
  GL_BASE_INTERNAL_FORMAT: 32,
  PIXEL_WIDTH: 36,
  PIXEL_HEIGHT: 40,
  PIXEL_DEPTH: 44,
  NUMBER_OF_ARRAY_ELEMENTS: 48,
  NUMBER_OF_FACES: 52,
  NUMBER_OF_MIPMAP_LEVELS: 56,
  BYTES_OF_KEY_VALUE_DATA: 60
}, Ol = 64, Fl = (gn = {}, gn[xe.UNSIGNED_BYTE] = 1, gn[xe.UNSIGNED_SHORT] = 2, gn[xe.INT] = 4, gn[xe.UNSIGNED_INT] = 4, gn[xe.FLOAT] = 4, gn[xe.HALF_FLOAT] = 8, gn), zp = (on = {}, on[Ht.RGBA] = 4, on[Ht.RGB] = 3, on[Ht.RG] = 2, on[Ht.RED] = 1, on[Ht.LUMINANCE] = 1, on[Ht.LUMINANCE_ALPHA] = 2, on[Ht.ALPHA] = 1, on), jp = (so = {}, so[xe.UNSIGNED_SHORT_4_4_4_4] = 2, so[xe.UNSIGNED_SHORT_5_5_5_1] = 2, so[xe.UNSIGNED_SHORT_5_6_5] = 2, so);
function Wp(t, e, r) {
  r === void 0 && (r = !1);
  var i = new DataView(e);
  if (!Qb(t, i))
    return null;
  var s = i.getUint32($i.ENDIANNESS, !0) === Jb, o = i.getUint32($i.GL_TYPE, s), h = i.getUint32($i.GL_FORMAT, s), l = i.getUint32($i.GL_INTERNAL_FORMAT, s), c = i.getUint32($i.PIXEL_WIDTH, s), _ = i.getUint32($i.PIXEL_HEIGHT, s) || 1, y = i.getUint32($i.PIXEL_DEPTH, s) || 1, w = i.getUint32($i.NUMBER_OF_ARRAY_ELEMENTS, s) || 1, b = i.getUint32($i.NUMBER_OF_FACES, s), E = i.getUint32($i.NUMBER_OF_MIPMAP_LEVELS, s), T = i.getUint32($i.BYTES_OF_KEY_VALUE_DATA, s);
  if (_ === 0 || y !== 1)
    throw new Error("Only 2D textures are supported");
  if (b !== 1)
    throw new Error("CubeTextures are not supported by KTXLoader yet!");
  if (w !== 1)
    throw new Error("WebGL does not support array textures");
  var P = 4, O = 4, H = c + 3 & -4, Y = _ + 3 & -4, J = new Array(w), it = c * _;
  o === 0 && (it = H * Y);
  var st;
  if (o !== 0 ? Fl[o] ? st = Fl[o] * zp[h] : st = jp[o] : st = Do[l], st === void 0)
    throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");
  for (var K = r ? tx(i, T, s) : null, At = it * st, Tt = At, dt = c, Et = _, Rt = H, Ft = Y, ne = Ol + T, ae = 0; ae < E; ae++) {
    for (var zt = i.getUint32(ne, s), Vt = ne + 4, he = 0; he < w; he++) {
      var Kt = J[he];
      Kt || (Kt = J[he] = new Array(E)), Kt[ae] = {
        levelID: ae,
        // don't align mipWidth when texture not compressed! (glType not zero)
        levelWidth: E > 1 || o !== 0 ? dt : Rt,
        levelHeight: E > 1 || o !== 0 ? Et : Ft,
        levelBuffer: new Uint8Array(e, Vt, Tt)
      }, Vt += Tt;
    }
    ne += zt + 4, ne = ne % 4 !== 0 ? ne + 4 - ne % 4 : ne, dt = dt >> 1 || 1, Et = Et >> 1 || 1, Rt = dt + P - 1 & ~(P - 1), Ft = Et + O - 1 & ~(O - 1), Tt = Rt * Ft * st;
  }
  return o !== 0 ? {
    uncompressed: J.map(function(ve) {
      var at = ve[0].levelBuffer, bt = !1;
      return o === xe.FLOAT ? at = new Float32Array(ve[0].levelBuffer.buffer, ve[0].levelBuffer.byteOffset, ve[0].levelBuffer.byteLength / 4) : o === xe.UNSIGNED_INT ? (bt = !0, at = new Uint32Array(ve[0].levelBuffer.buffer, ve[0].levelBuffer.byteOffset, ve[0].levelBuffer.byteLength / 4)) : o === xe.INT && (bt = !0, at = new Int32Array(ve[0].levelBuffer.buffer, ve[0].levelBuffer.byteOffset, ve[0].levelBuffer.byteLength / 4)), {
        resource: new ls(at, {
          width: ve[0].levelWidth,
          height: ve[0].levelHeight
        }),
        type: o,
        format: bt ? Kb(h) : h
      };
    }),
    kvData: K
  } : {
    compressed: J.map(function(ve) {
      return new ja(null, {
        format: l,
        width: c,
        height: _,
        levels: E,
        levelBuffers: ve
      });
    }),
    kvData: K
  };
}
function Qb(t, e) {
  for (var r = 0; r < sc.length; r++)
    if (e.getUint8(r) !== sc[r])
      return console.error(t + " is not a valid *.ktx file!"), !1;
  return !0;
}
function Kb(t) {
  switch (t) {
    case Ht.RGBA:
      return Ht.RGBA_INTEGER;
    case Ht.RGB:
      return Ht.RGB_INTEGER;
    case Ht.RG:
      return Ht.RG_INTEGER;
    case Ht.RED:
      return Ht.RED_INTEGER;
    default:
      return t;
  }
}
function tx(t, e, r) {
  for (var i = /* @__PURE__ */ new Map(), s = 0; s < e; ) {
    var o = t.getUint32(Ol + s, r), h = Ol + s + 4, l = 3 - (o + 3) % 4;
    if (o === 0 || o > e - s) {
      console.error("KTXLoader: keyAndValueByteSize out of bounds");
      break;
    }
    for (var c = 0; c < o && t.getUint8(h + c) !== 0; c++)
      ;
    if (c === -1) {
      console.error("KTXLoader: Failed to find null byte terminating kvData key");
      break;
    }
    var _ = new TextDecoder().decode(new Uint8Array(t.buffer, h, c)), y = new DataView(t.buffer, h + c + 1, o - c - 1);
    i.set(_, y), s += 4 + o + l;
  }
  return i;
}
$r.setExtensionXhrType("dds", $r.XHR_RESPONSE_TYPE.BUFFER);
var Yp = (
  /** @class */
  function() {
    function t() {
    }
    return t.use = function(e, r) {
      if (e.extension === "dds" && e.data)
        try {
          Object.assign(e, Vp(e.name || e.url, Hp(e.data), e.metadata));
        } catch (i) {
          r(i);
          return;
        }
      r();
    }, t.extension = or.Loader, t;
  }()
);
$r.setExtensionXhrType("ktx", $r.XHR_RESPONSE_TYPE.BUFFER);
var qp = (
  /** @class */
  function() {
    function t() {
    }
    return t.use = function(e, r) {
      if (e.extension === "ktx" && e.data)
        try {
          var i = e.name || e.url, s = Wp(i, e.data, this.loadKeyValueData), o = s.compressed, h = s.uncompressed, l = s.kvData;
          if (o) {
            var c = Vp(i, o, e.metadata);
            if (l && c.textures)
              for (var _ in c.textures)
                c.textures[_].baseTexture.ktxKeyValueData = l;
            Object.assign(e, c);
          } else if (h) {
            var y = {};
            h.forEach(function(w, b) {
              var E = new Me(new We(w.resource, {
                mipmap: qi.OFF,
                alphaMode: xi.NO_PREMULTIPLIED_ALPHA,
                type: w.type,
                format: w.format
              })), T = i + "-" + (b + 1);
              l && (E.baseTexture.ktxKeyValueData = l), We.addToCache(E.baseTexture, T), Me.addToCache(E, T), b === 0 && (y[i] = E, We.addToCache(E.baseTexture, i), Me.addToCache(E, i)), y[T] = E;
            }), Object.assign(e, { textures: y });
          }
        } catch (w) {
          r(w);
          return;
        }
      r();
    }, t.extension = or.Loader, t.loadKeyValueData = !1, t;
  }()
);
/*!
 * @pixi/particle-container - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ml = function(t, e) {
  return Ml = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Ml(t, e);
};
function Zp(t, e) {
  Ml(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var ex = (
  /** @class */
  function(t) {
    Zp(e, t);
    function e(r, i, s, o) {
      r === void 0 && (r = 1500), s === void 0 && (s = 16384), o === void 0 && (o = !1);
      var h = t.call(this) || this, l = 16384;
      return s > l && (s = l), h._properties = [!1, !0, !1, !1, !1], h._maxSize = r, h._batchSize = s, h._buffers = null, h._bufferUpdateIDs = [], h._updateID = 0, h.interactiveChildren = !1, h.blendMode = Ae.NORMAL, h.autoResize = o, h.roundPixels = !0, h.baseTexture = null, h.setProperties(i), h._tint = 0, h.tintRgb = new Float32Array(4), h.tint = 16777215, h;
    }
    return e.prototype.setProperties = function(r) {
      r && (this._properties[0] = "vertices" in r || "scale" in r ? !!r.vertices || !!r.scale : this._properties[0], this._properties[1] = "position" in r ? !!r.position : this._properties[1], this._properties[2] = "rotation" in r ? !!r.rotation : this._properties[2], this._properties[3] = "uvs" in r ? !!r.uvs : this._properties[3], this._properties[4] = "tint" in r || "alpha" in r ? !!r.tint || !!r.alpha : this._properties[4]);
    }, e.prototype.updateTransform = function() {
      this.displayObjectUpdateTransform();
    }, Object.defineProperty(e.prototype, "tint", {
      /**
       * The tint applied to the container. This is a hex value.
       * A value of 0xFFFFFF will remove any tint effect.
       * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r, ss(r, this.tintRgb);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.render = function(r) {
      var i = this;
      !this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable || (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once("update", function() {
        return i.onChildrenChange(0);
      })), r.batch.setObjectRenderer(r.plugins.particle), r.plugins.particle.render(this));
    }, e.prototype.onChildrenChange = function(r) {
      for (var i = Math.floor(r / this._batchSize); this._bufferUpdateIDs.length < i; )
        this._bufferUpdateIDs.push(0);
      this._bufferUpdateIDs[i] = ++this._updateID;
    }, e.prototype.dispose = function() {
      if (this._buffers) {
        for (var r = 0; r < this._buffers.length; ++r)
          this._buffers[r].destroy();
        this._buffers = null;
      }
    }, e.prototype.destroy = function(r) {
      t.prototype.destroy.call(this, r), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null;
    }, e;
  }(Ti)
), oc = (
  /** @class */
  function() {
    function t(e, r, i) {
      this.geometry = new Gs(), this.indexBuffer = null, this.size = i, this.dynamicProperties = [], this.staticProperties = [];
      for (var s = 0; s < e.length; ++s) {
        var o = e[s];
        o = {
          attributeName: o.attributeName,
          size: o.size,
          uploadFunction: o.uploadFunction,
          type: o.type || xe.FLOAT,
          offset: o.offset
        }, r[s] ? this.dynamicProperties.push(o) : this.staticProperties.push(o);
      }
      this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers();
    }
    return t.prototype.initBuffers = function() {
      var e = this.geometry, r = 0;
      this.indexBuffer = new Br(z_(this.size), !0, !0), e.addIndex(this.indexBuffer), this.dynamicStride = 0;
      for (var i = 0; i < this.dynamicProperties.length; ++i) {
        var s = this.dynamicProperties[i];
        s.offset = r, r += s.size, this.dynamicStride += s.size;
      }
      var o = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
      this.dynamicData = new Float32Array(o), this.dynamicDataUint32 = new Uint32Array(o), this.dynamicBuffer = new Br(this.dynamicData, !1, !1);
      var h = 0;
      this.staticStride = 0;
      for (var i = 0; i < this.staticProperties.length; ++i) {
        var s = this.staticProperties[i];
        s.offset = h, h += s.size, this.staticStride += s.size;
      }
      var l = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
      this.staticData = new Float32Array(l), this.staticDataUint32 = new Uint32Array(l), this.staticBuffer = new Br(this.staticData, !0, !1);
      for (var i = 0; i < this.dynamicProperties.length; ++i) {
        var s = this.dynamicProperties[i];
        e.addAttribute(s.attributeName, this.dynamicBuffer, 0, s.type === xe.UNSIGNED_BYTE, s.type, this.dynamicStride * 4, s.offset * 4);
      }
      for (var i = 0; i < this.staticProperties.length; ++i) {
        var s = this.staticProperties[i];
        e.addAttribute(s.attributeName, this.staticBuffer, 0, s.type === xe.UNSIGNED_BYTE, s.type, this.staticStride * 4, s.offset * 4);
      }
    }, t.prototype.uploadDynamic = function(e, r, i) {
      for (var s = 0; s < this.dynamicProperties.length; s++) {
        var o = this.dynamicProperties[s];
        o.uploadFunction(e, r, i, o.type === xe.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, o.offset);
      }
      this.dynamicBuffer._updateID++;
    }, t.prototype.uploadStatic = function(e, r, i) {
      for (var s = 0; s < this.staticProperties.length; s++) {
        var o = this.staticProperties[s];
        o.uploadFunction(e, r, i, o.type === xe.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, o.offset);
      }
      this.staticBuffer._updateID++;
    }, t.prototype.destroy = function() {
      this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy();
    }, t;
  }()
), rx = `varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`, ix = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`, Jp = (
  /** @class */
  function(t) {
    Zp(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return i.shader = null, i.properties = null, i.tempMatrix = new wr(), i.properties = [
        // verticesData
        {
          attributeName: "aVertexPosition",
          size: 2,
          uploadFunction: i.uploadVertices,
          offset: 0
        },
        // positionData
        {
          attributeName: "aPositionCoord",
          size: 2,
          uploadFunction: i.uploadPosition,
          offset: 0
        },
        // rotationData
        {
          attributeName: "aRotation",
          size: 1,
          uploadFunction: i.uploadRotation,
          offset: 0
        },
        // uvsData
        {
          attributeName: "aTextureCoord",
          size: 2,
          uploadFunction: i.uploadUvs,
          offset: 0
        },
        // tintData
        {
          attributeName: "aColor",
          size: 1,
          type: xe.UNSIGNED_BYTE,
          uploadFunction: i.uploadTint,
          offset: 0
        }
      ], i.shader = cn.from(ix, rx, {}), i.state = Cn.for2d(), i;
    }
    return e.prototype.render = function(r) {
      var i = r.children, s = r._maxSize, o = r._batchSize, h = this.renderer, l = i.length;
      if (l !== 0) {
        l > s && !r.autoResize && (l = s);
        var c = r._buffers;
        c || (c = r._buffers = this.generateBuffers(r));
        var _ = i[0]._texture.baseTexture, y = _.alphaMode > 0;
        this.state.blendMode = Pu(r.blendMode, y), h.state.set(this.state);
        var w = h.gl, b = r.worldTransform.copyTo(this.tempMatrix);
        b.prepend(h.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = b.toArray(!0), this.shader.uniforms.uColor = H_(r.tintRgb, r.worldAlpha, this.shader.uniforms.uColor, y), this.shader.uniforms.uSampler = _, this.renderer.shader.bind(this.shader);
        for (var E = !1, T = 0, P = 0; T < l; T += o, P += 1) {
          var O = l - T;
          O > o && (O = o), P >= c.length && c.push(this._generateOneMoreBuffer(r));
          var H = c[P];
          H.uploadDynamic(i, T, O);
          var Y = r._bufferUpdateIDs[P] || 0;
          E = E || H._updateID < Y, E && (H._updateID = r._updateID, H.uploadStatic(i, T, O)), h.geometry.bind(H.geometry), w.drawElements(w.TRIANGLES, O * 6, w.UNSIGNED_SHORT, 0);
        }
      }
    }, e.prototype.generateBuffers = function(r) {
      for (var i = [], s = r._maxSize, o = r._batchSize, h = r._properties, l = 0; l < s; l += o)
        i.push(new oc(this.properties, h, o));
      return i;
    }, e.prototype._generateOneMoreBuffer = function(r) {
      var i = r._batchSize, s = r._properties;
      return new oc(this.properties, s, i);
    }, e.prototype.uploadVertices = function(r, i, s, o, h, l) {
      for (var c = 0, _ = 0, y = 0, w = 0, b = 0; b < s; ++b) {
        var E = r[i + b], T = E._texture, P = E.scale.x, O = E.scale.y, H = T.trim, Y = T.orig;
        H ? (_ = H.x - E.anchor.x * Y.width, c = _ + H.width, w = H.y - E.anchor.y * Y.height, y = w + H.height) : (c = Y.width * (1 - E.anchor.x), _ = Y.width * -E.anchor.x, y = Y.height * (1 - E.anchor.y), w = Y.height * -E.anchor.y), o[l] = _ * P, o[l + 1] = w * O, o[l + h] = c * P, o[l + h + 1] = w * O, o[l + h * 2] = c * P, o[l + h * 2 + 1] = y * O, o[l + h * 3] = _ * P, o[l + h * 3 + 1] = y * O, l += h * 4;
      }
    }, e.prototype.uploadPosition = function(r, i, s, o, h, l) {
      for (var c = 0; c < s; c++) {
        var _ = r[i + c].position;
        o[l] = _.x, o[l + 1] = _.y, o[l + h] = _.x, o[l + h + 1] = _.y, o[l + h * 2] = _.x, o[l + h * 2 + 1] = _.y, o[l + h * 3] = _.x, o[l + h * 3 + 1] = _.y, l += h * 4;
      }
    }, e.prototype.uploadRotation = function(r, i, s, o, h, l) {
      for (var c = 0; c < s; c++) {
        var _ = r[i + c].rotation;
        o[l] = _, o[l + h] = _, o[l + h * 2] = _, o[l + h * 3] = _, l += h * 4;
      }
    }, e.prototype.uploadUvs = function(r, i, s, o, h, l) {
      for (var c = 0; c < s; ++c) {
        var _ = r[i + c]._texture._uvs;
        _ ? (o[l] = _.x0, o[l + 1] = _.y0, o[l + h] = _.x1, o[l + h + 1] = _.y1, o[l + h * 2] = _.x2, o[l + h * 2 + 1] = _.y2, o[l + h * 3] = _.x3, o[l + h * 3 + 1] = _.y3, l += h * 4) : (o[l] = 0, o[l + 1] = 0, o[l + h] = 0, o[l + h + 1] = 0, o[l + h * 2] = 0, o[l + h * 2 + 1] = 0, o[l + h * 3] = 0, o[l + h * 3 + 1] = 0, l += h * 4);
      }
    }, e.prototype.uploadTint = function(r, i, s, o, h, l) {
      for (var c = 0; c < s; ++c) {
        var _ = r[i + c], y = _._texture.baseTexture.alphaMode > 0, w = _.alpha, b = w < 1 && y ? eh(_._tintRGB, w) : _._tintRGB + (w * 255 << 24);
        o[l] = b, o[l + h] = b, o[l + h * 2] = b, o[l + h * 3] = b, l += h * 4;
      }
    }, e.prototype.destroy = function() {
      t.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null;
    }, e.extension = {
      name: "particle",
      type: or.RendererPlugin
    }, e;
  }(Zo)
);
/*!
 * @pixi/graphics - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var un;
(function(t) {
  t.MITER = "miter", t.BEVEL = "bevel", t.ROUND = "round";
})(un || (un = {}));
var fn;
(function(t) {
  t.BUTT = "butt", t.ROUND = "round", t.SQUARE = "square";
})(fn || (fn = {}));
var Ns = {
  adaptive: !0,
  maxLength: 10,
  minSegments: 8,
  maxSegments: 2048,
  epsilon: 1e-4,
  _segmentsCount: function(t, e) {
    if (e === void 0 && (e = 20), !this.adaptive || !t || isNaN(t))
      return e;
    var r = Math.ceil(t / this.maxLength);
    return r < this.minSegments ? r = this.minSegments : r > this.maxSegments && (r = this.maxSegments), r;
  }
}, i0 = (
  /** @class */
  function() {
    function t() {
      this.color = 16777215, this.alpha = 1, this.texture = Me.WHITE, this.matrix = null, this.visible = !1, this.reset();
    }
    return t.prototype.clone = function() {
      var e = new t();
      return e.color = this.color, e.alpha = this.alpha, e.texture = this.texture, e.matrix = this.matrix, e.visible = this.visible, e;
    }, t.prototype.reset = function() {
      this.color = 16777215, this.alpha = 1, this.texture = Me.WHITE, this.matrix = null, this.visible = !1;
    }, t.prototype.destroy = function() {
      this.texture = null, this.matrix = null;
    }, t;
  }()
);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ul = function(t, e) {
  return Ul = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Ul(t, e);
};
function n0(t, e) {
  Ul(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
function ac(t, e) {
  var r, i;
  e === void 0 && (e = !1);
  var s = t.length;
  if (!(s < 6)) {
    for (var o = 0, h = 0, l = t[s - 2], c = t[s - 1]; h < s; h += 2) {
      var _ = t[h], y = t[h + 1];
      o += (_ - l) * (y + c), l = _, c = y;
    }
    if (!e && o > 0 || e && o <= 0)
      for (var w = s / 2, h = w + w % 2; h < s; h += 2) {
        var b = s - h - 2, E = s - h - 1, T = h, P = h + 1;
        r = [t[T], t[b]], t[b] = r[0], t[T] = r[1], i = [t[P], t[E]], t[E] = i[0], t[P] = i[1];
      }
  }
}
var s0 = {
  build: function(t) {
    t.points = t.shape.points.slice();
  },
  triangulate: function(t, e) {
    var r = t.points, i = t.holes, s = e.points, o = e.indices;
    if (r.length >= 6) {
      ac(r, !1);
      for (var h = [], l = 0; l < i.length; l++) {
        var c = i[l];
        ac(c.points, !0), h.push(r.length / 2), r = r.concat(c.points);
      }
      var _ = Rs(r, h, 2);
      if (!_)
        return;
      for (var y = s.length / 2, l = 0; l < _.length; l += 3)
        o.push(_[l] + y), o.push(_[l + 1] + y), o.push(_[l + 2] + y);
      for (var l = 0; l < r.length; l++)
        s.push(r[l]);
    }
  }
}, Bo = {
  build: function(t) {
    var e = t.points, r, i, s, o, h, l;
    if (t.type === Xr.CIRC) {
      var c = t.shape;
      r = c.x, i = c.y, h = l = c.radius, s = o = 0;
    } else if (t.type === Xr.ELIP) {
      var _ = t.shape;
      r = _.x, i = _.y, h = _.width, l = _.height, s = o = 0;
    } else {
      var y = t.shape, w = y.width / 2, b = y.height / 2;
      r = y.x + w, i = y.y + b, h = l = Math.max(0, Math.min(y.radius, Math.min(w, b))), s = w - h, o = b - l;
    }
    if (!(h >= 0 && l >= 0 && s >= 0 && o >= 0)) {
      e.length = 0;
      return;
    }
    var E = Math.ceil(2.3 * Math.sqrt(h + l)), T = E * 8 + (s ? 4 : 0) + (o ? 4 : 0);
    if (e.length = T, T !== 0) {
      if (E === 0) {
        e.length = 8, e[0] = e[6] = r + s, e[1] = e[3] = i + o, e[2] = e[4] = r - s, e[5] = e[7] = i - o;
        return;
      }
      var P = 0, O = E * 4 + (s ? 2 : 0) + 2, H = O, Y = T;
      {
        var J = s + h, it = o, st = r + J, K = r - J, At = i + it;
        if (e[P++] = st, e[P++] = At, e[--O] = At, e[--O] = K, o) {
          var Tt = i - it;
          e[H++] = K, e[H++] = Tt, e[--Y] = Tt, e[--Y] = st;
        }
      }
      for (var dt = 1; dt < E; dt++) {
        var Et = Math.PI / 2 * (dt / E), J = s + Math.cos(Et) * h, it = o + Math.sin(Et) * l, st = r + J, K = r - J, At = i + it, Tt = i - it;
        e[P++] = st, e[P++] = At, e[--O] = At, e[--O] = K, e[H++] = K, e[H++] = Tt, e[--Y] = Tt, e[--Y] = st;
      }
      {
        var J = s, it = o + l, st = r + J, K = r - J, At = i + it, Tt = i - it;
        e[P++] = st, e[P++] = At, e[--Y] = Tt, e[--Y] = st, s && (e[P++] = K, e[P++] = At, e[--Y] = Tt, e[--Y] = K);
      }
    }
  },
  triangulate: function(t, e) {
    var r = t.points, i = e.points, s = e.indices;
    if (r.length !== 0) {
      var o = i.length / 2, h = o, l, c;
      if (t.type !== Xr.RREC) {
        var _ = t.shape;
        l = _.x, c = _.y;
      } else {
        var y = t.shape;
        l = y.x + y.width / 2, c = y.y + y.height / 2;
      }
      var w = t.matrix;
      i.push(t.matrix ? w.a * l + w.c * c + w.tx : l, t.matrix ? w.b * l + w.d * c + w.ty : c), o++, i.push(r[0], r[1]);
      for (var b = 2; b < r.length; b += 2)
        i.push(r[b], r[b + 1]), s.push(o++, h, o);
      s.push(h + 1, h, o);
    }
  }
}, Qp = {
  build: function(t) {
    var e = t.shape, r = e.x, i = e.y, s = e.width, o = e.height, h = t.points;
    h.length = 0, h.push(r, i, r + s, i, r + s, i + o, r, i + o);
  },
  triangulate: function(t, e) {
    var r = t.points, i = e.points, s = i.length / 2;
    i.push(r[0], r[1], r[2], r[3], r[6], r[7], r[4], r[5]), e.indices.push(s, s + 1, s + 2, s + 1, s + 2, s + 3);
  }
};
function ms(t, e, r) {
  var i = e - t;
  return t + i * r;
}
function Ia(t, e, r, i, s, o, h) {
  h === void 0 && (h = []);
  for (var l = 20, c = h, _ = 0, y = 0, w = 0, b = 0, E = 0, T = 0, P = 0, O = 0; P <= l; ++P)
    O = P / l, _ = ms(t, r, O), y = ms(e, i, O), w = ms(r, s, O), b = ms(i, o, O), E = ms(_, w, O), T = ms(y, b, O), !(P === 0 && c[c.length - 2] === E && c[c.length - 1] === T) && c.push(E, T);
  return c;
}
var Kp = {
  build: function(t) {
    if (ko.nextRoundedRectBehavior) {
      Bo.build(t);
      return;
    }
    var e = t.shape, r = t.points, i = e.x, s = e.y, o = e.width, h = e.height, l = Math.max(0, Math.min(e.radius, Math.min(o, h) / 2));
    r.length = 0, l ? (Ia(i, s + l, i, s, i + l, s, r), Ia(i + o - l, s, i + o, s, i + o, s + l, r), Ia(i + o, s + h - l, i + o, s + h, i + o - l, s + h, r), Ia(i + l, s + h, i, s + h, i, s + h - l, r)) : r.push(i, s, i + o, s, i + o, s + h, i, s + h);
  },
  triangulate: function(t, e) {
    if (ko.nextRoundedRectBehavior) {
      Bo.triangulate(t, e);
      return;
    }
    for (var r = t.points, i = e.points, s = e.indices, o = i.length / 2, h = Rs(r, null, 2), l = 0, c = h.length; l < c; l += 3)
      s.push(h[l] + o), s.push(h[l + 1] + o), s.push(h[l + 2] + o);
    for (var l = 0, c = r.length; l < c; l++)
      i.push(r[l], r[++l]);
  }
};
function hc(t, e, r, i, s, o, h, l) {
  var c = t - r * s, _ = e - i * s, y = t + r * o, w = e + i * o, b, E;
  h ? (b = i, E = -r) : (b = -i, E = r);
  var T = c + b, P = _ + E, O = y + b, H = w + E;
  return l.push(T, P), l.push(O, H), 2;
}
function gs(t, e, r, i, s, o, h, l) {
  var c = r - t, _ = i - e, y = Math.atan2(c, _), w = Math.atan2(s - t, o - e);
  l && y < w ? y += Math.PI * 2 : !l && y > w && (w += Math.PI * 2);
  var b = y, E = w - y, T = Math.abs(E), P = Math.sqrt(c * c + _ * _), O = (15 * T * Math.sqrt(P) / Math.PI >> 0) + 1, H = E / O;
  if (b += H, l) {
    h.push(t, e), h.push(r, i);
    for (var Y = 1, J = b; Y < O; Y++, J += H)
      h.push(t, e), h.push(t + Math.sin(J) * P, e + Math.cos(J) * P);
    h.push(t, e), h.push(s, o);
  } else {
    h.push(r, i), h.push(t, e);
    for (var Y = 1, J = b; Y < O; Y++, J += H)
      h.push(t + Math.sin(J) * P, e + Math.cos(J) * P), h.push(t, e);
    h.push(s, o), h.push(t, e);
  }
  return O * 2;
}
function nx(t, e) {
  var r = t.shape, i = t.points || r.points.slice(), s = e.closePointEps;
  if (i.length !== 0) {
    var o = t.lineStyle, h = new _r(i[0], i[1]), l = new _r(i[i.length - 2], i[i.length - 1]), c = r.type !== Xr.POLY || r.closeStroke, _ = Math.abs(h.x - l.x) < s && Math.abs(h.y - l.y) < s;
    if (c) {
      i = i.slice(), _ && (i.pop(), i.pop(), l.set(i[i.length - 2], i[i.length - 1]));
      var y = (h.x + l.x) * 0.5, w = (l.y + h.y) * 0.5;
      i.unshift(y, w), i.push(y, w);
    }
    var b = e.points, E = i.length / 2, T = i.length, P = b.length / 2, O = o.width / 2, H = O * O, Y = o.miterLimit * o.miterLimit, J = i[0], it = i[1], st = i[2], K = i[3], At = 0, Tt = 0, dt = -(it - K), Et = J - st, Rt = 0, Ft = 0, ne = Math.sqrt(dt * dt + Et * Et);
    dt /= ne, Et /= ne, dt *= O, Et *= O;
    var ae = o.alignment, zt = (1 - ae) * 2, Vt = ae * 2;
    c || (o.cap === fn.ROUND ? T += gs(J - dt * (zt - Vt) * 0.5, it - Et * (zt - Vt) * 0.5, J - dt * zt, it - Et * zt, J + dt * Vt, it + Et * Vt, b, !0) + 2 : o.cap === fn.SQUARE && (T += hc(J, it, dt, Et, zt, Vt, !0, b))), b.push(J - dt * zt, it - Et * zt), b.push(J + dt * Vt, it + Et * Vt);
    for (var he = 1; he < E - 1; ++he) {
      J = i[(he - 1) * 2], it = i[(he - 1) * 2 + 1], st = i[he * 2], K = i[he * 2 + 1], At = i[(he + 1) * 2], Tt = i[(he + 1) * 2 + 1], dt = -(it - K), Et = J - st, ne = Math.sqrt(dt * dt + Et * Et), dt /= ne, Et /= ne, dt *= O, Et *= O, Rt = -(K - Tt), Ft = st - At, ne = Math.sqrt(Rt * Rt + Ft * Ft), Rt /= ne, Ft /= ne, Rt *= O, Ft *= O;
      var Kt = st - J, ve = it - K, at = st - At, bt = Tt - K, vt = ve * at - bt * Kt, le = vt < 0;
      if (Math.abs(vt) < 0.1) {
        b.push(st - dt * zt, K - Et * zt), b.push(st + dt * Vt, K + Et * Vt);
        continue;
      }
      var Gt = (-dt + J) * (-Et + K) - (-dt + st) * (-Et + it), se = (-Rt + At) * (-Ft + K) - (-Rt + st) * (-Ft + Tt), Pe = (Kt * se - at * Gt) / vt, Zt = (bt * Gt - ve * se) / vt, Be = (Pe - st) * (Pe - st) + (Zt - K) * (Zt - K), _e = st + (Pe - st) * zt, fe = K + (Zt - K) * zt, ue = st - (Pe - st) * Vt, me = K - (Zt - K) * Vt, Nt = Math.min(Kt * Kt + ve * ve, at * at + bt * bt), Ue = le ? zt : Vt, Ke = Nt + Ue * Ue * H, ce = Be <= Ke;
      ce ? o.join === un.BEVEL || Be / H > Y ? (le ? (b.push(_e, fe), b.push(st + dt * Vt, K + Et * Vt), b.push(_e, fe), b.push(st + Rt * Vt, K + Ft * Vt)) : (b.push(st - dt * zt, K - Et * zt), b.push(ue, me), b.push(st - Rt * zt, K - Ft * zt), b.push(ue, me)), T += 2) : o.join === un.ROUND ? le ? (b.push(_e, fe), b.push(st + dt * Vt, K + Et * Vt), T += gs(st, K, st + dt * Vt, K + Et * Vt, st + Rt * Vt, K + Ft * Vt, b, !0) + 4, b.push(_e, fe), b.push(st + Rt * Vt, K + Ft * Vt)) : (b.push(st - dt * zt, K - Et * zt), b.push(ue, me), T += gs(st, K, st - dt * zt, K - Et * zt, st - Rt * zt, K - Ft * zt, b, !1) + 4, b.push(st - Rt * zt, K - Ft * zt), b.push(ue, me)) : (b.push(_e, fe), b.push(ue, me)) : (b.push(st - dt * zt, K - Et * zt), b.push(st + dt * Vt, K + Et * Vt), o.join === un.ROUND ? le ? T += gs(st, K, st + dt * Vt, K + Et * Vt, st + Rt * Vt, K + Ft * Vt, b, !0) + 2 : T += gs(st, K, st - dt * zt, K - Et * zt, st - Rt * zt, K - Ft * zt, b, !1) + 2 : o.join === un.MITER && Be / H <= Y && (le ? (b.push(ue, me), b.push(ue, me)) : (b.push(_e, fe), b.push(_e, fe)), T += 2), b.push(st - Rt * zt, K - Ft * zt), b.push(st + Rt * Vt, K + Ft * Vt), T += 2);
    }
    J = i[(E - 2) * 2], it = i[(E - 2) * 2 + 1], st = i[(E - 1) * 2], K = i[(E - 1) * 2 + 1], dt = -(it - K), Et = J - st, ne = Math.sqrt(dt * dt + Et * Et), dt /= ne, Et /= ne, dt *= O, Et *= O, b.push(st - dt * zt, K - Et * zt), b.push(st + dt * Vt, K + Et * Vt), c || (o.cap === fn.ROUND ? T += gs(st - dt * (zt - Vt) * 0.5, K - Et * (zt - Vt) * 0.5, st - dt * zt, K - Et * zt, st + dt * Vt, K + Et * Vt, b, !1) + 2 : o.cap === fn.SQUARE && (T += hc(st, K, dt, Et, zt, Vt, !1, b)));
    for (var kr = e.indices, Ur = Ns.epsilon * Ns.epsilon, he = P; he < T + P - 2; ++he)
      J = b[he * 2], it = b[he * 2 + 1], st = b[(he + 1) * 2], K = b[(he + 1) * 2 + 1], At = b[(he + 2) * 2], Tt = b[(he + 2) * 2 + 1], !(Math.abs(J * (K - Tt) + st * (Tt - it) + At * (it - K)) < Ur) && kr.push(he, he + 1, he + 2);
  }
}
function sx(t, e) {
  var r = 0, i = t.shape, s = t.points || i.points, o = i.type !== Xr.POLY || i.closeStroke;
  if (s.length !== 0) {
    var h = e.points, l = e.indices, c = s.length / 2, _ = h.length / 2, y = _;
    for (h.push(s[0], s[1]), r = 1; r < c; r++)
      h.push(s[r * 2], s[r * 2 + 1]), l.push(y, y + 1), y++;
    o && l.push(y, _);
  }
}
function Gl(t, e) {
  t.lineStyle.native ? sx(t, e) : nx(t, e);
}
var Dl = (
  /** @class */
  function() {
    function t() {
    }
    return t.curveTo = function(e, r, i, s, o, h) {
      var l = h[h.length - 2], c = h[h.length - 1], _ = c - r, y = l - e, w = s - r, b = i - e, E = Math.abs(_ * b - y * w);
      if (E < 1e-8 || o === 0)
        return (h[h.length - 2] !== e || h[h.length - 1] !== r) && h.push(e, r), null;
      var T = _ * _ + y * y, P = w * w + b * b, O = _ * w + y * b, H = o * Math.sqrt(T) / E, Y = o * Math.sqrt(P) / E, J = H * O / T, it = Y * O / P, st = H * b + Y * y, K = H * w + Y * _, At = y * (Y + J), Tt = _ * (Y + J), dt = b * (H + it), Et = w * (H + it), Rt = Math.atan2(Tt - K, At - st), Ft = Math.atan2(Et - K, dt - st);
      return {
        cx: st + e,
        cy: K + r,
        radius: o,
        startAngle: Rt,
        endAngle: Ft,
        anticlockwise: y * w > b * _
      };
    }, t.arc = function(e, r, i, s, o, h, l, c, _) {
      for (var y = l - h, w = Ns._segmentsCount(Math.abs(y) * o, Math.ceil(Math.abs(y) / Fo) * 40), b = y / (w * 2), E = b * 2, T = Math.cos(b), P = Math.sin(b), O = w - 1, H = O % 1 / O, Y = 0; Y <= O; ++Y) {
        var J = Y + H * Y, it = b + h + E * J, st = Math.cos(it), K = -Math.sin(it);
        _.push((T * st + P * K) * o + i, (T * -K + P * st) * o + s);
      }
    }, t;
  }()
), t2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.curveLength = function(e, r, i, s, o, h, l, c) {
      for (var _ = 10, y = 0, w = 0, b = 0, E = 0, T = 0, P = 0, O = 0, H = 0, Y = 0, J = 0, it = 0, st = e, K = r, At = 1; At <= _; ++At)
        w = At / _, b = w * w, E = b * w, T = 1 - w, P = T * T, O = P * T, H = O * e + 3 * P * w * i + 3 * T * b * o + E * l, Y = O * r + 3 * P * w * s + 3 * T * b * h + E * c, J = st - H, it = K - Y, st = H, K = Y, y += Math.sqrt(J * J + it * it);
      return y;
    }, t.curveTo = function(e, r, i, s, o, h, l) {
      var c = l[l.length - 2], _ = l[l.length - 1];
      l.length -= 2;
      var y = Ns._segmentsCount(t.curveLength(c, _, e, r, i, s, o, h)), w = 0, b = 0, E = 0, T = 0, P = 0;
      l.push(c, _);
      for (var O = 1, H = 0; O <= y; ++O)
        H = O / y, w = 1 - H, b = w * w, E = b * w, T = H * H, P = T * H, l.push(E * c + 3 * b * H * e + 3 * w * T * i + P * o, E * _ + 3 * b * H * r + 3 * w * T * s + P * h);
    }, t;
  }()
), e2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.curveLength = function(e, r, i, s, o, h) {
      var l = e - 2 * i + o, c = r - 2 * s + h, _ = 2 * i - 2 * e, y = 2 * s - 2 * r, w = 4 * (l * l + c * c), b = 4 * (l * _ + c * y), E = _ * _ + y * y, T = 2 * Math.sqrt(w + b + E), P = Math.sqrt(w), O = 2 * w * P, H = 2 * Math.sqrt(E), Y = b / P;
      return (O * T + P * b * (T - H) + (4 * E * w - b * b) * Math.log((2 * P + Y + T) / (Y + H))) / (4 * O);
    }, t.curveTo = function(e, r, i, s, o) {
      for (var h = o[o.length - 2], l = o[o.length - 1], c = Ns._segmentsCount(t.curveLength(h, l, e, r, i, s)), _ = 0, y = 0, w = 1; w <= c; ++w) {
        var b = w / c;
        _ = h + (e - h) * b, y = l + (r - l) * b, o.push(_ + (e + (i - e) * b - _) * b, y + (r + (s - r) * b - y) * b);
      }
    }, t;
  }()
), r2 = (
  /** @class */
  function() {
    function t() {
      this.reset();
    }
    return t.prototype.begin = function(e, r, i) {
      this.reset(), this.style = e, this.start = r, this.attribStart = i;
    }, t.prototype.end = function(e, r) {
      this.attribSize = r - this.attribStart, this.size = e - this.start;
    }, t.prototype.reset = function() {
      this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0;
    }, t;
  }()
), Bn, Ma = (Bn = {}, Bn[Xr.POLY] = s0, Bn[Xr.CIRC] = Bo, Bn[Xr.ELIP] = Bo, Bn[Xr.RECT] = Qp, Bn[Xr.RREC] = Kp, Bn), Bl = [], po = [], kl = (
  /** @class */
  function() {
    function t(e, r, i, s) {
      r === void 0 && (r = null), i === void 0 && (i = null), s === void 0 && (s = null), this.points = [], this.holes = [], this.shape = e, this.lineStyle = i, this.fillStyle = r, this.matrix = s, this.type = e.type;
    }
    return t.prototype.clone = function() {
      return new t(this.shape, this.fillStyle, this.lineStyle, this.matrix);
    }, t.prototype.destroy = function() {
      this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null;
    }, t;
  }()
), ys = new _r(), i2 = (
  /** @class */
  function(t) {
    n0(e, t);
    function e() {
      var r = t.call(this) || this;
      return r.closePointEps = 1e-4, r.boundsPadding = 0, r.uvsFloat32 = null, r.indicesUint16 = null, r.batchable = !1, r.points = [], r.colors = [], r.uvs = [], r.indices = [], r.textureIds = [], r.graphicsData = [], r.drawCalls = [], r.batchDirty = -1, r.batches = [], r.dirty = 0, r.cacheDirty = -1, r.clearDirty = 0, r.shapeIndex = 0, r._bounds = new Mo(), r.boundsDirty = -1, r;
    }
    return Object.defineProperty(e.prototype, "bounds", {
      /**
       * Get the current bounds of the graphic geometry.
       * @readonly
       */
      get: function() {
        return this.updateBatches(), this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.invalidate = function() {
      this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0;
      for (var r = 0; r < this.drawCalls.length; r++)
        this.drawCalls[r].texArray.clear(), po.push(this.drawCalls[r]);
      this.drawCalls.length = 0;
      for (var r = 0; r < this.batches.length; r++) {
        var i = this.batches[r];
        i.reset(), Bl.push(i);
      }
      this.batches.length = 0;
    }, e.prototype.clear = function() {
      return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this;
    }, e.prototype.drawShape = function(r, i, s, o) {
      i === void 0 && (i = null), s === void 0 && (s = null), o === void 0 && (o = null);
      var h = new kl(r, i, s, o);
      return this.graphicsData.push(h), this.dirty++, this;
    }, e.prototype.drawHole = function(r, i) {
      if (i === void 0 && (i = null), !this.graphicsData.length)
        return null;
      var s = new kl(r, null, null, i), o = this.graphicsData[this.graphicsData.length - 1];
      return s.lineStyle = o.lineStyle, o.holes.push(s), this.dirty++, this;
    }, e.prototype.destroy = function() {
      t.prototype.destroy.call(this);
      for (var r = 0; r < this.graphicsData.length; ++r)
        this.graphicsData[r].destroy();
      this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null;
    }, e.prototype.containsPoint = function(r) {
      for (var i = this.graphicsData, s = 0; s < i.length; ++s) {
        var o = i[s];
        if (o.fillStyle.visible && o.shape && (o.matrix ? o.matrix.applyInverse(r, ys) : ys.copyFrom(r), o.shape.contains(ys.x, ys.y))) {
          var h = !1;
          if (o.holes)
            for (var l = 0; l < o.holes.length; l++) {
              var c = o.holes[l];
              if (c.shape.contains(ys.x, ys.y)) {
                h = !0;
                break;
              }
            }
          if (!h)
            return !0;
        }
      }
      return !1;
    }, e.prototype.updateBatches = function() {
      if (!this.graphicsData.length) {
        this.batchable = !0;
        return;
      }
      if (this.validateBatching()) {
        this.cacheDirty = this.dirty;
        var r = this.uvs, i = this.graphicsData, s = null, o = null;
        this.batches.length > 0 && (s = this.batches[this.batches.length - 1], o = s.style);
        for (var h = this.shapeIndex; h < i.length; h++) {
          this.shapeIndex++;
          var l = i[h], c = l.fillStyle, _ = l.lineStyle, y = Ma[l.type];
          y.build(l), l.matrix && this.transformPoints(l.points, l.matrix), (c.visible || _.visible) && this.processHoles(l.holes);
          for (var w = 0; w < 2; w++) {
            var b = w === 0 ? c : _;
            if (b.visible) {
              var E = b.texture.baseTexture, T = this.indices.length, P = this.points.length / 2;
              E.wrapMode = Wi.REPEAT, w === 0 ? this.processFill(l) : this.processLine(l);
              var O = this.points.length / 2 - P;
              O !== 0 && (s && !this._compareStyles(o, b) && (s.end(T, P), s = null), s || (s = Bl.pop() || new r2(), s.begin(b, T, P), this.batches.push(s), o = b), this.addUvs(this.points, r, b.texture, P, O, b.matrix));
            }
          }
        }
        var H = this.indices.length, Y = this.points.length / 2;
        if (s && s.end(H, Y), this.batches.length === 0) {
          this.batchable = !0;
          return;
        }
        var J = Y > 65535;
        this.indicesUint16 && this.indices.length === this.indicesUint16.length && J === this.indicesUint16.BYTES_PER_ELEMENT > 2 ? this.indicesUint16.set(this.indices) : this.indicesUint16 = J ? new Uint32Array(this.indices) : new Uint16Array(this.indices), this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls();
      }
    }, e.prototype._compareStyles = function(r, i) {
      return !(!r || !i || r.texture.baseTexture !== i.texture.baseTexture || r.color + r.alpha !== i.color + i.alpha || !!r.native != !!i.native);
    }, e.prototype.validateBatching = function() {
      if (this.dirty === this.cacheDirty || !this.graphicsData.length)
        return !1;
      for (var r = 0, i = this.graphicsData.length; r < i; r++) {
        var s = this.graphicsData[r], o = s.fillStyle, h = s.lineStyle;
        if (o && !o.texture.baseTexture.valid || h && !h.texture.baseTexture.valid)
          return !1;
      }
      return !0;
    }, e.prototype.packBatches = function() {
      this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs);
      for (var r = this.batches, i = 0, s = r.length; i < s; i++)
        for (var o = r[i], h = 0; h < o.size; h++) {
          var l = o.start + h;
          this.indicesUint16[l] = this.indicesUint16[l] - o.attribStart;
        }
    }, e.prototype.isBatchable = function() {
      if (this.points.length > 65535 * 2)
        return !1;
      for (var r = this.batches, i = 0; i < r.length; i++)
        if (r[i].style.native)
          return !1;
      return this.points.length < e.BATCHABLE_SIZE * 2;
    }, e.prototype.buildDrawCalls = function() {
      for (var r = ++We._globalBatch, i = 0; i < this.drawCalls.length; i++)
        this.drawCalls[i].texArray.clear(), po.push(this.drawCalls[i]);
      this.drawCalls.length = 0;
      var s = this.colors, o = this.textureIds, h = po.pop();
      h || (h = new Va(), h.texArray = new Ha()), h.texArray.count = 0, h.start = 0, h.size = 0, h.type = yi.TRIANGLES;
      var l = 0, c = null, _ = 0, y = !1, w = yi.TRIANGLES, b = 0;
      this.drawCalls.push(h);
      for (var i = 0; i < this.batches.length; i++) {
        var E = this.batches[i], T = 8, P = E.style, O = P.texture.baseTexture;
        y !== !!P.native && (y = !!P.native, w = y ? yi.LINES : yi.TRIANGLES, c = null, l = T, r++), c !== O && (c = O, O._batchEnabled !== r && (l === T && (r++, l = 0, h.size > 0 && (h = po.pop(), h || (h = new Va(), h.texArray = new Ha()), this.drawCalls.push(h)), h.start = b, h.size = 0, h.texArray.count = 0, h.type = w), O.touched = 1, O._batchEnabled = r, O._batchLocation = l, O.wrapMode = Wi.REPEAT, h.texArray.elements[h.texArray.count++] = O, l++)), h.size += E.size, b += E.size, _ = O._batchLocation, this.addColors(s, P.color, P.alpha, E.attribSize, E.attribStart), this.addTextureIds(o, _, E.attribSize, E.attribStart);
      }
      We._globalBatch = r, this.packAttributes();
    }, e.prototype.packAttributes = function() {
      for (var r = this.points, i = this.uvs, s = this.colors, o = this.textureIds, h = new ArrayBuffer(r.length * 3 * 4), l = new Float32Array(h), c = new Uint32Array(h), _ = 0, y = 0; y < r.length / 2; y++)
        l[_++] = r[y * 2], l[_++] = r[y * 2 + 1], l[_++] = i[y * 2], l[_++] = i[y * 2 + 1], c[_++] = s[y], l[_++] = o[y];
      this._buffer.update(h), this._indexBuffer.update(this.indicesUint16);
    }, e.prototype.processFill = function(r) {
      if (r.holes.length)
        s0.triangulate(r, this);
      else {
        var i = Ma[r.type];
        i.triangulate(r, this);
      }
    }, e.prototype.processLine = function(r) {
      Gl(r, this);
      for (var i = 0; i < r.holes.length; i++)
        Gl(r.holes[i], this);
    }, e.prototype.processHoles = function(r) {
      for (var i = 0; i < r.length; i++) {
        var s = r[i], o = Ma[s.type];
        o.build(s), s.matrix && this.transformPoints(s.points, s.matrix);
      }
    }, e.prototype.calculateBounds = function() {
      var r = this._bounds;
      r.clear(), r.addVertexData(this.points, 0, this.points.length), r.pad(this.boundsPadding, this.boundsPadding);
    }, e.prototype.transformPoints = function(r, i) {
      for (var s = 0; s < r.length / 2; s++) {
        var o = r[s * 2], h = r[s * 2 + 1];
        r[s * 2] = i.a * o + i.c * h + i.tx, r[s * 2 + 1] = i.b * o + i.d * h + i.ty;
      }
    }, e.prototype.addColors = function(r, i, s, o, h) {
      h === void 0 && (h = 0);
      var l = (i >> 16) + (i & 65280) + ((i & 255) << 16), c = eh(l, s);
      r.length = Math.max(r.length, h + o);
      for (var _ = 0; _ < o; _++)
        r[h + _] = c;
    }, e.prototype.addTextureIds = function(r, i, s, o) {
      o === void 0 && (o = 0), r.length = Math.max(r.length, o + s);
      for (var h = 0; h < s; h++)
        r[o + h] = i;
    }, e.prototype.addUvs = function(r, i, s, o, h, l) {
      l === void 0 && (l = null);
      for (var c = 0, _ = i.length, y = s.frame; c < h; ) {
        var w = r[(o + c) * 2], b = r[(o + c) * 2 + 1];
        if (l) {
          var E = l.a * w + l.c * b + l.tx;
          b = l.b * w + l.d * b + l.ty, w = E;
        }
        c++, i.push(w / y.width, b / y.height);
      }
      var T = s.baseTexture;
      (y.width < T.width || y.height < T.height) && this.adjustUvs(i, s, _, h);
    }, e.prototype.adjustUvs = function(r, i, s, o) {
      for (var h = i.baseTexture, l = 1e-6, c = s + o * 2, _ = i.frame, y = _.width / h.width, w = _.height / h.height, b = _.x / _.width, E = _.y / _.height, T = Math.floor(r[s] + l), P = Math.floor(r[s + 1] + l), O = s + 2; O < c; O += 2)
        T = Math.min(T, Math.floor(r[O] + l)), P = Math.min(P, Math.floor(r[O + 1] + l));
      b -= T, E -= P;
      for (var O = s; O < c; O += 2)
        r[O] = (r[O] + b) * y, r[O + 1] = (r[O + 1] + E) * w;
    }, e.BATCHABLE_SIZE = 100, e;
  }(t0)
), n2 = (
  /** @class */
  function(t) {
    n0(e, t);
    function e() {
      var r = t !== null && t.apply(this, arguments) || this;
      return r.width = 0, r.alignment = 0.5, r.native = !1, r.cap = fn.BUTT, r.join = un.MITER, r.miterLimit = 10, r;
    }
    return e.prototype.clone = function() {
      var r = new e();
      return r.color = this.color, r.alpha = this.alpha, r.texture = this.texture, r.matrix = this.matrix, r.visible = this.visible, r.width = this.width, r.alignment = this.alignment, r.native = this.native, r.cap = this.cap, r.join = this.join, r.miterLimit = this.miterLimit, r;
    }, e.prototype.reset = function() {
      t.prototype.reset.call(this), this.color = 0, this.alignment = 0.5, this.width = 0, this.native = !1;
    }, e;
  }(i0)
), ox = new Float32Array(3), kh = {}, ko = (
  /** @class */
  function(t) {
    n0(e, t);
    function e(r) {
      r === void 0 && (r = null);
      var i = t.call(this) || this;
      return i.shader = null, i.pluginName = "batch", i.currentPath = null, i.batches = [], i.batchTint = -1, i.batchDirty = -1, i.vertexData = null, i._fillStyle = new i0(), i._lineStyle = new n2(), i._matrix = null, i._holeMode = !1, i.state = Cn.for2d(), i._geometry = r || new i2(), i._geometry.refCount++, i._transformID = -1, i.tint = 16777215, i.blendMode = Ae.NORMAL, i;
    }
    return Object.defineProperty(e.prototype, "geometry", {
      /**
       * Includes vertex positions, face indices, normals, colors, UVs, and
       * custom attributes within buffers, reducing the cost of passing all
       * this data to the GPU. Can be shared between multiple Mesh or Graphics objects.
       * @readonly
       */
      get: function() {
        return this._geometry;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.clone = function() {
      return this.finishPoly(), new e(this._geometry);
    }, Object.defineProperty(e.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the graphic shape. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.  Note that, since each
       * primitive in the GraphicsGeometry list is rendered sequentially, modes
       * such as `PIXI.BLEND_MODES.ADD` and `PIXI.BLEND_MODES.MULTIPLY` will
       * be applied per-primitive.
       * @default PIXI.BLEND_MODES.NORMAL
       */
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tint", {
      /**
       * The tint applied to each graphic shape. This is a hex value. A value of
       * 0xFFFFFF will remove any tint effect.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "fill", {
      /**
       * The current fill style.
       * @readonly
       */
      get: function() {
        return this._fillStyle;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "line", {
      /**
       * The current line style.
       * @readonly
       */
      get: function() {
        return this._lineStyle;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.lineStyle = function(r, i, s, o, h) {
      return r === void 0 && (r = null), i === void 0 && (i = 0), s === void 0 && (s = 1), o === void 0 && (o = 0.5), h === void 0 && (h = !1), typeof r == "number" && (r = { width: r, color: i, alpha: s, alignment: o, native: h }), this.lineTextureStyle(r);
    }, e.prototype.lineTextureStyle = function(r) {
      r = Object.assign({
        width: 0,
        texture: Me.WHITE,
        color: r && r.texture ? 16777215 : 0,
        alpha: 1,
        matrix: null,
        alignment: 0.5,
        native: !1,
        cap: fn.BUTT,
        join: un.MITER,
        miterLimit: 10
      }, r), this.currentPath && this.startPoly();
      var i = r.width > 0 && r.alpha > 0;
      return i ? (r.matrix && (r.matrix = r.matrix.clone(), r.matrix.invert()), Object.assign(this._lineStyle, { visible: i }, r)) : this._lineStyle.reset(), this;
    }, e.prototype.startPoly = function() {
      if (this.currentPath) {
        var r = this.currentPath.points, i = this.currentPath.points.length;
        i > 2 && (this.drawShape(this.currentPath), this.currentPath = new xo(), this.currentPath.closeStroke = !1, this.currentPath.points.push(r[i - 2], r[i - 1]));
      } else
        this.currentPath = new xo(), this.currentPath.closeStroke = !1;
    }, e.prototype.finishPoly = function() {
      this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0);
    }, e.prototype.moveTo = function(r, i) {
      return this.startPoly(), this.currentPath.points[0] = r, this.currentPath.points[1] = i, this;
    }, e.prototype.lineTo = function(r, i) {
      this.currentPath || this.moveTo(0, 0);
      var s = this.currentPath.points, o = s[s.length - 2], h = s[s.length - 1];
      return (o !== r || h !== i) && s.push(r, i), this;
    }, e.prototype._initCurve = function(r, i) {
      r === void 0 && (r = 0), i === void 0 && (i = 0), this.currentPath ? this.currentPath.points.length === 0 && (this.currentPath.points = [r, i]) : this.moveTo(r, i);
    }, e.prototype.quadraticCurveTo = function(r, i, s, o) {
      this._initCurve();
      var h = this.currentPath.points;
      return h.length === 0 && this.moveTo(0, 0), e2.curveTo(r, i, s, o, h), this;
    }, e.prototype.bezierCurveTo = function(r, i, s, o, h, l) {
      return this._initCurve(), t2.curveTo(r, i, s, o, h, l, this.currentPath.points), this;
    }, e.prototype.arcTo = function(r, i, s, o, h) {
      this._initCurve(r, i);
      var l = this.currentPath.points, c = Dl.curveTo(r, i, s, o, h, l);
      if (c) {
        var _ = c.cx, y = c.cy, w = c.radius, b = c.startAngle, E = c.endAngle, T = c.anticlockwise;
        this.arc(_, y, w, b, E, T);
      }
      return this;
    }, e.prototype.arc = function(r, i, s, o, h, l) {
      if (l === void 0 && (l = !1), o === h)
        return this;
      !l && h <= o ? h += Fo : l && o <= h && (o += Fo);
      var c = h - o;
      if (c === 0)
        return this;
      var _ = r + Math.cos(o) * s, y = i + Math.sin(o) * s, w = this._geometry.closePointEps, b = this.currentPath ? this.currentPath.points : null;
      if (b) {
        var E = Math.abs(b[b.length - 2] - _), T = Math.abs(b[b.length - 1] - y);
        E < w && T < w || b.push(_, y);
      } else
        this.moveTo(_, y), b = this.currentPath.points;
      return Dl.arc(_, y, r, i, s, o, h, l, b), this;
    }, e.prototype.beginFill = function(r, i) {
      return r === void 0 && (r = 0), i === void 0 && (i = 1), this.beginTextureFill({ texture: Me.WHITE, color: r, alpha: i });
    }, e.prototype.beginTextureFill = function(r) {
      r = Object.assign({
        texture: Me.WHITE,
        color: 16777215,
        alpha: 1,
        matrix: null
      }, r), this.currentPath && this.startPoly();
      var i = r.alpha > 0;
      return i ? (r.matrix && (r.matrix = r.matrix.clone(), r.matrix.invert()), Object.assign(this._fillStyle, { visible: i }, r)) : this._fillStyle.reset(), this;
    }, e.prototype.endFill = function() {
      return this.finishPoly(), this._fillStyle.reset(), this;
    }, e.prototype.drawRect = function(r, i, s, o) {
      return this.drawShape(new Ye(r, i, s, o));
    }, e.prototype.drawRoundedRect = function(r, i, s, o, h) {
      return this.drawShape(new K_(r, i, s, o, h));
    }, e.prototype.drawCircle = function(r, i, s) {
      return this.drawShape(new J_(r, i, s));
    }, e.prototype.drawEllipse = function(r, i, s, o) {
      return this.drawShape(new Q_(r, i, s, o));
    }, e.prototype.drawPolygon = function() {
      for (var r = arguments, i = [], s = 0; s < arguments.length; s++)
        i[s] = r[s];
      var o, h = !0, l = i[0];
      l.points ? (h = l.closeStroke, o = l.points) : Array.isArray(i[0]) ? o = i[0] : o = i;
      var c = new xo(o);
      return c.closeStroke = h, this.drawShape(c), this;
    }, e.prototype.drawShape = function(r) {
      return this._holeMode ? this._geometry.drawHole(r, this._matrix) : this._geometry.drawShape(r, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this;
    }, e.prototype.clear = function() {
      return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = !1, this.currentPath = null, this;
    }, e.prototype.isFastRect = function() {
      var r = this._geometry.graphicsData;
      return r.length === 1 && r[0].shape.type === Xr.RECT && !r[0].matrix && !r[0].holes.length && !(r[0].lineStyle.visible && r[0].lineStyle.width);
    }, e.prototype._render = function(r) {
      this.finishPoly();
      var i = this._geometry;
      i.updateBatches(), i.batchable ? (this.batchDirty !== i.batchDirty && this._populateBatches(), this._renderBatched(r)) : (r.batch.flush(), this._renderDirect(r));
    }, e.prototype._populateBatches = function() {
      var r = this._geometry, i = this.blendMode, s = r.batches.length;
      this.batchTint = -1, this._transformID = -1, this.batchDirty = r.batchDirty, this.batches.length = s, this.vertexData = new Float32Array(r.points);
      for (var o = 0; o < s; o++) {
        var h = r.batches[o], l = h.style.color, c = new Float32Array(this.vertexData.buffer, h.attribStart * 4 * 2, h.attribSize * 2), _ = new Float32Array(r.uvsFloat32.buffer, h.attribStart * 4 * 2, h.attribSize * 2), y = new Uint16Array(r.indicesUint16.buffer, h.start * 2, h.size), w = {
          vertexData: c,
          blendMode: i,
          indices: y,
          uvs: _,
          _batchRGB: ss(l),
          _tintRGB: l,
          _texture: h.style.texture,
          alpha: h.style.alpha,
          worldAlpha: 1
        };
        this.batches[o] = w;
      }
    }, e.prototype._renderBatched = function(r) {
      if (this.batches.length) {
        r.batch.setObjectRenderer(r.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints();
        for (var i = 0, s = this.batches.length; i < s; i++) {
          var o = this.batches[i];
          o.worldAlpha = this.worldAlpha * o.alpha, r.plugins[this.pluginName].render(o);
        }
      }
    }, e.prototype._renderDirect = function(r) {
      var i = this._resolveDirectShader(r), s = this._geometry, o = this.tint, h = this.worldAlpha, l = i.uniforms, c = s.drawCalls;
      l.translationMatrix = this.transform.worldTransform, l.tint[0] = (o >> 16 & 255) / 255 * h, l.tint[1] = (o >> 8 & 255) / 255 * h, l.tint[2] = (o & 255) / 255 * h, l.tint[3] = h, r.shader.bind(i), r.geometry.bind(s, i), r.state.set(this.state);
      for (var _ = 0, y = c.length; _ < y; _++)
        this._renderDrawCallDirect(r, s.drawCalls[_]);
    }, e.prototype._renderDrawCallDirect = function(r, i) {
      for (var s = i.texArray, o = i.type, h = i.size, l = i.start, c = s.count, _ = 0; _ < c; _++)
        r.texture.bind(s.elements[_], _);
      r.geometry.draw(o, h, l);
    }, e.prototype._resolveDirectShader = function(r) {
      var i = this.shader, s = this.pluginName;
      if (!i) {
        if (!kh[s]) {
          for (var o = r.plugins[s].MAX_TEXTURES, h = new Int32Array(o), l = 0; l < o; l++)
            h[l] = l;
          var c = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new wr(),
            default: An.from({ uSamplers: h }, !0)
          }, _ = r.plugins[s]._shader.program;
          kh[s] = new cn(_, c);
        }
        i = kh[s];
      }
      return i;
    }, e.prototype._calculateBounds = function() {
      this.finishPoly();
      var r = this._geometry;
      if (r.graphicsData.length) {
        var i = r.bounds, s = i.minX, o = i.minY, h = i.maxX, l = i.maxY;
        this._bounds.addFrame(this.transform, s, o, h, l);
      }
    }, e.prototype.containsPoint = function(r) {
      return this.worldTransform.applyInverse(r, e._TEMP_POINT), this._geometry.containsPoint(e._TEMP_POINT);
    }, e.prototype.calculateTints = function() {
      if (this.batchTint !== this.tint) {
        this.batchTint = this.tint;
        for (var r = ss(this.tint, ox), i = 0; i < this.batches.length; i++) {
          var s = this.batches[i], o = s._batchRGB, h = r[0] * o[0] * 255, l = r[1] * o[1] * 255, c = r[2] * o[2] * 255, _ = (h << 16) + (l << 8) + (c | 0);
          s._tintRGB = (_ >> 16) + (_ & 65280) + ((_ & 255) << 16);
        }
      }
    }, e.prototype.calculateVertices = function() {
      var r = this.transform._worldID;
      if (this._transformID !== r) {
        this._transformID = r;
        for (var i = this.transform.worldTransform, s = i.a, o = i.b, h = i.c, l = i.d, c = i.tx, _ = i.ty, y = this._geometry.points, w = this.vertexData, b = 0, E = 0; E < y.length; E += 2) {
          var T = y[E], P = y[E + 1];
          w[b++] = s * T + h * P + c, w[b++] = l * P + o * T + _;
        }
      }
    }, e.prototype.closePath = function() {
      var r = this.currentPath;
      return r && (r.closeStroke = !0, this.finishPoly()), this;
    }, e.prototype.setMatrix = function(r) {
      return this._matrix = r, this;
    }, e.prototype.beginHole = function() {
      return this.finishPoly(), this._holeMode = !0, this;
    }, e.prototype.endHole = function() {
      return this.finishPoly(), this._holeMode = !1, this;
    }, e.prototype.destroy = function(r) {
      this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, t.prototype.destroy.call(this, r);
    }, e.nextRoundedRectBehavior = !1, e._TEMP_POINT = new _r(), e;
  }(Ti)
), ax = {
  buildPoly: s0,
  buildCircle: Bo,
  buildRectangle: Qp,
  buildRoundedRectangle: Kp,
  buildLine: Gl,
  ArcUtils: Dl,
  BezierUtils: t2,
  QuadraticUtils: e2,
  BatchPart: r2,
  FILL_COMMANDS: Ma,
  BATCH_POOL: Bl,
  DRAW_CALL_POOL: po
};
/*!
 * @pixi/sprite - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Xl = function(t, e) {
  return Xl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Xl(t, e);
};
function hx(t, e) {
  Xl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var oo = new _r(), lx = new Uint16Array([0, 1, 2, 0, 2, 3]), Bs = (
  /** @class */
  function(t) {
    hx(e, t);
    function e(r) {
      var i = t.call(this) || this;
      return i._anchor = new xn(i._onAnchorUpdate, i, r ? r.defaultAnchor.x : 0, r ? r.defaultAnchor.y : 0), i._texture = null, i._width = 0, i._height = 0, i._tint = null, i._tintRGB = null, i.tint = 16777215, i.blendMode = Ae.NORMAL, i._cachedTint = 16777215, i.uvs = null, i.texture = r || Me.EMPTY, i.vertexData = new Float32Array(8), i.vertexTrimmedData = null, i._transformID = -1, i._textureID = -1, i._transformTrimmedID = -1, i._textureTrimmedID = -1, i.indices = lx, i.pluginName = "batch", i.isSprite = !0, i._roundPixels = ee.ROUND_PIXELS, i;
    }
    return e.prototype._onTextureUpdate = function() {
      this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = es(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = es(this.scale.y) * this._height / this._texture.orig.height);
    }, e.prototype._onAnchorUpdate = function() {
      this._transformID = -1, this._transformTrimmedID = -1;
    }, e.prototype.calculateVertices = function() {
      var r = this._texture;
      if (!(this._transformID === this.transform._worldID && this._textureID === r._updateID)) {
        this._textureID !== r._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = r._updateID;
        var i = this.transform.worldTransform, s = i.a, o = i.b, h = i.c, l = i.d, c = i.tx, _ = i.ty, y = this.vertexData, w = r.trim, b = r.orig, E = this._anchor, T = 0, P = 0, O = 0, H = 0;
        if (w ? (P = w.x - E._x * b.width, T = P + w.width, H = w.y - E._y * b.height, O = H + w.height) : (P = -E._x * b.width, T = P + b.width, H = -E._y * b.height, O = H + b.height), y[0] = s * P + h * H + c, y[1] = l * H + o * P + _, y[2] = s * T + h * H + c, y[3] = l * H + o * T + _, y[4] = s * T + h * O + c, y[5] = l * O + o * T + _, y[6] = s * P + h * O + c, y[7] = l * O + o * P + _, this._roundPixels)
          for (var Y = ee.RESOLUTION, J = 0; J < y.length; ++J)
            y[J] = Math.round((y[J] * Y | 0) / Y);
      }
    }, e.prototype.calculateTrimmedVertices = function() {
      if (!this.vertexTrimmedData)
        this.vertexTrimmedData = new Float32Array(8);
      else if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
        return;
      this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID;
      var r = this._texture, i = this.vertexTrimmedData, s = r.orig, o = this._anchor, h = this.transform.worldTransform, l = h.a, c = h.b, _ = h.c, y = h.d, w = h.tx, b = h.ty, E = -o._x * s.width, T = E + s.width, P = -o._y * s.height, O = P + s.height;
      i[0] = l * E + _ * P + w, i[1] = y * P + c * E + b, i[2] = l * T + _ * P + w, i[3] = y * P + c * T + b, i[4] = l * T + _ * O + w, i[5] = y * O + c * T + b, i[6] = l * E + _ * O + w, i[7] = y * O + c * E + b;
    }, e.prototype._render = function(r) {
      this.calculateVertices(), r.batch.setObjectRenderer(r.plugins[this.pluginName]), r.plugins[this.pluginName].render(this);
    }, e.prototype._calculateBounds = function() {
      var r = this._texture.trim, i = this._texture.orig;
      !r || r.width === i.width && r.height === i.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData));
    }, e.prototype.getLocalBounds = function(r) {
      return this.children.length === 0 ? (this._localBounds || (this._localBounds = new Mo()), this._localBounds.minX = this._texture.orig.width * -this._anchor._x, this._localBounds.minY = this._texture.orig.height * -this._anchor._y, this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y), r || (this._localBoundsRect || (this._localBoundsRect = new Ye()), r = this._localBoundsRect), this._localBounds.getRectangle(r)) : t.prototype.getLocalBounds.call(this, r);
    }, e.prototype.containsPoint = function(r) {
      this.worldTransform.applyInverse(r, oo);
      var i = this._texture.orig.width, s = this._texture.orig.height, o = -i * this.anchor.x, h = 0;
      return oo.x >= o && oo.x < o + i && (h = -s * this.anchor.y, oo.y >= h && oo.y < h + s);
    }, e.prototype.destroy = function(r) {
      t.prototype.destroy.call(this, r), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null;
      var i = typeof r == "boolean" ? r : r && r.texture;
      if (i) {
        var s = typeof r == "boolean" ? r : r && r.baseTexture;
        this._texture.destroy(!!s);
      }
      this._texture = null;
    }, e.from = function(r, i) {
      var s = r instanceof Me ? r : Me.from(r, i);
      return new e(s);
    }, Object.defineProperty(e.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       *
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       *
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}.
       * @default false
       */
      set: function(r) {
        this._roundPixels !== r && (this._transformID = -1), this._roundPixels = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "width", {
      /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(r) {
        var i = es(this.scale.x) || 1;
        this.scale.x = i * r / this._texture.orig.width, this._width = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(r) {
        var i = es(this.scale.y) || 1;
        this.scale.y = i * r / this._texture.orig.height, this._height = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the sprite. The default value is taken from the {@link PIXI.Texture|Texture}
       * and passed to the constructor.
       *
       * The default is `(0,0)`, this means the sprite's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.
       *
       * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.
       * @example
       * const sprite = new PIXI.Sprite(texture);
       * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).
       */
      get: function() {
        return this._anchor;
      },
      set: function(r) {
        this._anchor.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tint", {
      /**
       * The tint applied to the sprite. This is a hex value.
       *
       * A value of 0xFFFFFF will remove any tint effect.
       * @default 0xFFFFFF
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        this._tint = r, this._tintRGB = (r >> 16) + (r & 65280) + ((r & 255) << 16);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "texture", {
      /** The texture that the sprite is using. */
      get: function() {
        return this._texture;
      },
      set: function(r) {
        this._texture !== r && (this._texture && this._texture.off("update", this._onTextureUpdate, this), this._texture = r || Me.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, r && (r.baseTexture.valid ? this._onTextureUpdate() : r.once("update", this._onTextureUpdate, this)));
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Ti)
);
/*!
 * @pixi/text - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Vl = function(t, e) {
  return Vl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Vl(t, e);
};
function ux(t, e) {
  Vl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Ls;
(function(t) {
  t[t.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL", t[t.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL";
})(Ls || (Ls = {}));
var Xh = {
  align: "left",
  breakWords: !1,
  dropShadow: !1,
  dropShadowAlpha: 1,
  dropShadowAngle: Math.PI / 6,
  dropShadowBlur: 0,
  dropShadowColor: "black",
  dropShadowDistance: 5,
  fill: "black",
  fillGradientType: Ls.LINEAR_VERTICAL,
  fillGradientStops: [],
  fontFamily: "Arial",
  fontSize: 26,
  fontStyle: "normal",
  fontVariant: "normal",
  fontWeight: "normal",
  letterSpacing: 0,
  lineHeight: 0,
  lineJoin: "miter",
  miterLimit: 10,
  padding: 0,
  stroke: "black",
  strokeThickness: 0,
  textBaseline: "alphabetic",
  trim: !1,
  whiteSpace: "pre",
  wordWrap: !1,
  wordWrapWidth: 100,
  leading: 0
}, fx = [
  "serif",
  "sans-serif",
  "monospace",
  "cursive",
  "fantasy",
  "system-ui"
], as = (
  /** @class */
  function() {
    function t(e) {
      this.styleID = 0, this.reset(), Hh(this, e, e);
    }
    return t.prototype.clone = function() {
      var e = {};
      return Hh(e, this, Xh), new t(e);
    }, t.prototype.reset = function() {
      Hh(this, Xh, Xh);
    }, Object.defineProperty(t.prototype, "align", {
      /**
       * Alignment for multiline text ('left', 'center' or 'right'), does not affect single line text
       *
       * @member {string}
       */
      get: function() {
        return this._align;
      },
      set: function(e) {
        this._align !== e && (this._align = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "breakWords", {
      /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */
      get: function() {
        return this._breakWords;
      },
      set: function(e) {
        this._breakWords !== e && (this._breakWords = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadow", {
      /** Set a drop shadow for the text. */
      get: function() {
        return this._dropShadow;
      },
      set: function(e) {
        this._dropShadow !== e && (this._dropShadow = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadowAlpha", {
      /** Set alpha for the drop shadow. */
      get: function() {
        return this._dropShadowAlpha;
      },
      set: function(e) {
        this._dropShadowAlpha !== e && (this._dropShadowAlpha = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadowAngle", {
      /** Set a angle of the drop shadow. */
      get: function() {
        return this._dropShadowAngle;
      },
      set: function(e) {
        this._dropShadowAngle !== e && (this._dropShadowAngle = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadowBlur", {
      /** Set a shadow blur radius. */
      get: function() {
        return this._dropShadowBlur;
      },
      set: function(e) {
        this._dropShadowBlur !== e && (this._dropShadowBlur = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadowColor", {
      /** A fill style to be used on the dropshadow e.g 'red', '#00FF00'. */
      get: function() {
        return this._dropShadowColor;
      },
      set: function(e) {
        var r = Vh(e);
        this._dropShadowColor !== r && (this._dropShadowColor = r, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "dropShadowDistance", {
      /** Set a distance of the drop shadow. */
      get: function() {
        return this._dropShadowDistance;
      },
      set: function(e) {
        this._dropShadowDistance !== e && (this._dropShadowDistance = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fill", {
      /**
       * A canvas fillstyle that will be used on the text e.g 'red', '#00FF00'.
       *
       * Can be an array to create a gradient eg ['#000000','#FFFFFF']
       * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}
       *
       * @member {string|string[]|number|number[]|CanvasGradient|CanvasPattern}
       */
      get: function() {
        return this._fill;
      },
      set: function(e) {
        var r = Vh(e);
        this._fill !== r && (this._fill = r, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fillGradientType", {
      /**
       * If fill is an array of colours to create a gradient, this can change the type/direction of the gradient.
       *
       * @see PIXI.TEXT_GRADIENT
       */
      get: function() {
        return this._fillGradientType;
      },
      set: function(e) {
        this._fillGradientType !== e && (this._fillGradientType = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fillGradientStops", {
      /**
       * If fill is an array of colours to create a gradient, this array can set the stop points
       * (numbers between 0 and 1) for the color, overriding the default behaviour of evenly spacing them.
       */
      get: function() {
        return this._fillGradientStops;
      },
      set: function(e) {
        cx(this._fillGradientStops, e) || (this._fillGradientStops = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontFamily", {
      /** The font family. */
      get: function() {
        return this._fontFamily;
      },
      set: function(e) {
        this.fontFamily !== e && (this._fontFamily = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontSize", {
      /**
       * The font size
       * (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em')
       */
      get: function() {
        return this._fontSize;
      },
      set: function(e) {
        this._fontSize !== e && (this._fontSize = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontStyle", {
      /**
       * The font style
       * ('normal', 'italic' or 'oblique')
       *
       * @member {string}
       */
      get: function() {
        return this._fontStyle;
      },
      set: function(e) {
        this._fontStyle !== e && (this._fontStyle = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontVariant", {
      /**
       * The font variant
       * ('normal' or 'small-caps')
       *
       * @member {string}
       */
      get: function() {
        return this._fontVariant;
      },
      set: function(e) {
        this._fontVariant !== e && (this._fontVariant = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "fontWeight", {
      /**
       * The font weight
       * ('normal', 'bold', 'bolder', 'lighter' and '100', '200', '300', '400', '500', '600', '700', 800' or '900')
       *
       * @member {string}
       */
      get: function() {
        return this._fontWeight;
      },
      set: function(e) {
        this._fontWeight !== e && (this._fontWeight = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "letterSpacing", {
      /** The amount of spacing between letters, default is 0. */
      get: function() {
        return this._letterSpacing;
      },
      set: function(e) {
        this._letterSpacing !== e && (this._letterSpacing = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "lineHeight", {
      /** The line height, a number that represents the vertical space that a letter uses. */
      get: function() {
        return this._lineHeight;
      },
      set: function(e) {
        this._lineHeight !== e && (this._lineHeight = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "leading", {
      /** The space between lines. */
      get: function() {
        return this._leading;
      },
      set: function(e) {
        this._leading !== e && (this._leading = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "lineJoin", {
      /**
       * The lineJoin property sets the type of corner created, it can resolve spiked text issues.
       * Default is 'miter' (creates a sharp corner).
       *
       * @member {string}
       */
      get: function() {
        return this._lineJoin;
      },
      set: function(e) {
        this._lineJoin !== e && (this._lineJoin = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "miterLimit", {
      /**
       * The miter limit to use when using the 'miter' lineJoin mode.
       *
       * This can reduce or increase the spikiness of rendered text.
       */
      get: function() {
        return this._miterLimit;
      },
      set: function(e) {
        this._miterLimit !== e && (this._miterLimit = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "padding", {
      /**
       * Occasionally some fonts are cropped. Adding some padding will prevent this from happening
       * by adding padding to all sides of the text.
       */
      get: function() {
        return this._padding;
      },
      set: function(e) {
        this._padding !== e && (this._padding = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "stroke", {
      /**
       * A canvas fillstyle that will be used on the text stroke
       * e.g 'blue', '#FCFF00'
       */
      get: function() {
        return this._stroke;
      },
      set: function(e) {
        var r = Vh(e);
        this._stroke !== r && (this._stroke = r, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "strokeThickness", {
      /**
       * A number that represents the thickness of the stroke.
       *
       * @default 0
       */
      get: function() {
        return this._strokeThickness;
      },
      set: function(e) {
        this._strokeThickness !== e && (this._strokeThickness = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "textBaseline", {
      /**
       * The baseline of the text that is rendered.
       *
       * @member {string}
       */
      get: function() {
        return this._textBaseline;
      },
      set: function(e) {
        this._textBaseline !== e && (this._textBaseline = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "trim", {
      /** Trim transparent borders. */
      get: function() {
        return this._trim;
      },
      set: function(e) {
        this._trim !== e && (this._trim = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "whiteSpace", {
      /**
       * How newlines and spaces should be handled.
       * Default is 'pre' (preserve, preserve).
       *
       *  value       | New lines     |   Spaces
       *  ---         | ---           |   ---
       * 'normal'     | Collapse      |   Collapse
       * 'pre'        | Preserve      |   Preserve
       * 'pre-line'   | Preserve      |   Collapse
       *
       * @member {string}
       */
      get: function() {
        return this._whiteSpace;
      },
      set: function(e) {
        this._whiteSpace !== e && (this._whiteSpace = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "wordWrap", {
      /** Indicates if word wrap should be used. */
      get: function() {
        return this._wordWrap;
      },
      set: function(e) {
        this._wordWrap !== e && (this._wordWrap = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "wordWrapWidth", {
      /** The width at which text will wrap, it needs wordWrap to be set to true. */
      get: function() {
        return this._wordWrapWidth;
      },
      set: function(e) {
        this._wordWrapWidth !== e && (this._wordWrapWidth = e, this.styleID++);
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.toFontString = function() {
      var e = typeof this.fontSize == "number" ? this.fontSize + "px" : this.fontSize, r = this.fontFamily;
      Array.isArray(this.fontFamily) || (r = this.fontFamily.split(","));
      for (var i = r.length - 1; i >= 0; i--) {
        var s = r[i].trim();
        !/([\"\'])[^\'\"]+\1/.test(s) && fx.indexOf(s) < 0 && (s = '"' + s + '"'), r[i] = s;
      }
      return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + e + " " + r.join(",");
    }, t;
  }()
);
function lc(t) {
  return typeof t == "number" ? Tu(t) : (typeof t == "string" && t.indexOf("0x") === 0 && (t = t.replace("0x", "#")), t);
}
function Vh(t) {
  if (Array.isArray(t)) {
    for (var e = 0; e < t.length; ++e)
      t[e] = lc(t[e]);
    return t;
  } else
    return lc(t);
}
function cx(t, e) {
  if (!Array.isArray(t) || !Array.isArray(e) || t.length !== e.length)
    return !1;
  for (var r = 0; r < t.length; ++r)
    if (t[r] !== e[r])
      return !1;
  return !0;
}
function Hh(t, e, r) {
  for (var i in r)
    Array.isArray(e[i]) ? t[i] = e[i].slice() : t[i] = e[i];
}
var Fi = (
  /** @class */
  function() {
    function t(e, r, i, s, o, h, l, c, _) {
      this.text = e, this.style = r, this.width = i, this.height = s, this.lines = o, this.lineWidths = h, this.lineHeight = l, this.maxLineWidth = c, this.fontProperties = _;
    }
    return t.measureText = function(e, r, i, s) {
      s === void 0 && (s = t._canvas), i = i == null ? r.wordWrap : i;
      var o = r.toFontString(), h = t.measureFont(o);
      h.fontSize === 0 && (h.fontSize = r.fontSize, h.ascent = r.fontSize);
      var l = s.getContext("2d");
      l.font = o;
      for (var c = i ? t.wordWrap(e, r, s) : e, _ = c.split(/(?:\r\n|\r|\n)/), y = new Array(_.length), w = 0, b = 0; b < _.length; b++) {
        var E = l.measureText(_[b]).width + (_[b].length - 1) * r.letterSpacing;
        y[b] = E, w = Math.max(w, E);
      }
      var T = w + r.strokeThickness;
      r.dropShadow && (T += r.dropShadowDistance);
      var P = r.lineHeight || h.fontSize + r.strokeThickness, O = Math.max(P, h.fontSize + r.strokeThickness) + (_.length - 1) * (P + r.leading);
      return r.dropShadow && (O += r.dropShadowDistance), new t(e, r, T, O, _, y, P + r.leading, w, h);
    }, t.wordWrap = function(e, r, i) {
      i === void 0 && (i = t._canvas);
      for (var s = i.getContext("2d"), o = 0, h = "", l = "", c = /* @__PURE__ */ Object.create(null), _ = r.letterSpacing, y = r.whiteSpace, w = t.collapseSpaces(y), b = t.collapseNewlines(y), E = !w, T = r.wordWrapWidth + _, P = t.tokenize(e), O = 0; O < P.length; O++) {
        var H = P[O];
        if (t.isNewline(H)) {
          if (!b) {
            l += t.addLine(h), E = !w, h = "", o = 0;
            continue;
          }
          H = " ";
        }
        if (w) {
          var Y = t.isBreakingSpace(H), J = t.isBreakingSpace(h[h.length - 1]);
          if (Y && J)
            continue;
        }
        var it = t.getFromCache(H, _, c, s);
        if (it > T)
          if (h !== "" && (l += t.addLine(h), h = "", o = 0), t.canBreakWords(H, r.breakWords))
            for (var st = t.wordWrapSplit(H), K = 0; K < st.length; K++) {
              for (var At = st[K], Tt = 1; st[K + Tt]; ) {
                var dt = st[K + Tt], Et = At[At.length - 1];
                if (!t.canBreakChars(Et, dt, H, K, r.breakWords))
                  At += dt;
                else
                  break;
                Tt++;
              }
              K += At.length - 1;
              var Rt = t.getFromCache(At, _, c, s);
              Rt + o > T && (l += t.addLine(h), E = !1, h = "", o = 0), h += At, o += Rt;
            }
          else {
            h.length > 0 && (l += t.addLine(h), h = "", o = 0);
            var Ft = O === P.length - 1;
            l += t.addLine(H, !Ft), E = !1, h = "", o = 0;
          }
        else
          it + o > T && (E = !1, l += t.addLine(h), h = "", o = 0), (h.length > 0 || !t.isBreakingSpace(H) || E) && (h += H, o += it);
      }
      return l += t.addLine(h, !1), l;
    }, t.addLine = function(e, r) {
      return r === void 0 && (r = !0), e = t.trimRight(e), e = r ? e + `
` : e, e;
    }, t.getFromCache = function(e, r, i, s) {
      var o = i[e];
      if (typeof o != "number") {
        var h = e.length * r;
        o = s.measureText(e).width + h, i[e] = o;
      }
      return o;
    }, t.collapseSpaces = function(e) {
      return e === "normal" || e === "pre-line";
    }, t.collapseNewlines = function(e) {
      return e === "normal";
    }, t.trimRight = function(e) {
      if (typeof e != "string")
        return "";
      for (var r = e.length - 1; r >= 0; r--) {
        var i = e[r];
        if (!t.isBreakingSpace(i))
          break;
        e = e.slice(0, -1);
      }
      return e;
    }, t.isNewline = function(e) {
      return typeof e != "string" ? !1 : t._newlines.indexOf(e.charCodeAt(0)) >= 0;
    }, t.isBreakingSpace = function(e, r) {
      return typeof e != "string" ? !1 : t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0;
    }, t.tokenize = function(e) {
      var r = [], i = "";
      if (typeof e != "string")
        return r;
      for (var s = 0; s < e.length; s++) {
        var o = e[s], h = e[s + 1];
        if (t.isBreakingSpace(o, h) || t.isNewline(o)) {
          i !== "" && (r.push(i), i = ""), r.push(o);
          continue;
        }
        i += o;
      }
      return i !== "" && r.push(i), r;
    }, t.canBreakWords = function(e, r) {
      return r;
    }, t.canBreakChars = function(e, r, i, s, o) {
      return !0;
    }, t.wordWrapSplit = function(e) {
      return e.split("");
    }, t.measureFont = function(e) {
      if (t._fonts[e])
        return t._fonts[e];
      var r = {
        ascent: 0,
        descent: 0,
        fontSize: 0
      }, i = t._canvas, s = t._context;
      s.font = e;
      var o = t.METRICS_STRING + t.BASELINE_SYMBOL, h = Math.ceil(s.measureText(o).width), l = Math.ceil(s.measureText(t.BASELINE_SYMBOL).width), c = Math.ceil(t.HEIGHT_MULTIPLIER * l);
      l = l * t.BASELINE_MULTIPLIER | 0, i.width = h, i.height = c, s.fillStyle = "#f00", s.fillRect(0, 0, h, c), s.font = e, s.textBaseline = "alphabetic", s.fillStyle = "#000", s.fillText(o, 0, l);
      var _ = s.getImageData(0, 0, h, c).data, y = _.length, w = h * 4, b = 0, E = 0, T = !1;
      for (b = 0; b < l; ++b) {
        for (var P = 0; P < w; P += 4)
          if (_[E + P] !== 255) {
            T = !0;
            break;
          }
        if (!T)
          E += w;
        else
          break;
      }
      for (r.ascent = l - b, E = y - w, T = !1, b = c; b > l; --b) {
        for (var P = 0; P < w; P += 4)
          if (_[E + P] !== 255) {
            T = !0;
            break;
          }
        if (!T)
          E -= w;
        else
          break;
      }
      return r.descent = b - l, r.fontSize = r.ascent + r.descent, t._fonts[e] = r, r;
    }, t.clearMetrics = function(e) {
      e === void 0 && (e = ""), e ? delete t._fonts[e] : t._fonts = {};
    }, Object.defineProperty(t, "_canvas", {
      /**
       * Cached canvas element for measuring text
       * TODO: this should be private, but isn't because of backward compat, will fix later.
       * @ignore
       */
      get: function() {
        if (!t.__canvas) {
          var e = void 0;
          try {
            var r = new OffscreenCanvas(0, 0), i = r.getContext("2d");
            if (i && i.measureText)
              return t.__canvas = r, r;
            e = ee.ADAPTER.createCanvas();
          } catch (s) {
            e = ee.ADAPTER.createCanvas();
          }
          e.width = e.height = 10, t.__canvas = e;
        }
        return t.__canvas;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t, "_context", {
      /**
       * TODO: this should be private, but isn't because of backward compat, will fix later.
       * @ignore
       */
      get: function() {
        return t.__context || (t.__context = t._canvas.getContext("2d")), t.__context;
      },
      enumerable: !1,
      configurable: !0
    }), t;
  }()
);
Fi._fonts = {};
Fi.METRICS_STRING = "|q";
Fi.BASELINE_SYMBOL = "M";
Fi.BASELINE_MULTIPLIER = 1.4;
Fi.HEIGHT_MULTIPLIER = 2;
Fi._newlines = [
  10,
  13
];
Fi._breakingSpaces = [
  9,
  32,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8200,
  8201,
  8202,
  8287,
  12288
];
var dx = {
  texture: !0,
  children: !1,
  baseTexture: !0
}, o0 = (
  /** @class */
  function(t) {
    ux(e, t);
    function e(r, i, s) {
      var o = this, h = !1;
      s || (s = ee.ADAPTER.createCanvas(), h = !0), s.width = 3, s.height = 3;
      var l = Me.from(s);
      return l.orig = new Ye(), l.trim = new Ye(), o = t.call(this, l) || this, o._ownCanvas = h, o.canvas = s, o.context = s.getContext("2d"), o._resolution = ee.RESOLUTION, o._autoResolution = !0, o._text = null, o._style = null, o._styleListener = null, o._font = "", o.text = r, o.style = i, o.localStyleID = -1, o;
    }
    return e.prototype.updateText = function(r) {
      var i = this._style;
      if (this.localStyleID !== i.styleID && (this.dirty = !0, this.localStyleID = i.styleID), !(!this.dirty && r)) {
        this._font = this._style.toFontString();
        var s = this.context, o = Fi.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), h = o.width, l = o.height, c = o.lines, _ = o.lineHeight, y = o.lineWidths, w = o.maxLineWidth, b = o.fontProperties;
        this.canvas.width = Math.ceil(Math.ceil(Math.max(1, h) + i.padding * 2) * this._resolution), this.canvas.height = Math.ceil(Math.ceil(Math.max(1, l) + i.padding * 2) * this._resolution), s.scale(this._resolution, this._resolution), s.clearRect(0, 0, this.canvas.width, this.canvas.height), s.font = this._font, s.lineWidth = i.strokeThickness, s.textBaseline = i.textBaseline, s.lineJoin = i.lineJoin, s.miterLimit = i.miterLimit;
        for (var E, T, P = i.dropShadow ? 2 : 1, O = 0; O < P; ++O) {
          var H = i.dropShadow && O === 0, Y = H ? Math.ceil(Math.max(1, l) + i.padding * 2) : 0, J = Y * this._resolution;
          if (H) {
            s.fillStyle = "black", s.strokeStyle = "black";
            var it = i.dropShadowColor, st = ss(typeof it == "number" ? it : Au(it)), K = i.dropShadowBlur * this._resolution, At = i.dropShadowDistance * this._resolution;
            s.shadowColor = "rgba(" + st[0] * 255 + "," + st[1] * 255 + "," + st[2] * 255 + "," + i.dropShadowAlpha + ")", s.shadowBlur = K, s.shadowOffsetX = Math.cos(i.dropShadowAngle) * At, s.shadowOffsetY = Math.sin(i.dropShadowAngle) * At + J;
          } else
            s.fillStyle = this._generateFillStyle(i, c, o), s.strokeStyle = i.stroke, s.shadowColor = "black", s.shadowBlur = 0, s.shadowOffsetX = 0, s.shadowOffsetY = 0;
          var Tt = (_ - b.fontSize) / 2;
          (!e.nextLineHeightBehavior || _ - b.fontSize < 0) && (Tt = 0);
          for (var dt = 0; dt < c.length; dt++)
            E = i.strokeThickness / 2, T = i.strokeThickness / 2 + dt * _ + b.ascent + Tt, i.align === "right" ? E += w - y[dt] : i.align === "center" && (E += (w - y[dt]) / 2), i.stroke && i.strokeThickness && this.drawLetterSpacing(c[dt], E + i.padding, T + i.padding - Y, !0), i.fill && this.drawLetterSpacing(c[dt], E + i.padding, T + i.padding - Y);
        }
        this.updateTexture();
      }
    }, e.prototype.drawLetterSpacing = function(r, i, s, o) {
      o === void 0 && (o = !1);
      var h = this._style, l = h.letterSpacing, c = e.experimentalLetterSpacing && ("letterSpacing" in CanvasRenderingContext2D.prototype || "textLetterSpacing" in CanvasRenderingContext2D.prototype);
      if (l === 0 || c) {
        c && (this.context.letterSpacing = l, this.context.textLetterSpacing = l), o ? this.context.strokeText(r, i, s) : this.context.fillText(r, i, s);
        return;
      }
      for (var _ = i, y = Array.from ? Array.from(r) : r.split(""), w = this.context.measureText(r).width, b = 0, E = 0; E < y.length; ++E) {
        var T = y[E];
        o ? this.context.strokeText(T, _, s) : this.context.fillText(T, _, s);
        for (var P = "", O = E + 1; O < y.length; ++O)
          P += y[O];
        b = this.context.measureText(P).width, _ += w - b + l, w = b;
      }
    }, e.prototype.updateTexture = function() {
      var r = this.canvas;
      if (this._style.trim) {
        var i = j_(r);
        i.data && (r.width = i.width, r.height = i.height, this.context.putImageData(i.data, 0, 0));
      }
      var s = this._texture, o = this._style, h = o.trim ? 0 : o.padding, l = s.baseTexture;
      s.trim.width = s._frame.width = r.width / this._resolution, s.trim.height = s._frame.height = r.height / this._resolution, s.trim.x = -h, s.trim.y = -h, s.orig.width = s._frame.width - h * 2, s.orig.height = s._frame.height - h * 2, this._onTextureUpdate(), l.setRealSize(r.width, r.height, this._resolution), s.updateUvs(), this.dirty = !1;
    }, e.prototype._render = function(r) {
      this._autoResolution && this._resolution !== r.resolution && (this._resolution = r.resolution, this.dirty = !0), this.updateText(!0), t.prototype._render.call(this, r);
    }, e.prototype.updateTransform = function() {
      this.updateText(!0), t.prototype.updateTransform.call(this);
    }, e.prototype.getBounds = function(r, i) {
      return this.updateText(!0), this._textureID === -1 && (r = !1), t.prototype.getBounds.call(this, r, i);
    }, e.prototype.getLocalBounds = function(r) {
      return this.updateText(!0), t.prototype.getLocalBounds.call(this, r);
    }, e.prototype._calculateBounds = function() {
      this.calculateVertices(), this._bounds.addQuad(this.vertexData);
    }, e.prototype._generateFillStyle = function(r, i, s) {
      var o = r.fill;
      if (Array.isArray(o)) {
        if (o.length === 1)
          return o[0];
      } else
        return o;
      var h, l = r.dropShadow ? r.dropShadowDistance : 0, c = r.padding || 0, _ = this.canvas.width / this._resolution - l - c * 2, y = this.canvas.height / this._resolution - l - c * 2, w = o.slice(), b = r.fillGradientStops.slice();
      if (!b.length)
        for (var E = w.length + 1, T = 1; T < E; ++T)
          b.push(T / E);
      if (w.unshift(o[0]), b.unshift(0), w.push(o[o.length - 1]), b.push(1), r.fillGradientType === Ls.LINEAR_VERTICAL) {
        h = this.context.createLinearGradient(_ / 2, c, _ / 2, y + c);
        for (var P = s.fontProperties.fontSize + r.strokeThickness, T = 0; T < i.length; T++) {
          var O = s.lineHeight * (T - 1) + P, H = s.lineHeight * T, Y = H;
          T > 0 && O > H && (Y = (H + O) / 2);
          var J = H + P, it = s.lineHeight * (T + 1), st = J;
          T + 1 < i.length && it < J && (st = (J + it) / 2);
          for (var K = (st - Y) / y, At = 0; At < w.length; At++) {
            var Tt = 0;
            typeof b[At] == "number" ? Tt = b[At] : Tt = At / w.length;
            var dt = Math.min(1, Math.max(0, Y / y + Tt * K));
            dt = Number(dt.toFixed(5)), h.addColorStop(dt, w[At]);
          }
        }
      } else {
        h = this.context.createLinearGradient(c, y / 2, _ + c, y / 2);
        for (var Et = w.length + 1, Rt = 1, T = 0; T < w.length; T++) {
          var Ft = void 0;
          typeof b[T] == "number" ? Ft = b[T] : Ft = Rt / Et, h.addColorStop(Ft, w[T]), Rt++;
        }
      }
      return h;
    }, e.prototype.destroy = function(r) {
      typeof r == "boolean" && (r = { children: r }), r = Object.assign({}, dx, r), t.prototype.destroy.call(this, r), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null;
    }, Object.defineProperty(e.prototype, "width", {
      /** The width of the Text, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width;
      },
      set: function(r) {
        this.updateText(!0);
        var i = es(this.scale.x) || 1;
        this.scale.x = i * r / this._texture.orig.width, this._width = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the Text, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height;
      },
      set: function(r) {
        this.updateText(!0);
        var i = es(this.scale.y) || 1;
        this.scale.y = i * r / this._texture.orig.height, this._height = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "style", {
      /**
       * Set the style of the text.
       *
       * Set up an event listener to listen for changes on the style object and mark the text as dirty.
       */
      get: function() {
        return this._style;
      },
      set: function(r) {
        r = r || {}, r instanceof as ? this._style = r : this._style = new as(r), this.localStyleID = -1, this.dirty = !0;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "text", {
      /** Set the copy for the text object. To split a line you can use '\n'. */
      get: function() {
        return this._text;
      },
      set: function(r) {
        r = String(r == null ? "" : r), this._text !== r && (this._text = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "resolution", {
      /**
       * The resolution / device pixel ratio of the canvas.
       *
       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.
       * @default 1
       */
      get: function() {
        return this._resolution;
      },
      set: function(r) {
        this._autoResolution = !1, this._resolution !== r && (this._resolution = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), e.nextLineHeightBehavior = !1, e.experimentalLetterSpacing = !1, e;
  }(Bs)
);
/*!
 * @pixi/prepare - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
ee.UPLOADS_PER_FRAME = 4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Hl = function(t, e) {
  return Hl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Hl(t, e);
};
function _x(t, e) {
  Hl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var s2 = (
  /** @class */
  function() {
    function t(e) {
      this.maxItemsPerFrame = e, this.itemsLeft = 0;
    }
    return t.prototype.beginFrame = function() {
      this.itemsLeft = this.maxItemsPerFrame;
    }, t.prototype.allowedToUpload = function() {
      return this.itemsLeft-- > 0;
    }, t;
  }()
);
function px(t, e) {
  var r = !1;
  if (t && t._textures && t._textures.length) {
    for (var i = 0; i < t._textures.length; i++)
      if (t._textures[i] instanceof Me) {
        var s = t._textures[i].baseTexture;
        e.indexOf(s) === -1 && (e.push(s), r = !0);
      }
  }
  return r;
}
function vx(t, e) {
  if (t.baseTexture instanceof We) {
    var r = t.baseTexture;
    return e.indexOf(r) === -1 && e.push(r), !0;
  }
  return !1;
}
function mx(t, e) {
  if (t._texture && t._texture instanceof Me) {
    var r = t._texture.baseTexture;
    return e.indexOf(r) === -1 && e.push(r), !0;
  }
  return !1;
}
function gx(t, e) {
  return e instanceof o0 ? (e.updateText(!0), !0) : !1;
}
function yx(t, e) {
  if (e instanceof as) {
    var r = e.toFontString();
    return Fi.measureFont(r), !0;
  }
  return !1;
}
function bx(t, e) {
  if (t instanceof o0) {
    e.indexOf(t.style) === -1 && e.push(t.style), e.indexOf(t) === -1 && e.push(t);
    var r = t._texture.baseTexture;
    return e.indexOf(r) === -1 && e.push(r), !0;
  }
  return !1;
}
function xx(t, e) {
  return t instanceof as ? (e.indexOf(t) === -1 && e.push(t), !0) : !1;
}
var o2 = (
  /** @class */
  function() {
    function t(e) {
      var r = this;
      this.limiter = new s2(ee.UPLOADS_PER_FRAME), this.renderer = e, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() {
        r.queue && r.prepareItems();
      }, this.registerFindHook(bx), this.registerFindHook(xx), this.registerFindHook(px), this.registerFindHook(vx), this.registerFindHook(mx), this.registerUploadHook(gx), this.registerUploadHook(yx);
    }
    return t.prototype.upload = function(e, r) {
      var i = this;
      return typeof e == "function" && (r = e, e = null), r && ai("6.5.0", "BasePrepare.upload callback is deprecated, use the return Promise instead."), new Promise(function(s) {
        e && i.add(e);
        var o = function() {
          r == null || r(), s();
        };
        i.queue.length ? (i.completes.push(o), i.ticking || (i.ticking = !0, Hr.system.addOnce(i.tick, i, Zi.UTILITY))) : o();
      });
    }, t.prototype.tick = function() {
      setTimeout(this.delayedTick, 0);
    }, t.prototype.prepareItems = function() {
      for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
        var e = this.queue[0], r = !1;
        if (e && !e._destroyed) {
          for (var i = 0, s = this.uploadHooks.length; i < s; i++)
            if (this.uploadHooks[i](this.uploadHookHelper, e)) {
              this.queue.shift(), r = !0;
              break;
            }
        }
        r || this.queue.shift();
      }
      if (this.queue.length)
        Hr.system.addOnce(this.tick, this, Zi.UTILITY);
      else {
        this.ticking = !1;
        var o = this.completes.slice(0);
        this.completes.length = 0;
        for (var i = 0, s = o.length; i < s; i++)
          o[i]();
      }
    }, t.prototype.registerFindHook = function(e) {
      return e && this.addHooks.push(e), this;
    }, t.prototype.registerUploadHook = function(e) {
      return e && this.uploadHooks.push(e), this;
    }, t.prototype.add = function(e) {
      for (var r = 0, i = this.addHooks.length; r < i && !this.addHooks[r](e, this.queue); r++)
        ;
      if (e instanceof Ti)
        for (var r = e.children.length - 1; r >= 0; r--)
          this.add(e.children[r]);
      return this;
    }, t.prototype.destroy = function() {
      this.ticking && Hr.system.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null;
    }, t;
  }()
);
function a2(t, e) {
  return e instanceof We ? (e._glTextures[t.CONTEXT_UID] || t.texture.bind(e), !0) : !1;
}
function Tx(t, e) {
  if (!(e instanceof ko))
    return !1;
  var r = e.geometry;
  e.finishPoly(), r.updateBatches();
  for (var i = r.batches, s = 0; s < i.length; s++) {
    var o = i[s].style.texture;
    o && a2(t, o.baseTexture);
  }
  return r.batchable || t.geometry.bind(r, e._resolveDirectShader(t)), !0;
}
function Ax(t, e) {
  return t instanceof ko ? (e.push(t), !0) : !1;
}
var h2 = (
  /** @class */
  function(t) {
    _x(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return i.uploadHookHelper = i.renderer, i.registerFindHook(Ax), i.registerUploadHook(a2), i.registerUploadHook(Tx), i;
    }
    return e.extension = {
      name: "prepare",
      type: or.RendererPlugin
    }, e;
  }(o2)
), wx = (
  /** @class */
  function() {
    function t(e) {
      this.maxMilliseconds = e, this.frameStart = 0;
    }
    return t.prototype.beginFrame = function() {
      this.frameStart = Date.now();
    }, t.prototype.allowedToUpload = function() {
      return Date.now() - this.frameStart < this.maxMilliseconds;
    }, t;
  }()
);
/*!
 * @pixi/spritesheet - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var l2 = (
  /** @class */
  function() {
    function t(e, r, i) {
      i === void 0 && (i = null), this.linkedSheets = [], this._texture = e instanceof Me ? e : null, this.baseTexture = e instanceof We ? e : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = r;
      var s = this.baseTexture.resource;
      this.resolution = this._updateResolution(i || (s ? s.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null;
    }
    return t.prototype._updateResolution = function(e) {
      e === void 0 && (e = null);
      var r = this.data.meta.scale, i = Oo(e, null);
      return i === null && (i = r !== void 0 ? parseFloat(r) : 1), i !== 1 && this.baseTexture.setResolution(i), i;
    }, t.prototype.parse = function(e) {
      var r = this;
      return e && ai("6.5.0", "Spritesheet.parse callback is deprecated, use the return Promise instead."), new Promise(function(i) {
        r._callback = function(s) {
          e == null || e(s), i(s);
        }, r._batchIndex = 0, r._frameKeys.length <= t.BATCH_SIZE ? (r._processFrames(0), r._processAnimations(), r._parseComplete()) : r._nextBatch();
      });
    }, t.prototype._processFrames = function(e) {
      for (var r = e, i = t.BATCH_SIZE; r - e < i && r < this._frameKeys.length; ) {
        var s = this._frameKeys[r], o = this._frames[s], h = o.frame;
        if (h) {
          var l = null, c = null, _ = o.trimmed !== !1 && o.sourceSize ? o.sourceSize : o.frame, y = new Ye(0, 0, Math.floor(_.w) / this.resolution, Math.floor(_.h) / this.resolution);
          o.rotated ? l = new Ye(Math.floor(h.x) / this.resolution, Math.floor(h.y) / this.resolution, Math.floor(h.h) / this.resolution, Math.floor(h.w) / this.resolution) : l = new Ye(Math.floor(h.x) / this.resolution, Math.floor(h.y) / this.resolution, Math.floor(h.w) / this.resolution, Math.floor(h.h) / this.resolution), o.trimmed !== !1 && o.spriteSourceSize && (c = new Ye(Math.floor(o.spriteSourceSize.x) / this.resolution, Math.floor(o.spriteSourceSize.y) / this.resolution, Math.floor(h.w) / this.resolution, Math.floor(h.h) / this.resolution)), this.textures[s] = new Me(this.baseTexture, l, y, c, o.rotated ? 2 : 0, o.anchor), Me.addToCache(this.textures[s], s);
        }
        r++;
      }
    }, t.prototype._processAnimations = function() {
      var e = this.data.animations || {};
      for (var r in e) {
        this.animations[r] = [];
        for (var i = 0; i < e[r].length; i++) {
          var s = e[r][i];
          this.animations[r].push(this.textures[s]);
        }
      }
    }, t.prototype._parseComplete = function() {
      var e = this._callback;
      this._callback = null, this._batchIndex = 0, e.call(this, this.textures);
    }, t.prototype._nextBatch = function() {
      var e = this;
      this._processFrames(this._batchIndex * t.BATCH_SIZE), this._batchIndex++, setTimeout(function() {
        e._batchIndex * t.BATCH_SIZE < e._frameKeys.length ? e._nextBatch() : (e._processAnimations(), e._parseComplete());
      }, 0);
    }, t.prototype.destroy = function(e) {
      var r;
      e === void 0 && (e = !1);
      for (var i in this.textures)
        this.textures[i].destroy();
      this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, e && ((r = this._texture) === null || r === void 0 || r.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null, this.linkedSheets = [];
    }, t.BATCH_SIZE = 1e3, t;
  }()
), u2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.use = function(e, r) {
      var i, s, o = this, h = e.name + "_image";
      if (!e.data || e.type !== $r.TYPE.JSON || !e.data.frames || o.resources[h]) {
        r();
        return;
      }
      var l = (s = (i = e.data) === null || i === void 0 ? void 0 : i.meta) === null || s === void 0 ? void 0 : s.related_multi_packs;
      if (Array.isArray(l))
        for (var c = function(T) {
          if (typeof T != "string")
            return "continue";
          var P = T.replace(".json", ""), O = ji.resolve(e.url.replace(o.baseUrl, ""), T);
          if (o.resources[P] || Object.values(o.resources).some(function(Y) {
            return ji.format(ji.parse(Y.url)) === O;
          }))
            return "continue";
          var H = {
            crossOrigin: e.crossOrigin,
            loadType: $r.LOAD_TYPE.XHR,
            xhrType: $r.XHR_RESPONSE_TYPE.JSON,
            parentResource: e,
            metadata: e.metadata
          };
          o.add(P, O, H);
        }, _ = 0, y = l; _ < y.length; _++) {
          var w = y[_];
          c(w);
        }
      var b = {
        crossOrigin: e.crossOrigin,
        metadata: e.metadata.imageMetadata,
        parentResource: e
      }, E = t.getResourcePath(e, o.baseUrl);
      o.add(h, E, b, function(P) {
        if (P.error) {
          r(P.error);
          return;
        }
        var O = new l2(P.texture, e.data, e.url);
        O.parse().then(function() {
          e.spritesheet = O, e.textures = O.textures, r();
        });
      });
    }, t.getResourcePath = function(e, r) {
      return e.isDataUrl ? e.data.meta.image : ji.resolve(e.url.replace(r, ""), e.data.meta.image);
    }, t.extension = or.Loader, t;
  }()
);
/*!
 * @pixi/sprite-tiling - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var zl = function(t, e) {
  return zl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, zl(t, e);
};
function f2(t, e) {
  zl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var ao = new _r(), Px = (
  /** @class */
  function(t) {
    f2(e, t);
    function e(r, i, s) {
      i === void 0 && (i = 100), s === void 0 && (s = 100);
      var o = t.call(this, r) || this;
      return o.tileTransform = new ih(), o._width = i, o._height = s, o.uvMatrix = o.texture.uvMatrix || new ah(r), o.pluginName = "tilingSprite", o.uvRespectAnchor = !1, o;
    }
    return Object.defineProperty(e.prototype, "clampMargin", {
      /**
       * Changes frame clamping in corresponding textureTransform, shortcut
       * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas
       * @default 0.5
       * @member {number}
       */
      get: function() {
        return this.uvMatrix.clampMargin;
      },
      set: function(r) {
        this.uvMatrix.clampMargin = r, this.uvMatrix.update(!0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tileScale", {
      /** The scaling of the image that is being tiled. */
      get: function() {
        return this.tileTransform.scale;
      },
      set: function(r) {
        this.tileTransform.scale.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tilePosition", {
      /** The offset of the image that is being tiled. */
      get: function() {
        return this.tileTransform.position;
      },
      set: function(r) {
        this.tileTransform.position.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._onTextureUpdate = function() {
      this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215;
    }, e.prototype._render = function(r) {
      var i = this._texture;
      !i || !i.valid || (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), r.batch.setObjectRenderer(r.plugins[this.pluginName]), r.plugins[this.pluginName].render(this));
    }, e.prototype._calculateBounds = function() {
      var r = this._width * -this._anchor._x, i = this._height * -this._anchor._y, s = this._width * (1 - this._anchor._x), o = this._height * (1 - this._anchor._y);
      this._bounds.addFrame(this.transform, r, i, s, o);
    }, e.prototype.getLocalBounds = function(r) {
      return this.children.length === 0 ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), r || (this._localBoundsRect || (this._localBoundsRect = new Ye()), r = this._localBoundsRect), this._bounds.getRectangle(r)) : t.prototype.getLocalBounds.call(this, r);
    }, e.prototype.containsPoint = function(r) {
      this.worldTransform.applyInverse(r, ao);
      var i = this._width, s = this._height, o = -i * this.anchor._x;
      if (ao.x >= o && ao.x < o + i) {
        var h = -s * this.anchor._y;
        if (ao.y >= h && ao.y < h + s)
          return !0;
      }
      return !1;
    }, e.prototype.destroy = function(r) {
      t.prototype.destroy.call(this, r), this.tileTransform = null, this.uvMatrix = null;
    }, e.from = function(r, i) {
      var s = r instanceof Me ? r : Me.from(r, i);
      return new e(s, i.width, i.height);
    }, Object.defineProperty(e.prototype, "width", {
      /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this._width;
      },
      set: function(r) {
        this._width = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the TilingSprite, setting this will actually modify the scale to achieve the value set. */
      get: function() {
        return this._height;
      },
      set: function(r) {
        this._height = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Bs)
), Ex = `#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`, uc = `#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, Ix = `#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`, Cx = `#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`, $x = `#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`, Ca = new wr(), c2 = (
  /** @class */
  function(t) {
    f2(e, t);
    function e(r) {
      var i = t.call(this, r) || this;
      return r.runners.contextChange.add(i), i.quad = new Uu(), i.state = Cn.for2d(), i;
    }
    return e.prototype.contextChange = function() {
      var r = this.renderer, i = { globals: r.globalUniforms };
      this.simpleShader = cn.from(uc, Ex, i), this.shader = r.context.webGLVersion > 1 ? cn.from(Cx, $x, i) : cn.from(uc, Ix, i);
    }, e.prototype.render = function(r) {
      var i = this.renderer, s = this.quad, o = s.vertices;
      o[0] = o[6] = r._width * -r.anchor.x, o[1] = o[3] = r._height * -r.anchor.y, o[2] = o[4] = r._width * (1 - r.anchor.x), o[5] = o[7] = r._height * (1 - r.anchor.y);
      var h = r.uvRespectAnchor ? r.anchor.x : 0, l = r.uvRespectAnchor ? r.anchor.y : 0;
      o = s.uvs, o[0] = o[6] = -h, o[1] = o[3] = -l, o[2] = o[4] = 1 - h, o[5] = o[7] = 1 - l, s.invalidate();
      var c = r._texture, _ = c.baseTexture, y = _.alphaMode > 0, w = r.tileTransform.localTransform, b = r.uvMatrix, E = _.isPowerOfTwo && c.frame.width === _.width && c.frame.height === _.height;
      E && (_._glTextures[i.CONTEXT_UID] ? E = _.wrapMode !== Wi.CLAMP : _.wrapMode === Wi.CLAMP && (_.wrapMode = Wi.REPEAT));
      var T = E ? this.simpleShader : this.shader, P = c.width, O = c.height, H = r._width, Y = r._height;
      Ca.set(w.a * P / H, w.b * P / Y, w.c * O / H, w.d * O / Y, w.tx / H, w.ty / Y), Ca.invert(), E ? Ca.prepend(b.mapCoord) : (T.uniforms.uMapCoord = b.mapCoord.toArray(!0), T.uniforms.uClampFrame = b.uClampFrame, T.uniforms.uClampOffset = b.uClampOffset), T.uniforms.uTransform = Ca.toArray(!0), T.uniforms.uColor = Eu(r.tint, r.worldAlpha, T.uniforms.uColor, y), T.uniforms.translationMatrix = r.transform.worldTransform.toArray(!0), T.uniforms.uSampler = c, i.shader.bind(T), i.geometry.bind(s), this.state.blendMode = Pu(r.blendMode, y), i.state.set(this.state), i.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0);
    }, e.extension = {
      name: "tilingSprite",
      type: or.RendererPlugin
    }, e;
  }(Zo)
);
/*!
 * @pixi/mesh - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var jl = function(t, e) {
  return jl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, jl(t, e);
};
function a0(t, e) {
  jl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var d2 = (
  /** @class */
  function() {
    function t(e, r) {
      this.uvBuffer = e, this.uvMatrix = r, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0;
    }
    return t.prototype.update = function(e) {
      if (!(!e && this._bufferUpdateId === this.uvBuffer._updateID && this._textureUpdateId === this.uvMatrix._updateID)) {
        this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID;
        var r = this.uvBuffer.data;
        (!this.data || this.data.length !== r.length) && (this.data = new Float32Array(r.length)), this.uvMatrix.multiplyUvs(r, this.data), this._updateID++;
      }
    }, t;
  }()
), zh = new _r(), fc = new xo(), Os = (
  /** @class */
  function(t) {
    a0(e, t);
    function e(r, i, s, o) {
      o === void 0 && (o = yi.TRIANGLES);
      var h = t.call(this) || this;
      return h.geometry = r, h.shader = i, h.state = s || Cn.for2d(), h.drawMode = o, h.start = 0, h.size = 0, h.uvs = null, h.indices = null, h.vertexData = new Float32Array(1), h.vertexDirty = -1, h._transformID = -1, h._roundPixels = ee.ROUND_PIXELS, h.batchUvs = null, h;
    }
    return Object.defineProperty(e.prototype, "geometry", {
      /**
       * Includes vertex positions, face indices, normals, colors, UVs, and
       * custom attributes within buffers, reducing the cost of passing all
       * this data to the GPU. Can be shared between multiple Mesh objects.
       */
      get: function() {
        return this._geometry;
      },
      set: function(r) {
        this._geometry !== r && (this._geometry && (this._geometry.refCount--, this._geometry.refCount === 0 && this._geometry.dispose()), this._geometry = r, this._geometry && this._geometry.refCount++, this.vertexDirty = -1);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "uvBuffer", {
      /**
       * To change mesh uv's, change its uvBuffer data and increment its _updateID.
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[1];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "verticesBuffer", {
      /**
       * To change mesh vertices, change its uvBuffer data and increment its _updateID.
       * Incrementing _updateID is optional because most of Mesh objects do it anyway.
       * @readonly
       */
      get: function() {
        return this.geometry.buffers[0];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "material", {
      get: function() {
        return this.shader;
      },
      /** Alias for {@link PIXI.Mesh#shader}. */
      set: function(r) {
        this.shader = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "blendMode", {
      get: function() {
        return this.state.blendMode;
      },
      /**
       * The blend mode to be applied to the Mesh. Apply a value of
       * `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.
       * @default PIXI.BLEND_MODES.NORMAL;
       */
      set: function(r) {
        this.state.blendMode = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "roundPixels", {
      get: function() {
        return this._roundPixels;
      },
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       * @default false
       */
      set: function(r) {
        this._roundPixels !== r && (this._transformID = -1), this._roundPixels = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tint", {
      /**
       * The multiply tint applied to the Mesh. This is a hex value. A value of
       * `0xFFFFFF` will remove any tint effect.
       *
       * Null for non-MeshMaterial shaders
       * @default 0xFFFFFF
       */
      get: function() {
        return "tint" in this.shader ? this.shader.tint : null;
      },
      set: function(r) {
        this.shader.tint = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "texture", {
      /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */
      get: function() {
        return "texture" in this.shader ? this.shader.texture : null;
      },
      set: function(r) {
        this.shader.texture = r;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._render = function(r) {
      var i = this.geometry.buffers[0].data, s = this.shader;
      s.batchable && this.drawMode === yi.TRIANGLES && i.length < e.BATCHABLE_SIZE * 2 ? this._renderToBatch(r) : this._renderDefault(r);
    }, e.prototype._renderDefault = function(r) {
      var i = this.shader;
      i.alpha = this.worldAlpha, i.update && i.update(), r.batch.flush(), i.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0), r.shader.bind(i), r.state.set(this.state), r.geometry.bind(this.geometry, i), r.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount);
    }, e.prototype._renderToBatch = function(r) {
      var i = this.geometry, s = this.shader;
      s.uvMatrix && (s.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = i.indexBuffer.data, this._tintRGB = s._tintRGB, this._texture = s.texture;
      var o = this.material.pluginName;
      r.batch.setObjectRenderer(r.plugins[o]), r.plugins[o].render(this);
    }, e.prototype.calculateVertices = function() {
      var r = this.geometry, i = r.buffers[0], s = i.data, o = i._updateID;
      if (!(o === this.vertexDirty && this._transformID === this.transform._worldID)) {
        this._transformID = this.transform._worldID, this.vertexData.length !== s.length && (this.vertexData = new Float32Array(s.length));
        for (var h = this.transform.worldTransform, l = h.a, c = h.b, _ = h.c, y = h.d, w = h.tx, b = h.ty, E = this.vertexData, T = 0; T < E.length / 2; T++) {
          var P = s[T * 2], O = s[T * 2 + 1];
          E[T * 2] = l * P + _ * O + w, E[T * 2 + 1] = c * P + y * O + b;
        }
        if (this._roundPixels)
          for (var H = ee.RESOLUTION, T = 0; T < E.length; ++T)
            E[T] = Math.round((E[T] * H | 0) / H);
        this.vertexDirty = o;
      }
    }, e.prototype.calculateUvs = function() {
      var r = this.geometry.buffers[1], i = this.shader;
      i.uvMatrix.isSimple ? this.uvs = r.data : (this.batchUvs || (this.batchUvs = new d2(r, i.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data);
    }, e.prototype._calculateBounds = function() {
      this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length);
    }, e.prototype.containsPoint = function(r) {
      if (!this.getBounds().contains(r.x, r.y))
        return !1;
      this.worldTransform.applyInverse(r, zh);
      for (var i = this.geometry.getBuffer("aVertexPosition").data, s = fc.points, o = this.geometry.getIndex().data, h = o.length, l = this.drawMode === 4 ? 3 : 1, c = 0; c + 2 < h; c += l) {
        var _ = o[c] * 2, y = o[c + 1] * 2, w = o[c + 2] * 2;
        if (s[0] = i[_], s[1] = i[_ + 1], s[2] = i[y], s[3] = i[y + 1], s[4] = i[w], s[5] = i[w + 1], fc.contains(zh.x, zh.y))
          return !0;
      }
      return !1;
    }, e.prototype.destroy = function(r) {
      t.prototype.destroy.call(this, r), this._cachedTexture && (this._cachedTexture.destroy(), this._cachedTexture = null), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null;
    }, e.BATCHABLE_SIZE = 100, e;
  }(Ti)
), Rx = `varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`, Sx = `attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`, Fs = (
  /** @class */
  function(t) {
    a0(e, t);
    function e(r, i) {
      var s = this, o = {
        uSampler: r,
        alpha: 1,
        uTextureMatrix: wr.IDENTITY,
        uColor: new Float32Array([1, 1, 1, 1])
      };
      return i = Object.assign({
        tint: 16777215,
        alpha: 1,
        pluginName: "batch"
      }, i), i.uniforms && Object.assign(o, i.uniforms), s = t.call(this, i.program || Ds.from(Sx, Rx), o) || this, s._colorDirty = !1, s.uvMatrix = new ah(r), s.batchable = i.program === void 0, s.pluginName = i.pluginName, s.tint = i.tint, s.alpha = i.alpha, s;
    }
    return Object.defineProperty(e.prototype, "texture", {
      /** Reference to the texture being rendered. */
      get: function() {
        return this.uniforms.uSampler;
      },
      set: function(r) {
        this.uniforms.uSampler !== r && (!this.uniforms.uSampler.baseTexture.alphaMode != !r.baseTexture.alphaMode && (this._colorDirty = !0), this.uniforms.uSampler = r, this.uvMatrix.texture = r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "alpha", {
      get: function() {
        return this._alpha;
      },
      /**
       * This gets automatically set by the object using this.
       * @default 1
       */
      set: function(r) {
        r !== this._alpha && (this._alpha = r, this._colorDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "tint", {
      get: function() {
        return this._tint;
      },
      /**
       * Multiply tint for the material.
       * @default 0xFFFFFF
       */
      set: function(r) {
        r !== this._tint && (this._tint = r, this._tintRGB = (r >> 16) + (r & 65280) + ((r & 255) << 16), this._colorDirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.update = function() {
      if (this._colorDirty) {
        this._colorDirty = !1;
        var r = this.texture.baseTexture;
        Eu(this._tint, this._alpha, this.uniforms.uColor, r.alphaMode);
      }
      this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord);
    }, e;
  }(cn)
), Jo = (
  /** @class */
  function(t) {
    a0(e, t);
    function e(r, i, s) {
      var o = t.call(this) || this, h = new Br(r), l = new Br(i, !0), c = new Br(s, !0, !0);
      return o.addAttribute("aVertexPosition", h, 2, !1, xe.FLOAT).addAttribute("aTextureCoord", l, 2, !1, xe.FLOAT).addIndex(c), o._updateId = -1, o;
    }
    return Object.defineProperty(e.prototype, "vertexDirtyId", {
      /**
       * If the vertex position is updated.
       * @readonly
       * @private
       */
      get: function() {
        return this.buffers[0]._updateID;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Gs)
);
/*!
 * @pixi/text-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Wl = function(t, e) {
  return Wl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Wl(t, e);
};
function Nx(t, e) {
  Wl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Xo = (
  /** @class */
  function() {
    function t() {
      this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [], this.distanceField = [];
    }
    return t;
  }()
), _2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.test = function(e) {
      return typeof e == "string" && e.indexOf("info face=") === 0;
    }, t.parse = function(e) {
      var r = e.match(/^[a-z]+\s+.+$/gm), i = {
        info: [],
        common: [],
        page: [],
        char: [],
        chars: [],
        kerning: [],
        kernings: [],
        distanceField: []
      };
      for (var s in r) {
        var o = r[s].match(/^[a-z]+/gm)[0], h = r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm), l = {};
        for (var c in h) {
          var _ = h[c].split("="), y = _[0], w = _[1].replace(/"/gm, ""), b = parseFloat(w), E = isNaN(b) ? w : b;
          l[y] = E;
        }
        i[o].push(l);
      }
      var T = new Xo();
      return i.info.forEach(function(P) {
        return T.info.push({
          face: P.face,
          size: parseInt(P.size, 10)
        });
      }), i.common.forEach(function(P) {
        return T.common.push({
          lineHeight: parseInt(P.lineHeight, 10)
        });
      }), i.page.forEach(function(P) {
        return T.page.push({
          id: parseInt(P.id, 10),
          file: P.file
        });
      }), i.char.forEach(function(P) {
        return T.char.push({
          id: parseInt(P.id, 10),
          page: parseInt(P.page, 10),
          x: parseInt(P.x, 10),
          y: parseInt(P.y, 10),
          width: parseInt(P.width, 10),
          height: parseInt(P.height, 10),
          xoffset: parseInt(P.xoffset, 10),
          yoffset: parseInt(P.yoffset, 10),
          xadvance: parseInt(P.xadvance, 10)
        });
      }), i.kerning.forEach(function(P) {
        return T.kerning.push({
          first: parseInt(P.first, 10),
          second: parseInt(P.second, 10),
          amount: parseInt(P.amount, 10)
        });
      }), i.distanceField.forEach(function(P) {
        return T.distanceField.push({
          distanceRange: parseInt(P.distanceRange, 10),
          fieldType: P.fieldType
        });
      }), T;
    }, t;
  }()
), Wa = (
  /** @class */
  function() {
    function t() {
    }
    return t.test = function(e) {
      return e instanceof XMLDocument && e.getElementsByTagName("page").length && e.getElementsByTagName("info")[0].getAttribute("face") !== null;
    }, t.parse = function(e) {
      for (var r = new Xo(), i = e.getElementsByTagName("info"), s = e.getElementsByTagName("common"), o = e.getElementsByTagName("page"), h = e.getElementsByTagName("char"), l = e.getElementsByTagName("kerning"), c = e.getElementsByTagName("distanceField"), _ = 0; _ < i.length; _++)
        r.info.push({
          face: i[_].getAttribute("face"),
          size: parseInt(i[_].getAttribute("size"), 10)
        });
      for (var _ = 0; _ < s.length; _++)
        r.common.push({
          lineHeight: parseInt(s[_].getAttribute("lineHeight"), 10)
        });
      for (var _ = 0; _ < o.length; _++)
        r.page.push({
          id: parseInt(o[_].getAttribute("id"), 10) || 0,
          file: o[_].getAttribute("file")
        });
      for (var _ = 0; _ < h.length; _++) {
        var y = h[_];
        r.char.push({
          id: parseInt(y.getAttribute("id"), 10),
          page: parseInt(y.getAttribute("page"), 10) || 0,
          x: parseInt(y.getAttribute("x"), 10),
          y: parseInt(y.getAttribute("y"), 10),
          width: parseInt(y.getAttribute("width"), 10),
          height: parseInt(y.getAttribute("height"), 10),
          xoffset: parseInt(y.getAttribute("xoffset"), 10),
          yoffset: parseInt(y.getAttribute("yoffset"), 10),
          xadvance: parseInt(y.getAttribute("xadvance"), 10)
        });
      }
      for (var _ = 0; _ < l.length; _++)
        r.kerning.push({
          first: parseInt(l[_].getAttribute("first"), 10),
          second: parseInt(l[_].getAttribute("second"), 10),
          amount: parseInt(l[_].getAttribute("amount"), 10)
        });
      for (var _ = 0; _ < c.length; _++)
        r.distanceField.push({
          fieldType: c[_].getAttribute("fieldType"),
          distanceRange: parseInt(c[_].getAttribute("distanceRange"), 10)
        });
      return r;
    }, t;
  }()
), p2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.test = function(e) {
      if (typeof e == "string" && e.indexOf("<font>") > -1) {
        var r = new globalThis.DOMParser().parseFromString(e, "text/xml");
        return Wa.test(r);
      }
      return !1;
    }, t.parse = function(e) {
      var r = new globalThis.DOMParser().parseFromString(e, "text/xml");
      return Wa.parse(r);
    }, t;
  }()
), jh = [
  _2,
  Wa,
  p2
];
function h0(t) {
  for (var e = 0; e < jh.length; e++)
    if (jh[e].test(t))
      return jh[e];
  return null;
}
function Lx(t, e, r, i, s, o) {
  var h = r.fill;
  if (Array.isArray(h)) {
    if (h.length === 1)
      return h[0];
  } else
    return h;
  var l, c = r.dropShadow ? r.dropShadowDistance : 0, _ = r.padding || 0, y = t.width / i - c - _ * 2, w = t.height / i - c - _ * 2, b = h.slice(), E = r.fillGradientStops.slice();
  if (!E.length)
    for (var T = b.length + 1, P = 1; P < T; ++P)
      E.push(P / T);
  if (b.unshift(h[0]), E.unshift(0), b.push(h[h.length - 1]), E.push(1), r.fillGradientType === Ls.LINEAR_VERTICAL) {
    l = e.createLinearGradient(y / 2, _, y / 2, w + _);
    for (var O = 0, H = o.fontProperties.fontSize + r.strokeThickness, Y = H / w, P = 0; P < s.length; P++)
      for (var J = o.lineHeight * P, it = 0; it < b.length; it++) {
        var st = 0;
        typeof E[it] == "number" ? st = E[it] : st = it / b.length;
        var K = J / w + st * Y, At = Math.max(O, K);
        At = Math.min(At, 1), l.addColorStop(At, b[it]), O = At;
      }
  } else {
    l = e.createLinearGradient(_, w / 2, y + _, w / 2);
    for (var Tt = b.length + 1, dt = 1, P = 0; P < b.length; P++) {
      var Et = void 0;
      typeof E[P] == "number" ? Et = E[P] : Et = dt / Tt, l.addColorStop(Et, b[P]), dt++;
    }
  }
  return l;
}
function Ox(t, e, r, i, s, o, h) {
  var l = r.text, c = r.fontProperties;
  e.translate(i, s), e.scale(o, o);
  var _ = h.strokeThickness / 2, y = -(h.strokeThickness / 2);
  if (e.font = h.toFontString(), e.lineWidth = h.strokeThickness, e.textBaseline = h.textBaseline, e.lineJoin = h.lineJoin, e.miterLimit = h.miterLimit, e.fillStyle = Lx(t, e, h, o, [l], r), e.strokeStyle = h.stroke, h.dropShadow) {
    var w = h.dropShadowColor, b = ss(typeof w == "number" ? w : Au(w)), E = h.dropShadowBlur * o, T = h.dropShadowDistance * o;
    e.shadowColor = "rgba(" + b[0] * 255 + "," + b[1] * 255 + "," + b[2] * 255 + "," + h.dropShadowAlpha + ")", e.shadowBlur = E, e.shadowOffsetX = Math.cos(h.dropShadowAngle) * T, e.shadowOffsetY = Math.sin(h.dropShadowAngle) * T;
  } else
    e.shadowColor = "black", e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0;
  h.stroke && h.strokeThickness && e.strokeText(l, _, y + r.lineHeight - c.descent), h.fill && e.fillText(l, _, y + r.lineHeight - c.descent), e.setTransform(1, 0, 0, 1, 0, 0), e.fillStyle = "rgba(0, 0, 0, 0)";
}
function v2(t) {
  return Array.from ? Array.from(t) : t.split("");
}
function Fx(t) {
  typeof t == "string" && (t = [t]);
  for (var e = [], r = 0, i = t.length; r < i; r++) {
    var s = t[r];
    if (Array.isArray(s)) {
      if (s.length !== 2)
        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + s.length + ".");
      var o = s[0].charCodeAt(0), h = s[1].charCodeAt(0);
      if (h < o)
        throw new Error("[BitmapFont]: Invalid character range.");
      for (var l = o, c = h; l <= c; l++)
        e.push(String.fromCharCode(l));
    } else
      e.push.apply(e, v2(s));
  }
  if (e.length === 0)
    throw new Error("[BitmapFont]: Empty set when resolving characters.");
  return e;
}
function Ua(t) {
  return t.codePointAt ? t.codePointAt(0) : t.charCodeAt(0);
}
var Kn = (
  /** @class */
  function() {
    function t(e, r, i) {
      var s, o, h = e.info[0], l = e.common[0], c = e.page[0], _ = e.distanceField[0], y = Oo(c.file), w = {};
      this._ownsTextures = i, this.font = h.face, this.size = h.size, this.lineHeight = l.lineHeight / y, this.chars = {}, this.pageTextures = w;
      for (var b = 0; b < e.page.length; b++) {
        var E = e.page[b], T = E.id, P = E.file;
        w[T] = r instanceof Array ? r[b] : r[P], _ != null && _.fieldType && _.fieldType !== "none" && (w[T].baseTexture.alphaMode = xi.NO_PREMULTIPLIED_ALPHA);
      }
      for (var b = 0; b < e.char.length; b++) {
        var O = e.char[b], T = O.id, H = O.page, Y = e.char[b], J = Y.x, it = Y.y, st = Y.width, K = Y.height, At = Y.xoffset, Tt = Y.yoffset, dt = Y.xadvance;
        J /= y, it /= y, st /= y, K /= y, At /= y, Tt /= y, dt /= y;
        var Et = new Ye(J + w[H].frame.x / y, it + w[H].frame.y / y, st, K);
        this.chars[T] = {
          xOffset: At,
          yOffset: Tt,
          xAdvance: dt,
          kerning: {},
          texture: new Me(w[H].baseTexture, Et),
          page: H
        };
      }
      for (var b = 0; b < e.kerning.length; b++) {
        var Rt = e.kerning[b], Ft = Rt.first, ne = Rt.second, ae = Rt.amount;
        Ft /= y, ne /= y, ae /= y, this.chars[ne] && (this.chars[ne].kerning[Ft] = ae);
      }
      this.distanceFieldRange = _ == null ? void 0 : _.distanceRange, this.distanceFieldType = (o = (s = _ == null ? void 0 : _.fieldType) === null || s === void 0 ? void 0 : s.toLowerCase()) !== null && o !== void 0 ? o : "none";
    }
    return t.prototype.destroy = function() {
      for (var e in this.chars)
        this.chars[e].texture.destroy(), this.chars[e].texture = null;
      for (var e in this.pageTextures)
        this._ownsTextures && this.pageTextures[e].destroy(!0), this.pageTextures[e] = null;
      this.chars = null, this.pageTextures = null;
    }, t.install = function(e, r, i) {
      var s;
      if (e instanceof Xo)
        s = e;
      else {
        var o = h0(e);
        if (!o)
          throw new Error("Unrecognized data format for font.");
        s = o.parse(e);
      }
      r instanceof Me && (r = [r]);
      var h = new t(s, r, i);
      return t.available[h.font] = h, h;
    }, t.uninstall = function(e) {
      var r = t.available[e];
      if (!r)
        throw new Error("No font found named '" + e + "'");
      r.destroy(), delete t.available[e];
    }, t.from = function(e, r, i) {
      if (!e)
        throw new Error("[BitmapFont] Property `name` is required.");
      var s = Object.assign({}, t.defaultOptions, i), o = s.chars, h = s.padding, l = s.resolution, c = s.textureWidth, _ = s.textureHeight, y = Fx(o), w = r instanceof as ? r : new as(r), b = c, E = new Xo();
      E.info[0] = {
        face: w.fontFamily,
        size: w.fontSize
      }, E.common[0] = {
        lineHeight: w.fontSize
      };
      for (var T = 0, P = 0, O, H, Y, J = 0, it = [], st = 0; st < y.length; st++) {
        O || (O = ee.ADAPTER.createCanvas(), O.width = c, O.height = _, H = O.getContext("2d"), Y = new We(O, { resolution: l }), it.push(new Me(Y)), E.page.push({
          id: it.length - 1,
          file: ""
        }));
        var K = Fi.measureText(y[st], w, !1, O), At = K.width, Tt = Math.ceil(K.height), dt = Math.ceil((w.fontStyle === "italic" ? 2 : 1) * At);
        if (P >= _ - Tt * l) {
          if (P === 0)
            throw new Error("[BitmapFont] textureHeight " + _ + "px is " + ("too small for " + w.fontSize + "px fonts"));
          --st, O = null, H = null, Y = null, P = 0, T = 0, J = 0;
          continue;
        }
        if (J = Math.max(Tt + K.fontProperties.descent, J), dt * l + T >= b) {
          --st, P += J * l, P = Math.ceil(P), T = 0, J = 0;
          continue;
        }
        Ox(O, H, K, T, P, l, w);
        var Et = Ua(K.text);
        E.char.push({
          id: Et,
          page: it.length - 1,
          x: T / l,
          y: P / l,
          width: dt,
          height: Tt,
          xoffset: 0,
          yoffset: 0,
          xadvance: Math.ceil(At - (w.dropShadow ? w.dropShadowDistance : 0) - (w.stroke ? w.strokeThickness : 0))
        }), T += (dt + 2 * h) * l, T = Math.ceil(T);
      }
      for (var st = 0, Rt = y.length; st < Rt; st++)
        for (var Ft = y[st], ne = 0; ne < Rt; ne++) {
          var ae = y[ne], zt = H.measureText(Ft).width, Vt = H.measureText(ae).width, he = H.measureText(Ft + ae).width, Kt = he - (zt + Vt);
          Kt && E.kerning.push({
            first: Ua(Ft),
            second: Ua(ae),
            amount: Kt
          });
        }
      var ve = new t(E, it, !0);
      return t.available[e] !== void 0 && t.uninstall(e), t.available[e] = ve, ve;
    }, t.ALPHA = [["a", "z"], ["A", "Z"], " "], t.NUMERIC = [["0", "9"]], t.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "], t.ASCII = [[" ", "~"]], t.defaultOptions = {
      resolution: 1,
      textureWidth: 512,
      textureHeight: 512,
      padding: 4,
      chars: t.ALPHANUMERIC
    }, t.available = {}, t;
  }()
), Mx = `// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`, Ux = `// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`, Gx = [], Dx = [], cc = [], Bx = (
  /** @class */
  function(t) {
    Nx(e, t);
    function e(r, i) {
      i === void 0 && (i = {});
      var s = t.call(this) || this;
      s._tint = 16777215;
      var o = Object.assign({}, e.styleDefaults, i), h = o.align, l = o.tint, c = o.maxWidth, _ = o.letterSpacing, y = o.fontName, w = o.fontSize;
      if (!Kn.available[y])
        throw new Error('Missing BitmapFont "' + y + '"');
      return s._activePagesMeshData = [], s._textWidth = 0, s._textHeight = 0, s._align = h, s._tint = l, s._fontName = y, s._fontSize = w || Kn.available[y].size, s.text = r, s._maxWidth = c, s._maxLineHeight = 0, s._letterSpacing = _, s._anchor = new xn(function() {
        s.dirty = !0;
      }, s, 0, 0), s._roundPixels = ee.ROUND_PIXELS, s.dirty = !0, s._resolution = ee.RESOLUTION, s._autoResolution = !0, s._textureCache = {}, s;
    }
    return e.prototype.updateText = function() {
      for (var r, i = Kn.available[this._fontName], s = this._fontSize / i.size, o = new _r(), h = [], l = [], c = [], _ = this._text.replace(/(?:\r\n|\r)/g, `
`) || " ", y = v2(_), w = this._maxWidth * i.size / this._fontSize, b = i.distanceFieldType === "none" ? Gx : Dx, E = null, T = 0, P = 0, O = 0, H = -1, Y = 0, J = 0, it = 0, st = 0, K = 0; K < y.length; K++) {
        var At = y[K], Tt = Ua(At);
        if (/(?:\s)/.test(At) && (H = K, Y = T, st++), At === "\r" || At === `
`) {
          l.push(T), c.push(-1), P = Math.max(P, T), ++O, ++J, o.x = 0, o.y += i.lineHeight, E = null, st = 0;
          continue;
        }
        var dt = i.chars[Tt];
        if (dt) {
          E && dt.kerning[E] && (o.x += dt.kerning[E]);
          var Et = cc.pop() || {
            texture: Me.EMPTY,
            line: 0,
            charCode: 0,
            prevSpaces: 0,
            position: new _r()
          };
          Et.texture = dt.texture, Et.line = O, Et.charCode = Tt, Et.position.x = o.x + dt.xOffset + this._letterSpacing / 2, Et.position.y = o.y + dt.yOffset, Et.prevSpaces = st, h.push(Et), T = Et.position.x + Math.max(dt.xAdvance - dt.xOffset, dt.texture.orig.width), o.x += dt.xAdvance + this._letterSpacing, it = Math.max(it, dt.yOffset + dt.texture.height), E = Tt, H !== -1 && w > 0 && o.x > w && (++J, rs(h, 1 + H - J, 1 + K - H), K = H, H = -1, l.push(Y), c.push(h.length > 0 ? h[h.length - 1].prevSpaces : 0), P = Math.max(P, Y), O++, o.x = 0, o.y += i.lineHeight, E = null, st = 0);
        }
      }
      var Rt = y[y.length - 1];
      Rt !== "\r" && Rt !== `
` && (/(?:\s)/.test(Rt) && (T = Y), l.push(T), P = Math.max(P, T), c.push(-1));
      for (var Ft = [], K = 0; K <= O; K++) {
        var ne = 0;
        this._align === "right" ? ne = P - l[K] : this._align === "center" ? ne = (P - l[K]) / 2 : this._align === "justify" && (ne = c[K] < 0 ? 0 : (P - l[K]) / c[K]), Ft.push(ne);
      }
      for (var ae = h.length, zt = {}, Vt = [], he = this._activePagesMeshData, K = 0; K < he.length; K++)
        b.push(he[K]);
      for (var K = 0; K < ae; K++) {
        var Kt = h[K].texture, ve = Kt.baseTexture.uid;
        if (!zt[ve]) {
          var at = b.pop();
          if (!at) {
            var bt = new Jo(), vt = void 0, le = void 0;
            i.distanceFieldType === "none" ? (vt = new Fs(Me.EMPTY), le = Ae.NORMAL) : (vt = new Fs(Me.EMPTY, { program: Ds.from(Ux, Mx), uniforms: { uFWidth: 0 } }), le = Ae.NORMAL_NPM);
            var Gt = new Os(bt, vt);
            Gt.blendMode = le, at = {
              index: 0,
              indexCount: 0,
              vertexCount: 0,
              uvsCount: 0,
              total: 0,
              mesh: Gt,
              vertices: null,
              uvs: null,
              indices: null
            };
          }
          at.index = 0, at.indexCount = 0, at.vertexCount = 0, at.uvsCount = 0, at.total = 0;
          var se = this._textureCache;
          se[ve] = se[ve] || new Me(Kt.baseTexture), at.mesh.texture = se[ve], at.mesh.tint = this._tint, Vt.push(at), zt[ve] = at;
        }
        zt[ve].total++;
      }
      for (var K = 0; K < he.length; K++)
        Vt.indexOf(he[K]) === -1 && this.removeChild(he[K].mesh);
      for (var K = 0; K < Vt.length; K++)
        Vt[K].mesh.parent !== this && this.addChild(Vt[K].mesh);
      this._activePagesMeshData = Vt;
      for (var K in zt) {
        var at = zt[K], Pe = at.total;
        if (!(((r = at.indices) === null || r === void 0 ? void 0 : r.length) > 6 * Pe) || at.vertices.length < Os.BATCHABLE_SIZE * 2)
          at.vertices = new Float32Array(4 * 2 * Pe), at.uvs = new Float32Array(4 * 2 * Pe), at.indices = new Uint16Array(6 * Pe);
        else
          for (var Zt = at.total, Be = at.vertices, _e = Zt * 4 * 2; _e < Be.length; _e++)
            Be[_e] = 0;
        at.mesh.size = 6 * Pe;
      }
      for (var K = 0; K < ae; K++) {
        var At = h[K], fe = At.position.x + Ft[At.line] * (this._align === "justify" ? At.prevSpaces : 1);
        this._roundPixels && (fe = Math.round(fe));
        var ue = fe * s, me = At.position.y * s, Kt = At.texture, Nt = zt[Kt.baseTexture.uid], Ue = Kt.frame, Ke = Kt._uvs, ce = Nt.index++;
        Nt.indices[ce * 6 + 0] = 0 + ce * 4, Nt.indices[ce * 6 + 1] = 1 + ce * 4, Nt.indices[ce * 6 + 2] = 2 + ce * 4, Nt.indices[ce * 6 + 3] = 0 + ce * 4, Nt.indices[ce * 6 + 4] = 2 + ce * 4, Nt.indices[ce * 6 + 5] = 3 + ce * 4, Nt.vertices[ce * 8 + 0] = ue, Nt.vertices[ce * 8 + 1] = me, Nt.vertices[ce * 8 + 2] = ue + Ue.width * s, Nt.vertices[ce * 8 + 3] = me, Nt.vertices[ce * 8 + 4] = ue + Ue.width * s, Nt.vertices[ce * 8 + 5] = me + Ue.height * s, Nt.vertices[ce * 8 + 6] = ue, Nt.vertices[ce * 8 + 7] = me + Ue.height * s, Nt.uvs[ce * 8 + 0] = Ke.x0, Nt.uvs[ce * 8 + 1] = Ke.y0, Nt.uvs[ce * 8 + 2] = Ke.x1, Nt.uvs[ce * 8 + 3] = Ke.y1, Nt.uvs[ce * 8 + 4] = Ke.x2, Nt.uvs[ce * 8 + 5] = Ke.y2, Nt.uvs[ce * 8 + 6] = Ke.x3, Nt.uvs[ce * 8 + 7] = Ke.y3;
      }
      this._textWidth = P * s, this._textHeight = (o.y + i.lineHeight) * s;
      for (var K in zt) {
        var at = zt[K];
        if (this.anchor.x !== 0 || this.anchor.y !== 0)
          for (var kr = 0, Ur = this._textWidth * this.anchor.x, ei = this._textHeight * this.anchor.y, Ze = 0; Ze < at.total; Ze++)
            at.vertices[kr++] -= Ur, at.vertices[kr++] -= ei, at.vertices[kr++] -= Ur, at.vertices[kr++] -= ei, at.vertices[kr++] -= Ur, at.vertices[kr++] -= ei, at.vertices[kr++] -= Ur, at.vertices[kr++] -= ei;
        this._maxLineHeight = it * s;
        var Ai = at.mesh.geometry.getBuffer("aVertexPosition"), Er = at.mesh.geometry.getBuffer("aTextureCoord"), yt = at.mesh.geometry.getIndex();
        Ai.data = at.vertices, Er.data = at.uvs, yt.data = at.indices, Ai.update(), Er.update(), yt.update();
      }
      for (var K = 0; K < h.length; K++)
        cc.push(h[K]);
    }, e.prototype.updateTransform = function() {
      this.validate(), this.containerUpdateTransform();
    }, e.prototype._render = function(r) {
      this._autoResolution && this._resolution !== r.resolution && (this._resolution = r.resolution, this.dirty = !0);
      var i = Kn.available[this._fontName], s = i.distanceFieldRange, o = i.distanceFieldType, h = i.size;
      if (o !== "none")
        for (var l = this.worldTransform, c = l.a, _ = l.b, y = l.c, w = l.d, b = Math.sqrt(c * c + _ * _), E = Math.sqrt(y * y + w * w), T = (Math.abs(b) + Math.abs(E)) / 2, P = this._fontSize / h, O = 0, H = this._activePagesMeshData; O < H.length; O++) {
          var Y = H[O];
          Y.mesh.shader.uniforms.uFWidth = T * s * P * this._resolution;
        }
      t.prototype._render.call(this, r);
    }, e.prototype.getLocalBounds = function() {
      return this.validate(), t.prototype.getLocalBounds.call(this);
    }, e.prototype.validate = function() {
      this.dirty && (this.updateText(), this.dirty = !1);
    }, Object.defineProperty(e.prototype, "tint", {
      /**
       * The tint of the BitmapText object.
       * @default 0xffffff
       */
      get: function() {
        return this._tint;
      },
      set: function(r) {
        if (this._tint !== r) {
          this._tint = r;
          for (var i = 0; i < this._activePagesMeshData.length; i++)
            this._activePagesMeshData[i].mesh.tint = r;
        }
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "align", {
      /**
       * The alignment of the BitmapText object.
       * @member {string}
       * @default 'left'
       */
      get: function() {
        return this._align;
      },
      set: function(r) {
        this._align !== r && (this._align = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "fontName", {
      /** The name of the BitmapFont. */
      get: function() {
        return this._fontName;
      },
      set: function(r) {
        if (!Kn.available[r])
          throw new Error('Missing BitmapFont "' + r + '"');
        this._fontName !== r && (this._fontName = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "fontSize", {
      /** The size of the font to display. */
      get: function() {
        return this._fontSize;
      },
      set: function(r) {
        this._fontSize !== r && (this._fontSize = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "anchor", {
      /**
       * The anchor sets the origin point of the text.
       *
       * The default is `(0,0)`, this means the text's origin is the top left.
       *
       * Setting the anchor to `(0.5,0.5)` means the text's origin is centered.
       *
       * Setting the anchor to `(1,1)` would mean the text's origin point will be the bottom right corner.
       */
      get: function() {
        return this._anchor;
      },
      set: function(r) {
        typeof r == "number" ? this._anchor.set(r) : this._anchor.copyFrom(r);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "text", {
      /** The text of the BitmapText object. */
      get: function() {
        return this._text;
      },
      set: function(r) {
        r = String(r == null ? "" : r), this._text !== r && (this._text = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "maxWidth", {
      /**
       * The max width of this bitmap text in pixels. If the text provided is longer than the
       * value provided, line breaks will be automatically inserted in the last whitespace.
       * Disable by setting the value to 0.
       */
      get: function() {
        return this._maxWidth;
      },
      set: function(r) {
        this._maxWidth !== r && (this._maxWidth = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "maxLineHeight", {
      /**
       * The max line height. This is useful when trying to use the total height of the Text,
       * i.e. when trying to vertically align.
       * @readonly
       */
      get: function() {
        return this.validate(), this._maxLineHeight;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "textWidth", {
      /**
       * The width of the overall text, different from fontSize,
       * which is defined in the style object.
       * @readonly
       */
      get: function() {
        return this.validate(), this._textWidth;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "letterSpacing", {
      /** Additional space between characters. */
      get: function() {
        return this._letterSpacing;
      },
      set: function(r) {
        this._letterSpacing !== r && (this._letterSpacing = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "roundPixels", {
      /**
       * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
       * Advantages can include sharper image quality (like text) and faster rendering on canvas.
       * The main disadvantage is movement of objects may appear less smooth.
       * To set the global default, change {@link PIXI.settings.ROUND_PIXELS}
       * @default PIXI.settings.ROUND_PIXELS
       */
      get: function() {
        return this._roundPixels;
      },
      set: function(r) {
        r !== this._roundPixels && (this._roundPixels = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "textHeight", {
      /**
       * The height of the overall text, different from fontSize,
       * which is defined in the style object.
       * @readonly
       */
      get: function() {
        return this.validate(), this._textHeight;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "resolution", {
      /**
       * The resolution / device pixel ratio of the canvas.
       *
       * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.
       * @default 1
       */
      get: function() {
        return this._resolution;
      },
      set: function(r) {
        this._autoResolution = !1, this._resolution !== r && (this._resolution = r, this.dirty = !0);
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.destroy = function(r) {
      var i = this._textureCache;
      for (var s in i) {
        var o = i[s];
        o.destroy(), delete i[s];
      }
      this._textureCache = null, t.prototype.destroy.call(this, r);
    }, e.styleDefaults = {
      align: "left",
      tint: 16777215,
      maxWidth: 0,
      letterSpacing: 0
    }, e;
  }(Ti)
), m2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.add = function() {
      $r.setExtensionXhrType("fnt", $r.XHR_RESPONSE_TYPE.TEXT);
    }, t.use = function(e, r) {
      var i = h0(e.data);
      if (!i) {
        r();
        return;
      }
      for (var s = t.getBaseUrl(this, e), o = i.parse(e.data), h = {}, l = function(P) {
        h[P.metadata.pageFile] = P.texture, Object.keys(h).length === o.page.length && (e.bitmapFont = Kn.install(o, h, !0), r());
      }, c = 0; c < o.page.length; ++c) {
        var _ = o.page[c].file, y = s + _, w = !1;
        for (var b in this.resources) {
          var E = this.resources[b];
          if (E.url === y) {
            E.metadata.pageFile = _, E.texture ? l(E) : E.onAfterMiddleware.add(l), w = !0;
            break;
          }
        }
        if (!w) {
          var T = {
            crossOrigin: e.crossOrigin,
            loadType: $r.LOAD_TYPE.IMAGE,
            metadata: Object.assign({ pageFile: _ }, e.metadata.imageMetadata),
            parentResource: e
          };
          this.add(y, T, l);
        }
      }
    }, t.getBaseUrl = function(e, r) {
      var i = r.isDataUrl ? "" : t.dirname(r.url);
      return r.isDataUrl && (i === "." && (i = ""), e.baseUrl && i && e.baseUrl.charAt(e.baseUrl.length - 1) === "/" && (i += "/")), i = i.replace(e.baseUrl, ""), i && i.charAt(i.length - 1) !== "/" && (i += "/"), i;
    }, t.dirname = function(e) {
      var r = e.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
      return r === e ? "." : r === "" ? "/" : r;
    }, t.extension = or.Loader, t;
  }()
);
/*!
 * @pixi/filter-alpha - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Yl = function(t, e) {
  return Yl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Yl(t, e);
};
function kx(t, e) {
  Yl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Xx = `varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`, Vx = (
  /** @class */
  function(t) {
    kx(e, t);
    function e(r) {
      r === void 0 && (r = 1);
      var i = t.call(this, Pp, Xx, { uAlpha: 1 }) || this;
      return i.alpha = r, i;
    }
    return Object.defineProperty(e.prototype, "alpha", {
      /**
       * Coefficient for alpha multiplication
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(r) {
        this.uniforms.uAlpha = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
);
/*!
 * @pixi/filter-blur - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ql = function(t, e) {
  return ql = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, ql(t, e);
};
function g2(t, e) {
  ql(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Hx = `
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;
function zx(t, e) {
  var r = Math.ceil(t / 2), i = Hx, s = "", o;
  e ? o = "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : o = "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
  for (var h = 0; h < t; h++) {
    var l = o.replace("%index%", h.toString());
    l = l.replace("%sampleIndex%", h - (r - 1) + ".0"), s += l, s += `
`;
  }
  return i = i.replace("%blur%", s), i = i.replace("%size%", t.toString()), i;
}
var jx = {
  5: [0.153388, 0.221461, 0.250301],
  7: [0.071303, 0.131514, 0.189879, 0.214607],
  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],
  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]
}, Wx = [
  "varying vec2 vBlurTexCoords[%size%];",
  "uniform sampler2D uSampler;",
  "void main(void)",
  "{",
  "    gl_FragColor = vec4(0.0);",
  "    %blur%",
  "}"
].join(`
`);
function Yx(t) {
  for (var e = jx[t], r = e.length, i = Wx, s = "", o = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;", h, l = 0; l < t; l++) {
    var c = o.replace("%index%", l.toString());
    h = l, l >= r && (h = t - l - 1), c = c.replace("%value%", e[h].toString()), s += c, s += `
`;
  }
  return i = i.replace("%blur%", s), i = i.replace("%size%", t.toString()), i;
}
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var dc;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(dc || (dc = {}));
var _c;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(_c || (_c = {}));
var pc;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(pc || (pc = {}));
var vc;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(vc || (vc = {}));
var mc;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(mc || (mc = {}));
var gc;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(gc || (gc = {}));
var yc;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(yc || (yc = {}));
var bc;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(bc || (bc = {}));
var xc;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(xc || (xc = {}));
var Tc;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(Tc || (Tc = {}));
var Ac;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Ac || (Ac = {}));
var wc;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(wc || (wc = {}));
var Pc;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Pc || (Pc = {}));
var Vo;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(Vo || (Vo = {}));
var Ec;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(Ec || (Ec = {}));
var Ic;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Ic || (Ic = {}));
var Cc;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(Cc || (Cc = {}));
var $c;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})($c || ($c = {}));
var Rc;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(Rc || (Rc = {}));
var Sc;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Sc || (Sc = {}));
var Zl = (
  /** @class */
  function(t) {
    g2(e, t);
    function e(r, i, s, o, h) {
      i === void 0 && (i = 8), s === void 0 && (s = 4), o === void 0 && (o = ee.FILTER_RESOLUTION), h === void 0 && (h = 5);
      var l = this, c = zx(h, r), _ = Yx(h);
      return l = t.call(
        this,
        // vertex shader
        c,
        // fragment shader
        _
      ) || this, l.horizontal = r, l.resolution = o, l._quality = 0, l.quality = s, l.blur = i, l;
    }
    return e.prototype.apply = function(r, i, s, o) {
      if (s ? this.horizontal ? this.uniforms.strength = 1 / s.width * (s.width / i.width) : this.uniforms.strength = 1 / s.height * (s.height / i.height) : this.horizontal ? this.uniforms.strength = 1 / r.renderer.width * (r.renderer.width / i.width) : this.uniforms.strength = 1 / r.renderer.height * (r.renderer.height / i.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, this.passes === 1)
        r.applyFilter(this, i, s, o);
      else {
        var h = r.getFilterTexture(), l = r.renderer, c = i, _ = h;
        this.state.blend = !1, r.applyFilter(this, c, _, Vo.CLEAR);
        for (var y = 1; y < this.passes - 1; y++) {
          r.bindAndClear(c, Vo.BLIT), this.uniforms.uSampler = _;
          var w = _;
          _ = c, c = w, l.shader.bind(this), l.geometry.draw(5);
        }
        this.state.blend = !0, r.applyFilter(this, _, s, o), r.returnFilterTexture(h);
      }
    }, Object.defineProperty(e.prototype, "blur", {
      /**
       * Sets the strength of both the blur.
       * @default 16
       */
      get: function() {
        return this.strength;
      },
      set: function(r) {
        this.padding = 1 + Math.abs(r) * 2, this.strength = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "quality", {
      /**
       * Sets the quality of the blur by modifying the number of passes. More passes means higher
       * quality bluring but the lower the performance.
       * @default 4
       */
      get: function() {
        return this._quality;
      },
      set: function(r) {
        this._quality = r, this.passes = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
), qx = (
  /** @class */
  function(t) {
    g2(e, t);
    function e(r, i, s, o) {
      r === void 0 && (r = 8), i === void 0 && (i = 4), s === void 0 && (s = ee.FILTER_RESOLUTION), o === void 0 && (o = 5);
      var h = t.call(this) || this;
      return h.blurXFilter = new Zl(!0, r, i, s, o), h.blurYFilter = new Zl(!1, r, i, s, o), h.resolution = s, h.quality = i, h.blur = r, h.repeatEdgePixels = !1, h;
    }
    return e.prototype.apply = function(r, i, s, o) {
      var h = Math.abs(this.blurXFilter.strength), l = Math.abs(this.blurYFilter.strength);
      if (h && l) {
        var c = r.getFilterTexture();
        this.blurXFilter.apply(r, i, c, Vo.CLEAR), this.blurYFilter.apply(r, c, s, o), r.returnFilterTexture(c);
      } else
        l ? this.blurYFilter.apply(r, i, s, o) : this.blurXFilter.apply(r, i, s, o);
    }, e.prototype.updatePadding = function() {
      this._repeatEdgePixels ? this.padding = 0 : this.padding = Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) * 2;
    }, Object.defineProperty(e.prototype, "blur", {
      /**
       * Sets the strength of both the blurX and blurY properties simultaneously
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(r) {
        this.blurXFilter.blur = this.blurYFilter.blur = r, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "quality", {
      /**
       * Sets the number of passes for blur. More passes means higher quality bluring.
       * @default 1
       */
      get: function() {
        return this.blurXFilter.quality;
      },
      set: function(r) {
        this.blurXFilter.quality = this.blurYFilter.quality = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "blurX", {
      /**
       * Sets the strength of the blurX property
       * @default 2
       */
      get: function() {
        return this.blurXFilter.blur;
      },
      set: function(r) {
        this.blurXFilter.blur = r, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "blurY", {
      /**
       * Sets the strength of the blurY property
       * @default 2
       */
      get: function() {
        return this.blurYFilter.blur;
      },
      set: function(r) {
        this.blurYFilter.blur = r, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "blendMode", {
      /**
       * Sets the blendmode of the filter
       * @default PIXI.BLEND_MODES.NORMAL
       */
      get: function() {
        return this.blurYFilter.blendMode;
      },
      set: function(r) {
        this.blurYFilter.blendMode = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "repeatEdgePixels", {
      /**
       * If set to true the edge of the target will be clamped
       * @default false
       */
      get: function() {
        return this._repeatEdgePixels;
      },
      set: function(r) {
        this._repeatEdgePixels = r, this.updatePadding();
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
);
/*!
 * @pixi/filter-color-matrix - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Jl = function(t, e) {
  return Jl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Jl(t, e);
};
function Zx(t, e) {
  Jl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Jx = `varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`, Ql = (
  /** @class */
  function(t) {
    Zx(e, t);
    function e() {
      var r = this, i = {
        m: new Float32Array([
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0,
          0,
          0,
          0,
          0,
          1,
          0
        ]),
        uAlpha: 1
      };
      return r = t.call(this, Ku, Jx, i) || this, r.alpha = 1, r;
    }
    return e.prototype._loadMatrix = function(r, i) {
      i === void 0 && (i = !1);
      var s = r;
      i && (this._multiply(s, this.uniforms.m, r), s = this._colorMatrix(s)), this.uniforms.m = s;
    }, e.prototype._multiply = function(r, i, s) {
      return r[0] = i[0] * s[0] + i[1] * s[5] + i[2] * s[10] + i[3] * s[15], r[1] = i[0] * s[1] + i[1] * s[6] + i[2] * s[11] + i[3] * s[16], r[2] = i[0] * s[2] + i[1] * s[7] + i[2] * s[12] + i[3] * s[17], r[3] = i[0] * s[3] + i[1] * s[8] + i[2] * s[13] + i[3] * s[18], r[4] = i[0] * s[4] + i[1] * s[9] + i[2] * s[14] + i[3] * s[19] + i[4], r[5] = i[5] * s[0] + i[6] * s[5] + i[7] * s[10] + i[8] * s[15], r[6] = i[5] * s[1] + i[6] * s[6] + i[7] * s[11] + i[8] * s[16], r[7] = i[5] * s[2] + i[6] * s[7] + i[7] * s[12] + i[8] * s[17], r[8] = i[5] * s[3] + i[6] * s[8] + i[7] * s[13] + i[8] * s[18], r[9] = i[5] * s[4] + i[6] * s[9] + i[7] * s[14] + i[8] * s[19] + i[9], r[10] = i[10] * s[0] + i[11] * s[5] + i[12] * s[10] + i[13] * s[15], r[11] = i[10] * s[1] + i[11] * s[6] + i[12] * s[11] + i[13] * s[16], r[12] = i[10] * s[2] + i[11] * s[7] + i[12] * s[12] + i[13] * s[17], r[13] = i[10] * s[3] + i[11] * s[8] + i[12] * s[13] + i[13] * s[18], r[14] = i[10] * s[4] + i[11] * s[9] + i[12] * s[14] + i[13] * s[19] + i[14], r[15] = i[15] * s[0] + i[16] * s[5] + i[17] * s[10] + i[18] * s[15], r[16] = i[15] * s[1] + i[16] * s[6] + i[17] * s[11] + i[18] * s[16], r[17] = i[15] * s[2] + i[16] * s[7] + i[17] * s[12] + i[18] * s[17], r[18] = i[15] * s[3] + i[16] * s[8] + i[17] * s[13] + i[18] * s[18], r[19] = i[15] * s[4] + i[16] * s[9] + i[17] * s[14] + i[18] * s[19] + i[19], r;
    }, e.prototype._colorMatrix = function(r) {
      var i = new Float32Array(r);
      return i[4] /= 255, i[9] /= 255, i[14] /= 255, i[19] /= 255, i;
    }, e.prototype.brightness = function(r, i) {
      var s = [
        r,
        0,
        0,
        0,
        0,
        0,
        r,
        0,
        0,
        0,
        0,
        0,
        r,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(s, i);
    }, e.prototype.tint = function(r, i) {
      var s = r >> 16 & 255, o = r >> 8 & 255, h = r & 255, l = [
        s / 255,
        0,
        0,
        0,
        0,
        0,
        o / 255,
        0,
        0,
        0,
        0,
        0,
        h / 255,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(l, i);
    }, e.prototype.greyscale = function(r, i) {
      var s = [
        r,
        r,
        r,
        0,
        0,
        r,
        r,
        r,
        0,
        0,
        r,
        r,
        r,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(s, i);
    }, e.prototype.blackAndWhite = function(r) {
      var i = [
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0.3,
        0.6,
        0.1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.hue = function(r, i) {
      r = (r || 0) / 180 * Math.PI;
      var s = Math.cos(r), o = Math.sin(r), h = Math.sqrt, l = 1 / 3, c = h(l), _ = s + (1 - s) * l, y = l * (1 - s) - c * o, w = l * (1 - s) + c * o, b = l * (1 - s) + c * o, E = s + l * (1 - s), T = l * (1 - s) - c * o, P = l * (1 - s) - c * o, O = l * (1 - s) + c * o, H = s + l * (1 - s), Y = [
        _,
        y,
        w,
        0,
        0,
        b,
        E,
        T,
        0,
        0,
        P,
        O,
        H,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(Y, i);
    }, e.prototype.contrast = function(r, i) {
      var s = (r || 0) + 1, o = -0.5 * (s - 1), h = [
        s,
        0,
        0,
        0,
        o,
        0,
        s,
        0,
        0,
        o,
        0,
        0,
        s,
        0,
        o,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(h, i);
    }, e.prototype.saturate = function(r, i) {
      r === void 0 && (r = 0);
      var s = r * 2 / 3 + 1, o = (s - 1) * -0.5, h = [
        s,
        o,
        o,
        0,
        0,
        o,
        s,
        o,
        0,
        0,
        o,
        o,
        s,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(h, i);
    }, e.prototype.desaturate = function() {
      this.saturate(-1);
    }, e.prototype.negative = function(r) {
      var i = [
        -1,
        0,
        0,
        1,
        0,
        0,
        -1,
        0,
        1,
        0,
        0,
        0,
        -1,
        1,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.sepia = function(r) {
      var i = [
        0.393,
        0.7689999,
        0.18899999,
        0,
        0,
        0.349,
        0.6859999,
        0.16799999,
        0,
        0,
        0.272,
        0.5339999,
        0.13099999,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.technicolor = function(r) {
      var i = [
        1.9125277891456083,
        -0.8545344976951645,
        -0.09155508482755585,
        0,
        11.793603434377337,
        -0.3087833385928097,
        1.7658908555458428,
        -0.10601743074722245,
        0,
        -70.35205161461398,
        -0.231103377548616,
        -0.7501899197440212,
        1.847597816108189,
        0,
        30.950940869491138,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.polaroid = function(r) {
      var i = [
        1.438,
        -0.062,
        -0.062,
        0,
        0,
        -0.122,
        1.378,
        -0.122,
        0,
        0,
        -0.016,
        -0.016,
        1.483,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.toBGR = function(r) {
      var i = [
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.kodachrome = function(r) {
      var i = [
        1.1285582396593525,
        -0.3967382283601348,
        -0.03992559172921793,
        0,
        63.72958762196502,
        -0.16404339962244616,
        1.0835251566291304,
        -0.05498805115633132,
        0,
        24.732407896706203,
        -0.16786010706155763,
        -0.5603416277695248,
        1.6014850761964943,
        0,
        35.62982807460946,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.browni = function(r) {
      var i = [
        0.5997023498159715,
        0.34553243048391263,
        -0.2708298674538042,
        0,
        47.43192855600873,
        -0.037703249837783157,
        0.8609577587992641,
        0.15059552388459913,
        0,
        -36.96841498319127,
        0.24113635128153335,
        -0.07441037908422492,
        0.44972182064877153,
        0,
        -7.562075277591283,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.vintage = function(r) {
      var i = [
        0.6279345635605994,
        0.3202183420819367,
        -0.03965408211312453,
        0,
        9.651285835294123,
        0.02578397704808868,
        0.6441188644374771,
        0.03259127616149294,
        0,
        7.462829176470591,
        0.0466055556782719,
        -0.0851232987247891,
        0.5241648018700465,
        0,
        5.159190588235296,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.colorTone = function(r, i, s, o, h) {
      r = r || 0.2, i = i || 0.15, s = s || 16770432, o = o || 3375104;
      var l = (s >> 16 & 255) / 255, c = (s >> 8 & 255) / 255, _ = (s & 255) / 255, y = (o >> 16 & 255) / 255, w = (o >> 8 & 255) / 255, b = (o & 255) / 255, E = [
        0.3,
        0.59,
        0.11,
        0,
        0,
        l,
        c,
        _,
        r,
        0,
        y,
        w,
        b,
        i,
        0,
        l - y,
        c - w,
        _ - b,
        0,
        0
      ];
      this._loadMatrix(E, h);
    }, e.prototype.night = function(r, i) {
      r = r || 0.1;
      var s = [
        r * -2,
        -r,
        0,
        0,
        0,
        -r,
        0,
        r,
        0,
        0,
        0,
        r,
        r * 2,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(s, i);
    }, e.prototype.predator = function(r, i) {
      var s = [
        // row 1
        11.224130630493164 * r,
        -4.794486999511719 * r,
        -2.8746118545532227 * r,
        0 * r,
        0.40342438220977783 * r,
        // row 2
        -3.6330697536468506 * r,
        9.193157196044922 * r,
        -2.951810836791992 * r,
        0 * r,
        -1.316135048866272 * r,
        // row 3
        -3.2184197902679443 * r,
        -4.2375030517578125 * r,
        7.476448059082031 * r,
        0 * r,
        0.8044459223747253 * r,
        // row 4
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(s, i);
    }, e.prototype.lsd = function(r) {
      var i = [
        2,
        -0.4,
        0.5,
        0,
        0,
        -0.5,
        2,
        -0.4,
        0,
        0,
        -0.4,
        -0.5,
        3,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(i, r);
    }, e.prototype.reset = function() {
      var r = [
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0,
        0,
        0,
        0,
        0,
        1,
        0
      ];
      this._loadMatrix(r, !1);
    }, Object.defineProperty(e.prototype, "matrix", {
      /**
       * The matrix of the color matrix filter
       * @member {number[]}
       * @default [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]
       */
      get: function() {
        return this.uniforms.m;
      },
      set: function(r) {
        this.uniforms.m = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "alpha", {
      /**
       * The opacity value to use when mixing the original and resultant colors.
       *
       * When the value is 0, the original color is used without modification.
       * When the value is 1, the result color is used.
       * When in the range (0, 1) the color is interpolated between the original and result by this amount.
       * @default 1
       */
      get: function() {
        return this.uniforms.uAlpha;
      },
      set: function(r) {
        this.uniforms.uAlpha = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
);
Ql.prototype.grayscale = Ql.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Kl = function(t, e) {
  return Kl = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, Kl(t, e);
};
function Qx(t, e) {
  Kl(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var Kx = `varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`, tT = `attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`, eT = (
  /** @class */
  function(t) {
    Qx(e, t);
    function e(r, i) {
      var s = this, o = new wr();
      return r.renderable = !1, s = t.call(this, tT, Kx, {
        mapSampler: r._texture,
        filterMatrix: o,
        scale: { x: 1, y: 1 },
        rotation: new Float32Array([1, 0, 0, 1])
      }) || this, s.maskSprite = r, s.maskMatrix = o, i == null && (i = 20), s.scale = new _r(i, i), s;
    }
    return e.prototype.apply = function(r, i, s, o) {
      this.uniforms.filterMatrix = r.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y;
      var h = this.maskSprite.worldTransform, l = Math.sqrt(h.a * h.a + h.b * h.b), c = Math.sqrt(h.c * h.c + h.d * h.d);
      l !== 0 && c !== 0 && (this.uniforms.rotation[0] = h.a / l, this.uniforms.rotation[1] = h.b / l, this.uniforms.rotation[2] = h.c / c, this.uniforms.rotation[3] = h.d / c), r.applyFilter(this, i, s, o);
    }, Object.defineProperty(e.prototype, "map", {
      /** The texture used for the displacement map. Must be power of 2 sized texture. */
      get: function() {
        return this.uniforms.mapSampler;
      },
      set: function(r) {
        this.uniforms.mapSampler = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
);
/*!
 * @pixi/filter-fxaa - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var tu = function(t, e) {
  return tu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, tu(t, e);
};
function rT(t, e) {
  tu(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var iT = `
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`, nT = `varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`, sT = (
  /** @class */
  function(t) {
    rT(e, t);
    function e() {
      return t.call(this, iT, nT) || this;
    }
    return e;
  }(dn)
);
/*!
 * @pixi/filter-noise - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var eu = function(t, e) {
  return eu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, eu(t, e);
};
function oT(t, e) {
  eu(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var aT = `precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`, hT = (
  /** @class */
  function(t) {
    oT(e, t);
    function e(r, i) {
      r === void 0 && (r = 0.5), i === void 0 && (i = Math.random());
      var s = t.call(this, Ku, aT, {
        uNoise: 0,
        uSeed: 0
      }) || this;
      return s.noise = r, s.seed = i, s;
    }
    return Object.defineProperty(e.prototype, "noise", {
      /**
       * The amount of noise to apply, this value should be in the range (0, 1].
       * @default 0.5
       */
      get: function() {
        return this.uniforms.uNoise;
      },
      set: function(r) {
        this.uniforms.uNoise = r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "seed", {
      /** A seed value to apply to the random noise generation. `Math.random()` is a good value to use. */
      get: function() {
        return this.uniforms.uSeed;
      },
      set: function(r) {
        this.uniforms.uSeed = r;
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(dn)
);
/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Nc;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(Nc || (Nc = {}));
var Lc;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(Lc || (Lc = {}));
var Oc;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(Oc || (Oc = {}));
var Fc;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(Fc || (Fc = {}));
var Mc;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(Mc || (Mc = {}));
var Uc;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Uc || (Uc = {}));
var Gc;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Gc || (Gc = {}));
var Dc;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(Dc || (Dc = {}));
var Bc;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(Bc || (Bc = {}));
var kc;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(kc || (kc = {}));
var Xc;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Xc || (Xc = {}));
var Vc;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(Vc || (Vc = {}));
var Hc;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Hc || (Hc = {}));
var zc;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(zc || (zc = {}));
var jc;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(jc || (jc = {}));
var Wc;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Wc || (Wc = {}));
var Yc;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(Yc || (Yc = {}));
var qc;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(qc || (qc = {}));
var ru;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(ru || (ru = {}));
var Zc;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(Zc || (Zc = {}));
var y2 = new wr();
Lr.prototype._cacheAsBitmap = !1;
Lr.prototype._cacheData = null;
Lr.prototype._cacheAsBitmapResolution = null;
Lr.prototype._cacheAsBitmapMultisample = ru.NONE;
var lT = (
  /** @class */
  function() {
    function t() {
      this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null;
    }
    return t;
  }()
);
Object.defineProperties(Lr.prototype, {
  /**
   * The resolution to use for cacheAsBitmap. By default this will use the renderer's resolution
   * but can be overriden for performance. Lower values will reduce memory usage at the expense
   * of render quality. A falsey value of `null` or `0` will default to the renderer's resolution.
   * If `cacheAsBitmap` is set to `true`, this will re-render with the new resolution.
   * @member {number} cacheAsBitmapResolution
   * @memberof PIXI.DisplayObject#
   * @default null
   */
  cacheAsBitmapResolution: {
    get: function() {
      return this._cacheAsBitmapResolution;
    },
    set: function(t) {
      t !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = t, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  /**
   * The number of samples to use for cacheAsBitmap. If set to `null`, the renderer's
   * sample count is used.
   * If `cacheAsBitmap` is set to `true`, this will re-render with the new number of samples.
   * @member {number} cacheAsBitmapMultisample
   * @memberof PIXI.DisplayObject#
   * @default PIXI.MSAA_QUALITY.NONE
   */
  cacheAsBitmapMultisample: {
    get: function() {
      return this._cacheAsBitmapMultisample;
    },
    set: function(t) {
      t !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = t, this.cacheAsBitmap && (this.cacheAsBitmap = !1, this.cacheAsBitmap = !0));
    }
  },
  /**
   * Set this to true if you want this display object to be cached as a bitmap.
   * This basically takes a snap shot of the display object as it is at that moment. It can
   * provide a performance benefit for complex static displayObjects.
   * To remove simply set this property to `false`
   *
   * IMPORTANT GOTCHA - Make sure that all your textures are preloaded BEFORE setting this property to true
   * as it will take a snapshot of what is currently there. If the textures have not loaded then they will not appear.
   * @member {boolean}
   * @memberof PIXI.DisplayObject#
   */
  cacheAsBitmap: {
    get: function() {
      return this._cacheAsBitmap;
    },
    set: function(t) {
      if (this._cacheAsBitmap !== t) {
        this._cacheAsBitmap = t;
        var e;
        t ? (this._cacheData || (this._cacheData = new lT()), e = this._cacheData, e.originalRender = this.render, e.originalRenderCanvas = this.renderCanvas, e.originalUpdateTransform = this.updateTransform, e.originalCalculateBounds = this.calculateBounds, e.originalGetLocalBounds = this.getLocalBounds, e.originalDestroy = this.destroy, e.originalContainsPoint = this.containsPoint, e.originalMask = this._mask, e.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : (e = this._cacheData, e.sprite && this._destroyCachedDisplayObject(), this.render = e.originalRender, this.renderCanvas = e.originalRenderCanvas, this.calculateBounds = e.originalCalculateBounds, this.getLocalBounds = e.originalGetLocalBounds, this.destroy = e.originalDestroy, this.updateTransform = e.originalUpdateTransform, this.containsPoint = e.originalContainsPoint, this._mask = e.originalMask, this.filterArea = e.originalFilterArea);
      }
    }
  }
});
Lr.prototype._renderCached = function(e) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(e), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(e));
};
Lr.prototype._initCachedDisplayObject = function(e) {
  var r;
  if (!(this._cacheData && this._cacheData.sprite)) {
    var i = this.alpha;
    this.alpha = 1, e.batch.flush();
    var s = this.getLocalBounds(null, !0).clone();
    if (this.filters && this.filters.length) {
      var o = this.filters[0].padding;
      s.pad(o);
    }
    s.ceil(ee.RESOLUTION);
    var h = e.renderTexture.current, l = e.renderTexture.sourceFrame.clone(), c = e.renderTexture.destinationFrame.clone(), _ = e.projection.transform, y = En.create({
      width: s.width,
      height: s.height,
      resolution: this.cacheAsBitmapResolution || e.resolution,
      multisample: (r = this.cacheAsBitmapMultisample) !== null && r !== void 0 ? r : e.multisample
    }), w = "cacheAsBitmap_" + Pn();
    this._cacheData.textureCacheId = w, We.addToCache(y.baseTexture, w), Me.addToCache(y, w);
    var b = this.transform.localTransform.copyTo(y2).invert().translate(-s.x, -s.y);
    this.render = this._cacheData.originalRender, e.render(this, { renderTexture: y, clear: !0, transform: b, skipUpdateTransform: !1 }), e.framebuffer.blit(), e.projection.transform = _, e.renderTexture.bind(h, l, c), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = i;
    var E = new Bs(y);
    E.transform.worldTransform = this.transform.worldTransform, E.anchor.x = -(s.x / s.width), E.anchor.y = -(s.y / s.height), E.alpha = i, E._bounds = this._bounds, this._cacheData.sprite = E, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = E.containsPoint.bind(E);
  }
};
Lr.prototype._renderCachedCanvas = function(e) {
  !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(e), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(e));
};
Lr.prototype._initCachedDisplayObjectCanvas = function(e) {
  if (!(this._cacheData && this._cacheData.sprite)) {
    var r = this.getLocalBounds(null, !0), i = this.alpha;
    this.alpha = 1;
    var s = e.context, o = e._projTransform;
    r.ceil(ee.RESOLUTION);
    var h = En.create({ width: r.width, height: r.height }), l = "cacheAsBitmap_" + Pn();
    this._cacheData.textureCacheId = l, We.addToCache(h.baseTexture, l), Me.addToCache(h, l);
    var c = y2;
    this.transform.localTransform.copyTo(c), c.invert(), c.tx -= r.x, c.ty -= r.y, this.renderCanvas = this._cacheData.originalRenderCanvas, e.render(this, { renderTexture: h, clear: !0, transform: c, skipUpdateTransform: !1 }), e.context = s, e._projTransform = o, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null, this.alpha = i;
    var _ = new Bs(h);
    _.transform.worldTransform = this.transform.worldTransform, _.anchor.x = -(r.x / r.width), _.anchor.y = -(r.y / r.height), _.alpha = i, _._bounds = this._bounds, this._cacheData.sprite = _, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = e._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = _.containsPoint.bind(_);
  }
};
Lr.prototype._calculateCachedBounds = function() {
  this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID;
};
Lr.prototype._getCachedLocalBounds = function() {
  return this._cacheData.sprite.getLocalBounds(null);
};
Lr.prototype._destroyCachedDisplayObject = function() {
  this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, We.removeFromCache(this._cacheData.textureCacheId), Me.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null;
};
Lr.prototype._cacheAsBitmapDestroy = function(e) {
  this.cacheAsBitmap = !1, this.destroy(e);
};
/*!
 * @pixi/mixin-get-child-by-name - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Lr.prototype.name = null;
Ti.prototype.getChildByName = function(e, r) {
  for (var i = 0, s = this.children.length; i < s; i++)
    if (this.children[i].name === e)
      return this.children[i];
  if (r)
    for (var i = 0, s = this.children.length; i < s; i++) {
      var o = this.children[i];
      if (o.getChildByName) {
        var h = o.getChildByName(e, !0);
        if (h)
          return h;
      }
    }
  return null;
};
/*!
 * @pixi/mixin-get-global-position - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Lr.prototype.getGlobalPosition = function(e, r) {
  return e === void 0 && (e = new _r()), r === void 0 && (r = !1), this.parent ? this.parent.toGlobal(this.position, e, r) : (e.x = this.position.x, e.y = this.position.y), e;
};
/*!
 * @pixi/app - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var b2 = (
  /** @class */
  function() {
    function t() {
    }
    return t.init = function(e) {
      var r = this;
      Object.defineProperty(
        this,
        "resizeTo",
        /**
         * The HTML element or window to automatically resize the
         * renderer's view element to match width and height.
         * @member {Window|HTMLElement}
         * @name resizeTo
         * @memberof PIXI.Application#
         */
        {
          set: function(i) {
            // globalThis.removeEventListener("resize", this.queueResize), this._resizeTo = i, i && (globalThis.addEventListener("resize", this.queueResize), this.resize());
          },
          get: function() {
            return this._resizeTo;
          }
        }
      ), this.queueResize = function() {
        r._resizeTo && (r.cancelResize(), r._resizeId = requestAnimationFrame(function() {
          return r.resize();
        }));
      }, this.cancelResize = function() {
        r._resizeId && (cancelAnimationFrame(r._resizeId), r._resizeId = null);
      }, this.resize = function() {
        if (r._resizeTo) {
          r.cancelResize();
          var i, s;
          i = s = 1000
          r.renderer.resize(i, s);
        }
      }, this._resizeId = null, this._resizeTo = null, this.resizeTo = e.resizeTo || null;
    }, t.destroy = function() {
      globalThis.removeEventListener("resize", this.queueResize), this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null;
    }, t.extension = or.Application, t;
  }()
);
/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Jc;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(Jc || (Jc = {}));
var Qc;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(Qc || (Qc = {}));
var Kc;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(Kc || (Kc = {}));
var td;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(td || (td = {}));
var ed;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(ed || (ed = {}));
var rd;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(rd || (rd = {}));
var nd;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(nd || (nd = {}));
var sd;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})(sd || (sd = {}));
var od;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(od || (od = {}));
var iu;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(iu || (iu = {}));
var nu;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(nu || (nu = {}));
var su;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(su || (su = {}));
var ad;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(ad || (ad = {}));
var hd;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(hd || (hd = {}));
var ou;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(ou || (ou = {}));
var Ao;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Ao || (Ao = {}));
var ld;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(ld || (ld = {}));
var ud;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(ud || (ud = {}));
var au;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(au || (au = {}));
var fd;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(fd || (fd = {}));
var uT = {
  /**
   * Creates a canvas element of the given size.
   * This canvas is created using the browser's native canvas element.
   * @param width - width of the canvas
   * @param height - height of the canvas
   */
  createCanvas: function(t, e) {
    var r = document.createElement("canvas");
    return r.width = t, r.height = e, r;
  },
  getWebGLRenderingContext: function() {
    return WebGLRenderingContext;
  },
  getNavigator: function() {
    return navigator;
  },
  getBaseUrl: function() {
    var t;
    return (t = document.baseURI) !== null && t !== void 0 ? t : window.location.href;
  },
  fetch: function(t, e) {
    return fetch(t, e);
  }
}, Wh = /iPhone/i, cd = /iPod/i, dd = /iPad/i, _d = /\biOS-universal(?:.+)Mac\b/i, Yh = /\bAndroid(?:.+)Mobile\b/i, pd = /Android/i, bs = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i, $a = /Silk/i, an = /Windows Phone/i, vd = /\bWindows(?:.+)ARM\b/i, md = /BlackBerry/i, gd = /BB10/i, yd = /Opera Mini/i, bd = /\b(CriOS|Chrome)(?:.+)Mobile/i, xd = /Mobile(?:.+)Firefox\b/i, Td = function(t) {
  return typeof t != "undefined" && t.platform === "MacIntel" && typeof t.maxTouchPoints == "number" && t.maxTouchPoints > 1 && typeof MSStream == "undefined";
};
function fT(t) {
  return function(e) {
    return e.test(t);
  };
}
function cT(t) {
  var e = {
    userAgent: "",
    platform: "",
    maxTouchPoints: 0
  };
  !t && typeof navigator != "undefined" ? e = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    maxTouchPoints: navigator.maxTouchPoints || 0
  } : typeof t == "string" ? e.userAgent = t : t && t.userAgent && (e = {
    userAgent: t.userAgent,
    platform: t.platform,
    maxTouchPoints: t.maxTouchPoints || 0
  });
  var r = e.userAgent, i = r.split("[FBAN");
  typeof i[1] != "undefined" && (r = i[0]), i = r.split("Twitter"), typeof i[1] != "undefined" && (r = i[0]);
  var s = fT(r), o = {
    apple: {
      phone: s(Wh) && !s(an),
      ipod: s(cd),
      tablet: !s(Wh) && (s(dd) || Td(e)) && !s(an),
      universal: s(_d),
      device: (s(Wh) || s(cd) || s(dd) || s(_d) || Td(e)) && !s(an)
    },
    amazon: {
      phone: s(bs),
      tablet: !s(bs) && s($a),
      device: s(bs) || s($a)
    },
    android: {
      phone: !s(an) && s(bs) || !s(an) && s(Yh),
      tablet: !s(an) && !s(bs) && !s(Yh) && (s($a) || s(pd)),
      device: !s(an) && (s(bs) || s($a) || s(Yh) || s(pd)) || s(/\bokhttp\b/i)
    },
    windows: {
      phone: s(an),
      tablet: s(vd),
      device: s(an) || s(vd)
    },
    other: {
      blackberry: s(md),
      blackberry10: s(gd),
      opera: s(yd),
      firefox: s(xd),
      chrome: s(bd),
      device: s(md) || s(gd) || s(yd) || s(xd) || s(bd)
    },
    any: !1,
    phone: !1,
    tablet: !1
  };
  return o.any = o.apple.device || o.android.device || o.windows.device || o.other.device, o.phone = o.apple.phone || o.android.phone || o.windows.phone, o.tablet = o.apple.tablet || o.android.tablet || o.windows.tablet, o;
}
var Ps = cT(globalThis.navigator);
function dT() {
  return !Ps.apple.device;
}
function _T(t) {
  var e = !0;
  if (Ps.tablet || Ps.phone) {
    if (Ps.apple.device) {
      var r = navigator.userAgent.match(/OS (\d+)_(\d+)?/);
      if (r) {
        var i = parseInt(r[1], 10);
        i < 11 && (e = !1);
      }
    }
    if (Ps.android.device) {
      var r = navigator.userAgent.match(/Android\s([0-9.]*)/);
      if (r) {
        var i = parseInt(r[1], 10);
        i < 7 && (e = !1);
      }
    }
  }
  return e ? t : 4;
}
var Ya = {
  /**
   * This adapter is used to call methods that are platform dependent.
   * For example `document.createElement` only runs on the web but fails in node environments.
   * This allows us to support more platforms by abstracting away specific implementations per platform.
   *
   * By default the adapter is set to work in the browser. However you can create your own
   * by implementing the `IAdapter` interface. See `IAdapter` for more information.
   * @name ADAPTER
   * @memberof PIXI.settings
   * @type {PIXI.IAdapter}
   * @default PIXI.BrowserAdapter
   */
  ADAPTER: uT,
  /**
   * If set to true WebGL will attempt make textures mimpaped by default.
   * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.
   * @static
   * @name MIPMAP_TEXTURES
   * @memberof PIXI.settings
   * @type {PIXI.MIPMAP_MODES}
   * @default PIXI.MIPMAP_MODES.POW2
   */
  MIPMAP_TEXTURES: su.POW2,
  /**
   * Default anisotropic filtering level of textures.
   * Usually from 0 to 16
   * @static
   * @name ANISOTROPIC_LEVEL
   * @memberof PIXI.settings
   * @type {number}
   * @default 0
   */
  ANISOTROPIC_LEVEL: 0,
  /**
   * Default resolution / device pixel ratio of the renderer.
   * @static
   * @name RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  RESOLUTION: 1,
  /**
   * Default filter resolution.
   * @static
   * @name FILTER_RESOLUTION
   * @memberof PIXI.settings
   * @type {number}
   * @default 1
   */
  FILTER_RESOLUTION: 1,
  /**
   * Default filter samples.
   * @static
   * @name FILTER_MULTISAMPLE
   * @memberof PIXI.settings
   * @type {PIXI.MSAA_QUALITY}
   * @default PIXI.MSAA_QUALITY.NONE
   */
  FILTER_MULTISAMPLE: au.NONE,
  /**
   * The maximum textures that this device supports.
   * @static
   * @name SPRITE_MAX_TEXTURES
   * @memberof PIXI.settings
   * @type {number}
   * @default 32
   */
  SPRITE_MAX_TEXTURES: _T(32),
  // TODO: maybe change to SPRITE.BATCH_SIZE: 2000
  // TODO: maybe add PARTICLE.BATCH_SIZE: 15000
  /**
   * The default sprite batch size.
   *
   * The default aims to balance desktop and mobile devices.
   * @static
   * @name SPRITE_BATCH_SIZE
   * @memberof PIXI.settings
   * @type {number}
   * @default 4096
   */
  SPRITE_BATCH_SIZE: 4096,
  /**
   * The default render options if none are supplied to {@link PIXI.Renderer}
   * or {@link PIXI.CanvasRenderer}.
   * @static
   * @name RENDER_OPTIONS
   * @memberof PIXI.settings
   * @type {object}
   * @property {HTMLCanvasElement} [view=null] -
   * @property {boolean} [antialias=false] -
   * @property {boolean} [autoDensity=false] -
   * @property {boolean} [useContextAlpha=true]  -
   * @property {number} [backgroundColor=0x000000] -
   * @property {number} [backgroundAlpha=1] -
   * @property {boolean} [clearBeforeRender=true] -
   * @property {boolean} [preserveDrawingBuffer=false] -
   * @property {number} [width=800] -
   * @property {number} [height=600] -
   * @property {boolean} [legacy=false] -
   */
  RENDER_OPTIONS: {
    view: null,
    antialias: !1,
    autoDensity: !1,
    backgroundColor: 0,
    backgroundAlpha: 1,
    useContextAlpha: !0,
    clearBeforeRender: !0,
    preserveDrawingBuffer: !1,
    width: 800,
    height: 600,
    legacy: !1
  },
  /**
   * Default Garbage Collection mode.
   * @static
   * @name GC_MODE
   * @memberof PIXI.settings
   * @type {PIXI.GC_MODES}
   * @default PIXI.GC_MODES.AUTO
   */
  GC_MODE: ou.AUTO,
  /**
   * Default Garbage Collection max idle.
   * @static
   * @name GC_MAX_IDLE
   * @memberof PIXI.settings
   * @type {number}
   * @default 3600
   */
  GC_MAX_IDLE: 60 * 60,
  /**
   * Default Garbage Collection maximum check count.
   * @static
   * @name GC_MAX_CHECK_COUNT
   * @memberof PIXI.settings
   * @type {number}
   * @default 600
   */
  GC_MAX_CHECK_COUNT: 60 * 10,
  /**
   * Default wrap modes that are supported by pixi.
   * @static
   * @name WRAP_MODE
   * @memberof PIXI.settings
   * @type {PIXI.WRAP_MODES}
   * @default PIXI.WRAP_MODES.CLAMP
   */
  WRAP_MODE: nu.CLAMP,
  /**
   * Default scale mode for textures.
   * @static
   * @name SCALE_MODE
   * @memberof PIXI.settings
   * @type {PIXI.SCALE_MODES}
   * @default PIXI.SCALE_MODES.LINEAR
   */
  SCALE_MODE: iu.LINEAR,
  /**
   * Default specify float precision in vertex shader.
   * @static
   * @name PRECISION_VERTEX
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.HIGH
   */
  PRECISION_VERTEX: Ao.HIGH,
  /**
   * Default specify float precision in fragment shader.
   * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742
   * @static
   * @name PRECISION_FRAGMENT
   * @memberof PIXI.settings
   * @type {PIXI.PRECISION}
   * @default PIXI.PRECISION.MEDIUM
   */
  PRECISION_FRAGMENT: Ps.apple.device ? Ao.HIGH : Ao.MEDIUM,
  /**
   * Can we upload the same buffer in a single frame?
   * @static
   * @name CAN_UPLOAD_SAME_BUFFER
   * @memberof PIXI.settings
   * @type {boolean}
   */
  CAN_UPLOAD_SAME_BUFFER: dT(),
  /**
   * Enables bitmap creation before image load. This feature is experimental.
   * @static
   * @name CREATE_IMAGE_BITMAP
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  CREATE_IMAGE_BITMAP: !1,
  /**
   * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
   * Advantages can include sharper image quality (like text) and faster rendering on canvas.
   * The main disadvantage is movement of objects may appear less smooth.
   * @static
   * @constant
   * @memberof PIXI.settings
   * @type {boolean}
   * @default false
   */
  ROUND_PIXELS: !1
}, qh = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : {};
function l0(t, e, r) {
  return r = {
    path: e,
    exports: {},
    require: function(i, s) {
      return pT(i, s == null ? r.path : s);
    }
  }, t(r, r.exports), r.exports;
}
function pT() {
  throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
l0(function(t) {
  var e = Object.prototype.hasOwnProperty, r = "~";
  function i() {
  }
  Object.create && (i.prototype = /* @__PURE__ */ Object.create(null), new i().__proto__ || (r = !1));
  function s(c, _, y) {
    this.fn = c, this.context = _, this.once = y || !1;
  }
  function o(c, _, y, w, b) {
    if (typeof y != "function")
      throw new TypeError("The listener must be a function");
    var E = new s(y, w || c, b), T = r ? r + _ : _;
    return c._events[T] ? c._events[T].fn ? c._events[T] = [c._events[T], E] : c._events[T].push(E) : (c._events[T] = E, c._eventsCount++), c;
  }
  function h(c, _) {
    --c._eventsCount === 0 ? c._events = new i() : delete c._events[_];
  }
  function l() {
    this._events = new i(), this._eventsCount = 0;
  }
  l.prototype.eventNames = function() {
    var _ = [], y, w;
    if (this._eventsCount === 0)
      return _;
    for (w in y = this._events)
      e.call(y, w) && _.push(r ? w.slice(1) : w);
    return Object.getOwnPropertySymbols ? _.concat(Object.getOwnPropertySymbols(y)) : _;
  }, l.prototype.listeners = function(_) {
    var y = r ? r + _ : _, w = this._events[y];
    if (!w)
      return [];
    if (w.fn)
      return [w.fn];
    for (var b = 0, E = w.length, T = new Array(E); b < E; b++)
      T[b] = w[b].fn;
    return T;
  }, l.prototype.listenerCount = function(_) {
    var y = r ? r + _ : _, w = this._events[y];
    return w ? w.fn ? 1 : w.length : 0;
  }, l.prototype.emit = function(_, y, w, b, E, T) {
    var P = arguments, O = r ? r + _ : _;
    if (!this._events[O])
      return !1;
    var H = this._events[O], Y = arguments.length, J, it;
    if (H.fn) {
      switch (H.once && this.removeListener(_, H.fn, void 0, !0), Y) {
        case 1:
          return H.fn.call(H.context), !0;
        case 2:
          return H.fn.call(H.context, y), !0;
        case 3:
          return H.fn.call(H.context, y, w), !0;
        case 4:
          return H.fn.call(H.context, y, w, b), !0;
        case 5:
          return H.fn.call(H.context, y, w, b, E), !0;
        case 6:
          return H.fn.call(H.context, y, w, b, E, T), !0;
      }
      for (it = 1, J = new Array(Y - 1); it < Y; it++)
        J[it - 1] = P[it];
      H.fn.apply(H.context, J);
    } else {
      var st = H.length, K;
      for (it = 0; it < st; it++)
        switch (H[it].once && this.removeListener(_, H[it].fn, void 0, !0), Y) {
          case 1:
            H[it].fn.call(H[it].context);
            break;
          case 2:
            H[it].fn.call(H[it].context, y);
            break;
          case 3:
            H[it].fn.call(H[it].context, y, w);
            break;
          case 4:
            H[it].fn.call(H[it].context, y, w, b);
            break;
          default:
            if (!J)
              for (K = 1, J = new Array(Y - 1); K < Y; K++)
                J[K - 1] = P[K];
            H[it].fn.apply(H[it].context, J);
        }
    }
    return !0;
  }, l.prototype.on = function(_, y, w) {
    return o(this, _, y, w, !1);
  }, l.prototype.once = function(_, y, w) {
    return o(this, _, y, w, !0);
  }, l.prototype.removeListener = function(_, y, w, b) {
    var E = r ? r + _ : _;
    if (!this._events[E])
      return this;
    if (!y)
      return h(this, E), this;
    var T = this._events[E];
    if (T.fn)
      T.fn === y && (!b || T.once) && (!w || T.context === w) && h(this, E);
    else {
      for (var P = 0, O = [], H = T.length; P < H; P++)
        (T[P].fn !== y || b && !T[P].once || w && T[P].context !== w) && O.push(T[P]);
      O.length ? this._events[E] = O.length === 1 ? O[0] : O : h(this, E);
    }
    return this;
  }, l.prototype.removeAllListeners = function(_) {
    var y;
    return _ ? (y = r ? r + _ : _, this._events[y] && h(this, y)) : (this._events = new i(), this._eventsCount = 0), this;
  }, l.prototype.off = l.prototype.removeListener, l.prototype.addListener = l.prototype.on, l.prefixed = r, l.EventEmitter = l, t.exports = l;
});
l0(function(t, e) {
  (function(r) {
    var i = e && !e.nodeType && e, s = t && !t.nodeType && t, o = typeof qh == "object" && qh;
    (o.global === o || o.window === o || o.self === o) && (r = o);
    var h, l = 2147483647, c = 36, _ = 1, y = 26, w = 38, b = 700, E = 72, T = 128, P = "-", O = /^xn--/, H = /[^\x20-\x7E]/, Y = /[\x2E\u3002\uFF0E\uFF61]/g, J = {
      overflow: "Overflow: input needs wider integers to process",
      "not-basic": "Illegal input >= 0x80 (not a basic code point)",
      "invalid-input": "Invalid input"
    }, it = c - _, st = Math.floor, K = String.fromCharCode, At;
    function Tt(at) {
      throw RangeError(J[at]);
    }
    function dt(at, bt) {
      for (var vt = at.length, le = []; vt--; )
        le[vt] = bt(at[vt]);
      return le;
    }
    function Et(at, bt) {
      var vt = at.split("@"), le = "";
      vt.length > 1 && (le = vt[0] + "@", at = vt[1]), at = at.replace(Y, ".");
      var Gt = at.split("."), se = dt(Gt, bt).join(".");
      return le + se;
    }
    function Rt(at) {
      for (var bt = [], vt = 0, le = at.length, Gt, se; vt < le; )
        Gt = at.charCodeAt(vt++), Gt >= 55296 && Gt <= 56319 && vt < le ? (se = at.charCodeAt(vt++), (se & 64512) == 56320 ? bt.push(((Gt & 1023) << 10) + (se & 1023) + 65536) : (bt.push(Gt), vt--)) : bt.push(Gt);
      return bt;
    }
    function Ft(at) {
      return dt(at, function(bt) {
        var vt = "";
        return bt > 65535 && (bt -= 65536, vt += K(bt >>> 10 & 1023 | 55296), bt = 56320 | bt & 1023), vt += K(bt), vt;
      }).join("");
    }
    function ne(at) {
      return at - 48 < 10 ? at - 22 : at - 65 < 26 ? at - 65 : at - 97 < 26 ? at - 97 : c;
    }
    function ae(at, bt) {
      return at + 22 + 75 * (at < 26) - ((bt != 0) << 5);
    }
    function zt(at, bt, vt) {
      var le = 0;
      for (at = vt ? st(at / b) : at >> 1, at += st(at / bt); at > it * y >> 1; le += c)
        at = st(at / it);
      return st(le + (it + 1) * at / (at + w));
    }
    function Vt(at) {
      var bt = [], vt = at.length, le, Gt = 0, se = T, Pe = E, Zt, Be, _e, fe, ue, me, Nt, Ue, Ke;
      for (Zt = at.lastIndexOf(P), Zt < 0 && (Zt = 0), Be = 0; Be < Zt; ++Be)
        at.charCodeAt(Be) >= 128 && Tt("not-basic"), bt.push(at.charCodeAt(Be));
      for (_e = Zt > 0 ? Zt + 1 : 0; _e < vt; ) {
        for (fe = Gt, ue = 1, me = c; _e >= vt && Tt("invalid-input"), Nt = ne(at.charCodeAt(_e++)), (Nt >= c || Nt > st((l - Gt) / ue)) && Tt("overflow"), Gt += Nt * ue, Ue = me <= Pe ? _ : me >= Pe + y ? y : me - Pe, !(Nt < Ue); me += c)
          Ke = c - Ue, ue > st(l / Ke) && Tt("overflow"), ue *= Ke;
        le = bt.length + 1, Pe = zt(Gt - fe, le, fe == 0), st(Gt / le) > l - se && Tt("overflow"), se += st(Gt / le), Gt %= le, bt.splice(Gt++, 0, se);
      }
      return Ft(bt);
    }
    function he(at) {
      var bt, vt, le, Gt, se, Pe, Zt, Be, _e, fe, ue, me = [], Nt, Ue, Ke, ce;
      for (at = Rt(at), Nt = at.length, bt = T, vt = 0, se = E, Pe = 0; Pe < Nt; ++Pe)
        ue = at[Pe], ue < 128 && me.push(K(ue));
      for (le = Gt = me.length, Gt && me.push(P); le < Nt; ) {
        for (Zt = l, Pe = 0; Pe < Nt; ++Pe)
          ue = at[Pe], ue >= bt && ue < Zt && (Zt = ue);
        for (Ue = le + 1, Zt - bt > st((l - vt) / Ue) && Tt("overflow"), vt += (Zt - bt) * Ue, bt = Zt, Pe = 0; Pe < Nt; ++Pe)
          if (ue = at[Pe], ue < bt && ++vt > l && Tt("overflow"), ue == bt) {
            for (Be = vt, _e = c; fe = _e <= se ? _ : _e >= se + y ? y : _e - se, !(Be < fe); _e += c)
              ce = Be - fe, Ke = c - fe, me.push(
                K(ae(fe + ce % Ke, 0))
              ), Be = st(ce / Ke);
            me.push(K(ae(Be, 0))), se = zt(vt, Ue, le == Gt), vt = 0, ++le;
          }
        ++vt, ++bt;
      }
      return me.join("");
    }
    function Kt(at) {
      return Et(at, function(bt) {
        return O.test(bt) ? Vt(bt.slice(4).toLowerCase()) : bt;
      });
    }
    function ve(at) {
      return Et(at, function(bt) {
        return H.test(bt) ? "xn--" + he(bt) : bt;
      });
    }
    if (h = {
      /**
       * A string representing the current Punycode.js version number.
       * @memberOf punycode
       * @type String
       */
      version: "1.3.2",
      /**
       * An object of methods to convert from JavaScript's internal character
       * representation (UCS-2) to Unicode code points, and back.
       * @see <https://mathiasbynens.be/notes/javascript-encoding>
       * @memberOf punycode
       * @type Object
       */
      ucs2: {
        decode: Rt,
        encode: Ft
      },
      decode: Vt,
      encode: he,
      toASCII: ve,
      toUnicode: Kt
    }, i && s)
      if (t.exports == i)
        s.exports = h;
      else
        for (At in h)
          h.hasOwnProperty(At) && (i[At] = h[At]);
    else
      r.punycode = h;
  })(qh);
});
function vT(t, e) {
  return Object.prototype.hasOwnProperty.call(t, e);
}
var mT = function(t, e, r, i) {
  e = e || "&", r = r || "=";
  var s = {};
  if (typeof t != "string" || t.length === 0)
    return s;
  var o = /\+/g;
  t = t.split(e);
  var h = 1e3;
  i && typeof i.maxKeys == "number" && (h = i.maxKeys);
  var l = t.length;
  h > 0 && l > h && (l = h);
  for (var c = 0; c < l; ++c) {
    var _ = t[c].replace(o, "%20"), y = _.indexOf(r), w, b, E, T;
    y >= 0 ? (w = _.substr(0, y), b = _.substr(y + 1)) : (w = _, b = ""), E = decodeURIComponent(w), T = decodeURIComponent(b), vT(s, E) ? Array.isArray(s[E]) ? s[E].push(T) : s[E] = [s[E], T] : s[E] = T;
  }
  return s;
}, ho = function(t) {
  switch (typeof t) {
    case "string":
      return t;
    case "boolean":
      return t ? "true" : "false";
    case "number":
      return isFinite(t) ? t : "";
    default:
      return "";
  }
}, gT = function(t, e, r, i) {
  return e = e || "&", r = r || "=", t === null && (t = void 0), typeof t == "object" ? Object.keys(t).map(function(s) {
    var o = encodeURIComponent(ho(s)) + r;
    return Array.isArray(t[s]) ? t[s].map(function(h) {
      return o + encodeURIComponent(ho(h));
    }).join(e) : o + encodeURIComponent(ho(t[s]));
  }).join(e) : i ? encodeURIComponent(ho(i)) + r + encodeURIComponent(ho(t)) : "";
};
l0(function(t, e) {
  e.decode = e.parse = mT, e.encode = e.stringify = gT;
});
/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var Ad;
(function(t) {
  t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2";
})(Ad || (Ad = {}));
var wd;
(function(t) {
  t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS";
})(wd || (wd = {}));
var Pd;
(function(t) {
  t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL";
})(Pd || (Pd = {}));
var ni;
(function(t) {
  t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR";
})(ni || (ni = {}));
var Ed;
(function(t) {
  t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN";
})(Ed || (Ed = {}));
var Id;
(function(t) {
  t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.RG = 33319] = "RG", t[t.RED = 6403] = "RED", t[t.RGBA_INTEGER = 36249] = "RGBA_INTEGER", t[t.RGB_INTEGER = 36248] = "RGB_INTEGER", t[t.RG_INTEGER = 33320] = "RG_INTEGER", t[t.RED_INTEGER = 36244] = "RED_INTEGER", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL";
})(Id || (Id = {}));
var Cd;
(function(t) {
  t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z";
})(Cd || (Cd = {}));
var $d;
(function(t) {
  t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.UNSIGNED_INT = 5125] = "UNSIGNED_INT", t[t.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV", t[t.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV", t[t.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8", t[t.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV", t[t.BYTE = 5120] = "BYTE", t[t.SHORT = 5122] = "SHORT", t[t.INT = 5124] = "INT", t[t.FLOAT = 5126] = "FLOAT", t[t.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT";
})($d || ($d = {}));
var Rd;
(function(t) {
  t[t.FLOAT = 0] = "FLOAT", t[t.INT = 1] = "INT", t[t.UINT = 2] = "UINT";
})(Rd || (Rd = {}));
var Sd;
(function(t) {
  t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR";
})(Sd || (Sd = {}));
var Nd;
(function(t) {
  t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT";
})(Nd || (Nd = {}));
var Ld;
(function(t) {
  t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON", t[t.ON_MANUAL = 3] = "ON_MANUAL";
})(Ld || (Ld = {}));
var Od;
(function(t) {
  t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA", t[t.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA";
})(Od || (Od = {}));
var Fd;
(function(t) {
  t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT";
})(Fd || (Fd = {}));
var Md;
(function(t) {
  t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL";
})(Md || (Md = {}));
var Ud;
(function(t) {
  t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp";
})(Ud || (Ud = {}));
var Gd;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE", t[t.COLOR = 4] = "COLOR";
})(Gd || (Gd = {}));
var Dd;
(function(t) {
  t[t.RED = 1] = "RED", t[t.GREEN = 2] = "GREEN", t[t.BLUE = 4] = "BLUE", t[t.ALPHA = 8] = "ALPHA";
})(Dd || (Dd = {}));
var Bd;
(function(t) {
  t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH";
})(Bd || (Bd = {}));
var kd;
(function(t) {
  t[t.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER", t[t.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER", t[t.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
})(kd || (kd = {}));
/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Ya.RETINA_PREFIX = /@([0-9\.]+)x/;
Ya.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1;
function yT() {
  for (var t = [], e = [], r = 0; r < 32; r++)
    t[r] = r, e[r] = r;
  t[ni.NORMAL_NPM] = ni.NORMAL, t[ni.ADD_NPM] = ni.ADD, t[ni.SCREEN_NPM] = ni.SCREEN, e[ni.NORMAL] = ni.NORMAL_NPM, e[ni.ADD] = ni.ADD_NPM, e[ni.SCREEN] = ni.SCREEN_NPM;
  var i = [];
  return i.push(e), i.push(t), i;
}
yT();
var Xd = {};
function bT(t, e, r) {
  if (r === void 0 && (r = 3), !Xd[e]) {
    var i = new Error().stack;
    typeof i == "undefined" ? console.warn("PixiJS Deprecation Warning: ", e + `
Deprecated since v` + t) : (i = i.split(`
`).splice(r).join(`
`), console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", e + `
Deprecated since v` + t), console.warn(i), console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", e + `
Deprecated since v` + t), console.warn(i))), Xd[e] = !0;
  }
}
(function() {
  function t(e, r, i) {
    this.canvas = Ya.ADAPTER.createCanvas(), this.context = this.canvas.getContext("2d"), this.resolution = i || Ya.RESOLUTION, this.resize(e, r);
  }
  return t.prototype.clear = function() {
    this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }, t.prototype.resize = function(e, r) {
    this.canvas.width = Math.round(e * this.resolution), this.canvas.height = Math.round(r * this.resolution);
  }, t.prototype.destroy = function() {
    this.context = null, this.canvas = null;
  }, Object.defineProperty(t.prototype, "width", {
    /**
     * The width of the canvas buffer in pixels.
     * @member {number}
     */
    get: function() {
      return this.canvas.width;
    },
    set: function(e) {
      this.canvas.width = Math.round(e);
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(t.prototype, "height", {
    /**
     * The height of the canvas buffer in pixels.
     * @member {number}
     */
    get: function() {
      return this.canvas.height;
    },
    set: function(e) {
      this.canvas.height = Math.round(e);
    },
    enumerable: !1,
    configurable: !0
  }), t;
})();
var u0 = (
  /** @class */
  function() {
    function t(e) {
      var r = this;
      this.stage = new Ti(), e = Object.assign({
        forceCanvas: !1
      }, e), this.renderer = wp(e), t._plugins.forEach(function(i) {
        i.init.call(r, e);
      });
    }
    return t.registerPlugin = function(e) {
      bT("6.5.0", "Application.registerPlugin() is deprecated, use extensions.add()"), Qi.add({
        type: or.Application,
        ref: e
      });
    }, t.prototype.render = function() {
      this.renderer.render(this.stage);
    }, Object.defineProperty(t.prototype, "view", {
      /**
       * Reference to the renderer's canvas element.
       * @member {HTMLCanvasElement}
       * @readonly
       */
      get: function() {
        return this.renderer.view;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "screen", {
      /**
       * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.
       * @member {PIXI.Rectangle}
       * @readonly
       */
      get: function() {
        return this.renderer.screen;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.destroy = function(e, r) {
      var i = this, s = t._plugins.slice(0);
      s.reverse(), s.forEach(function(o) {
        o.destroy.call(i);
      }), this.stage.destroy(r), this.stage = null, this.renderer.destroy(e), this.renderer = null;
    }, t._plugins = [], t;
  }()
);
Qi.handleByList(or.Application, u0._plugins);
Qi.add(b2);
/*!
 * @pixi/mesh-extras - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var hu = function(t, e) {
  return hu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, hu(t, e);
};
function ks(t, e) {
  hu(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var x2 = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s, o) {
      r === void 0 && (r = 100), i === void 0 && (i = 100), s === void 0 && (s = 10), o === void 0 && (o = 10);
      var h = t.call(this) || this;
      return h.segWidth = s, h.segHeight = o, h.width = r, h.height = i, h.build(), h;
    }
    return e.prototype.build = function() {
      for (var r = this.segWidth * this.segHeight, i = [], s = [], o = [], h = this.segWidth - 1, l = this.segHeight - 1, c = this.width / h, _ = this.height / l, y = 0; y < r; y++) {
        var w = y % this.segWidth, b = y / this.segWidth | 0;
        i.push(w * c, b * _), s.push(w / h, b / l);
      }
      for (var E = h * l, y = 0; y < E; y++) {
        var T = y % h, P = y / h | 0, O = P * this.segWidth + T, H = P * this.segWidth + T + 1, Y = (P + 1) * this.segWidth + T, J = (P + 1) * this.segWidth + T + 1;
        o.push(O, H, Y, H, J, Y);
      }
      this.buffers[0].data = new Float32Array(i), this.buffers[1].data = new Float32Array(s), this.indexBuffer.data = new Uint16Array(o), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update();
    }, e;
  }(Jo)
), T2 = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s) {
      r === void 0 && (r = 200), s === void 0 && (s = 0);
      var o = t.call(this, new Float32Array(i.length * 4), new Float32Array(i.length * 4), new Uint16Array((i.length - 1) * 6)) || this;
      return o.points = i, o._width = r, o.textureScale = s, o.build(), o;
    }
    return Object.defineProperty(e.prototype, "width", {
      /**
       * The width (i.e., thickness) of the rope.
       * @readonly
       */
      get: function() {
        return this._width;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.build = function() {
      var r = this.points;
      if (r) {
        var i = this.getBuffer("aVertexPosition"), s = this.getBuffer("aTextureCoord"), o = this.getIndex();
        if (!(r.length < 1)) {
          i.data.length / 4 !== r.length && (i.data = new Float32Array(r.length * 4), s.data = new Float32Array(r.length * 4), o.data = new Uint16Array((r.length - 1) * 6));
          var h = s.data, l = o.data;
          h[0] = 0, h[1] = 0, h[2] = 0, h[3] = 1;
          for (var c = 0, _ = r[0], y = this._width * this.textureScale, w = r.length, b = 0; b < w; b++) {
            var E = b * 4;
            if (this.textureScale > 0) {
              var T = _.x - r[b].x, P = _.y - r[b].y, O = Math.sqrt(T * T + P * P);
              _ = r[b], c += O / y;
            } else
              c = b / (w - 1);
            h[E] = c, h[E + 1] = 0, h[E + 2] = c, h[E + 3] = 1;
          }
          for (var H = 0, b = 0; b < w - 1; b++) {
            var E = b * 2;
            l[H++] = E, l[H++] = E + 1, l[H++] = E + 2, l[H++] = E + 2, l[H++] = E + 1, l[H++] = E + 3;
          }
          s.update(), o.update(), this.updateVertices();
        }
      }
    }, e.prototype.updateVertices = function() {
      var r = this.points;
      if (!(r.length < 1)) {
        for (var i = r[0], s, o = 0, h = 0, l = this.buffers[0].data, c = r.length, _ = 0; _ < c; _++) {
          var y = r[_], w = _ * 4;
          _ < r.length - 1 ? s = r[_ + 1] : s = y, h = -(s.x - i.x), o = s.y - i.y;
          var b = Math.sqrt(o * o + h * h), E = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
          o /= b, h /= b, o *= E, h *= E, l[w] = y.x + o, l[w + 1] = y.y + h, l[w + 2] = y.x - o, l[w + 3] = y.y - h, i = y;
        }
        this.buffers[0].update();
      }
    }, e.prototype.update = function() {
      this.textureScale > 0 ? this.build() : this.updateVertices();
    }, e;
  }(Jo)
), xT = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s) {
      s === void 0 && (s = 0);
      var o = this, h = new T2(r.height, i, s), l = new Fs(r);
      return s > 0 && (r.baseTexture.wrapMode = Wi.REPEAT), o = t.call(this, h, l) || this, o.autoUpdate = !0, o;
    }
    return e.prototype._render = function(r) {
      var i = this.geometry;
      (this.autoUpdate || i._width !== this.shader.texture.height) && (i._width = this.shader.texture.height, i.update()), t.prototype._render.call(this, r);
    }, e;
  }(Os)
), A2 = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s) {
      var o = this, h = new x2(r.width, r.height, i, s), l = new Fs(Me.WHITE);
      return o = t.call(this, h, l) || this, o.texture = r, o.autoResize = !0, o;
    }
    return e.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID;
      var r = this.geometry, i = this.shader.texture, s = i.width, o = i.height;
      this.autoResize && (r.width !== s || r.height !== o) && (r.width = this.shader.texture.width, r.height = this.shader.texture.height, r.build());
    }, Object.defineProperty(e.prototype, "texture", {
      get: function() {
        return this.shader.texture;
      },
      set: function(r) {
        this.shader.texture !== r && (this.shader.texture = r, this._textureID = -1, r.baseTexture.valid ? this.textureUpdated() : r.once("update", this.textureUpdated, this));
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._render = function(r) {
      this._textureID !== this.shader.texture._updateID && this.textureUpdated(), t.prototype._render.call(this, r);
    }, e.prototype.destroy = function(r) {
      this.shader.texture.off("update", this.textureUpdated, this), t.prototype.destroy.call(this, r);
    }, e;
  }(Os)
), TT = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s, o, h) {
      r === void 0 && (r = Me.EMPTY);
      var l = this, c = new Jo(i, s, o);
      c.getBuffer("aVertexPosition").static = !1;
      var _ = new Fs(r);
      return l = t.call(this, c, _, null, h) || this, l.autoUpdate = !0, l;
    }
    return Object.defineProperty(e.prototype, "vertices", {
      /**
       * Collection of vertices data.
       * @type {Float32Array}
       */
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(r) {
        this.geometry.getBuffer("aVertexPosition").data = r;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._render = function(r) {
      this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), t.prototype._render.call(this, r);
    }, e;
  }(Os)
), Ra = 10, AT = (
  /** @class */
  function(t) {
    ks(e, t);
    function e(r, i, s, o, h) {
      i === void 0 && (i = Ra), s === void 0 && (s = Ra), o === void 0 && (o = Ra), h === void 0 && (h = Ra);
      var l = t.call(this, Me.WHITE, 4, 4) || this;
      return l._origWidth = r.orig.width, l._origHeight = r.orig.height, l._width = l._origWidth, l._height = l._origHeight, l._leftWidth = i, l._rightWidth = o, l._topHeight = s, l._bottomHeight = h, l.texture = r, l;
    }
    return e.prototype.textureUpdated = function() {
      this._textureID = this.shader.texture._updateID, this._refresh();
    }, Object.defineProperty(e.prototype, "vertices", {
      get: function() {
        return this.geometry.getBuffer("aVertexPosition").data;
      },
      set: function(r) {
        this.geometry.getBuffer("aVertexPosition").data = r;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.updateHorizontalVertices = function() {
      var r = this.vertices, i = this._getMinScale();
      r[9] = r[11] = r[13] = r[15] = this._topHeight * i, r[17] = r[19] = r[21] = r[23] = this._height - this._bottomHeight * i, r[25] = r[27] = r[29] = r[31] = this._height;
    }, e.prototype.updateVerticalVertices = function() {
      var r = this.vertices, i = this._getMinScale();
      r[2] = r[10] = r[18] = r[26] = this._leftWidth * i, r[4] = r[12] = r[20] = r[28] = this._width - this._rightWidth * i, r[6] = r[14] = r[22] = r[30] = this._width;
    }, e.prototype._getMinScale = function() {
      var r = this._leftWidth + this._rightWidth, i = this._width > r ? 1 : this._width / r, s = this._topHeight + this._bottomHeight, o = this._height > s ? 1 : this._height / s, h = Math.min(i, o);
      return h;
    }, Object.defineProperty(e.prototype, "width", {
      /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */
      get: function() {
        return this._width;
      },
      set: function(r) {
        this._width = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */
      get: function() {
        return this._height;
      },
      set: function(r) {
        this._height = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "leftWidth", {
      /** The width of the left column. */
      get: function() {
        return this._leftWidth;
      },
      set: function(r) {
        this._leftWidth = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "rightWidth", {
      /** The width of the right column. */
      get: function() {
        return this._rightWidth;
      },
      set: function(r) {
        this._rightWidth = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "topHeight", {
      /** The height of the top row. */
      get: function() {
        return this._topHeight;
      },
      set: function(r) {
        this._topHeight = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "bottomHeight", {
      /** The height of the bottom row. */
      get: function() {
        return this._bottomHeight;
      },
      set: function(r) {
        this._bottomHeight = r, this._refresh();
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype._refresh = function() {
      var r = this.texture, i = this.geometry.buffers[1].data;
      this._origWidth = r.orig.width, this._origHeight = r.orig.height;
      var s = 1 / this._origWidth, o = 1 / this._origHeight;
      i[0] = i[8] = i[16] = i[24] = 0, i[1] = i[3] = i[5] = i[7] = 0, i[6] = i[14] = i[22] = i[30] = 1, i[25] = i[27] = i[29] = i[31] = 1, i[2] = i[10] = i[18] = i[26] = s * this._leftWidth, i[4] = i[12] = i[20] = i[28] = 1 - s * this._rightWidth, i[9] = i[11] = i[13] = i[15] = o * this._topHeight, i[17] = i[19] = i[21] = i[23] = 1 - o * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update();
    }, e;
  }(A2)
);
/*!
 * @pixi/sprite-animated - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var lu = function(t, e) {
  return lu = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
    r.__proto__ = i;
  } || function(r, i) {
    for (var s in i)
      i.hasOwnProperty(s) && (r[s] = i[s]);
  }, lu(t, e);
};
function wT(t, e) {
  lu(t, e);
  function r() {
    this.constructor = t;
  }
  t.prototype = e === null ? Object.create(e) : (r.prototype = e.prototype, new r());
}
var PT = (
  /** @class */
  function(t) {
    wT(e, t);
    function e(r, i) {
      i === void 0 && (i = !0);
      var s = t.call(this, r[0] instanceof Me ? r[0] : r[0].texture) || this;
      return s._textures = null, s._durations = null, s._autoUpdate = i, s._isConnectedToTicker = !1, s.animationSpeed = 1, s.loop = !0, s.updateAnchor = !1, s.onComplete = null, s.onFrameChange = null, s.onLoop = null, s._currentTime = 0, s._playing = !1, s._previousFrame = null, s.textures = r, s;
    }
    return e.prototype.stop = function() {
      this._playing && (this._playing = !1, this._autoUpdate && this._isConnectedToTicker && (Hr.shared.remove(this.update, this), this._isConnectedToTicker = !1));
    }, e.prototype.play = function() {
      this._playing || (this._playing = !0, this._autoUpdate && !this._isConnectedToTicker && (Hr.shared.add(this.update, this, Zi.HIGH), this._isConnectedToTicker = !0));
    }, e.prototype.gotoAndStop = function(r) {
      this.stop();
      var i = this.currentFrame;
      this._currentTime = r, i !== this.currentFrame && this.updateTexture();
    }, e.prototype.gotoAndPlay = function(r) {
      var i = this.currentFrame;
      this._currentTime = r, i !== this.currentFrame && this.updateTexture(), this.play();
    }, e.prototype.update = function(r) {
      if (this._playing) {
        var i = this.animationSpeed * r, s = this.currentFrame;
        if (this._durations !== null) {
          var o = this._currentTime % 1 * this._durations[this.currentFrame];
          for (o += i / 60 * 1e3; o < 0; )
            this._currentTime--, o += this._durations[this.currentFrame];
          var h = Math.sign(this.animationSpeed * r);
          for (this._currentTime = Math.floor(this._currentTime); o >= this._durations[this.currentFrame]; )
            o -= this._durations[this.currentFrame] * h, this._currentTime += h;
          this._currentTime += o / this._durations[this.currentFrame];
        } else
          this._currentTime += i;
        this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : s !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < s ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > s && this.onLoop()), this.updateTexture());
      }
    }, e.prototype.updateTexture = function() {
      var r = this.currentFrame;
      this._previousFrame !== r && (this._previousFrame = r, this._texture = this._textures[r], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame));
    }, e.prototype.destroy = function(r) {
      this.stop(), t.prototype.destroy.call(this, r), this.onComplete = null, this.onFrameChange = null, this.onLoop = null;
    }, e.fromFrames = function(r) {
      for (var i = [], s = 0; s < r.length; ++s)
        i.push(Me.from(r[s]));
      return new e(i);
    }, e.fromImages = function(r) {
      for (var i = [], s = 0; s < r.length; ++s)
        i.push(Me.from(r[s]));
      return new e(i);
    }, Object.defineProperty(e.prototype, "totalFrames", {
      /**
       * The total number of frames in the AnimatedSprite. This is the same as number of textures
       * assigned to the AnimatedSprite.
       * @readonly
       * @default 0
       */
      get: function() {
        return this._textures.length;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "textures", {
      /** The array of textures used for this AnimatedSprite. */
      get: function() {
        return this._textures;
      },
      set: function(r) {
        if (r[0] instanceof Me)
          this._textures = r, this._durations = null;
        else {
          this._textures = [], this._durations = [];
          for (var i = 0; i < r.length; i++)
            this._textures.push(r[i].texture), this._durations.push(r[i].time);
        }
        this._previousFrame = null, this.gotoAndStop(0), this.updateTexture();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "currentFrame", {
      /**
       * The AnimatedSprites current frame index.
       * @readonly
       */
      get: function() {
        var r = Math.floor(this._currentTime) % this._textures.length;
        return r < 0 && (r += this._textures.length), r;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "playing", {
      /**
       * Indicates if the AnimatedSprite is currently playing.
       * @readonly
       */
      get: function() {
        return this._playing;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "autoUpdate", {
      /** Whether to use PIXI.Ticker.shared to auto update animation time. */
      get: function() {
        return this._autoUpdate;
      },
      set: function(r) {
        r !== this._autoUpdate && (this._autoUpdate = r, !this._autoUpdate && this._isConnectedToTicker ? (Hr.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (Hr.shared.add(this.update, this), this._isConnectedToTicker = !0));
      },
      enumerable: !1,
      configurable: !0
    }), e;
  }(Bs)
);
/*!
 * pixi.js - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
Qi.add(
  // Install renderer plugins
  Np,
  Mp,
  Fp,
  Jp,
  h2,
  e0,
  c2,
  // Install loader plugins
  m2,
  Xp,
  Yp,
  qp,
  u2,
  // Install application plugins
  ep,
  Gp
);
var ET = {
  AlphaFilter: Vx,
  BlurFilter: qx,
  BlurFilterPass: Zl,
  ColorMatrixFilter: Ql,
  DisplacementFilter: eT,
  FXAAFilter: sT,
  NoiseFilter: hT
};
const IT = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get ALPHA_MODES() {
    return xi;
  },
  AbstractBatchRenderer: Ep,
  AbstractMultiResource: sh,
  AbstractRenderer: Ap,
  AccessibilityManager: Np,
  AnimatedSprite: PT,
  AppLoaderPlugin: Gp,
  Application: u0,
  ArrayResource: $u,
  Attribute: $l,
  get BLEND_MODES() {
    return Ae;
  },
  get BUFFER_BITS() {
    return So;
  },
  get BUFFER_TYPE() {
    return Li;
  },
  BaseImageResource: Ji,
  BasePrepare: o2,
  BaseRenderTexture: Fu,
  BaseTexture: We,
  BatchDrawCall: Va,
  BatchGeometry: t0,
  BatchPluginFactory: Cp,
  BatchRenderer: e0,
  BatchShaderGenerator: Ip,
  BatchSystem: Du,
  BatchTextureArray: Ha,
  BitmapFont: Kn,
  BitmapFontData: Xo,
  BitmapFontLoader: m2,
  BitmapText: Bx,
  BlobResource: kp,
  Bounds: Mo,
  BrowserAdapter: M_,
  Buffer: Br,
  BufferResource: ls,
  get CLEAR_MODES() {
    return hn;
  },
  get COLOR_MASK_BITS() {
    return gl;
  },
  CanvasResource: Ru,
  Circle: J_,
  CompressedTextureLoader: Xp,
  CompressedTextureResource: ja,
  Container: Ti,
  ContextSystem: Bu,
  CountLimiter: s2,
  CubeResource: Su,
  DDSLoader: Yp,
  DEG_TO_RAD: Z_,
  get DRAW_MODES() {
    return yi;
  },
  DisplayObject: Lr,
  get ENV() {
    return Yi;
  },
  Ellipse: Q_,
  get ExtensionType() {
    return or;
  },
  Extract: Mp,
  get FORMATS() {
    return Ht;
  },
  FORMATS_TO_COMPONENTS: zp,
  FillStyle: i0,
  Filter: dn,
  FilterState: sp,
  FilterSystem: Gu,
  Framebuffer: Xa,
  FramebufferSystem: ku,
  get GC_MODES() {
    return ka;
  },
  GLFramebuffer: op,
  GLProgram: bp,
  GLTexture: Oa,
  GRAPHICS_CURVES: Ns,
  Geometry: Gs,
  GeometrySystem: Xu,
  Graphics: ko,
  GraphicsData: kl,
  GraphicsGeometry: i2,
  IGLUniformData: Yy,
  INSTALLED: Uo,
  get INTERNAL_FORMATS() {
    return ke;
  },
  INTERNAL_FORMAT_TO_BYTES_PER_PIXEL: Do,
  ImageBitmapResource: Ou,
  ImageResource: oh,
  InteractionData: Rl,
  InteractionEvent: Lp,
  InteractionManager: Fp,
  InteractionTrackingData: Fa,
  KTXLoader: qp,
  get LINE_CAP() {
    return fn;
  },
  get LINE_JOIN() {
    return un;
  },
  LineStyle: n2,
  Loader: Go,
  get LoaderResource() {
    return $r;
  },
  get MASK_TYPES() {
    return Dr;
  },
  get MIPMAP_MODES() {
    return qi;
  },
  get MSAA_QUALITY() {
    return Mr;
  },
  MaskData: ap,
  MaskSystem: Vu,
  Matrix: wr,
  Mesh: Os,
  MeshBatchUvs: d2,
  MeshGeometry: Jo,
  MeshMaterial: Fs,
  NineSlicePlane: AT,
  ObjectRenderer: Zo,
  ObservablePoint: xn,
  PI_2: Fo,
  get PRECISION() {
    return Si;
  },
  ParticleContainer: ex,
  ParticleRenderer: Jp,
  PlaneGeometry: x2,
  Point: _r,
  Polygon: xo,
  Prepare: h2,
  Program: Ds,
  ProjectionSystem: ju,
  Quad: np,
  QuadUv: Uu,
  RAD_TO_DEG: q_,
  get RENDERER_TYPE() {
    return Ss;
  },
  Rectangle: Ye,
  RenderTexture: En,
  RenderTexturePool: ip,
  RenderTextureSystem: Wu,
  Renderer: Qu,
  ResizePlugin: b2,
  Resource: os,
  RopeGeometry: T2,
  RoundedRectangle: K_,
  Runner: jr,
  get SAMPLER_TYPES() {
    return No;
  },
  get SCALE_MODES() {
    return zi;
  },
  get SHAPES() {
    return Xr;
  },
  SVGResource: Nu,
  ScissorSystem: Hu,
  Shader: cn,
  ShaderSystem: Yu,
  SimpleMesh: TT,
  SimplePlane: A2,
  SimpleRope: xT,
  Sprite: Bs,
  SpriteMaskFilter: _p,
  Spritesheet: l2,
  SpritesheetLoader: u2,
  State: Cn,
  StateSystem: qu,
  StencilSystem: zu,
  System: ub,
  get TARGETS() {
    return Tn;
  },
  get TEXT_GRADIENT() {
    return Ls;
  },
  get TYPES() {
    return xe;
  },
  TYPES_TO_BYTES_PER_COMPONENT: Fl,
  TYPES_TO_BYTES_PER_PIXEL: jp,
  TemporaryDisplayObject: Cu,
  Text: o0,
  TextFormat: _2,
  TextMetrics: Fi,
  TextStyle: as,
  Texture: Me,
  TextureGCSystem: Zu,
  TextureLoader: Dp,
  TextureMatrix: ah,
  TextureSystem: Ju,
  TextureUvs: Mu,
  Ticker: Hr,
  TickerPlugin: ep,
  TilingSprite: Px,
  TilingSpriteRenderer: c2,
  TimeLimiter: wx,
  Transform: ih,
  get UPDATE_PRIORITY() {
    return Zi;
  },
  UniformGroup: An,
  VERSION: db,
  VideoResource: Lu,
  ViewableBuffer: za,
  get WRAP_MODES() {
    return Wi;
  },
  XMLFormat: Wa,
  XMLStringFormat: p2,
  accessibleTarget: Sp,
  autoDetectFormat: h0,
  autoDetectRenderer: wp,
  autoDetectResource: nh,
  checkMaxIfStatementsInShader: dp,
  createUBOElements: mp,
  defaultFilterVertex: Ku,
  defaultVertex: Pp,
  extensions: Qi,
  filters: ET,
  generateProgram: xp,
  generateUniformBufferSync: yp,
  getTestContext: up,
  getUBOData: gp,
  graphicsUtils: ax,
  groupD8: Ar,
  interactiveTarget: Op,
  isMobile: gi,
  parseDDS: Hp,
  parseKTX: Wp,
  resources: $p,
  settings: ee,
  systems: Rp,
  uniformParsers: is,
  utils: my
}, Symbol.toStringTag, { value: "Module" }));
var kn = Math.pow, Ir = (t, e, r) => new Promise((i, s) => {
  var o = (c) => {
    try {
      l(r.next(c));
    } catch (_) {
      s(_);
    }
  }, h = (c) => {
    try {
      l(r.throw(c));
    } catch (_) {
      s(_);
    }
  }, l = (c) => c.done ? i(c.value) : Promise.resolve(c.value).then(o, h);
  l((r = r.apply(t, e)).next());
});
const Vd = 2, Hd = 2;
var Ho;
((t) => {
  t.supportMoreMaskDivisions = !0, t.setOpacityFromMotion = !1;
})(Ho || (Ho = {}));
var Wr;
((t) => {
  t.LOG_LEVEL_VERBOSE = 0, t.LOG_LEVEL_WARNING = 1, t.LOG_LEVEL_ERROR = 2, t.LOG_LEVEL_NONE = 999, t.logLevel = t.LOG_LEVEL_WARNING, t.sound = !0, t.motionSync = !0, t.motionFadingDuration = 500, t.idleMotionFadingDuration = 2e3, t.expressionFadingDuration = 500, t.preserveExpressionOnMotion = !0, t.cubism4 = Ho;
})(Wr || (Wr = {}));
const dr = {
  log(t, ...e) {
    Wr.logLevel <= Wr.LOG_LEVEL_VERBOSE && console.log(`[${t}]`, ...e);
  },
  warn(t, ...e) {
    Wr.logLevel <= Wr.LOG_LEVEL_WARNING && console.warn(`[${t}]`, ...e);
  },
  error(t, ...e) {
    Wr.logLevel <= Wr.LOG_LEVEL_ERROR && console.error(`[${t}]`, ...e);
  }
};
function qa(t, e, r) {
  return t < e ? e : t > r ? r : t;
}
function CT(t, e) {
  return Math.random() * (e - t) + t;
}
function lo(t, e, r, i, s) {
  const o = e[i];
  o !== null && typeof o === t && (r[s] = o);
}
function uo(t, e, r, i, s) {
  const o = e[i];
  Array.isArray(o) && (r[s] = o.filter((h) => h !== null && typeof h === t));
}
function w2(t, e) {
  e.forEach((r) => {
    Object.getOwnPropertyNames(r.prototype).forEach((i) => {
      i !== "constructor" && Object.defineProperty(t.prototype, i, Object.getOwnPropertyDescriptor(r.prototype, i));
    });
  });
}
function $T(t) {
  let e = t.lastIndexOf("/");
  return e != -1 && (t = t.slice(0, e)), e = t.lastIndexOf("/"), e !== -1 && (t = t.slice(e + 1)), t;
}
function RT(t, e) {
  const r = t.indexOf(e);
  r !== -1 && t.splice(r, 1);
}
class f0 extends Oi {
  constructor(e, r) {
    super(), this.expressions = [], this.reserveExpressionIndex = -1, this.destroyed = !1, this.settings = e, this.tag = `ExpressionManager(${e.name})`;
  }
  init() {
    this.defaultExpression = this.createExpression({}, void 0), this.currentExpression = this.defaultExpression, this.stopAllExpressions();
  }
  loadExpression(e) {
    return Ir(this, null, function* () {
      if (!this.definitions[e]) {
        dr.warn(this.tag, `Undefined expression at [${e}]`);
        return;
      }
      if (this.expressions[e] === null) {
        dr.warn(this.tag, `Cannot set expression at [${e}] because it's already failed in loading.`);
        return;
      }
      if (this.expressions[e])
        return this.expressions[e];
      const r = yield this._loadExpression(e);
      return this.expressions[e] = r, r;
    });
  }
  _loadExpression(e) {
    throw new Error("Not implemented.");
  }
  setRandomExpression() {
    return Ir(this, null, function* () {
      if (this.definitions.length) {
        const e = [];
        for (let r = 0; r < this.definitions.length; r++)
          this.expressions[r] !== null && this.expressions[r] !== this.currentExpression && r !== this.reserveExpressionIndex && e.push(r);
        if (e.length) {
          const r = Math.floor(Math.random() * e.length);
          return this.setExpression(r);
        }
      }
      return !1;
    });
  }
  resetExpression() {
    this._setExpression(this.defaultExpression);
  }
  restoreExpression() {
    this._setExpression(this.currentExpression);
  }
  setExpression(e) {
    return Ir(this, null, function* () {
      if (typeof e != "number" && (e = this.getExpressionIndex(e)), !(e > -1 && e < this.definitions.length) || e === this.expressions.indexOf(this.currentExpression))
        return !1;
      this.reserveExpressionIndex = e;
      const r = yield this.loadExpression(e);
      return !r || this.reserveExpressionIndex !== e ? !1 : (this.reserveExpressionIndex = -1, this.currentExpression = r, this._setExpression(r), !0);
    });
  }
  update(e, r) {
    return this.isFinished() ? !1 : this.updateParameters(e, r);
  }
  destroy() {
    this.destroyed = !0, this.emit("destroy");
    const e = this;
    e.definitions = void 0, e.expressions = void 0;
  }
}
const zd = 0.01, ST = 40 / 7.5, NT = 1 / (0.15 * 1e3);
class LT {
  constructor() {
    this.targetX = 0, this.targetY = 0, this.x = 0, this.y = 0, this.vx = 0, this.vy = 0;
  }
  focus(e, r, i = !1) {
    this.targetX = qa(e, -1, 1), this.targetY = qa(r, -1, 1), i && (this.x = this.targetX, this.y = this.targetY);
  }
  update(e) {
    const r = this.targetX - this.x, i = this.targetY - this.y;
    if (Math.abs(r) < zd && Math.abs(i) < zd)
      return;
    const s = Math.sqrt(kn(r, 2) + kn(i, 2)), o = ST / (1e3 / e);
    let h = o * (r / s) - this.vx, l = o * (i / s) - this.vy;
    const c = Math.sqrt(kn(h, 2) + kn(l, 2)), _ = o * NT * e;
    c > _ && (h *= _ / c, l *= _ / c), this.vx += h, this.vy += l;
    const y = Math.sqrt(kn(this.vx, 2) + kn(this.vy, 2)), w = 0.5 * (Math.sqrt(kn(_, 2) + 8 * _ * s) - _);
    y > w && (this.vx *= w / y, this.vy *= w / y), this.x += this.vx, this.y += this.vy;
  }
}
class hh {
  constructor(e) {
    this.json = e;
    let r = e.url;
    if (typeof r != "string")
      throw new TypeError("The `url` field in settings JSON must be defined as a string.");
    this.url = r, this.name = $T(this.url);
  }
  resolveURL(e) {
    return ji.resolve(this.url, e);
  }
  replaceFiles(e) {
    this.moc = e(this.moc, "moc"), this.pose !== void 0 && (this.pose = e(this.pose, "pose")), this.physics !== void 0 && (this.physics = e(this.physics, "physics"));
    for (let r = 0; r < this.textures.length; r++)
      this.textures[r] = e(this.textures[r], `textures[${r}]`);
  }
  getDefinedFiles() {
    const e = [];
    return this.replaceFiles((r) => (e.push(r), r)), e;
  }
  validateFiles(e) {
    const r = (o, h) => {
      const l = this.resolveURL(o);
      if (!e.includes(l)) {
        if (h)
          throw new Error(`File "${o}" is defined in settings, but doesn't exist in given files`);
        return !1;
      }
      return !0;
    };
    return [this.moc, ...this.textures].forEach((o) => r(o, !0)), this.getDefinedFiles().filter((o) => r(o, !1));
  }
}
var uu = /* @__PURE__ */ ((t) => (t[t.NONE = 0] = "NONE", t[t.IDLE = 1] = "IDLE", t[t.NORMAL = 2] = "NORMAL", t[t.FORCE = 3] = "FORCE", t))(uu || {});
class OT {
  constructor() {
    this.debug = !1, this.currentPriority = 0, this.reservePriority = 0;
  }
  reserve(e, r, i) {
    if (i <= 0)
      return dr.log(this.tag, "Cannot start a motion with MotionPriority.NONE."), !1;
    if (e === this.currentGroup && r === this.currentIndex)
      return dr.log(this.tag, "Motion is already playing.", this.dump(e, r)), !1;
    if (e === this.reservedGroup && r === this.reservedIndex || e === this.reservedIdleGroup && r === this.reservedIdleIndex)
      return dr.log(this.tag, "Motion is already reserved.", this.dump(e, r)), !1;
    if (i === 1) {
      if (this.currentPriority !== 0)
        return dr.log(this.tag, "Cannot start idle motion because another motion is playing.", this.dump(e, r)), !1;
      if (this.reservedIdleGroup !== void 0)
        return dr.log(this.tag, "Cannot start idle motion because another idle motion has reserved.", this.dump(e, r)), !1;
      this.setReservedIdle(e, r);
    } else {
      if (i < 3) {
        if (i <= this.currentPriority)
          return dr.log(this.tag, "Cannot start motion because another motion is playing as an equivalent or higher priority.", this.dump(e, r)), !1;
        if (i <= this.reservePriority)
          return dr.log(this.tag, "Cannot start motion because another motion has reserved as an equivalent or higher priority.", this.dump(e, r)), !1;
      }
      this.setReserved(e, r, i);
    }
    return !0;
  }
  start(e, r, i, s) {
    if (s === 1) {
      if (this.setReservedIdle(void 0, void 0), this.currentPriority !== 0)
        return dr.log(this.tag, "Cannot start idle motion because another motion is playing.", this.dump(r, i)), !1;
    } else {
      if (r !== this.reservedGroup || i !== this.reservedIndex)
        return dr.log(this.tag, "Cannot start motion because another motion has taken the place.", this.dump(r, i)), !1;
      this.setReserved(void 0, void 0, 0);
    }
    return e ? (this.setCurrent(r, i, s), !0) : !1;
  }
  complete() {
    this.setCurrent(void 0, void 0, 0);
  }
  setCurrent(e, r, i) {
    this.currentPriority = i, this.currentGroup = e, this.currentIndex = r;
  }
  setReserved(e, r, i) {
    this.reservePriority = i, this.reservedGroup = e, this.reservedIndex = r;
  }
  setReservedIdle(e, r) {
    this.reservedIdleGroup = e, this.reservedIdleIndex = r;
  }
  isActive(e, r) {
    return e === this.currentGroup && r === this.currentIndex || e === this.reservedGroup && r === this.reservedIndex || e === this.reservedIdleGroup && r === this.reservedIdleIndex;
  }
  reset() {
    this.setCurrent(void 0, void 0, 0), this.setReserved(void 0, void 0, 0), this.setReservedIdle(void 0, void 0);
  }
  shouldRequestIdleMotion() {
    return this.currentGroup === void 0 && this.reservedIdleGroup === void 0;
  }
  shouldOverrideExpression() {
    return !Wr.preserveExpressionOnMotion && this.currentPriority > 1;
  }
  dump(e, r) {
    if (this.debug) {
      const i = [
        "currentPriority",
        "reservePriority",
        "currentGroup",
        "currentIndex",
        "reservedGroup",
        "reservedIndex",
        "reservedIdleGroup",
        "reservedIdleIndex"
      ];
      return `
<Requested> group = "${e}", index = ${r}
` + i.map((s) => "[" + s + "] " + this[s]).join(`
`);
    }
    return "";
  }
}
const FT = "SoundManager", MT = 0.5;
class ts {
  static get volume() {
    return this._volume;
  }
  static set volume(e) {
    this._volume = (e > 1 ? 1 : e < 0 ? 0 : e) || 0, this.audios.forEach((r) => r.volume = this._volume);
  }
  static add(e, r, i) {
    const s = new Audio(e);
    return s.volume = this._volume, s.preload = "auto", s.addEventListener("ended", () => {
      this.dispose(s), r == null || r();
    }), s.addEventListener("error", (o) => {
      this.dispose(s), dr.warn(FT, `Error occurred on "${e}"`, o.error), i == null || i(o.error);
    }), this.audios.push(s), s;
  }
  static play(e) {
    return new Promise((r, i) => {
      var s;
      (s = e.play()) == null || s.catch((o) => {
        e.dispatchEvent(new ErrorEvent("error", { error: o })), i(o);
      }), e.readyState === e.HAVE_ENOUGH_DATA ? r() : e.addEventListener("canplaythrough", r);
    });
  }
  static dispose(e) {
    e.pause(), e.removeAttribute("src"), RT(this.audios, e);
  }
  static destroy() {
    for (let e = this.audios.length - 1; e >= 0; e--)
      this.dispose(this.audios[e]);
  }
}
ts.audios = [];
ts._volume = MT;
class lh extends Oi {
  constructor(e, r) {
    super(), this.motionGroups = {}, this.state = new OT(), this.playing = !1, this.destroyed = !1, this.settings = e, this.tag = `MotionManager(${e.name})`, this.state.tag = this.tag;
  }
  init(e) {
    e != null && e.idleMotionGroup && (this.groups.idle = e.idleMotionGroup), this.setupMotions(e), this.stopAllMotions();
  }
  setupMotions(e) {
    for (const i of Object.keys(this.definitions))
      this.motionGroups[i] = [];
    let r;
    switch (e == null ? void 0 : e.motionPreload) {
      case "NONE":
        return;
      case "ALL":
        r = Object.keys(this.definitions);
        break;
      case "IDLE":
      default:
        r = [this.groups.idle];
        break;
    }
    for (const i of r)
      if (this.definitions[i])
        for (let s = 0; s < this.definitions[i].length; s++)
          this.loadMotion(i, s).then();
  }
  loadMotion(e, r) {
    return Ir(this, null, function* () {
      var i;
      if (!((i = this.definitions[e]) != null && i[r])) {
        dr.warn(this.tag, `Undefined motion at "${e}"[${r}]`);
        return;
      }
      if (this.motionGroups[e][r] === null) {
        dr.warn(this.tag, `Cannot start motion at "${e}"[${r}] because it's already failed in loading.`);
        return;
      }
      if (this.motionGroups[e][r])
        return this.motionGroups[e][r];
      const s = yield this._loadMotion(e, r);
      if (!this.destroyed)
        return this.motionGroups[e][r] = s != null ? s : null, s;
    });
  }
  _loadMotion(e, r) {
    throw new Error("Not implemented.");
  }
  startMotion(e, r) {
    return Ir(this, arguments, function* (i, s, o = uu.NORMAL) {
      var h;
      if (!this.state.reserve(i, s, o))
        return !1;
      const l = (h = this.definitions[i]) == null ? void 0 : h[s];
      if (!l)
        return !1;
      this.currentAudio && ts.dispose(this.currentAudio);
      let c;
      if (Wr.sound) {
        const y = this.getSoundFile(l);
        if (y)
          try {
            c = ts.add(this.settings.resolveURL(y), () => this.currentAudio = void 0, () => this.currentAudio = void 0), this.currentAudio = c;
          } catch (w) {
            dr.warn(this.tag, "Failed to create audio", y, w);
          }
      }
      const _ = yield this.loadMotion(i, s);
      if (c) {
        const y = ts.play(c).catch((w) => dr.warn(this.tag, "Failed to play audio", c.src, w));
        Wr.motionSync && (yield y);
      }
      return this.state.start(_, i, s, o) ? (dr.log(this.tag, "Start motion:", this.getMotionName(l)), this.emit("motionStart", i, s, c), this.state.shouldOverrideExpression() && this.expressionManager && this.expressionManager.resetExpression(), this.playing = !0, this._startMotion(_), !0) : (c && (ts.dispose(c), this.currentAudio = void 0), !1);
    });
  }
  startRandomMotion(e, r) {
    return Ir(this, null, function* () {
      const i = this.definitions[e];
      if (i != null && i.length) {
        const s = [];
        for (let o = 0; o < i.length; o++)
          this.motionGroups[e][o] !== null && !this.state.isActive(e, o) && s.push(o);
        if (s.length) {
          const o = Math.floor(Math.random() * s.length);
          return this.startMotion(e, s[o], r);
        }
      }
      return !1;
    });
  }
  stopAllMotions() {
    this._stopAllMotions(), this.state.reset(), this.currentAudio && (ts.dispose(this.currentAudio), this.currentAudio = void 0);
  }
  update(e, r) {
    var i;
    return this.isFinished() && (this.playing && (this.playing = !1, this.emit("motionFinish")), this.state.shouldOverrideExpression() && ((i = this.expressionManager) == null || i.restoreExpression()), this.state.complete(), this.state.shouldRequestIdleMotion() && this.startRandomMotion(this.groups.idle, uu.IDLE)), this.updateParameters(e, r);
  }
  destroy() {
    var e;
    this.destroyed = !0, this.emit("destroy"), this.stopAllMotions(), (e = this.expressionManager) == null || e.destroy();
    const r = this;
    r.definitions = void 0, r.motionGroups = void 0;
  }
}
const UT = { x: 0, y: 0, width: 0, height: 0 };
class P2 extends Oi {
  constructor() {
    super(...arguments), this.focusController = new LT(), this.originalWidth = 0, this.originalHeight = 0, this.width = 0, this.height = 0, this.localTransform = new wr(), this.drawingMatrix = new wr(), this.hitAreas = {}, this.textureFlipY = !1, this.viewport = [0, 0, 0, 0], this.destroyed = !1;
  }
  init() {
    this.setupLayout(), this.setupHitAreas();
  }
  setupLayout() {
    const e = this, r = this.getSize();
    e.originalWidth = r[0], e.originalHeight = r[1];
    const i = Object.assign({
      width: Vd,
      height: Hd
    }, this.getLayout());
    this.localTransform.scale(i.width / Vd, i.height / Hd), e.width = this.originalWidth * this.localTransform.a, e.height = this.originalHeight * this.localTransform.d;
    const s = i.x !== void 0 && i.x - i.width / 2 || i.centerX !== void 0 && i.centerX || i.left !== void 0 && i.left - i.width / 2 || i.right !== void 0 && i.right + i.width / 2 || 0, o = i.y !== void 0 && i.y - i.height / 2 || i.centerY !== void 0 && i.centerY || i.top !== void 0 && i.top - i.height / 2 || i.bottom !== void 0 && i.bottom + i.height / 2 || 0;
    this.localTransform.translate(this.width * s, -this.height * o);
  }
  setupHitAreas() {
    const e = this.getHitAreaDefs().filter((r) => r.index >= 0);
    for (const r of e)
      this.hitAreas[r.name] = r;
  }
  hitTest(e, r) {
    return Object.keys(this.hitAreas).filter((i) => this.isHit(i, e, r));
  }
  isHit(e, r, i) {
    if (!this.hitAreas[e])
      return !1;
    const s = this.hitAreas[e].index, o = this.getDrawableBounds(s, UT);
    return o.x <= r && r <= o.x + o.width && o.y <= i && i <= o.y + o.height;
  }
  getDrawableBounds(e, r) {
    const i = this.getDrawableVertices(e);
    let s = i[0], o = i[0], h = i[1], l = i[1];
    for (let c = 0; c < i.length; c += 2) {
      const _ = i[c], y = i[c + 1];
      s = Math.min(_, s), o = Math.max(_, o), h = Math.min(y, h), l = Math.max(y, l);
    }
    return r != null || (r = {}), r.x = s, r.y = h, r.width = o - s, r.height = l - h, r;
  }
  updateTransform(e) {
    this.drawingMatrix.copyFrom(e).append(this.localTransform);
  }
  update(e, r) {
    this.focusController.update(e);
  }
  destroy() {
    this.destroyed = !0, this.emit("destroy"), this.motionManager.destroy(), this.motionManager = void 0;
  }
}
const GT = "XHRLoader";
class jd extends Error {
  constructor(e, r, i, s = !1) {
    super(e), this.url = r, this.status = i, this.aborted = s;
  }
}
const ti = class {
  static createXHR(t, e, r, i, s) {
    const o = new XMLHttpRequest();
    if (ti.allXhrSet.add(o), t) {
      let h = ti.xhrMap.get(t);
      h ? h.add(o) : (h = /* @__PURE__ */ new Set([o]), ti.xhrMap.set(t, h)), t.listeners("destroy").includes(ti.cancelXHRs) || t.once("destroy", ti.cancelXHRs);
    }
    return o.open("GET", e), o.responseType = r, o.onload = () => {
      (o.status === 200 || o.status === 0) && o.response ? i(o.response) : o.onerror();
    }, o.onerror = () => {
      dr.warn(GT, `Failed to load resource as ${o.responseType} (Status ${o.status}): ${e}`), s(new jd("Network error.", e, o.status));
    }, o.onabort = () => s(new jd("Aborted.", e, o.status, !0)), o.onloadend = () => {
      var h;
      ti.allXhrSet.delete(o), t && ((h = ti.xhrMap.get(t)) == null || h.delete(o));
    }, o;
  }
  static cancelXHRs() {
    var t;
    (t = ti.xhrMap.get(this)) == null || t.forEach((e) => {
      e.abort(), ti.allXhrSet.delete(e);
    }), ti.xhrMap.delete(this);
  }
  static release() {
    ti.allXhrSet.forEach((t) => t.abort()), ti.allXhrSet.clear(), ti.xhrMap = /* @__PURE__ */ new WeakMap();
  }
};
let uh = ti;
uh.xhrMap = /* @__PURE__ */ new WeakMap();
uh.allXhrSet = /* @__PURE__ */ new Set();
uh.loader = (t, e) => new Promise((r, i) => {
  ti.createXHR(t.target, t.settings ? t.settings.resolveURL(t.url) : t.url, t.type, (o) => {
    t.result = o, r();
  }, i).send();
});
function E2(t, e) {
  let r = -1;
  return i(0);
  function i(s, o) {
    if (o)
      return Promise.reject(o);
    if (s <= r)
      return Promise.reject(new Error("next() called multiple times"));
    r = s;
    const h = t[s];
    if (!h)
      return Promise.resolve();
    try {
      return Promise.resolve(h(e, i.bind(null, s + 1)));
    } catch (l) {
      return Promise.reject(l);
    }
  }
}
class In {
  static load(e) {
    return E2(this.middlewares, e).then(() => e.result);
  }
}
In.middlewares = [uh.loader];
function DT(t, e = {}) {
  var r;
  const i = { resourceOptions: { crossorigin: e.crossOrigin } };
  if (Me.fromURL)
    return Me.fromURL(t, i).catch((h) => {
      if (h instanceof Error)
        throw h;
      const l = new Error("Texture loading error");
      throw l.event = h, l;
    });
  i.resourceOptions.autoLoad = !1;
  const s = Me.from(t, i);
  if (s.baseTexture.valid)
    return Promise.resolve(s);
  const o = s.baseTexture.resource;
  return (r = o._live2d_load) != null || (o._live2d_load = new Promise((h, l) => {
    const c = (_) => {
      o.source.removeEventListener("error", c);
      const y = new Error("Texture loading error");
      y.event = _, l(y);
    };
    o.source.addEventListener("error", c), o.load().then(() => h(s)).catch(c);
  })), o._live2d_load;
}
const Wd = "Live2DFactory", I2 = (t, e) => Ir(void 0, null, function* () {
  if (typeof t.source == "string") {
    const r = yield In.load({
      url: t.source,
      type: "json",
      target: t.live2dModel
    });
    r.url = t.source, t.source = r, t.live2dModel.emit("settingsJSONLoaded", r);
  }
  return e();
}), C2 = (t, e) => Ir(void 0, null, function* () {
  if (t.source instanceof hh)
    return t.settings = t.source, e();
  if (typeof t.source == "object") {
    const r = Pr.findRuntime(t.source);
    if (r) {
      const i = r.createModelSettings(t.source);
      return t.settings = i, t.live2dModel.emit("settingsLoaded", i), e();
    }
  }
  throw new TypeError("Unknown settings format.");
}), $2 = (t, e) => {
  if (t.settings) {
    const r = Pr.findRuntime(t.settings);
    if (r)
      return r.ready().then(e);
  }
  return e();
}, R2 = (t, e) => Ir(void 0, null, function* () {
  yield e();
  const r = t.internalModel;
  if (r) {
    const i = t.settings, s = Pr.findRuntime(i);
    if (s) {
      const o = [];
      i.pose && o.push(In.load({
        settings: i,
        url: i.pose,
        type: "json",
        target: r
      }).then((h) => {
        r.pose = s.createPose(r.coreModel, h), t.live2dModel.emit("poseLoaded", r.pose);
      }).catch((h) => {
        t.live2dModel.emit("poseLoadError", h), dr.warn(Wd, "Failed to load pose.", h);
      })), i.physics && o.push(In.load({
        settings: i,
        url: i.physics,
        type: "json",
        target: r
      }).then((h) => {
        r.physics = s.createPhysics(r.coreModel, h), t.live2dModel.emit("physicsLoaded", r.physics);
      }).catch((h) => {
        t.live2dModel.emit("physicsLoadError", h), dr.warn(Wd, "Failed to load physics.", h);
      })), o.length && (yield Promise.all(o));
    }
  }
}), S2 = (t, e) => Ir(void 0, null, function* () {
  if (t.settings) {
    const r = t.live2dModel, i = t.settings.textures.map((s) => {
      const o = t.settings.resolveURL(s);
      return DT(o, { crossOrigin: t.options.crossOrigin });
    });
    if (yield e(), t.internalModel)
      r.internalModel = t.internalModel, r.emit("modelLoaded", t.internalModel);
    else
      throw new TypeError("Missing internal model.");
    r.textures = yield Promise.all(i), r.emit("textureLoaded", r.textures);
  } else
    throw new TypeError("Missing settings.");
}), N2 = (t, e) => Ir(void 0, null, function* () {
  const r = t.settings;
  if (r instanceof hh) {
    const i = Pr.findRuntime(r);
    if (!i)
      throw new TypeError("Unknown model settings.");
    const s = yield In.load({
      settings: r,
      url: r.moc,
      type: "arraybuffer",
      target: t.live2dModel
    });
    if (!i.isValidMoc(s))
      throw new Error("Invalid moc data");
    const o = i.createCoreModel(s);
    return t.internalModel = i.createInternalModel(o, r, t.options), e();
  }
  throw new TypeError("Missing settings.");
}), zr = class {
  static registerRuntime(t) {
    zr.runtimes.push(t), zr.runtimes.sort((e, r) => r.version - e.version);
  }
  static findRuntime(t) {
    for (const e of zr.runtimes)
      if (e.test(t))
        return e;
  }
  static setupLive2DModel(t, e, r) {
    return Ir(this, null, function* () {
      const i = new Promise((h) => t.once("textureLoaded", h)), s = new Promise((h) => t.once("modelLoaded", h)), o = Promise.all([i, s]).then(() => t.emit("ready"));
      yield E2(zr.live2DModelMiddlewares, {
        live2dModel: t,
        source: e,
        options: r || {}
      }), yield o, t.emit("load");
    });
  }
  static loadMotion(t, e, r) {
    var i, s;
    const o = (h) => t.emit("motionLoadError", e, r, h);
    try {
      const h = (i = t.definitions[e]) == null ? void 0 : i[r];
      if (!h)
        return Promise.resolve(void 0);
      t.listeners("destroy").includes(zr.releaseTasks) || t.once("destroy", zr.releaseTasks);
      let l = zr.motionTasksMap.get(t);
      l || (l = {}, zr.motionTasksMap.set(t, l));
      let c = l[e];
      c || (c = [], l[e] = c);
      const _ = t.getMotionFile(h);
      return (s = c[r]) != null || (c[r] = In.load({
        url: _,
        settings: t.settings,
        type: t.motionDataType,
        target: t
      }).then((y) => {
        var w;
        const b = (w = zr.motionTasksMap.get(t)) == null ? void 0 : w[e];
        b && delete b[r];
        const E = t.createMotion(y, e, h);
        return t.emit("motionLoaded", e, r, E), E;
      }).catch((y) => {
        dr.warn(t.tag, `Failed to load motion: ${_}
`, y), o(y);
      })), c[r];
    } catch (h) {
      dr.warn(t.tag, `Failed to load motion at "${e}"[${r}]
`, h), o(h);
    }
    return Promise.resolve(void 0);
  }
  static loadExpression(t, e) {
    var r;
    const i = (s) => t.emit("expressionLoadError", e, s);
    try {
      const s = t.definitions[e];
      if (!s)
        return Promise.resolve(void 0);
      t.listeners("destroy").includes(zr.releaseTasks) || t.once("destroy", zr.releaseTasks);
      let o = zr.expressionTasksMap.get(t);
      o || (o = [], zr.expressionTasksMap.set(t, o));
      const h = t.getExpressionFile(s);
      return (r = o[e]) != null || (o[e] = In.load({
        url: h,
        settings: t.settings,
        type: "json",
        target: t
      }).then((l) => {
        const c = zr.expressionTasksMap.get(t);
        c && delete c[e];
        const _ = t.createExpression(l, s);
        return t.emit("expressionLoaded", e, _), _;
      }).catch((l) => {
        dr.warn(t.tag, `Failed to load expression: ${h}
`, l), i(l);
      })), o[e];
    } catch (s) {
      dr.warn(t.tag, `Failed to load expression at [${e}]
`, s), i(s);
    }
    return Promise.resolve(void 0);
  }
  static releaseTasks() {
    this instanceof lh ? zr.motionTasksMap.delete(this) : zr.expressionTasksMap.delete(this);
  }
};
let Pr = zr;
Pr.runtimes = [];
Pr.urlToJSON = I2;
Pr.jsonToSettings = C2;
Pr.waitUntilReady = $2;
Pr.setupOptionals = R2;
Pr.setupEssentials = S2;
Pr.createInternalModel = N2;
Pr.live2DModelMiddlewares = [
  I2,
  C2,
  $2,
  R2,
  S2,
  N2
];
Pr.motionTasksMap = /* @__PURE__ */ new WeakMap();
Pr.expressionTasksMap = /* @__PURE__ */ new WeakMap();
lh.prototype._loadMotion = function(t, e) {
  return Pr.loadMotion(this, t, e);
};
f0.prototype._loadExpression = function(t) {
  return Pr.loadExpression(this, t);
};
class BT {
  constructor() {
    this._autoInteract = !1;
  }
  get autoInteract() {
    return this._autoInteract;
  }
  set autoInteract(e) {
    e !== this._autoInteract && (e ? this.on("pointertap", Yd, this) : this.off("pointertap", Yd, this), this._autoInteract = e);
  }
  registerInteraction(e) {
    e !== this.interactionManager && (this.unregisterInteraction(), this._autoInteract && e && (this.interactionManager = e, e.on("pointermove", qd, this)));
  }
  unregisterInteraction() {
    var e;
    this.interactionManager && ((e = this.interactionManager) == null || e.off("pointermove", qd, this), this.interactionManager = void 0);
  }
}
function Yd(t) {
  this.tap(t.data.global.x, t.data.global.y);
}
function qd(t) {
  this.focus(t.data.global.x, t.data.global.y);
}
class kT extends ih {
}
const _i = new _r(), XT = new wr();
let yn;
class L2 extends Ti {
  constructor(e) {
    super(), this.tag = "Live2DModel(uninitialized)", this.textures = [], this.transform = new kT(), this.anchor = new xn(this.onAnchorChange, this, 0, 0), this.glContextID = -1, this.elapsedTime = performance.now(), this.deltaTime = 0, this._autoUpdate = !1, this.once("modelLoaded", () => this.init(e));
  }
  static from(e, r) {
    const i = new this(r);
    return Pr.setupLive2DModel(i, e, r).then(() => i);
  }
  static fromSync(e, r) {
    const i = new this(r);
    return Pr.setupLive2DModel(i, e, r).then(r == null ? void 0 : r.onLoad).catch(r == null ? void 0 : r.onError), i;
  }
  static registerTicker(e) {
    yn = e;
  }
  get autoUpdate() {
    return this._autoUpdate;
  }
  set autoUpdate(e) {
    var r;
    yn || (yn = (r = window.PIXI) == null ? void 0 : r.Ticker), e ? this._destroyed || (yn ? (yn.shared.add(this.onTickerUpdate, this), this._autoUpdate = !0) : dr.warn(this.tag, "No Ticker registered, please call Live2DModel.registerTicker(Ticker).")) : (yn == null || yn.shared.remove(this.onTickerUpdate, this), this._autoUpdate = !1);
  }
  init(e) {
    this.tag = `Live2DModel(${this.internalModel.settings.name})`;
    const r = Object.assign({
      autoUpdate: !0,
      autoInteract: !0
    }, e);
    r.autoInteract && (this.interactive = !0), this.autoInteract = r.autoInteract, this.autoUpdate = r.autoUpdate;
  }
  onAnchorChange() {
    this.pivot.set(this.anchor.x * this.internalModel.width, this.anchor.y * this.internalModel.height);
  }
  motion(e, r, i) {
    return r === void 0 ? this.internalModel.motionManager.startRandomMotion(e, i) : this.internalModel.motionManager.startMotion(e, r, i);
  }
  expression(e) {
    return this.internalModel.motionManager.expressionManager ? e === void 0 ? this.internalModel.motionManager.expressionManager.setRandomExpression() : this.internalModel.motionManager.expressionManager.setExpression(e) : Promise.resolve(!1);
  }
  resetExpression() {
    return this.internalModel.motionManager.expressionManager ? this.internalModel.motionManager.expressionManager.resetExpression() : Promise.resolve(!1);
  }
  focus(e, r, i = !1) {
    _i.x = e, _i.y = r, this.toModelPosition(_i, _i, !0);
    let s = _i.x / this.internalModel.originalWidth * 2 - 1, o = _i.y / this.internalModel.originalHeight * 2 - 1, h = Math.atan2(o, s);
    this.internalModel.focusController.focus(Math.cos(h), -Math.sin(h), i);
  }
  tap(e, r) {
    // console.log("tap hij")
    const i = this.hitTest(e, r);
    i.length && (dr.log(this.tag, "Hit", i), this.emit("hit", i));
  }
  hitTest(e, r) {
    return _i.x = e, _i.y = r, this.toModelPosition(_i, _i), console.log(_i, this.internalModel.isHit), this.internalModel.hitTest(_i.x, _i.y);
  }
  toModelPosition(e, r = e.clone(), i) {
    return i || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.transform.worldTransform.applyInverse(e, r), this.internalModel.localTransform.applyInverse(r, r), r;
  }
  containsPoint(e) {
    return this.getBounds(!0).contains(e.x, e.y);
  }
  _calculateBounds() {
    this._bounds.addFrame(this.transform, 0, 0, this.internalModel.width, this.internalModel.height);
  }
  onTickerUpdate() {
    this.update(yn.shared.deltaMS);
  }
  update(e) {
    this.deltaTime += e, this.elapsedTime += e;
  }
  _render(e) {
    this.registerInteraction(e.plugins.interaction), e.batch.reset(), e.geometry.reset(), e.shader.reset(), e.state.reset();
    let r = !1;
    this.glContextID !== e.CONTEXT_UID && (this.glContextID = e.CONTEXT_UID, this.internalModel.updateWebGLContext(e.gl, this.glContextID), r = !0);
    for (let o = 0; o < this.textures.length; o++) {
      const h = this.textures[o];
      h.valid && ((r || !h.baseTexture._glTextures[this.glContextID]) && (e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL, this.internalModel.textureFlipY), e.texture.bind(h.baseTexture, 0)), this.internalModel.bindTexture(o, h.baseTexture._glTextures[this.glContextID].texture), h.baseTexture.touched = e.textureGC.count);
    }
    const i = e.framebuffer.viewport;
    this.internalModel.viewport = [i.x, i.y, i.width, i.height], this.deltaTime && (this.internalModel.update(this.deltaTime, this.elapsedTime), this.deltaTime = 0);
    const s = XT.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);
    this.internalModel.updateTransform(s), this.internalModel.draw(e.gl), e.state.reset(), e.texture.reset();
  }
  destroy(e) {
    this.emit("destroy"), this.autoUpdate = !1, this.unregisterInteraction(), e != null && e.texture && this.textures.forEach((r) => r.destroy(e.baseTexture)), this.internalModel.destroy(), super.destroy(e);
  }
}
w2(L2, [BT]);
const Hi = class {
  static resolveURL(t, e) {
    var r;
    const i = (r = Hi.filesMap[t]) == null ? void 0 : r[e];
    if (i === void 0)
      throw new Error("Cannot find this file from uploaded files: " + e);
    return i;
  }
  static upload(t, e) {
    return Ir(this, null, function* () {
      const r = {};
      for (const i of e.getDefinedFiles()) {
        const s = decodeURI(ji.resolve(e.url, i)), o = t.find((h) => h.webkitRelativePath === s);
        o && (r[i] = URL.createObjectURL(o));
      }
      Hi.filesMap[e._objectURL] = r;
    });
  }
  static createSettings(t) {
    return Ir(this, null, function* () {
      const e = t.find((h) => h.name.endsWith("model.json") || h.name.endsWith("model3.json"));
      if (!e)
        throw new TypeError("Settings file not found");
      const r = yield Hi.readText(e), i = JSON.parse(r);
      i.url = e.webkitRelativePath;
      const s = Pr.findRuntime(i);
      if (!s)
        throw new Error("Unknown settings JSON");
      const o = s.createModelSettings(i);
      return o._objectURL = URL.createObjectURL(e), o;
    });
  }
  static readText(t) {
    return Ir(this, null, function* () {
      return new Promise((e, r) => {
        const i = new FileReader();
        i.onload = () => e(i.result), i.onerror = r, i.readAsText(t, "utf8");
      });
    });
  }
};
let c0 = Hi;
c0.filesMap = {};
c0.factory = (t, e) => Ir(void 0, null, function* () {
  if (Array.isArray(t.source) && t.source[0] instanceof File) {
    const r = t.source;
    let i = r.settings;
    if (!i)
      i = yield Hi.createSettings(r);
    else if (!i._objectURL)
      throw new Error('"_objectURL" must be specified in ModelSettings');
    i.validateFiles(r.map((s) => encodeURI(s.webkitRelativePath))), yield Hi.upload(r, i), i.resolveURL = function(s) {
      return Hi.resolveURL(this._objectURL, s);
    }, t.source = i, t.live2dModel.once("modelLoaded", (s) => {
      s.once("destroy", function() {
        const o = this.settings._objectURL;
        if (URL.revokeObjectURL(o), Hi.filesMap[o])
          for (const h of Object.values(Hi.filesMap[o]))
            URL.revokeObjectURL(h);
        delete Hi.filesMap[o];
      });
    });
  }
  return e();
});
Pr.live2DModelMiddlewares.unshift(c0.factory);
const si = class {
  static unzip(t, e) {
    return Ir(this, null, function* () {
      const r = yield si.getFilePaths(t), i = [];
      for (const o of e.getDefinedFiles()) {
        const h = decodeURI(ji.resolve(e.url, o));
        r.includes(h) && i.push(h);
      }
      const s = yield si.getFiles(t, i);
      for (let o = 0; o < s.length; o++) {
        const h = i[o], l = s[o];
        Object.defineProperty(l, "webkitRelativePath", {
          value: h
        });
      }
      return s;
    });
  }
  static createSettings(t) {
    return Ir(this, null, function* () {
      const r = (yield si.getFilePaths(t)).find((h) => h.endsWith("model.json") || h.endsWith("model3.json"));
      if (!r)
        throw new Error("Settings file not found");
      const i = yield si.readText(t, r);
      if (!i)
        throw new Error("Empty settings file: " + r);
      const s = JSON.parse(i);
      s.url = r;
      const o = Pr.findRuntime(s);
      if (!o)
        throw new Error("Unknown settings JSON");
      return o.createModelSettings(s);
    });
  }
  static zipReader(t, e) {
    return Ir(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static getFilePaths(t) {
    return Ir(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static getFiles(t, e) {
    return Ir(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static readText(t, e) {
    return Ir(this, null, function* () {
      throw new Error("Not implemented");
    });
  }
  static releaseReader(t) {
  }
};
let fh = si;
fh.ZIP_PROTOCOL = "zip://";
fh.uid = 0;
fh.factory = (t, e) => Ir(void 0, null, function* () {
  const r = t.source;
  let i, s, o;
  if (typeof r == "string" && (r.endsWith(".zip") || r.startsWith(si.ZIP_PROTOCOL)) ? (r.startsWith(si.ZIP_PROTOCOL) ? i = r.slice(si.ZIP_PROTOCOL.length) : i = r, s = yield In.load({
    url: i,
    type: "blob",
    target: t.live2dModel
  })) : Array.isArray(r) && r.length === 1 && r[0] instanceof File && r[0].name.endsWith(".zip") && (s = r[0], i = URL.createObjectURL(s), o = r.settings), s) {
    if (!s.size)
      throw new Error("Empty zip file");
    const h = yield si.zipReader(s, i);
    o || (o = yield si.createSettings(h)), o._objectURL = si.ZIP_PROTOCOL + si.uid + "/" + o.url;
    const l = yield si.unzip(h, o);
    l.settings = o, t.source = l, i.startsWith("blob:") && t.live2dModel.once("modelLoaded", (c) => {
      c.once("destroy", function() {
        URL.revokeObjectURL(i);
      });
    }), si.releaseReader(h);
  }
  return e();
});
Pr.live2DModelMiddlewares.unshift(fh.factory);
if (!window.Live2D)
  throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");
const VT = Live2DMotion.prototype.updateParam;
Live2DMotion.prototype.updateParam = function(t, e) {
  VT.call(this, t, e), e.isFinished() && this.onFinishHandler && (this.onFinishHandler(this), delete this.onFinishHandler);
};
class HT extends AMotion {
  constructor(e) {
    super(), this.params = [], this.setFadeIn(e.fade_in > 0 ? e.fade_in : Wr.expressionFadingDuration), this.setFadeOut(e.fade_out > 0 ? e.fade_out : Wr.expressionFadingDuration), Array.isArray(e.params) && e.params.forEach((r) => {
      const i = r.calc || "add";
      if (i === "add") {
        const s = r.def || 0;
        r.val -= s;
      } else if (i === "mult") {
        const s = r.def || 1;
        r.val /= s;
      }
      this.params.push({
        calc: i,
        val: r.val,
        id: r.id
      });
    });
  }
  updateParamExe(e, r, i, s) {
    this.params.forEach((o) => {
      e.setParamFloat(o.id, o.val * i);
    });
  }
}
class zT extends f0 {
  constructor(e, r) {
    var i;
    super(e, r), this.queueManager = new MotionQueueManager(), this.definitions = (i = this.settings.expressions) != null ? i : [], this.init();
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  getExpressionIndex(e) {
    return this.definitions.findIndex((r) => r.name === e);
  }
  getExpressionFile(e) {
    return e.file;
  }
  createExpression(e, r) {
    return new HT(e);
  }
  _setExpression(e) {
    return this.queueManager.startMotion(e);
  }
  stopAllExpressions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(e, r) {
    return this.queueManager.updateParam(e);
  }
}
class jT extends lh {
  constructor(e, r) {
    super(e, r), this.groups = { idle: "idle" }, this.motionDataType = "arraybuffer", this.queueManager = new MotionQueueManager(), this.definitions = this.settings.motions, this.init(r);
  }
  init(e) {
    super.init(e), this.settings.expressions && (this.expressionManager = new zT(this.settings, e));
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  createMotion(e, r, i) {
    const s = Live2DMotion.loadMotion(e), o = r === this.groups.idle ? Wr.idleMotionFadingDuration : Wr.motionFadingDuration;
    return s.setFadeIn(i.fade_in > 0 ? i.fade_in : o), s.setFadeOut(i.fade_out > 0 ? i.fade_out : o), s;
  }
  getMotionFile(e) {
    return e.file;
  }
  getMotionName(e) {
    return e.file;
  }
  getSoundFile(e) {
    return e.sound;
  }
  _startMotion(e, r) {
    return e.onFinishHandler = r, this.queueManager.stopAllMotions(), this.queueManager.startMotion(e);
  }
  _stopAllMotions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(e, r) {
    return this.queueManager.updateParam(e);
  }
  destroy() {
    super.destroy(), this.queueManager = void 0;
  }
}
class WT {
  constructor(e) {
    this.coreModel = e, this.blinkInterval = 4e3, this.closingDuration = 100, this.closedDuration = 50, this.openingDuration = 150, this.eyeState = 0, this.eyeParamValue = 1, this.closedTimer = 0, this.nextBlinkTimeLeft = this.blinkInterval, this.leftParam = e.getParamIndex("PARAM_EYE_L_OPEN"), this.rightParam = e.getParamIndex("PARAM_EYE_R_OPEN");
  }
  setEyeParams(e) {
    this.eyeParamValue = qa(e, 0, 1), this.coreModel.setParamFloat(this.leftParam, this.eyeParamValue), this.coreModel.setParamFloat(this.rightParam, this.eyeParamValue);
  }
  update(e) {
    switch (this.eyeState) {
      case 0:
        this.nextBlinkTimeLeft -= e, this.nextBlinkTimeLeft < 0 && (this.eyeState = 1, this.nextBlinkTimeLeft = this.blinkInterval + this.closingDuration + this.closedDuration + this.openingDuration + CT(0, 2e3));
        break;
      case 1:
        this.setEyeParams(this.eyeParamValue + e / this.closingDuration), this.eyeParamValue <= 0 && (this.eyeState = 2, this.closedTimer = 0);
        break;
      case 2:
        this.closedTimer += e, this.closedTimer >= this.closedDuration && (this.eyeState = 3);
        break;
      case 3:
        this.setEyeParams(this.eyeParamValue + e / this.openingDuration), this.eyeParamValue >= 1 && (this.eyeState = 0);
    }
  }
}
const Xn = new Float32Array([
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1,
  0,
  0,
  0,
  0,
  1
]);
class YT extends P2 {
  constructor(e, r, i) {
    super(), this.textureFlipY = !0, this.drawDataCount = 0, this.disableCulling = !1, this.coreModel = e, this.settings = r, this.motionManager = new jT(r, i), this.eyeBlink = new WT(e), this.eyeballXParamIndex = e.getParamIndex("PARAM_EYE_BALL_X"), this.eyeballYParamIndex = e.getParamIndex("PARAM_EYE_BALL_Y"), this.angleXParamIndex = e.getParamIndex("PARAM_ANGLE_X"), this.angleYParamIndex = e.getParamIndex("PARAM_ANGLE_Y"), this.angleZParamIndex = e.getParamIndex("PARAM_ANGLE_Z"), this.bodyAngleXParamIndex = e.getParamIndex("PARAM_BODY_ANGLE_X"), this.breathParamIndex = e.getParamIndex("PARAM_BREATH"), this.init();
  }
  init() {
    super.init(), this.settings.initParams && this.settings.initParams.forEach(({ id: o, value: h }) => this.coreModel.setParamFloat(o, h)), this.settings.initOpacities && this.settings.initOpacities.forEach(({ id: o, value: h }) => this.coreModel.setPartsOpacity(o, h)), this.coreModel.saveParam();
    const e = this.coreModel.getModelContext()._$aS;
    e != null && e.length && (this.drawDataCount = e.length);
    let r = this.coreModel.drawParamWebGL.culling;
    Object.defineProperty(this.coreModel.drawParamWebGL, "culling", {
      set: (o) => r = o,
      get: () => this.disableCulling ? !1 : r
    });
    const i = this.coreModel.getModelContext().clipManager, s = i.setupClip;
    i.setupClip = (o, h) => {
      s.call(i, o, h), h.gl.viewport(...this.viewport);
    };
  }
  getSize() {
    return [this.coreModel.getCanvasWidth(), this.coreModel.getCanvasHeight()];
  }
  getLayout() {
    const e = {};
    if (this.settings.layout)
      for (const r of Object.keys(this.settings.layout)) {
        let i = r;
        r === "center_x" ? i = "centerX" : r === "center_y" && (i = "centerY"), e[i] = this.settings.layout[r];
      }
    return e;
  }
  updateWebGLContext(e, r) {
    const i = this.coreModel.drawParamWebGL;
    i.firstDraw = !0, i.setGL(e), i.glno = r;
    for (const h in i)
      i.hasOwnProperty(h) && i[h] instanceof WebGLBuffer && (i[h] = null);
    const s = this.coreModel.getModelContext().clipManager;
    s.curFrameNo = r;
    const o = e.getParameter(e.FRAMEBUFFER_BINDING);
    s.getMaskRenderTexture(), e.bindFramebuffer(e.FRAMEBUFFER, o);
  }
  bindTexture(e, r) {
    this.coreModel.setTexture(e, r);
  }
  getHitAreaDefs() {
    var e;
    return ((e = this.settings.hitAreas) == null ? void 0 : e.map((r) => ({
      id: r.id,
      name: r.name,
      index: this.coreModel.getDrawDataIndex(r.id)
    }))) || [];
  }
  getDrawableIDs() {
    const e = this.coreModel.getModelContext(), r = [];
    for (let i = 0; i < this.drawDataCount; i++) {
      const s = e.getDrawData(i);
      s && r.push(s.getDrawDataID().id);
    }
    return r;
  }
  getDrawableIndex(e) {
    return this.coreModel.getDrawDataIndex(e);
  }
  getDrawableVertices(e) {
    if (typeof e == "string" && (e = this.coreModel.getDrawDataIndex(e), e === -1))
      throw new TypeError("Unable to find drawable ID: " + e);
    return this.coreModel.getTransformedPoints(e).slice();
  }
  update(e, r) {
    var i, s, o, h;
    super.update(e, r);
    const l = this.coreModel;
    this.emit("beforeMotionUpdate");
    const c = this.motionManager.update(this.coreModel, r);
    this.emit("afterMotionUpdate"), l.saveParam(), (i = this.motionManager.expressionManager) == null || i.update(l, r), c || (s = this.eyeBlink) == null || s.update(e), this.updateFocus(), this.updateNaturalMovements(e, r), (o = this.physics) == null || o.update(r), (h = this.pose) == null || h.update(e), this.emit("beforeModelUpdate"), l.update(), l.loadParam();
  }
  updateFocus() {
    this.coreModel.addToParamFloat(this.eyeballXParamIndex, this.focusController.x), this.coreModel.addToParamFloat(this.eyeballYParamIndex, this.focusController.y), this.coreModel.addToParamFloat(this.angleXParamIndex, this.focusController.x * 30), this.coreModel.addToParamFloat(this.angleYParamIndex, this.focusController.y * 30), this.coreModel.addToParamFloat(this.angleZParamIndex, this.focusController.x * this.focusController.y * -30), this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, this.focusController.x * 10);
  }
  updateNaturalMovements(e, r) {
    const i = r / 1e3 * 2 * Math.PI;
    this.coreModel.addToParamFloat(this.angleXParamIndex, 15 * Math.sin(i / 6.5345) * 0.5), this.coreModel.addToParamFloat(this.angleYParamIndex, 8 * Math.sin(i / 3.5345) * 0.5), this.coreModel.addToParamFloat(this.angleZParamIndex, 10 * Math.sin(i / 5.5345) * 0.5), this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, 4 * Math.sin(i / 15.5345) * 0.5), this.coreModel.setParamFloat(this.breathParamIndex, 0.5 + 0.5 * Math.sin(i / 3.2345));
  }
  draw(e) {
    const r = this.disableCulling;
    e.getParameter(e.FRAMEBUFFER_BINDING) && (this.disableCulling = !0);
    const i = this.drawingMatrix;
    Xn[0] = i.a, Xn[1] = i.b, Xn[4] = i.c, Xn[5] = i.d, Xn[12] = i.tx, Xn[13] = i.ty, this.coreModel.setMatrix(Xn), this.coreModel.draw(), this.disableCulling = r;
  }
  destroy() {
    super.destroy(), this.coreModel = void 0;
  }
}
class wo extends hh {
  constructor(e) {
    if (super(e), this.motions = {}, !wo.isValidJSON(e))
      throw new TypeError("Invalid JSON.");
    this.moc = e.model, uo("string", e, this, "textures", "textures"), this.copy(e);
  }
  static isValidJSON(e) {
    var r;
    return !!e && typeof e.model == "string" && ((r = e.textures) == null ? void 0 : r.length) > 0 && e.textures.every((i) => typeof i == "string");
  }
  copy(e) {
    lo("string", e, this, "name", "name"), lo("string", e, this, "pose", "pose"), lo("string", e, this, "physics", "physics"), lo("object", e, this, "layout", "layout"), lo("object", e, this, "motions", "motions"), uo("object", e, this, "hit_areas", "hitAreas"), uo("object", e, this, "expressions", "expressions"), uo("object", e, this, "init_params", "initParams"), uo("object", e, this, "init_opacities", "initOpacities");
  }
  replaceFiles(e) {
    super.replaceFiles(e);
    for (const [r, i] of Object.entries(this.motions))
      for (let s = 0; s < i.length; s++)
        i[s].file = e(i[s].file, `motions.${r}[${s}].file`), i[s].sound !== void 0 && (i[s].sound = e(i[s].sound, `motions.${r}[${s}].sound`));
    if (this.expressions)
      for (let r = 0; r < this.expressions.length; r++)
        this.expressions[r].file = e(this.expressions[r].file, `expressions[${r}].file`);
  }
}
const qT = {
  x: PhysicsHair.Src.SRC_TO_X,
  y: PhysicsHair.Src.SRC_TO_Y,
  angle: PhysicsHair.Src.SRC_TO_G_ANGLE
}, ZT = {
  x: PhysicsHair.Src.SRC_TO_X,
  y: PhysicsHair.Src.SRC_TO_Y,
  angle: PhysicsHair.Src.SRC_TO_G_ANGLE
};
class JT {
  constructor(e, r) {
    this.coreModel = e, this.physicsHairs = [], r.physics_hair && (this.physicsHairs = r.physics_hair.map((i) => {
      const s = new PhysicsHair();
      return s.setup(i.setup.length, i.setup.regist, i.setup.mass), i.src.forEach(({ id: o, ptype: h, scale: l, weight: c }) => {
        const _ = qT[h];
        _ && s.addSrcParam(_, o, l, c);
      }), i.targets.forEach(({ id: o, ptype: h, scale: l, weight: c }) => {
        const _ = ZT[h];
        _ && s.addTargetParam(_, o, l, c);
      }), s;
    }));
  }
  update(e) {
    this.physicsHairs.forEach((r) => r.update(this.coreModel, e));
  }
}
class Zd {
  constructor(e) {
    this.id = e, this.paramIndex = -1, this.partsIndex = -1, this.link = [];
  }
  initIndex(e) {
    this.paramIndex = e.getParamIndex("VISIBLE:" + this.id), this.partsIndex = e.getPartsDataIndex(PartsDataID.getID(this.id)), e.setParamFloat(this.paramIndex, 1);
  }
}
class QT {
  constructor(e, r) {
    this.coreModel = e, this.opacityAnimDuration = 500, this.partsGroups = [], r.parts_visible && (this.partsGroups = r.parts_visible.map(({ group: i }) => i.map(({ id: s, link: o }) => {
      const h = new Zd(s);
      return o && (h.link = o.map((l) => new Zd(l))), h;
    })), this.init());
  }
  init() {
    this.partsGroups.forEach((e) => {
      e.forEach((r) => {
        if (r.initIndex(this.coreModel), r.paramIndex >= 0) {
          const i = this.coreModel.getParamFloat(r.paramIndex) !== 0;
          this.coreModel.setPartsOpacity(r.partsIndex, i ? 1 : 0), this.coreModel.setParamFloat(r.paramIndex, i ? 1 : 0), r.link.length > 0 && r.link.forEach((s) => s.initIndex(this.coreModel));
        }
      });
    });
  }
  normalizePartsOpacityGroup(e, r) {
    const i = this.coreModel, s = 0.5, o = 0.15;
    let h = 1, l = e.findIndex(({ paramIndex: c, partsIndex: _ }) => _ >= 0 && i.getParamFloat(c) !== 0);
    if (l >= 0) {
      const c = i.getPartsOpacity(e[l].partsIndex);
      h = qa(c + r / this.opacityAnimDuration, 0, 1);
    } else
      l = 0, h = 1;
    e.forEach(({ partsIndex: c }, _) => {
      if (c >= 0)
        if (l == _)
          i.setPartsOpacity(c, h);
        else {
          let y = i.getPartsOpacity(c), w;
          h < s ? w = h * (s - 1) / s + 1 : w = (1 - h) * s / (1 - s), (1 - w) * (1 - h) > o && (w = 1 - o / (1 - h)), y > w && (y = w), i.setPartsOpacity(c, y);
        }
    });
  }
  copyOpacity(e) {
    const r = this.coreModel;
    e.forEach(({ partsIndex: i, link: s }) => {
      if (i >= 0 && s) {
        const o = r.getPartsOpacity(i);
        s.forEach(({ partsIndex: h }) => {
          h >= 0 && r.setPartsOpacity(h, o);
        });
      }
    });
  }
  update(e) {
    this.partsGroups.forEach((r) => {
      this.normalizePartsOpacityGroup(r, e), this.copyOpacity(r);
    });
  }
}
Pr.registerRuntime({
  version: 2,
  test(t) {
    return t instanceof wo || wo.isValidJSON(t);
  },
  ready() {
    return Promise.resolve();
  },
  isValidMoc(t) {
    if (t.byteLength < 3)
      return !1;
    const e = new Int8Array(t, 0, 3);
    return String.fromCharCode(...e) === "moc";
  },
  createModelSettings(t) {
    return new wo(t);
  },
  createCoreModel(t) {
    const e = Live2DModelWebGL.loadModel(t), r = Live2D.getError();
    if (r)
      throw r;
    return e;
  },
  createInternalModel(t, e, r) {
    return new YT(t, e, r);
  },
  createPose(t, e) {
    return new QT(t, e);
  },
  createPhysics(t, e) {
    return new JT(t, e);
  }
});
if (!window.Live2DCubismCore)
  throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");
class Ge {
  constructor(e, r) {
    this.x = e || 0, this.y = r || 0;
  }
  add(e) {
    const r = new Ge(0, 0);
    return r.x = this.x + e.x, r.y = this.y + e.y, r;
  }
  substract(e) {
    const r = new Ge(0, 0);
    return r.x = this.x - e.x, r.y = this.y - e.y, r;
  }
  multiply(e) {
    const r = new Ge(0, 0);
    return r.x = this.x * e.x, r.y = this.y * e.y, r;
  }
  multiplyByScaler(e) {
    return this.multiply(new Ge(e, e));
  }
  division(e) {
    const r = new Ge(0, 0);
    return r.x = this.x / e.x, r.y = this.y / e.y, r;
  }
  divisionByScalar(e) {
    return this.division(new Ge(e, e));
  }
  getLength() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  getDistanceWith(e) {
    return Math.sqrt((this.x - e.x) * (this.x - e.x) + (this.y - e.y) * (this.y - e.y));
  }
  dot(e) {
    return this.x * e.x + this.y * e.y;
  }
  normalize() {
    const e = Math.pow(this.x * this.x + this.y * this.y, 0.5);
    this.x = this.x / e, this.y = this.y / e;
  }
  isEqual(e) {
    return this.x == e.x && this.y == e.y;
  }
  isNotEqual(e) {
    return !this.isEqual(e);
  }
}
const Ga = class {
  static range(t, e, r) {
    return t < e ? t = e : t > r && (t = r), t;
  }
  static sin(t) {
    return Math.sin(t);
  }
  static cos(t) {
    return Math.cos(t);
  }
  static abs(t) {
    return Math.abs(t);
  }
  static sqrt(t) {
    return Math.sqrt(t);
  }
  static cbrt(t) {
    if (t === 0)
      return t;
    let e = t;
    const r = e < 0;
    r && (e = -e);
    let i;
    return e === 1 / 0 ? i = 1 / 0 : (i = Math.exp(Math.log(e) / 3), i = (e / (i * i) + 2 * i) / 3), r ? -i : i;
  }
  static getEasingSine(t) {
    return t < 0 ? 0 : t > 1 ? 1 : 0.5 - 0.5 * this.cos(t * Math.PI);
  }
  static max(t, e) {
    return t > e ? t : e;
  }
  static min(t, e) {
    return t > e ? e : t;
  }
  static degreesToRadian(t) {
    return t / 180 * Math.PI;
  }
  static radianToDegrees(t) {
    return t * 180 / Math.PI;
  }
  static directionToRadian(t, e) {
    const r = Math.atan2(e.y, e.x), i = Math.atan2(t.y, t.x);
    let s = r - i;
    for (; s < -Math.PI; )
      s += Math.PI * 2;
    for (; s > Math.PI; )
      s -= Math.PI * 2;
    return s;
  }
  static directionToDegrees(t, e) {
    const r = this.directionToRadian(t, e);
    let i = this.radianToDegrees(r);
    return e.x - t.x > 0 && (i = -i), i;
  }
  static radianToDirection(t) {
    const e = new Ge();
    return e.x = this.sin(t), e.y = this.cos(t), e;
  }
  static quadraticEquation(t, e, r) {
    return this.abs(t) < Ga.Epsilon ? this.abs(e) < Ga.Epsilon ? -r : -r / e : -(e + this.sqrt(e * e - 4 * t * r)) / (2 * t);
  }
  static cardanoAlgorithmForBezier(t, e, r, i) {
    if (this.sqrt(t) < Ga.Epsilon)
      return this.range(this.quadraticEquation(e, r, i), 0, 1);
    const s = e / t, o = r / t, h = i / t, l = (3 * o - s * s) / 3, c = l / 3, _ = (2 * s * s * s - 9 * s * o + 27 * h) / 27, y = _ / 2, w = y * y + c * c * c, b = 0.5, E = b + 0.01;
    if (w < 0) {
      const Y = -l / 3, J = Y * Y * Y, it = this.sqrt(J), st = -_ / (2 * it), K = this.range(st, -1, 1), At = Math.acos(K), dt = 2 * this.cbrt(it), Et = dt * this.cos(At / 3) - s / 3;
      if (this.abs(Et - b) < E)
        return this.range(Et, 0, 1);
      const Rt = dt * this.cos((At + 2 * Math.PI) / 3) - s / 3;
      if (this.abs(Rt - b) < E)
        return this.range(Rt, 0, 1);
      const Ft = dt * this.cos((At + 4 * Math.PI) / 3) - s / 3;
      return this.range(Ft, 0, 1);
    }
    if (w == 0) {
      let Y;
      y < 0 ? Y = this.cbrt(-y) : Y = -this.cbrt(y);
      const J = 2 * Y - s / 3;
      if (this.abs(J - b) < E)
        return this.range(J, 0, 1);
      const it = -Y - s / 3;
      return this.range(it, 0, 1);
    }
    const T = this.sqrt(w), P = this.cbrt(T - y), O = this.cbrt(T + y), H = P - O - s / 3;
    return this.range(H, 0, 1);
  }
  constructor() {
  }
};
let gr = Ga;
gr.Epsilon = 1e-5;
class bi {
  constructor() {
    this._tr = new Float32Array(16), this.loadIdentity();
  }
  static multiply(e, r, i) {
    const s = new Float32Array([
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ]), o = 4;
    for (let h = 0; h < o; ++h)
      for (let l = 0; l < o; ++l)
        for (let c = 0; c < o; ++c)
          s[l + h * 4] += e[c + h * 4] * r[l + c * 4];
    for (let h = 0; h < 16; ++h)
      i[h] = s[h];
  }
  loadIdentity() {
    const e = new Float32Array([
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ]);
    this.setMatrix(e);
  }
  setMatrix(e) {
    for (let r = 0; r < 16; ++r)
      this._tr[r] = e[r];
  }
  getArray() {
    return this._tr;
  }
  getScaleX() {
    return this._tr[0];
  }
  getScaleY() {
    return this._tr[5];
  }
  getTranslateX() {
    return this._tr[12];
  }
  getTranslateY() {
    return this._tr[13];
  }
  transformX(e) {
    return this._tr[0] * e + this._tr[12];
  }
  transformY(e) {
    return this._tr[5] * e + this._tr[13];
  }
  invertTransformX(e) {
    return (e - this._tr[12]) / this._tr[0];
  }
  invertTransformY(e) {
    return (e - this._tr[13]) / this._tr[5];
  }
  translateRelative(e, r) {
    const i = new Float32Array([
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      e,
      r,
      0,
      1
    ]);
    bi.multiply(i, this._tr, this._tr);
  }
  translate(e, r) {
    this._tr[12] = e, this._tr[13] = r;
  }
  translateX(e) {
    this._tr[12] = e;
  }
  translateY(e) {
    this._tr[13] = e;
  }
  scaleRelative(e, r) {
    const i = new Float32Array([
      e,
      0,
      0,
      0,
      0,
      r,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ]);
    bi.multiply(i, this._tr, this._tr);
  }
  scale(e, r) {
    this._tr[0] = e, this._tr[5] = r;
  }
  multiplyByMatrix(e) {
    bi.multiply(e.getArray(), this._tr, this._tr);
  }
  clone() {
    const e = new bi();
    for (let r = 0; r < this._tr.length; r++)
      e._tr[r] = this._tr[r];
    return e;
  }
}
class d0 {
  initialize(e) {
    this._model = e;
  }
  drawModel() {
    this.getModel() != null && this.doDrawModel();
  }
  setMvpMatrix(e) {
    this._mvpMatrix4x4.setMatrix(e.getArray());
  }
  getMvpMatrix() {
    return this._mvpMatrix4x4;
  }
  setModelColor(e, r, i, s) {
    e < 0 ? e = 0 : e > 1 && (e = 1), r < 0 ? r = 0 : r > 1 && (r = 1), i < 0 ? i = 0 : i > 1 && (i = 1), s < 0 ? s = 0 : s > 1 && (s = 1), this._modelColor.R = e, this._modelColor.G = r, this._modelColor.B = i, this._modelColor.A = s;
  }
  getModelColor() {
    return Object.assign({}, this._modelColor);
  }
  setIsPremultipliedAlpha(e) {
    this._isPremultipliedAlpha = e;
  }
  isPremultipliedAlpha() {
    return this._isPremultipliedAlpha;
  }
  setIsCulling(e) {
    this._isCulling = e;
  }
  isCulling() {
    return this._isCulling;
  }
  setAnisotropy(e) {
    this._anisortopy = e;
  }
  getAnisotropy() {
    return this._anisortopy;
  }
  getModel() {
    return this._model;
  }
  constructor() {
    this._isCulling = !1, this._isPremultipliedAlpha = !1, this._anisortopy = 0, this._modelColor = new vo(), this._mvpMatrix4x4 = new bi(), this._mvpMatrix4x4.loadIdentity();
  }
}
var wn = /* @__PURE__ */ ((t) => (t[t.CubismBlendMode_Normal = 0] = "CubismBlendMode_Normal", t[t.CubismBlendMode_Additive = 1] = "CubismBlendMode_Additive", t[t.CubismBlendMode_Multiplicative = 2] = "CubismBlendMode_Multiplicative", t))(wn || {});
class vo {
  constructor() {
    this.R = 1, this.G = 1, this.B = 1, this.A = 1;
  }
}
let ki = !1, xs = !1, Ts;
const Zh = {
  vertexOffset: 0,
  vertexStep: 2
};
class zo {
  static startUp(e) {
    if (ki)
      return fo("CubismFramework.startUp() is already done."), ki;
    if (Live2DCubismCore._isStarted)
      return ki = !0, !0;
    if (Live2DCubismCore._isStarted = !0, Ts = e, Ts && Live2DCubismCore.Logging.csmSetLogFunction(Ts.logFunction), ki = !0, ki) {
      const r = Live2DCubismCore.Version.csmGetVersion(), i = (r & 4278190080) >> 24, s = (r & 16711680) >> 16, o = r & 65535, h = r;
      fo("Live2D Cubism Core version: {0}.{1}.{2} ({3})", ("00" + i).slice(-2), ("00" + s).slice(-2), ("0000" + o).slice(-4), h);
    }
    return fo("CubismFramework.startUp() is complete."), ki;
  }
  static cleanUp() {
    ki = !1, xs = !1, Ts = void 0;
  }
  static initialize() {
    if (!ki) {
      mo("CubismFramework is not started.");
      return;
    }
    if (xs) {
      mo("CubismFramework.initialize() skipped, already initialized.");
      return;
    }
    xs = !0, fo("CubismFramework.initialize() is complete.");
  }
  static dispose() {
    if (!ki) {
      mo("CubismFramework is not started.");
      return;
    }
    if (!xs) {
      mo("CubismFramework.dispose() skipped, not initialized.");
      return;
    }
    d0.staticRelease(), xs = !1, fo("CubismFramework.dispose() is complete.");
  }
  static isStarted() {
    return ki;
  }
  static isInitialized() {
    return xs;
  }
  static coreLogFunction(e) {
    Live2DCubismCore.Logging.csmGetLogFunction() && Live2DCubismCore.Logging.csmGetLogFunction()(e);
  }
  static getLoggingLevel() {
    return Ts != null ? Ts.loggingLevel : us.LogLevel_Off;
  }
  constructor() {
  }
}
var us = /* @__PURE__ */ ((t) => (t[t.LogLevel_Verbose = 0] = "LogLevel_Verbose", t[t.LogLevel_Debug = 1] = "LogLevel_Debug", t[t.LogLevel_Info = 2] = "LogLevel_Info", t[t.LogLevel_Warning = 3] = "LogLevel_Warning", t[t.LogLevel_Error = 4] = "LogLevel_Error", t[t.LogLevel_Off = 5] = "LogLevel_Off", t))(us || {});
const Sa = () => {
};
function Jd(t, ...e) {
  ch.print(us.LogLevel_Debug, "[CSM][D]" + t + `
`, e);
}
function fo(t, ...e) {
  ch.print(us.LogLevel_Info, "[CSM][I]" + t + `
`, e);
}
function mo(t, ...e) {
  ch.print(us.LogLevel_Warning, "[CSM][W]" + t + `
`, e);
}
function As(t, ...e) {
  ch.print(us.LogLevel_Error, "[CSM][E]" + t + `
`, e);
}
class ch {
  static print(e, r, i) {
    if (e < zo.getLoggingLevel())
      return;
    const s = zo.coreLogFunction;
    if (!s)
      return;
    const o = r.replace(/{(\d+)}/g, (h, l) => i[l]);
    s(o);
  }
  static dumpBytes(e, r, i) {
    for (let s = 0; s < i; s++)
      s % 16 == 0 && s > 0 ? this.print(e, `
`) : s % 8 == 0 && s > 0 && this.print(e, "  "), this.print(e, "{0} ", [r[s] & 255]);
    this.print(e, `
`);
  }
  constructor() {
  }
}
class O2 {
  constructor() {
    this._fadeInSeconds = -1, this._fadeOutSeconds = -1, this._weight = 1, this._offsetSeconds = 0, this._firedEventValues = [];
  }
  release() {
    this._weight = 0;
  }
  updateParameters(e, r, i) {
    if (!r.isAvailable() || r.isFinished())
      return;
    if (!r.isStarted()) {
      r.setIsStarted(!0), r.setStartTime(i - this._offsetSeconds), r.setFadeInStartTime(i);
      const l = this.getDuration();
      r.getEndTime() < 0 && r.setEndTime(l <= 0 ? -1 : r.getStartTime() + l);
    }
    let s = this._weight;
    const o = this._fadeInSeconds == 0 ? 1 : gr.getEasingSine((i - r.getFadeInStartTime()) / this._fadeInSeconds), h = this._fadeOutSeconds == 0 || r.getEndTime() < 0 ? 1 : gr.getEasingSine((r.getEndTime() - i) / this._fadeOutSeconds);
    s = s * o * h, r.setState(i, s), this.doUpdateParameters(e, i, s, r), r.getEndTime() > 0 && r.getEndTime() < i && r.setIsFinished(!0);
  }
  setFadeInTime(e) {
    this._fadeInSeconds = e;
  }
  setFadeOutTime(e) {
    this._fadeOutSeconds = e;
  }
  getFadeOutTime() {
    return this._fadeOutSeconds;
  }
  getFadeInTime() {
    return this._fadeInSeconds;
  }
  setWeight(e) {
    this._weight = e;
  }
  getWeight() {
    return this._weight;
  }
  getDuration() {
    return -1;
  }
  getLoopDuration() {
    return -1;
  }
  setOffsetTime(e) {
    this._offsetSeconds = e;
  }
  getFiredEvent(e, r) {
    return this._firedEventValues;
  }
  setFinishedMotionHandler(e) {
    this._onFinishedMotion = e;
  }
  getFinishedMotionHandler() {
    return this._onFinishedMotion;
  }
}
const Qd = 1;
class _0 extends O2 {
  constructor() {
    super(), this._parameters = [];
  }
  static create(e) {
    const r = new _0(), i = e.FadeInTime, s = e.FadeOutTime;
    r.setFadeInTime(i !== void 0 ? i : Qd), r.setFadeOutTime(s !== void 0 ? s : Qd);
    const o = e.Parameters || [];
    for (let h = 0; h < o.length; ++h) {
      const l = o[h], c = l.Id, _ = l.Value;
      let y;
      switch (l.Blend) {
        case "Multiply":
          y = qn.ExpressionBlendType_Multiply;
          break;
        case "Overwrite":
          y = qn.ExpressionBlendType_Overwrite;
          break;
        case "Add":
        default:
          y = qn.ExpressionBlendType_Add;
          break;
      }
      const w = {
        parameterId: c,
        blendType: y,
        value: _
      };
      r._parameters.push(w);
    }
    return r;
  }
  doUpdateParameters(e, r, i, s) {
    for (let o = 0; o < this._parameters.length; ++o) {
      const h = this._parameters[o];
      switch (h.blendType) {
        case qn.ExpressionBlendType_Add: {
          e.addParameterValueById(h.parameterId, h.value, i);
          break;
        }
        case qn.ExpressionBlendType_Multiply: {
          e.multiplyParameterValueById(h.parameterId, h.value, i);
          break;
        }
        case qn.ExpressionBlendType_Overwrite: {
          e.setParameterValueById(h.parameterId, h.value, i);
          break;
        }
      }
    }
  }
}
var qn = /* @__PURE__ */ ((t) => (t[t.ExpressionBlendType_Add = 0] = "ExpressionBlendType_Add", t[t.ExpressionBlendType_Multiply = 1] = "ExpressionBlendType_Multiply", t[t.ExpressionBlendType_Overwrite = 2] = "ExpressionBlendType_Overwrite", t))(qn || {});
class KT {
  constructor() {
    this._autoDelete = !1, this._available = !0, this._finished = !1, this._started = !1, this._startTimeSeconds = -1, this._fadeInStartTimeSeconds = 0, this._endTimeSeconds = -1, this._stateTimeSeconds = 0, this._stateWeight = 0, this._lastEventCheckSeconds = 0, this._motionQueueEntryHandle = this, this._fadeOutSeconds = 0, this._isTriggeredFadeOut = !1;
  }
  release() {
    this._autoDelete && this._motion && this._motion.release();
  }
  setFadeOut(e) {
    this._fadeOutSeconds = e, this._isTriggeredFadeOut = !0;
  }
  startFadeOut(e, r) {
    const i = r + e;
    this._isTriggeredFadeOut = !0, (this._endTimeSeconds < 0 || i < this._endTimeSeconds) && (this._endTimeSeconds = i);
  }
  isFinished() {
    return this._finished;
  }
  isStarted() {
    return this._started;
  }
  getStartTime() {
    return this._startTimeSeconds;
  }
  getFadeInStartTime() {
    return this._fadeInStartTimeSeconds;
  }
  getEndTime() {
    return this._endTimeSeconds;
  }
  setStartTime(e) {
    this._startTimeSeconds = e;
  }
  setFadeInStartTime(e) {
    this._fadeInStartTimeSeconds = e;
  }
  setEndTime(e) {
    this._endTimeSeconds = e;
  }
  setIsFinished(e) {
    this._finished = e;
  }
  setIsStarted(e) {
    this._started = e;
  }
  isAvailable() {
    return this._available;
  }
  setIsAvailable(e) {
    this._available = e;
  }
  setState(e, r) {
    this._stateTimeSeconds = e, this._stateWeight = r;
  }
  getStateTime() {
    return this._stateTimeSeconds;
  }
  getStateWeight() {
    return this._stateWeight;
  }
  getLastCheckEventSeconds() {
    return this._lastEventCheckSeconds;
  }
  setLastCheckEventSeconds(e) {
    this._lastEventCheckSeconds = e;
  }
  isTriggeredFadeOut() {
    return this._isTriggeredFadeOut;
  }
  getFadeOutSeconds() {
    return this._fadeOutSeconds;
  }
}
class F2 {
  constructor() {
    this._userTimeSeconds = 0, this._eventCustomData = null, this._motions = [];
  }
  release() {
    for (let e = 0; e < this._motions.length; ++e)
      this._motions[e] && this._motions[e].release();
    this._motions = void 0;
  }
  startMotion(e, r, i) {
    if (e == null)
      return tA;
    let s;
    for (let o = 0; o < this._motions.length; ++o)
      s = this._motions[o], s != null && s.setFadeOut(s._motion.getFadeOutTime());
    return s = new KT(), s._autoDelete = r, s._motion = e, this._motions.push(s), s._motionQueueEntryHandle;
  }
  isFinished() {
    let e = 0;
    for (; e < this._motions.length; ) {
      const r = this._motions[e];
      if (r == null) {
        this._motions.splice(e, 1);
        continue;
      }
      if (r._motion == null) {
        r.release(), this._motions.splice(e, 1);
        continue;
      }
      if (!r.isFinished())
        return !1;
      e++;
    }
    return !0;
  }
  isFinishedByHandle(e) {
    for (let r = 0; r < this._motions.length; r++) {
      const i = this._motions[r];
      if (i != null && i._motionQueueEntryHandle == e && !i.isFinished())
        return !1;
    }
    return !0;
  }
  stopAllMotions() {
    for (let e = 0; e < this._motions.length; e++) {
      const r = this._motions[e];
      r != null && r.release();
    }
    this._motions = [];
  }
  getCubismMotionQueueEntry(e) {
    return this._motions.find((r) => r != null && r._motionQueueEntryHandle == e);
  }
  setEventCallback(e, r = null) {
    this._eventCallBack = e, this._eventCustomData = r;
  }
  doUpdateMotion(e, r) {
    let i = !1, s = 0;
    for (; s < this._motions.length; ) {
      const o = this._motions[s];
      if (o == null) {
        this._motions.splice(s, 1);
        continue;
      }
      const h = o._motion;
      if (h == null) {
        o.release(), this._motions.splice(s, 1);
        continue;
      }
      h.updateParameters(e, o, r), i = !0;
      const l = h.getFiredEvent(o.getLastCheckEventSeconds() - o.getStartTime(), r - o.getStartTime());
      for (let c = 0; c < l.length; ++c)
        this._eventCallBack(this, l[c], this._eventCustomData);
      o.setLastCheckEventSeconds(r), o.isFinished() ? (o.release(), this._motions.splice(s, 1)) : (o.isTriggeredFadeOut() && o.startFadeOut(o.getFadeOutSeconds(), r), s++);
    }
    return i;
  }
}
const tA = -1;
class eA extends f0 {
  constructor(e, r) {
    var i;
    super(e, r), this.queueManager = new F2(), this.definitions = (i = e.expressions) != null ? i : [], this.init();
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  getExpressionIndex(e) {
    return this.definitions.findIndex((r) => r.Name === e);
  }
  getExpressionFile(e) {
    return e.File;
  }
  createExpression(e, r) {
    return _0.create(e);
  }
  _setExpression(e) {
    return this.queueManager.startMotion(e, !1, performance.now());
  }
  stopAllExpressions() {
    this.queueManager.stopAllMotions();
  }
  updateParameters(e, r) {
    return this.queueManager.doUpdateMotion(e, r);
  }
}
class M2 {
  constructor(e) {
    this.groups = e.Groups, this.hitAreas = e.HitAreas, this.layout = e.Layout, this.moc = e.FileReferences.Moc, this.expressions = e.FileReferences.Expressions, this.motions = e.FileReferences.Motions, this.textures = e.FileReferences.Textures, this.physics = e.FileReferences.Physics, this.pose = e.FileReferences.Pose;
  }
  getEyeBlinkParameters() {
    var e, r;
    return (r = (e = this.groups) == null ? void 0 : e.find((i) => i.Name === "EyeBlink")) == null ? void 0 : r.Ids;
  }
  getLipSyncParameters() {
    var e, r;
    return (r = (e = this.groups) == null ? void 0 : e.find((i) => i.Name === "LipSync")) == null ? void 0 : r.Ids;
  }
}
class Cs extends hh {
  constructor(e) {
    if (super(e), !Cs.isValidJSON(e))
      throw new TypeError("Invalid JSON.");
    Object.assign(this, new M2(e));
  }
  static isValidJSON(e) {
    var r;
    return !!(e != null && e.FileReferences) && typeof e.FileReferences.Moc == "string" && ((r = e.FileReferences.Textures) == null ? void 0 : r.length) > 0 && e.FileReferences.Textures.every((i) => typeof i == "string");
  }
  replaceFiles(e) {
    if (super.replaceFiles(e), this.motions)
      for (const [r, i] of Object.entries(this.motions))
        for (let s = 0; s < i.length; s++)
          i[s].File = e(i[s].File, `motions.${r}[${s}].File`), i[s].Sound !== void 0 && (i[s].Sound = e(i[s].Sound, `motions.${r}[${s}].Sound`));
    if (this.expressions)
      for (let r = 0; r < this.expressions.length; r++)
        this.expressions[r].File = e(this.expressions[r].File, `expressions[${r}].File`);
  }
}
w2(Cs, [M2]);
var Zn = /* @__PURE__ */ ((t) => (t[t.CubismMotionCurveTarget_Model = 0] = "CubismMotionCurveTarget_Model", t[t.CubismMotionCurveTarget_Parameter = 1] = "CubismMotionCurveTarget_Parameter", t[t.CubismMotionCurveTarget_PartOpacity = 2] = "CubismMotionCurveTarget_PartOpacity", t))(Zn || {}), Xi = /* @__PURE__ */ ((t) => (t[t.CubismMotionSegmentType_Linear = 0] = "CubismMotionSegmentType_Linear", t[t.CubismMotionSegmentType_Bezier = 1] = "CubismMotionSegmentType_Bezier", t[t.CubismMotionSegmentType_Stepped = 2] = "CubismMotionSegmentType_Stepped", t[t.CubismMotionSegmentType_InverseStepped = 3] = "CubismMotionSegmentType_InverseStepped", t))(Xi || {});
class bn {
  constructor(e = 0, r = 0) {
    this.time = e, this.value = r;
  }
}
class rA {
  constructor() {
    this.basePointIndex = 0, this.segmentType = 0;
  }
}
class iA {
  constructor() {
    this.id = "", this.type = 0, this.segmentCount = 0, this.baseSegmentIndex = 0, this.fadeInTime = 0, this.fadeOutTime = 0;
  }
}
class nA {
  constructor() {
    this.fireTime = 0, this.value = "";
  }
}
class sA {
  constructor() {
    this.duration = 0, this.loop = !1, this.curveCount = 0, this.eventCount = 0, this.fps = 0, this.curves = [], this.segments = [], this.points = [], this.events = [];
  }
}
class U2 {
  constructor(e) {
    this._json = e;
  }
  release() {
    this._json = void 0;
  }
  getMotionDuration() {
    return this._json.Meta.Duration;
  }
  isMotionLoop() {
    return this._json.Meta.Loop || !1;
  }
  getEvaluationOptionFlag(e) {
    return p0.EvaluationOptionFlag_AreBeziersRistricted == e ? !!this._json.Meta.AreBeziersRestricted : !1;
  }
  getMotionCurveCount() {
    return this._json.Meta.CurveCount;
  }
  getMotionFps() {
    return this._json.Meta.Fps;
  }
  getMotionTotalSegmentCount() {
    return this._json.Meta.TotalSegmentCount;
  }
  getMotionTotalPointCount() {
    return this._json.Meta.TotalPointCount;
  }
  getMotionFadeInTime() {
    return this._json.Meta.FadeInTime;
  }
  getMotionFadeOutTime() {
    return this._json.Meta.FadeOutTime;
  }
  getMotionCurveTarget(e) {
    return this._json.Curves[e].Target;
  }
  getMotionCurveId(e) {
    return this._json.Curves[e].Id;
  }
  getMotionCurveFadeInTime(e) {
    return this._json.Curves[e].FadeInTime;
  }
  getMotionCurveFadeOutTime(e) {
    return this._json.Curves[e].FadeOutTime;
  }
  getMotionCurveSegmentCount(e) {
    return this._json.Curves[e].Segments.length;
  }
  getMotionCurveSegment(e, r) {
    return this._json.Curves[e].Segments[r];
  }
  getEventCount() {
    return this._json.Meta.UserDataCount || 0;
  }
  getTotalEventValueSize() {
    return this._json.Meta.TotalUserDataSize;
  }
  getEventTime(e) {
    return this._json.UserData[e].Time;
  }
  getEventValue(e) {
    return this._json.UserData[e].Value;
  }
}
var p0 = /* @__PURE__ */ ((t) => (t[t.EvaluationOptionFlag_AreBeziersRistricted = 0] = "EvaluationOptionFlag_AreBeziersRistricted", t))(p0 || {});
const oA = "EyeBlink", aA = "LipSync", hA = "Model", lA = "Parameter", uA = "PartOpacity", fA = !1;
function mi(t, e, r) {
  const i = new bn();
  return i.time = t.time + (e.time - t.time) * r, i.value = t.value + (e.value - t.value) * r, i;
}
function cA(t, e) {
  let r = (e - t[0].time) / (t[1].time - t[0].time);
  return r < 0 && (r = 0), t[0].value + (t[1].value - t[0].value) * r;
}
function dA(t, e) {
  let r = (e - t[0].time) / (t[3].time - t[0].time);
  r < 0 && (r = 0);
  const i = mi(t[0], t[1], r), s = mi(t[1], t[2], r), o = mi(t[2], t[3], r), h = mi(i, s, r), l = mi(s, o, r);
  return mi(h, l, r).value;
}
function _A(t, e) {
  const r = e, i = t[0].time, s = t[3].time, o = t[1].time, h = t[2].time, l = s - 3 * h + 3 * o - i, c = 3 * h - 6 * o + 3 * i, _ = 3 * o - 3 * i, y = i - r, w = gr.cardanoAlgorithmForBezier(l, c, _, y), b = mi(t[0], t[1], w), E = mi(t[1], t[2], w), T = mi(t[2], t[3], w), P = mi(b, E, w), O = mi(E, T, w);
  return mi(P, O, w).value;
}
function pA(t, e) {
  return t[0].value;
}
function vA(t, e) {
  return t[1].value;
}
function Jh(t, e, r) {
  const i = t.curves[e];
  let s = -1;
  const o = i.baseSegmentIndex + i.segmentCount;
  let h = 0;
  for (let c = i.baseSegmentIndex; c < o; ++c)
    if (h = t.segments[c].basePointIndex + (t.segments[c].segmentType == Xi.CubismMotionSegmentType_Bezier ? 3 : 1), t.points[h].time > r) {
      s = c;
      break;
    }
  if (s == -1)
    return t.points[h].value;
  const l = t.segments[s];
  return l.evaluate(t.points.slice(l.basePointIndex), r);
}
class v0 extends O2 {
  constructor() {
    super(), this._eyeBlinkParameterIds = [], this._lipSyncParameterIds = [], this._sourceFrameRate = 30, this._loopDurationSeconds = -1, this._isLoop = !1, this._isLoopFadeIn = !0, this._lastWeight = 0;
  }
  static create(e, r) {
    const i = new v0();
    return i.parse(e), i._sourceFrameRate = i._motionData.fps, i._loopDurationSeconds = i._motionData.duration, i._onFinishedMotion = r, i;
  }
  doUpdateParameters(e, r, i, s) {
    this._modelCurveIdEyeBlink == null && (this._modelCurveIdEyeBlink = oA), this._modelCurveIdLipSync == null && (this._modelCurveIdLipSync = aA);
    let o = r - s.getStartTime();
    o < 0 && (o = 0);
    let h = Number.MAX_VALUE, l = Number.MAX_VALUE;
    const c = 64;
    let _ = 0, y = 0;
    this._eyeBlinkParameterIds.length > c && Jd("too many eye blink targets : {0}", this._eyeBlinkParameterIds.length), this._lipSyncParameterIds.length > c && Jd("too many lip sync targets : {0}", this._lipSyncParameterIds.length);
    const w = this._fadeInSeconds <= 0 ? 1 : gr.getEasingSine((r - s.getFadeInStartTime()) / this._fadeInSeconds), b = this._fadeOutSeconds <= 0 || s.getEndTime() < 0 ? 1 : gr.getEasingSine((s.getEndTime() - r) / this._fadeOutSeconds);
    let E, T, P, O = o;
    if (this._isLoop)
      for (; O > this._motionData.duration; )
        O -= this._motionData.duration;
    const H = this._motionData.curves;
    for (T = 0; T < this._motionData.curveCount && H[T].type == Zn.CubismMotionCurveTarget_Model; ++T)
      E = Jh(this._motionData, T, O), H[T].id == this._modelCurveIdEyeBlink ? l = E : H[T].id == this._modelCurveIdLipSync && (h = E);
    for (; T < this._motionData.curveCount && H[T].type == Zn.CubismMotionCurveTarget_Parameter; ++T) {
      if (P = e.getParameterIndex(H[T].id), P == -1)
        continue;
      const Y = e.getParameterValueByIndex(P);
      if (E = Jh(this._motionData, T, O), l != Number.MAX_VALUE) {
        for (let it = 0; it < this._eyeBlinkParameterIds.length && it < c; ++it)
          if (this._eyeBlinkParameterIds[it] == H[T].id) {
            E *= l, y |= 1 << it;
            break;
          }
      }
      if (h != Number.MAX_VALUE) {
        for (let it = 0; it < this._lipSyncParameterIds.length && it < c; ++it)
          if (this._lipSyncParameterIds[it] == H[T].id) {
            E += h, _ |= 1 << it;
            break;
          }
      }
      let J;
      if (H[T].fadeInTime < 0 && H[T].fadeOutTime < 0)
        J = Y + (E - Y) * i;
      else {
        let it, st;
        H[T].fadeInTime < 0 ? it = w : it = H[T].fadeInTime == 0 ? 1 : gr.getEasingSine((r - s.getFadeInStartTime()) / H[T].fadeInTime), H[T].fadeOutTime < 0 ? st = b : st = H[T].fadeOutTime == 0 || s.getEndTime() < 0 ? 1 : gr.getEasingSine((s.getEndTime() - r) / H[T].fadeOutTime);
        const K = this._weight * it * st;
        J = Y + (E - Y) * K;
      }
      e.setParameterValueByIndex(P, J, 1);
    }
    {
      if (l != Number.MAX_VALUE)
        for (let Y = 0; Y < this._eyeBlinkParameterIds.length && Y < c; ++Y) {
          const J = e.getParameterValueById(this._eyeBlinkParameterIds[Y]);
          if (y >> Y & 1)
            continue;
          const it = J + (l - J) * i;
          e.setParameterValueById(this._eyeBlinkParameterIds[Y], it);
        }
      if (h != Number.MAX_VALUE)
        for (let Y = 0; Y < this._lipSyncParameterIds.length && Y < c; ++Y) {
          const J = e.getParameterValueById(this._lipSyncParameterIds[Y]);
          if (_ >> Y & 1)
            continue;
          const it = J + (h - J) * i;
          e.setParameterValueById(this._lipSyncParameterIds[Y], it);
        }
    }
    for (; T < this._motionData.curveCount && H[T].type == Zn.CubismMotionCurveTarget_PartOpacity; ++T)
      if (E = Jh(this._motionData, T, O), Ho.setOpacityFromMotion)
        e.setPartOpacityById(H[T].id, E);
      else {
        if (P = e.getParameterIndex(H[T].id), P == -1)
          continue;
        e.setParameterValueByIndex(P, E);
      }
    o >= this._motionData.duration && (this._isLoop ? (s.setStartTime(r), this._isLoopFadeIn && s.setFadeInStartTime(r)) : (this._onFinishedMotion && this._onFinishedMotion(this), s.setIsFinished(!0))), this._lastWeight = i;
  }
  setIsLoop(e) {
    this._isLoop = e;
  }
  isLoop() {
    return this._isLoop;
  }
  setIsLoopFadeIn(e) {
    this._isLoopFadeIn = e;
  }
  isLoopFadeIn() {
    return this._isLoopFadeIn;
  }
  getDuration() {
    return this._isLoop ? -1 : this._loopDurationSeconds;
  }
  getLoopDuration() {
    return this._loopDurationSeconds;
  }
  setParameterFadeInTime(e, r) {
    const i = this._motionData.curves;
    for (let s = 0; s < this._motionData.curveCount; ++s)
      if (e == i[s].id) {
        i[s].fadeInTime = r;
        return;
      }
  }
  setParameterFadeOutTime(e, r) {
    const i = this._motionData.curves;
    for (let s = 0; s < this._motionData.curveCount; ++s)
      if (e == i[s].id) {
        i[s].fadeOutTime = r;
        return;
      }
  }
  getParameterFadeInTime(e) {
    const r = this._motionData.curves;
    for (let i = 0; i < this._motionData.curveCount; ++i)
      if (e == r[i].id)
        return r[i].fadeInTime;
    return -1;
  }
  getParameterFadeOutTime(e) {
    const r = this._motionData.curves;
    for (let i = 0; i < this._motionData.curveCount; ++i)
      if (e == r[i].id)
        return r[i].fadeOutTime;
    return -1;
  }
  setEffectIds(e, r) {
    this._eyeBlinkParameterIds = e, this._lipSyncParameterIds = r;
  }
  release() {
    this._motionData = void 0;
  }
  parse(e) {
    this._motionData = new sA();
    let r = new U2(e);
    this._motionData.duration = r.getMotionDuration(), this._motionData.loop = r.isMotionLoop(), this._motionData.curveCount = r.getMotionCurveCount(), this._motionData.fps = r.getMotionFps(), this._motionData.eventCount = r.getEventCount();
    const i = r.getEvaluationOptionFlag(p0.EvaluationOptionFlag_AreBeziersRistricted), s = r.getMotionFadeInTime(), o = r.getMotionFadeOutTime();
    s !== void 0 ? this._fadeInSeconds = s < 0 ? 1 : s : this._fadeInSeconds = 1, o !== void 0 ? this._fadeOutSeconds = o < 0 ? 1 : o : this._fadeOutSeconds = 1, this._motionData.curves = Array.from({ length: this._motionData.curveCount }).map(() => new iA()), this._motionData.segments = Array.from({ length: r.getMotionTotalSegmentCount() }).map(() => new rA()), this._motionData.events = Array.from({ length: this._motionData.eventCount }).map(() => new nA()), this._motionData.points = [];
    let h = 0, l = 0;
    for (let c = 0; c < this._motionData.curveCount; ++c) {
      const _ = this._motionData.curves[c];
      switch (r.getMotionCurveTarget(c)) {
        case hA:
          _.type = Zn.CubismMotionCurveTarget_Model;
          break;
        case lA:
          _.type = Zn.CubismMotionCurveTarget_Parameter;
          break;
        case uA:
          _.type = Zn.CubismMotionCurveTarget_PartOpacity;
          break;
        default:
          mo('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!');
      }
      _.id = r.getMotionCurveId(c), _.baseSegmentIndex = l;
      const y = r.getMotionCurveFadeInTime(c), w = r.getMotionCurveFadeOutTime(c);
      _.fadeInTime = y !== void 0 ? y : -1, _.fadeOutTime = w !== void 0 ? w : -1;
      for (let b = 0; b < r.getMotionCurveSegmentCount(c); ) {
        switch (b == 0 ? (this._motionData.segments[l].basePointIndex = h, this._motionData.points[h] = new bn(r.getMotionCurveSegment(c, b), r.getMotionCurveSegment(c, b + 1)), h += 1, b += 2) : this._motionData.segments[l].basePointIndex = h - 1, r.getMotionCurveSegment(c, b)) {
          case Xi.CubismMotionSegmentType_Linear: {
            this._motionData.segments[l].segmentType = Xi.CubismMotionSegmentType_Linear, this._motionData.segments[l].evaluate = cA, this._motionData.points[h] = new bn(r.getMotionCurveSegment(c, b + 1), r.getMotionCurveSegment(c, b + 2)), h += 1, b += 3;
            break;
          }
          case Xi.CubismMotionSegmentType_Bezier: {
            this._motionData.segments[l].segmentType = Xi.CubismMotionSegmentType_Bezier, i || fA ? this._motionData.segments[l].evaluate = dA : this._motionData.segments[l].evaluate = _A, this._motionData.points[h] = new bn(r.getMotionCurveSegment(c, b + 1), r.getMotionCurveSegment(c, b + 2)), this._motionData.points[h + 1] = new bn(r.getMotionCurveSegment(c, b + 3), r.getMotionCurveSegment(c, b + 4)), this._motionData.points[h + 2] = new bn(r.getMotionCurveSegment(c, b + 5), r.getMotionCurveSegment(c, b + 6)), h += 3, b += 7;
            break;
          }
          case Xi.CubismMotionSegmentType_Stepped: {
            this._motionData.segments[l].segmentType = Xi.CubismMotionSegmentType_Stepped, this._motionData.segments[l].evaluate = pA, this._motionData.points[h] = new bn(r.getMotionCurveSegment(c, b + 1), r.getMotionCurveSegment(c, b + 2)), h += 1, b += 3;
            break;
          }
          case Xi.CubismMotionSegmentType_InverseStepped: {
            this._motionData.segments[l].segmentType = Xi.CubismMotionSegmentType_InverseStepped, this._motionData.segments[l].evaluate = vA, this._motionData.points[h] = new bn(r.getMotionCurveSegment(c, b + 1), r.getMotionCurveSegment(c, b + 2)), h += 1, b += 3;
            break;
          }
        }
        ++_.segmentCount, ++l;
      }
      this._motionData.curves.push(_);
    }
    for (let c = 0; c < r.getEventCount(); ++c)
      this._motionData.events[c].fireTime = r.getEventTime(c), this._motionData.events[c].value = r.getEventValue(c);
    r.release();
  }
  getFiredEvent(e, r) {
    this._firedEventValues.length = 0;
    for (let i = 0; i < this._motionData.eventCount; ++i)
      this._motionData.events[i].fireTime > e && this._motionData.events[i].fireTime <= r && this._firedEventValues.push(this._motionData.events[i].value);
    return this._firedEventValues;
  }
}
class mA extends lh {
  constructor(e, r) {
    var i;
    super(e, r), this.groups = { idle: "Idle" }, this.motionDataType = "json", this.queueManager = new F2(), this.definitions = (i = e.motions) != null ? i : {}, this.eyeBlinkIds = e.getEyeBlinkParameters() || [], this.lipSyncIds = e.getLipSyncParameters() || [], this.init(r);
  }
  init(e) {
    super.init(e), this.settings.expressions && (this.expressionManager = new eA(this.settings, e)), this.queueManager.setEventCallback((r, i, s) => {
      this.emit("motion:" + i);
    });
  }
  isFinished() {
    return this.queueManager.isFinished();
  }
  _startMotion(e, r) {
    return e.setFinishedMotionHandler(r), this.queueManager.stopAllMotions(), this.queueManager.startMotion(e, !1, performance.now());
  }
  _stopAllMotions() {
    this.queueManager.stopAllMotions();
  }
  createMotion(e, r, i) {
    const s = v0.create(e), o = new U2(e), h = (r === this.groups.idle ? Wr.idleMotionFadingDuration : Wr.motionFadingDuration) / 1e3;
    return o.getMotionFadeInTime() === void 0 && s.setFadeInTime(i.FadeInTime > 0 ? i.FadeInTime : h), o.getMotionFadeOutTime() === void 0 && s.setFadeOutTime(i.FadeOutTime > 0 ? i.FadeOutTime : h), s.setEffectIds(this.eyeBlinkIds, this.lipSyncIds), s;
  }
  getMotionFile(e) {
    return e.File;
  }
  getMotionName(e) {
    return e.File;
  }
  getSoundFile(e) {
    return e.Sound;
  }
  updateParameters(e, r) {
    return this.queueManager.doUpdateMotion(e, r);
  }
  destroy() {
    super.destroy(), this.queueManager.release(), this.queueManager = void 0;
  }
}
const gA = "ParamAngleX", yA = "ParamAngleY", bA = "ParamAngleZ", xA = "ParamEyeBallX", TA = "ParamEyeBallY", AA = "ParamBodyAngleX", wA = "ParamBreath";
class m0 {
  constructor() {
    this._breathParameters = [], this._currentTime = 0;
  }
  static create() {
    return new m0();
  }
  setParameters(e) {
    this._breathParameters = e;
  }
  getParameters() {
    return this._breathParameters;
  }
  updateParameters(e, r) {
    this._currentTime += r;
    const i = this._currentTime * 2 * 3.14159;
    for (let s = 0; s < this._breathParameters.length; ++s) {
      const o = this._breathParameters[s];
      e.addParameterValueById(o.parameterId, o.offset + o.peak * Math.sin(i / o.cycle), o.weight);
    }
  }
}
class co {
  constructor(e, r, i, s, o) {
    this.parameterId = e == null ? void 0 : e, this.offset = r == null ? 0 : r, this.peak = i == null ? 0 : i, this.cycle = s == null ? 0 : s, this.weight = o == null ? 0 : o;
  }
}
const fu = class {
  static create(t) {
    return new fu(t);
  }
  setBlinkingInterval(t) {
    this._blinkingIntervalSeconds = t;
  }
  setBlinkingSetting(t, e, r) {
    this._closingSeconds = t, this._closedSeconds = e, this._openingSeconds = r;
  }
  setParameterIds(t) {
    this._parameterIds = t;
  }
  getParameterIds() {
    return this._parameterIds;
  }
  updateParameters(t, e) {
    this._userTimeSeconds += e;
    let r, i = 0;
    switch (this._blinkingState) {
      case pi.EyeState_Closing:
        i = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closingSeconds, i >= 1 && (i = 1, this._blinkingState = pi.EyeState_Closed, this._stateStartTimeSeconds = this._userTimeSeconds), r = 1 - i;
        break;
      case pi.EyeState_Closed:
        i = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._closedSeconds, i >= 1 && (this._blinkingState = pi.EyeState_Opening, this._stateStartTimeSeconds = this._userTimeSeconds), r = 0;
        break;
      case pi.EyeState_Opening:
        i = (this._userTimeSeconds - this._stateStartTimeSeconds) / this._openingSeconds, i >= 1 && (i = 1, this._blinkingState = pi.EyeState_Interval, this._nextBlinkingTime = this.determinNextBlinkingTiming()), r = i;
        break;
      case pi.EyeState_Interval:
        this._nextBlinkingTime < this._userTimeSeconds && (this._blinkingState = pi.EyeState_Closing, this._stateStartTimeSeconds = this._userTimeSeconds), r = 1;
        break;
      case pi.EyeState_First:
      default:
        this._blinkingState = pi.EyeState_Interval, this._nextBlinkingTime = this.determinNextBlinkingTiming(), r = 1;
        break;
    }
    fu.CloseIfZero || (r = -r);
    for (let s = 0; s < this._parameterIds.length; ++s)
      t.setParameterValueById(this._parameterIds[s], r);
  }
  constructor(t) {
    var e, r;
    this._blinkingState = pi.EyeState_First, this._nextBlinkingTime = 0, this._stateStartTimeSeconds = 0, this._blinkingIntervalSeconds = 4, this._closingSeconds = 0.1, this._closedSeconds = 0.05, this._openingSeconds = 0.15, this._userTimeSeconds = 0, this._parameterIds = [], t != null && (this._parameterIds = (r = (e = t.getEyeBlinkParameters()) == null ? void 0 : e.slice()) != null ? r : this._parameterIds);
  }
  determinNextBlinkingTiming() {
    const t = Math.random();
    return this._userTimeSeconds + t * (2 * this._blinkingIntervalSeconds - 1);
  }
};
let G2 = fu;
G2.CloseIfZero = !0;
var pi = /* @__PURE__ */ ((t) => (t[t.EyeState_First = 0] = "EyeState_First", t[t.EyeState_Interval = 1] = "EyeState_Interval", t[t.EyeState_Closing = 2] = "EyeState_Closing", t[t.EyeState_Closed = 3] = "EyeState_Closed", t[t.EyeState_Opening = 4] = "EyeState_Opening", t))(pi || {});
class cu {
  constructor(e = 0, r = 0, i = 0, s = 0) {
    this.x = e, this.y = r, this.width = i, this.height = s;
  }
  getCenterX() {
    return this.x + 0.5 * this.width;
  }
  getCenterY() {
    return this.y + 0.5 * this.height;
  }
  getRight() {
    return this.x + this.width;
  }
  getBottom() {
    return this.y + this.height;
  }
  setRect(e) {
    this.x = e.x, this.y = e.y, this.width = e.width, this.height = e.height;
  }
  expand(e, r) {
    this.x -= e, this.y -= r, this.width += e * 2, this.height += r * 2;
  }
}
const Qh = 4, PA = 10;
let Vn, go, du;
class Kh {
  getChannelFlagAsColor(e) {
    return this._channelColors[e];
  }
  getMaskRenderTexture() {
    let e = 0;
    if (this._maskTexture && this._maskTexture.texture != 0 && (this._maskTexture.frameNo = this._currentFrameNo, e = this._maskTexture.texture), e == 0) {
      const r = this._clippingMaskBufferSize;
      this._colorBuffer = this.gl.createTexture(), this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, r, r, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR), this.gl.bindTexture(this.gl.TEXTURE_2D, null), e = this.gl.createFramebuffer(), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, e), this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER, this.gl.COLOR_ATTACHMENT0, this.gl.TEXTURE_2D, this._colorBuffer, 0), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, du), this._maskTexture = new EA(this._currentFrameNo, e);
    }
    return e;
  }
  setGL(e) {
    this.gl = e;
  }
  calcClippedDrawTotalBounds(e, r) {
    let i = Number.MAX_VALUE, s = Number.MAX_VALUE, o = Number.MIN_VALUE, h = Number.MIN_VALUE;
    const l = r._clippedDrawableIndexList.length;
    for (let c = 0; c < l; c++) {
      const _ = r._clippedDrawableIndexList[c], y = e.getDrawableVertexCount(_), w = e.getDrawableVertices(_);
      let b = Number.MAX_VALUE, E = Number.MAX_VALUE, T = Number.MIN_VALUE, P = Number.MIN_VALUE;
      const O = y * Zh.vertexStep;
      for (let H = Zh.vertexOffset; H < O; H += Zh.vertexStep) {
        const Y = w[H], J = w[H + 1];
        Y < b && (b = Y), Y > T && (T = Y), J < E && (E = J), J > P && (P = J);
      }
      if (b != Number.MAX_VALUE)
        if (b < i && (i = b), E < s && (s = E), T > o && (o = T), P > h && (h = P), i == Number.MAX_VALUE)
          r._allClippedDrawRect.x = 0, r._allClippedDrawRect.y = 0, r._allClippedDrawRect.width = 0, r._allClippedDrawRect.height = 0, r._isUsing = !1;
        else {
          r._isUsing = !0;
          const H = o - i, Y = h - s;
          r._allClippedDrawRect.x = i, r._allClippedDrawRect.y = s, r._allClippedDrawRect.width = H, r._allClippedDrawRect.height = Y;
        }
    }
  }
  constructor() {
    this._maskRenderTexture = null, this._colorBuffer = null, this._currentFrameNo = 0, this._clippingMaskBufferSize = 256, this._clippingContextListForMask = [], this._clippingContextListForDraw = [], this._channelColors = [], this._tmpBoundsOnModel = new cu(), this._tmpMatrix = new bi(), this._tmpMatrixForMask = new bi(), this._tmpMatrixForDraw = new bi();
    let e = new vo();
    e.R = 1, e.G = 0, e.B = 0, e.A = 0, this._channelColors.push(e), e = new vo(), e.R = 0, e.G = 1, e.B = 0, e.A = 0, this._channelColors.push(e), e = new vo(), e.R = 0, e.G = 0, e.B = 1, e.A = 0, this._channelColors.push(e), e = new vo(), e.R = 0, e.G = 0, e.B = 0, e.A = 1, this._channelColors.push(e);
  }
  release() {
    var e, r, i;
    const s = this;
    for (let o = 0; o < this._clippingContextListForMask.length; o++)
      this._clippingContextListForMask[o] && ((e = this._clippingContextListForMask[o]) == null || e.release());
    s._clippingContextListForMask = void 0, s._clippingContextListForDraw = void 0, this._maskTexture && ((r = this.gl) == null || r.deleteFramebuffer(this._maskTexture.texture), s._maskTexture = void 0), s._channelColors = void 0, (i = this.gl) == null || i.deleteTexture(this._colorBuffer), this._colorBuffer = null;
  }
  initialize(e, r, i, s) {
    for (let o = 0; o < r; o++) {
      if (s[o] <= 0) {
        this._clippingContextListForDraw.push(null);
        continue;
      }
      let h = this.findSameClip(i[o], s[o]);
      h == null && (h = new IA(this, i[o], s[o]), this._clippingContextListForMask.push(h)), h.addClippedDrawable(o), this._clippingContextListForDraw.push(h);
    }
  }
  setupClippingContext(e, r) {
    this._currentFrameNo++;
    let i = 0;
    for (let s = 0; s < this._clippingContextListForMask.length; s++) {
      const o = this._clippingContextListForMask[s];
      this.calcClippedDrawTotalBounds(e, o), o._isUsing && i++;
    }
    if (i > 0) {
      this.gl.viewport(0, 0, this._clippingMaskBufferSize, this._clippingMaskBufferSize), this._maskRenderTexture = this.getMaskRenderTexture(), r.getMvpMatrix(), r.preDraw(), this.setupLayoutBounds(i), this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture), this.gl.clearColor(1, 1, 1, 1), this.gl.clear(this.gl.COLOR_BUFFER_BIT);
      for (let s = 0; s < this._clippingContextListForMask.length; s++) {
        const o = this._clippingContextListForMask[s], h = o._allClippedDrawRect, l = o._layoutBounds, c = 0.05;
        this._tmpBoundsOnModel.setRect(h), this._tmpBoundsOnModel.expand(h.width * c, h.height * c);
        const _ = l.width / this._tmpBoundsOnModel.width, y = l.height / this._tmpBoundsOnModel.height;
        this._tmpMatrix.loadIdentity(), this._tmpMatrix.translateRelative(-1, -1), this._tmpMatrix.scaleRelative(2, 2), this._tmpMatrix.translateRelative(l.x, l.y), this._tmpMatrix.scaleRelative(_, y), this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y), this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()), this._tmpMatrix.loadIdentity(), this._tmpMatrix.translateRelative(l.x, l.y), this._tmpMatrix.scaleRelative(_, y), this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x, -this._tmpBoundsOnModel.y), this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()), o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()), o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());
        const w = o._clippingIdCount;
        for (let b = 0; b < w; b++) {
          const E = o._clippingIdList[b];
          e.getDrawableDynamicFlagVertexPositionsDidChange(E) && (r.setIsCulling(e.getDrawableCulling(E) != !1), r.setClippingContextBufferForMask(o), r.drawMesh(e.getDrawableTextureIndices(E), e.getDrawableVertexIndexCount(E), e.getDrawableVertexCount(E), e.getDrawableVertexIndices(E), e.getDrawableVertices(E), e.getDrawableVertexUvs(E), e.getDrawableOpacity(E), wn.CubismBlendMode_Normal, !1));
        }
      }
      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, du), r.setClippingContextBufferForMask(null), this.gl.viewport(go[0], go[1], go[2], go[3]);
    }
  }
  findSameClip(e, r) {
    for (let i = 0; i < this._clippingContextListForMask.length; i++) {
      const s = this._clippingContextListForMask[i], o = s._clippingIdCount;
      if (o != r)
        continue;
      let h = 0;
      for (let l = 0; l < o; l++) {
        const c = s._clippingIdList[l];
        for (let _ = 0; _ < o; _++)
          if (e[_] == c) {
            h++;
            break;
          }
      }
      if (h == o)
        return s;
    }
    return null;
  }
  setupLayoutBounds(e) {
    let r = e / Qh, i = e % Qh;
    r = ~~r, i = ~~i;
    let s = 0;
    for (let o = 0; o < Qh; o++) {
      const h = r + (o < i ? 1 : 0);
      if (h != 0)
        if (h == 1) {
          const l = this._clippingContextListForMask[s++];
          l._layoutChannelNo = o, l._layoutBounds.x = 0, l._layoutBounds.y = 0, l._layoutBounds.width = 1, l._layoutBounds.height = 1;
        } else if (h == 2)
          for (let l = 0; l < h; l++) {
            let c = l % 2;
            c = ~~c;
            const _ = this._clippingContextListForMask[s++];
            _._layoutChannelNo = o, _._layoutBounds.x = c * 0.5, _._layoutBounds.y = 0, _._layoutBounds.width = 0.5, _._layoutBounds.height = 1;
          }
        else if (h <= 4)
          for (let l = 0; l < h; l++) {
            let c = l % 2, _ = l / 2;
            c = ~~c, _ = ~~_;
            const y = this._clippingContextListForMask[s++];
            y._layoutChannelNo = o, y._layoutBounds.x = c * 0.5, y._layoutBounds.y = _ * 0.5, y._layoutBounds.width = 0.5, y._layoutBounds.height = 0.5;
          }
        else if (h <= 9)
          for (let l = 0; l < h; l++) {
            let c = l % 3, _ = l / 3;
            c = ~~c, _ = ~~_;
            const y = this._clippingContextListForMask[s++];
            y._layoutChannelNo = o, y._layoutBounds.x = c / 3, y._layoutBounds.y = _ / 3, y._layoutBounds.width = 1 / 3, y._layoutBounds.height = 1 / 3;
          }
        else if (Ho.supportMoreMaskDivisions && h <= 16)
          for (let l = 0; l < h; l++) {
            let c = l % 4, _ = l / 4;
            c = ~~c, _ = ~~_;
            const y = this._clippingContextListForMask[s++];
            y._layoutChannelNo = o, y._layoutBounds.x = c / 4, y._layoutBounds.y = _ / 4, y._layoutBounds.width = 1 / 4, y._layoutBounds.height = 1 / 4;
          }
        else
          As("not supported mask count : {0}", h);
    }
  }
  getColorBuffer() {
    return this._colorBuffer;
  }
  getClippingContextListForDraw() {
    return this._clippingContextListForDraw;
  }
  setClippingMaskBufferSize(e) {
    this._clippingMaskBufferSize = e;
  }
  getClippingMaskBufferSize() {
    return this._clippingMaskBufferSize;
  }
}
class EA {
  constructor(e, r) {
    this.frameNo = e, this.texture = r;
  }
}
class IA {
  constructor(e, r, i) {
    this._isUsing = !1, this._owner = e, this._clippingIdList = r, this._clippingIdCount = i, this._allClippedDrawRect = new cu(), this._layoutBounds = new cu(), this._clippedDrawableIndexList = [], this._matrixForMask = new bi(), this._matrixForDraw = new bi();
  }
  release() {
    const e = this;
    e._layoutBounds = void 0, e._allClippedDrawRect = void 0, e._clippedDrawableIndexList = void 0;
  }
  addClippedDrawable(e) {
    this._clippedDrawableIndexList.push(e);
  }
  getClippingManager() {
    return this._owner;
  }
  setGl(e) {
    this._owner.setGL(e);
  }
}
class $s {
  static getInstance() {
    return Vn == null && (Vn = new $s()), Vn;
  }
  static deleteInstance() {
    Vn && (Vn.release(), Vn = void 0);
  }
  constructor() {
    this._shaderSets = [];
  }
  release() {
    this.releaseShaderProgram();
  }
  setupShaderProgram(e, r, i, s, o, h, l, c, _, y, w, b, E) {
    w || As("NoPremultipliedAlpha is not allowed"), this._shaderSets.length == 0 && this.generateShaders();
    let T, P, O, H;
    const Y = e.getClippingContextBufferForMask();
    if (Y != null) {
      const J = this._shaderSets[yo.ShaderNames_SetupMask];
      this.gl.useProgram(J.shaderProgram), this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, r), this.gl.uniform1i(J.samplerTexture0Location, 0), l.vertex == null && (l.vertex = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, l.vertex), this.gl.bufferData(this.gl.ARRAY_BUFFER, s, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(J.attributePositionLocation), this.gl.vertexAttribPointer(J.attributePositionLocation, 2, this.gl.FLOAT, !1, 0, 0), l.uv == null && (l.uv = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, l.uv), this.gl.bufferData(this.gl.ARRAY_BUFFER, h, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(J.attributeTexCoordLocation), this.gl.vertexAttribPointer(J.attributeTexCoordLocation, 2, this.gl.FLOAT, !1, 0, 0);
      const it = Y._layoutChannelNo, st = Y.getClippingManager().getChannelFlagAsColor(it);
      this.gl.uniform4f(J.uniformChannelFlagLocation, st.R, st.G, st.B, st.A), this.gl.uniformMatrix4fv(J.uniformClipMatrixLocation, !1, Y._matrixForMask.getArray());
      const K = Y._layoutBounds;
      this.gl.uniform4f(J.uniformBaseColorLocation, K.x * 2 - 1, K.y * 2 - 1, K.getRight() * 2 - 1, K.getBottom() * 2 - 1), T = this.gl.ZERO, P = this.gl.ONE_MINUS_SRC_COLOR, O = this.gl.ZERO, H = this.gl.ONE_MINUS_SRC_ALPHA;
    } else {
      const J = e.getClippingContextBufferForDraw(), st = J != null ? E ? 2 : 1 : 0;
      let K;
      switch (_) {
        case wn.CubismBlendMode_Normal:
        default:
          K = this._shaderSets[yo.ShaderNames_NormalPremultipliedAlpha + st], T = this.gl.ONE, P = this.gl.ONE_MINUS_SRC_ALPHA, O = this.gl.ONE, H = this.gl.ONE_MINUS_SRC_ALPHA;
          break;
        case wn.CubismBlendMode_Additive:
          K = this._shaderSets[yo.ShaderNames_AddPremultipliedAlpha + st], T = this.gl.ONE, P = this.gl.ONE, O = this.gl.ZERO, H = this.gl.ONE;
          break;
        case wn.CubismBlendMode_Multiplicative:
          K = this._shaderSets[yo.ShaderNames_MultPremultipliedAlpha + st], T = this.gl.DST_COLOR, P = this.gl.ONE_MINUS_SRC_ALPHA, O = this.gl.ZERO, H = this.gl.ONE;
          break;
      }
      if (this.gl.useProgram(K.shaderProgram), l.vertex == null && (l.vertex = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, l.vertex), this.gl.bufferData(this.gl.ARRAY_BUFFER, s, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(K.attributePositionLocation), this.gl.vertexAttribPointer(K.attributePositionLocation, 2, this.gl.FLOAT, !1, 0, 0), l.uv == null && (l.uv = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, l.uv), this.gl.bufferData(this.gl.ARRAY_BUFFER, h, this.gl.DYNAMIC_DRAW), this.gl.enableVertexAttribArray(K.attributeTexCoordLocation), this.gl.vertexAttribPointer(K.attributeTexCoordLocation, 2, this.gl.FLOAT, !1, 0, 0), J != null) {
        this.gl.activeTexture(this.gl.TEXTURE1);
        const At = J.getClippingManager().getColorBuffer();
        this.gl.bindTexture(this.gl.TEXTURE_2D, At), this.gl.uniform1i(K.samplerTexture1Location, 1), this.gl.uniformMatrix4fv(K.uniformClipMatrixLocation, !1, J._matrixForDraw.getArray());
        const Tt = J._layoutChannelNo, dt = J.getClippingManager().getChannelFlagAsColor(Tt);
        this.gl.uniform4f(K.uniformChannelFlagLocation, dt.R, dt.G, dt.B, dt.A);
      }
      this.gl.activeTexture(this.gl.TEXTURE0), this.gl.bindTexture(this.gl.TEXTURE_2D, r), this.gl.uniform1i(K.samplerTexture0Location, 0), this.gl.uniformMatrix4fv(K.uniformMatrixLocation, !1, b.getArray()), this.gl.uniform4f(K.uniformBaseColorLocation, y.R, y.G, y.B, y.A);
    }
    l.index == null && (l.index = this.gl.createBuffer()), this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, l.index), this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, o, this.gl.DYNAMIC_DRAW), this.gl.blendFuncSeparate(T, P, O, H);
  }
  releaseShaderProgram() {
    for (let e = 0; e < this._shaderSets.length; e++)
      this.gl.deleteProgram(this._shaderSets[e].shaderProgram), this._shaderSets[e].shaderProgram = 0;
    this._shaderSets = [];
  }
  generateShaders() {
    for (let e = 0; e < PA; e++)
      this._shaderSets.push({});
    this._shaderSets[0].shaderProgram = this.loadShaderProgram(CA, $A), this._shaderSets[1].shaderProgram = this.loadShaderProgram(RA, SA), this._shaderSets[2].shaderProgram = this.loadShaderProgram(Kd, NA), this._shaderSets[3].shaderProgram = this.loadShaderProgram(Kd, LA), this._shaderSets[4].shaderProgram = this._shaderSets[1].shaderProgram, this._shaderSets[5].shaderProgram = this._shaderSets[2].shaderProgram, this._shaderSets[6].shaderProgram = this._shaderSets[3].shaderProgram, this._shaderSets[7].shaderProgram = this._shaderSets[1].shaderProgram, this._shaderSets[8].shaderProgram = this._shaderSets[2].shaderProgram, this._shaderSets[9].shaderProgram = this._shaderSets[3].shaderProgram, this._shaderSets[0].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, "a_position"), this._shaderSets[0].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[0].shaderProgram, "a_texCoord"), this._shaderSets[0].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "s_texture0"), this._shaderSets[0].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_clipMatrix"), this._shaderSets[0].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_channelFlag"), this._shaderSets[0].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[0].shaderProgram, "u_baseColor"), this._shaderSets[1].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, "a_position"), this._shaderSets[1].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[1].shaderProgram, "a_texCoord"), this._shaderSets[1].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "s_texture0"), this._shaderSets[1].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "u_matrix"), this._shaderSets[1].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[1].shaderProgram, "u_baseColor"), this._shaderSets[2].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, "a_position"), this._shaderSets[2].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[2].shaderProgram, "a_texCoord"), this._shaderSets[2].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "s_texture0"), this._shaderSets[2].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "s_texture1"), this._shaderSets[2].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_matrix"), this._shaderSets[2].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_clipMatrix"), this._shaderSets[2].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_channelFlag"), this._shaderSets[2].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[2].shaderProgram, "u_baseColor"), this._shaderSets[3].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, "a_position"), this._shaderSets[3].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[3].shaderProgram, "a_texCoord"), this._shaderSets[3].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "s_texture0"), this._shaderSets[3].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "s_texture1"), this._shaderSets[3].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_matrix"), this._shaderSets[3].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_clipMatrix"), this._shaderSets[3].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_channelFlag"), this._shaderSets[3].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[3].shaderProgram, "u_baseColor"), this._shaderSets[4].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, "a_position"), this._shaderSets[4].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[4].shaderProgram, "a_texCoord"), this._shaderSets[4].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "s_texture0"), this._shaderSets[4].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "u_matrix"), this._shaderSets[4].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[4].shaderProgram, "u_baseColor"), this._shaderSets[5].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, "a_position"), this._shaderSets[5].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[5].shaderProgram, "a_texCoord"), this._shaderSets[5].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "s_texture0"), this._shaderSets[5].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "s_texture1"), this._shaderSets[5].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_matrix"), this._shaderSets[5].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_clipMatrix"), this._shaderSets[5].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_channelFlag"), this._shaderSets[5].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[5].shaderProgram, "u_baseColor"), this._shaderSets[6].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, "a_position"), this._shaderSets[6].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[6].shaderProgram, "a_texCoord"), this._shaderSets[6].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "s_texture0"), this._shaderSets[6].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "s_texture1"), this._shaderSets[6].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_matrix"), this._shaderSets[6].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_clipMatrix"), this._shaderSets[6].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_channelFlag"), this._shaderSets[6].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[6].shaderProgram, "u_baseColor"), this._shaderSets[7].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, "a_position"), this._shaderSets[7].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[7].shaderProgram, "a_texCoord"), this._shaderSets[7].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "s_texture0"), this._shaderSets[7].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "u_matrix"), this._shaderSets[7].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[7].shaderProgram, "u_baseColor"), this._shaderSets[8].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, "a_position"), this._shaderSets[8].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[8].shaderProgram, "a_texCoord"), this._shaderSets[8].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "s_texture0"), this._shaderSets[8].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "s_texture1"), this._shaderSets[8].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_matrix"), this._shaderSets[8].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_clipMatrix"), this._shaderSets[8].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_channelFlag"), this._shaderSets[8].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[8].shaderProgram, "u_baseColor"), this._shaderSets[9].attributePositionLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, "a_position"), this._shaderSets[9].attributeTexCoordLocation = this.gl.getAttribLocation(this._shaderSets[9].shaderProgram, "a_texCoord"), this._shaderSets[9].samplerTexture0Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "s_texture0"), this._shaderSets[9].samplerTexture1Location = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "s_texture1"), this._shaderSets[9].uniformMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_matrix"), this._shaderSets[9].uniformClipMatrixLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_clipMatrix"), this._shaderSets[9].uniformChannelFlagLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_channelFlag"), this._shaderSets[9].uniformBaseColorLocation = this.gl.getUniformLocation(this._shaderSets[9].shaderProgram, "u_baseColor");
  }
  loadShaderProgram(e, r) {
    let i = this.gl.createProgram(), s = this.compileShaderSource(this.gl.VERTEX_SHADER, e);
    if (!s)
      return As("Vertex shader compile error!"), 0;
    let o = this.compileShaderSource(this.gl.FRAGMENT_SHADER, r);
    return o ? (this.gl.attachShader(i, s), this.gl.attachShader(i, o), this.gl.linkProgram(i), this.gl.getProgramParameter(i, this.gl.LINK_STATUS) ? (this.gl.deleteShader(s), this.gl.deleteShader(o), i) : (As("Failed to link program: {0}", i), this.gl.deleteShader(s), this.gl.deleteShader(o), i && this.gl.deleteProgram(i), 0)) : (As("Vertex shader compile error!"), 0);
  }
  compileShaderSource(e, r) {
    const i = r, s = this.gl.createShader(e);
    if (this.gl.shaderSource(s, i), this.gl.compileShader(s), !s) {
      const h = this.gl.getShaderInfoLog(s);
      As("Shader compile log: {0} ", h);
    }
    return this.gl.getShaderParameter(s, this.gl.COMPILE_STATUS) ? s : (this.gl.deleteShader(s), null);
  }
  setGl(e) {
    this.gl = e;
  }
}
var yo = /* @__PURE__ */ ((t) => (t[t.ShaderNames_SetupMask = 0] = "ShaderNames_SetupMask", t[t.ShaderNames_NormalPremultipliedAlpha = 1] = "ShaderNames_NormalPremultipliedAlpha", t[t.ShaderNames_NormalMaskedPremultipliedAlpha = 2] = "ShaderNames_NormalMaskedPremultipliedAlpha", t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha = 3] = "ShaderNames_NomralMaskedInvertedPremultipliedAlpha", t[t.ShaderNames_AddPremultipliedAlpha = 4] = "ShaderNames_AddPremultipliedAlpha", t[t.ShaderNames_AddMaskedPremultipliedAlpha = 5] = "ShaderNames_AddMaskedPremultipliedAlpha", t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted = 6] = "ShaderNames_AddMaskedPremultipliedAlphaInverted", t[t.ShaderNames_MultPremultipliedAlpha = 7] = "ShaderNames_MultPremultipliedAlpha", t[t.ShaderNames_MultMaskedPremultipliedAlpha = 8] = "ShaderNames_MultMaskedPremultipliedAlpha", t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted = 9] = "ShaderNames_MultMaskedPremultipliedAlphaInverted", t))(yo || {});
const CA = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", $A = "precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}", RA = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", Kd = "attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}", SA = "precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}", NA = "precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}", LA = "precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";
class D2 extends d0 {
  constructor() {
    super(), this._clippingContextBufferForMask = null, this._clippingContextBufferForDraw = null, this._clippingManager = new Kh(), this.firstDraw = !0, this._textures = {}, this._sortedDrawableIndexList = [], this._bufferData = {
      vertex: null,
      uv: null,
      index: null
    };
  }
  initialize(e) {
    e.isUsingMasking() && (this._clippingManager = new Kh(), this._clippingManager.initialize(e, e.getDrawableCount(), e.getDrawableMasks(), e.getDrawableMaskCounts()));
    for (let r = e.getDrawableCount() - 1; r >= 0; r--)
      this._sortedDrawableIndexList[r] = 0;
    super.initialize(e);
  }
  bindTexture(e, r) {
    this._textures[e] = r;
  }
  getBindedTextures() {
    return this._textures;
  }
  setClippingMaskBufferSize(e) {
    this._clippingManager.release(), this._clippingManager = new Kh(), this._clippingManager.setClippingMaskBufferSize(e), this._clippingManager.initialize(this.getModel(), this.getModel().getDrawableCount(), this.getModel().getDrawableMasks(), this.getModel().getDrawableMaskCounts());
  }
  getClippingMaskBufferSize() {
    return this._clippingManager.getClippingMaskBufferSize();
  }
  release() {
    var e, r, i;
    const s = this;
    this._clippingManager.release(), s._clippingManager = void 0, (e = this.gl) == null || e.deleteBuffer(this._bufferData.vertex), this._bufferData.vertex = null, (r = this.gl) == null || r.deleteBuffer(this._bufferData.uv), this._bufferData.uv = null, (i = this.gl) == null || i.deleteBuffer(this._bufferData.index), this._bufferData.index = null, s._bufferData = void 0, s._textures = void 0;
  }
  doDrawModel() {
    this.preDraw(), this._clippingManager != null && this._clippingManager.setupClippingContext(this.getModel(), this);
    const e = this.getModel().getDrawableCount(), r = this.getModel().getDrawableRenderOrders();
    for (let i = 0; i < e; ++i) {
      const s = r[i];
      this._sortedDrawableIndexList[s] = i;
    }
    for (let i = 0; i < e; ++i) {
      const s = this._sortedDrawableIndexList[i];
      this.getModel().getDrawableDynamicFlagIsVisible(s) && (this.setClippingContextBufferForDraw(this._clippingManager != null ? this._clippingManager.getClippingContextListForDraw()[s] : null), this.setIsCulling(this.getModel().getDrawableCulling(s)), this.drawMesh(this.getModel().getDrawableTextureIndices(s), this.getModel().getDrawableVertexIndexCount(s), this.getModel().getDrawableVertexCount(s), this.getModel().getDrawableVertexIndices(s), this.getModel().getDrawableVertices(s), this.getModel().getDrawableVertexUvs(s), this.getModel().getDrawableOpacity(s), this.getModel().getDrawableBlendMode(s), this.getModel().getDrawableInvertedMaskBit(s)));
    }
  }
  drawMesh(e, r, i, s, o, h, l, c, _) {
    this.isCulling() ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE), this.gl.frontFace(this.gl.CCW);
    const y = this.getModelColor();
    this.getClippingContextBufferForMask() == null && (y.A *= l, this.isPremultipliedAlpha() && (y.R *= y.A, y.G *= y.A, y.B *= y.A));
    let w = null;
    this._textures[e] != null && (w = this._textures[e]), $s.getInstance().setupShaderProgram(this, w, i, o, s, h, this._bufferData, l, c, y, this.isPremultipliedAlpha(), this.getMvpMatrix(), _), this.gl.drawElements(this.gl.TRIANGLES, r, this.gl.UNSIGNED_SHORT, 0), this.gl.useProgram(null), this.setClippingContextBufferForDraw(null), this.setClippingContextBufferForMask(null);
  }
  static doStaticRelease() {
    $s.deleteInstance();
  }
  setRenderState(e, r) {
    du = e, go = r;
  }
  preDraw() {
    this.firstDraw && (this.firstDraw = !1, this._anisortopy = this.gl.getExtension("EXT_texture_filter_anisotropic") || this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")), this.gl.disable(this.gl.SCISSOR_TEST), this.gl.disable(this.gl.STENCIL_TEST), this.gl.disable(this.gl.DEPTH_TEST), this.gl.frontFace(this.gl.CW), this.gl.enable(this.gl.BLEND), this.gl.colorMask(!0, !0, !0, !0), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null), this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);
  }
  setClippingContextBufferForMask(e) {
    this._clippingContextBufferForMask = e;
  }
  getClippingContextBufferForMask() {
    return this._clippingContextBufferForMask;
  }
  setClippingContextBufferForDraw(e) {
    this._clippingContextBufferForDraw = e;
  }
  getClippingContextBufferForDraw() {
    return this._clippingContextBufferForDraw;
  }
  startUp(e) {
    this.gl = e, this._clippingManager.setGL(e), $s.getInstance().setGl(e);
  }
}
d0.staticRelease = () => {
  D2.doStaticRelease();
};
const t_ = new bi();
class OA extends P2 {
  constructor(e, r, i) {
    super(), this.lipSync = !0, this.breath = m0.create(), this.renderer = new D2(), this.idParamAngleX = gA, this.idParamAngleY = yA, this.idParamAngleZ = bA, this.idParamEyeBallX = xA, this.idParamEyeBallY = TA, this.idParamBodyAngleX = AA, this.idParamBreath = wA, this.pixelsPerUnit = 1, this.centeringTransform = new wr(), this.coreModel = e, this.settings = r, this.motionManager = new mA(r, i), this.init();
  }
  init() {
    var e;
    super.init(), ((e = this.settings.getEyeBlinkParameters()) == null ? void 0 : e.length) > 0 && (this.eyeBlink = G2.create(this.settings)), this.breath.setParameters([
      new co(this.idParamAngleX, 0, 15, 6.5345, 0.5),
      new co(this.idParamAngleY, 0, 8, 3.5345, 0.5),
      new co(this.idParamAngleZ, 0, 10, 5.5345, 0.5),
      new co(this.idParamBodyAngleX, 0, 4, 15.5345, 0.5),
      new co(this.idParamBreath, 0, 0.5, 3.2345, 0.5)
    ]), this.renderer.initialize(this.coreModel), this.renderer.setIsPremultipliedAlpha(!0);
  }
  getSize() {
    return [this.coreModel.getModel().canvasinfo.CanvasWidth, this.coreModel.getModel().canvasinfo.CanvasHeight];
  }
  getLayout() {
    const e = {};
    if (this.settings.layout)
      for (const r of Object.keys(this.settings.layout)) {
        const i = r.charAt(0).toLowerCase() + r.slice(1);
        e[i] = this.settings.layout[r];
      }
    return e;
  }
  setupLayout() {
    super.setupLayout(), this.pixelsPerUnit = this.coreModel.getModel().canvasinfo.PixelsPerUnit, this.centeringTransform.scale(this.pixelsPerUnit, this.pixelsPerUnit).translate(this.originalWidth / 2, this.originalHeight / 2);
  }
  updateWebGLContext(e, r) {
    this.renderer.firstDraw = !0, this.renderer._bufferData = {
      vertex: null,
      uv: null,
      index: null
    }, this.renderer.startUp(e), this.renderer._clippingManager._currentFrameNo = r, this.renderer._clippingManager._maskTexture = void 0, $s.getInstance()._shaderSets = [];
  }
  bindTexture(e, r) {
    this.renderer.bindTexture(e, r);
  }
  getHitAreaDefs() {
    var e, r;
    return (r = (e = this.settings.hitAreas) == null ? void 0 : e.map((i) => ({
      id: i.Id,
      name: i.Name,
      index: this.coreModel.getDrawableIndex(i.Id)
    }))) != null ? r : [];
  }
  getDrawableIDs() {
    return this.coreModel.getDrawableIds();
  }
  getDrawableIndex(e) {
    return this.coreModel.getDrawableIndex(e);
  }
  getDrawableVertices(e) {
    if (typeof e == "string" && (e = this.coreModel.getDrawableIndex(e), e === -1))
      throw new TypeError("Unable to find drawable ID: " + e);
    const r = this.coreModel.getDrawableVertices(e).slice();
    for (let i = 0; i < r.length; i += 2)
      r[i] = r[i] * this.pixelsPerUnit + this.originalWidth / 2, r[i + 1] = -r[i + 1] * this.pixelsPerUnit + this.originalHeight / 2;
    return r;
  }
  updateTransform(e) {
    this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e);
  }
  update(e, r) {
    var i, s, o, h;
    super.update(e, r), e /= 1e3, r /= 1e3;
    const l = this.coreModel;
    this.emit("beforeMotionUpdate");
    const c = this.motionManager.update(this.coreModel, r);
    this.emit("afterMotionUpdate"), l.saveParameters(), (i = this.motionManager.expressionManager) == null || i.update(l, r), c || (s = this.eyeBlink) == null || s.updateParameters(l, e), this.updateFocus(), this.updateNaturalMovements(e * 1e3, r * 1e3), (o = this.physics) == null || o.evaluate(l, e), (h = this.pose) == null || h.updateParameters(l, e), this.emit("beforeModelUpdate"), l.update(), l.loadParameters();
  }
  updateFocus() {
    this.coreModel.addParameterValueById(this.idParamEyeBallX, this.focusController.x), this.coreModel.addParameterValueById(this.idParamEyeBallY, this.focusController.y), this.coreModel.addParameterValueById(this.idParamAngleX, this.focusController.x * 30), this.coreModel.addParameterValueById(this.idParamAngleY, this.focusController.y * 30), this.coreModel.addParameterValueById(this.idParamAngleZ, this.focusController.x * this.focusController.y * -30), this.coreModel.addParameterValueById(this.idParamBodyAngleX, this.focusController.x * 10);
  }
  updateNaturalMovements(e, r) {
    var i;
    (i = this.breath) == null || i.updateParameters(this.coreModel, e / 1e3);
  }
  draw(e) {
    const r = this.drawingMatrix, i = t_.getArray();
    i[0] = r.a, i[1] = r.b, i[4] = -r.c, i[5] = -r.d, i[12] = r.tx, i[13] = r.ty, this.renderer.setMvpMatrix(t_), this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING), this.viewport), this.renderer.drawModel();
  }
  destroy() {
    super.destroy(), this.renderer.release(), this.coreModel.release(), this.renderer = void 0, this.coreModel = void 0;
  }
}
let Na, e_ = 20;
function FA() {
  return zo.isStarted() ? Promise.resolve() : (Na != null || (Na = new Promise((t, e) => {
    function r() {
      try {
        MA(), t();
      } catch (i) {
        if (e_--, e_ < 0) {
          const s = new Error("Failed to start up Cubism 4 framework.");
          s.cause = i, e(s);
          return;
        }
        dr.log("Cubism4", "Startup failed, retrying 10ms later..."), setTimeout(r, 10);
      }
    }
    r();
  })), Na);
}
function MA(t) {
  t = Object.assign({
    logFunction: console.log,
    loggingLevel: us.LogLevel_Verbose
  }, t), zo.startUp(t), zo.initialize();
}
const UA = 1e-3, r_ = 0.5;
class g0 {
  static create(e) {
    const r = new g0();
    typeof e.FadeInTime == "number" && (r._fadeTimeSeconds = e.FadeInTime, r._fadeTimeSeconds <= 0 && (r._fadeTimeSeconds = r_));
    const i = e.Groups, s = i.length;
    for (let o = 0; o < s; ++o) {
      const h = i[o], l = h.length;
      let c = 0;
      for (let _ = 0; _ < l; ++_) {
        const y = h[_], w = new Za();
        w.partId = y.Id;
        const b = y.Link;
        if (b) {
          const E = b.length;
          for (let T = 0; T < E; ++T) {
            const P = new Za();
            P.partId = b[T], w.link.push(P);
          }
        }
        r._partGroups.push(w), ++c;
      }
      r._partGroupCounts.push(c);
    }
    return r;
  }
  updateParameters(e, r) {
    e != this._lastModel && this.reset(e), this._lastModel = e, r < 0 && (r = 0);
    let i = 0;
    for (let s = 0; s < this._partGroupCounts.length; s++) {
      const o = this._partGroupCounts[s];
      this.doFade(e, r, i, o), i += o;
    }
    this.copyPartOpacities(e);
  }
  reset(e) {
    let r = 0;
    for (let i = 0; i < this._partGroupCounts.length; ++i) {
      const s = this._partGroupCounts[i];
      for (let o = r; o < r + s; ++o) {
        this._partGroups[o].initialize(e);
        const h = this._partGroups[o].partIndex, l = this._partGroups[o].parameterIndex;
        if (!(h < 0)) {
          e.setPartOpacityByIndex(h, o == r ? 1 : 0), e.setParameterValueByIndex(l, o == r ? 1 : 0);
          for (let c = 0; c < this._partGroups[o].link.length; ++c)
            this._partGroups[o].link[c].initialize(e);
        }
      }
      r += s;
    }
  }
  copyPartOpacities(e) {
    for (let r = 0; r < this._partGroups.length; ++r) {
      const i = this._partGroups[r];
      if (i.link.length == 0)
        continue;
      const s = this._partGroups[r].partIndex, o = e.getPartOpacityByIndex(s);
      for (let h = 0; h < i.link.length; ++h) {
        const c = i.link[h].partIndex;
        c < 0 || e.setPartOpacityByIndex(c, o);
      }
    }
  }
  doFade(e, r, i, s) {
    let o = -1, h = 1;
    const l = 0.5, c = 0.15;
    for (let _ = i; _ < i + s; ++_) {
      const y = this._partGroups[_].partIndex, w = this._partGroups[_].parameterIndex;
      if (e.getParameterValueByIndex(w) > UA) {
        if (o >= 0)
          break;
        o = _, h = e.getPartOpacityByIndex(y), h += r / this._fadeTimeSeconds, h > 1 && (h = 1);
      }
    }
    o < 0 && (o = 0, h = 1);
    for (let _ = i; _ < i + s; ++_) {
      const y = this._partGroups[_].partIndex;
      if (o == _)
        e.setPartOpacityByIndex(y, h);
      else {
        let w = e.getPartOpacityByIndex(y), b;
        h < l ? b = h * (l - 1) / l + 1 : b = (1 - h) * l / (1 - l), (1 - b) * (1 - h) > c && (b = 1 - c / (1 - h)), w > b && (w = b), e.setPartOpacityByIndex(y, w);
      }
    }
  }
  constructor() {
    this._fadeTimeSeconds = r_, this._lastModel = void 0, this._partGroups = [], this._partGroupCounts = [];
  }
}
class Za {
  constructor(e) {
    this.parameterIndex = 0, this.partIndex = 0, this.partId = "", this.link = [], e != null && this.assignment(e);
  }
  assignment(e) {
    return this.partId = e.partId, this.link = e.link.map((r) => r.clone()), this;
  }
  initialize(e) {
    this.parameterIndex = e.getParameterIndex(this.partId), this.partIndex = e.getPartIndex(this.partId), e.setParameterValueByIndex(this.parameterIndex, 1);
  }
  clone() {
    const e = new Za();
    return e.partId = this.partId, e.parameterIndex = this.parameterIndex, e.partIndex = this.partIndex, e.link = this.link.map((r) => r.clone()), e;
  }
}
class GA {
  update() {
    this._model.update(), this._model.drawables.resetDynamicFlags();
  }
  getCanvasWidth() {
    return this._model == null ? 0 : this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit;
  }
  getCanvasHeight() {
    return this._model == null ? 0 : this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit;
  }
  saveParameters() {
    const e = this._model.parameters.count, r = this._savedParameters.length;
    for (let i = 0; i < e; ++i)
      i < r ? this._savedParameters[i] = this._parameterValues[i] : this._savedParameters.push(this._parameterValues[i]);
  }
  getModel() {
    return this._model;
  }
  getPartIndex(e) {
    let r;
    const i = this._model.parts.count;
    for (r = 0; r < i; ++r)
      if (e == this._partIds[r])
        return r;
    return e in this._notExistPartId ? this._notExistPartId[e] : (r = i + this._notExistPartId.length, this._notExistPartId[e] = r, this._notExistPartOpacities[r] = 0, r);
  }
  getPartCount() {
    return this._model.parts.count;
  }
  setPartOpacityByIndex(e, r) {
    if (e in this._notExistPartOpacities) {
      this._notExistPartOpacities[e] = r;
      return;
    }
    Sa(0 <= e && e < this.getPartCount()), this._partOpacities[e] = r;
  }
  setPartOpacityById(e, r) {
    const i = this.getPartIndex(e);
    i < 0 || this.setPartOpacityByIndex(i, r);
  }
  getPartOpacityByIndex(e) {
    return e in this._notExistPartOpacities ? this._notExistPartOpacities[e] : (Sa(0 <= e && e < this.getPartCount()), this._partOpacities[e]);
  }
  getPartOpacityById(e) {
    const r = this.getPartIndex(e);
    return r < 0 ? 0 : this.getPartOpacityByIndex(r);
  }
  getParameterIndex(e) {
    let r;
    const i = this._model.parameters.count;
    for (r = 0; r < i; ++r)
      if (e == this._parameterIds[r])
        return r;
    return e in this._notExistParameterId ? this._notExistParameterId[e] : (r = this._model.parameters.count + Object.keys(this._notExistParameterId).length, this._notExistParameterId[e] = r, this._notExistParameterValues[r] = 0, r);
  }
  getParameterCount() {
    return this._model.parameters.count;
  }
  getParameterMaximumValue(e) {
    return this._model.parameters.maximumValues[e];
  }
  getParameterMinimumValue(e) {
    return this._model.parameters.minimumValues[e];
  }
  getParameterDefaultValue(e) {
    return this._model.parameters.defaultValues[e];
  }
  getParameterValueByIndex(e) {
    return e in this._notExistParameterValues ? this._notExistParameterValues[e] : (Sa(0 <= e && e < this.getParameterCount()), this._parameterValues[e]);
  }
  getParameterValueById(e) {
    const r = this.getParameterIndex(e);
    return this.getParameterValueByIndex(r);
  }
  setParameterValueByIndex(e, r, i = 1) {
    if (e in this._notExistParameterValues) {
      this._notExistParameterValues[e] = i == 1 ? r : this._notExistParameterValues[e] * (1 - i) + r * i;
      return;
    }
    Sa(0 <= e && e < this.getParameterCount()), this._model.parameters.maximumValues[e] < r && (r = this._model.parameters.maximumValues[e]), this._model.parameters.minimumValues[e] > r && (r = this._model.parameters.minimumValues[e]), this._parameterValues[e] = i == 1 ? r : this._parameterValues[e] = this._parameterValues[e] * (1 - i) + r * i;
  }
  setParameterValueById(e, r, i = 1) {
    const s = this.getParameterIndex(e);
    this.setParameterValueByIndex(s, r, i);
  }
  addParameterValueByIndex(e, r, i = 1) {
    this.setParameterValueByIndex(e, this.getParameterValueByIndex(e) + r * i);
  }
  addParameterValueById(e, r, i = 1) {
    const s = this.getParameterIndex(e);
    this.addParameterValueByIndex(s, r, i);
  }
  multiplyParameterValueById(e, r, i = 1) {
    const s = this.getParameterIndex(e);
    this.multiplyParameterValueByIndex(s, r, i);
  }
  multiplyParameterValueByIndex(e, r, i = 1) {
    this.setParameterValueByIndex(e, this.getParameterValueByIndex(e) * (1 + (r - 1) * i));
  }
  getDrawableIds() {
    return this._drawableIds.slice();
  }
  getDrawableIndex(e) {
    const r = this._model.drawables.count;
    for (let i = 0; i < r; ++i)
      if (this._drawableIds[i] == e)
        return i;
    return -1;
  }
  getDrawableCount() {
    return this._model.drawables.count;
  }
  getDrawableId(e) {
    return this._model.drawables.ids[e];
  }
  getDrawableRenderOrders() {
    return this._model.drawables.renderOrders;
  }
  getDrawableTextureIndices(e) {
    return this._model.drawables.textureIndices[e];
  }
  getDrawableDynamicFlagVertexPositionsDidChange(e) {
    const r = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[e]);
  }
  getDrawableVertexIndexCount(e) {
    return this._model.drawables.indexCounts[e];
  }
  getDrawableVertexCount(e) {
    return this._model.drawables.vertexCounts[e];
  }
  getDrawableVertices(e) {
    return this.getDrawableVertexPositions(e);
  }
  getDrawableVertexIndices(e) {
    return this._model.drawables.indices[e];
  }
  getDrawableVertexPositions(e) {
    return this._model.drawables.vertexPositions[e];
  }
  getDrawableVertexUvs(e) {
    return this._model.drawables.vertexUvs[e];
  }
  getDrawableOpacity(e) {
    return this._model.drawables.opacities[e];
  }
  getDrawableCulling(e) {
    const r = this._model.drawables.constantFlags;
    return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[e]);
  }
  getDrawableBlendMode(e) {
    const r = this._model.drawables.constantFlags;
    return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[e]) ? wn.CubismBlendMode_Additive : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[e]) ? wn.CubismBlendMode_Multiplicative : wn.CubismBlendMode_Normal;
  }
  getDrawableInvertedMaskBit(e) {
    const r = this._model.drawables.constantFlags;
    return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[e]);
  }
  getDrawableMasks() {
    return this._model.drawables.masks;
  }
  getDrawableMaskCounts() {
    return this._model.drawables.maskCounts;
  }
  isUsingMasking() {
    for (let e = 0; e < this._model.drawables.count; ++e)
      if (!(this._model.drawables.maskCounts[e] <= 0))
        return !0;
    return !1;
  }
  getDrawableDynamicFlagIsVisible(e) {
    const r = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasIsVisibleBit(r[e]);
  }
  getDrawableDynamicFlagVisibilityDidChange(e) {
    const r = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[e]);
  }
  getDrawableDynamicFlagOpacityDidChange(e) {
    const r = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[e]);
  }
  getDrawableDynamicFlagRenderOrderDidChange(e) {
    const r = this._model.drawables.dynamicFlags;
    return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[e]);
  }
  loadParameters() {
    let e = this._model.parameters.count;
    const r = this._savedParameters.length;
    e > r && (e = r);
    for (let i = 0; i < e; ++i)
      this._parameterValues[i] = this._savedParameters[i];
  }
  initialize() {
    this._parameterValues = this._model.parameters.values, this._partOpacities = this._model.parts.opacities, this._parameterMaximumValues = this._model.parameters.maximumValues, this._parameterMinimumValues = this._model.parameters.minimumValues;
    {
      const e = this._model.parameters.ids, r = this._model.parameters.count;
      for (let i = 0; i < r; ++i)
        this._parameterIds.push(e[i]);
    }
    {
      const e = this._model.parts.ids, r = this._model.parts.count;
      for (let i = 0; i < r; ++i)
        this._partIds.push(e[i]);
    }
    {
      const e = this._model.drawables.ids, r = this._model.drawables.count;
      for (let i = 0; i < r; ++i)
        this._drawableIds.push(e[i]);
    }
  }
  constructor(e) {
    this._model = e, this._savedParameters = [], this._parameterIds = [], this._drawableIds = [], this._partIds = [], this._notExistPartId = {}, this._notExistParameterId = {}, this._notExistParameterValues = {}, this._notExistPartOpacities = {}, this.initialize();
  }
  release() {
    this._model.release(), this._model = void 0;
  }
}
class y0 {
  static create(e) {
    const r = Live2DCubismCore.Moc.fromArrayBuffer(e);
    if (r)
      return new y0(r);
    throw new Error("Unknown error");
  }
  createModel() {
    let e;
    const r = Live2DCubismCore.Model.fromMoc(this._moc);
    if (r)
      return e = new GA(r), ++this._modelCount, e;
    throw new Error("Unknown error");
  }
  deleteModel(e) {
    e != null && --this._modelCount;
  }
  constructor(e) {
    this._moc = e, this._modelCount = 0;
  }
  release() {
    this._moc._release(), this._moc = void 0;
  }
}
var _u = /* @__PURE__ */ ((t) => (t[t.CubismPhysicsTargetType_Parameter = 0] = "CubismPhysicsTargetType_Parameter", t))(_u || {}), Jn = /* @__PURE__ */ ((t) => (t[t.CubismPhysicsSource_X = 0] = "CubismPhysicsSource_X", t[t.CubismPhysicsSource_Y = 1] = "CubismPhysicsSource_Y", t[t.CubismPhysicsSource_Angle = 2] = "CubismPhysicsSource_Angle", t))(Jn || {});
class DA {
  constructor() {
    this.initialPosition = new Ge(0, 0), this.position = new Ge(0, 0), this.lastPosition = new Ge(0, 0), this.lastGravity = new Ge(0, 0), this.force = new Ge(0, 0), this.velocity = new Ge(0, 0);
  }
}
class BA {
  constructor() {
    this.normalizationPosition = {}, this.normalizationAngle = {};
  }
}
class kA {
  constructor() {
    this.source = {};
  }
}
class XA {
  constructor() {
    this.destination = {}, this.translationScale = new Ge(0, 0);
  }
}
class VA {
  constructor() {
    this.settings = [], this.inputs = [], this.outputs = [], this.particles = [], this.gravity = new Ge(0, 0), this.wind = new Ge(0, 0);
  }
}
class HA {
  constructor(e) {
    this._json = e;
  }
  release() {
    this._json = void 0;
  }
  getGravity() {
    const e = new Ge(0, 0);
    return e.x = this._json.Meta.EffectiveForces.Gravity.X, e.y = this._json.Meta.EffectiveForces.Gravity.Y, e;
  }
  getWind() {
    const e = new Ge(0, 0);
    return e.x = this._json.Meta.EffectiveForces.Wind.X, e.y = this._json.Meta.EffectiveForces.Wind.Y, e;
  }
  getSubRigCount() {
    return this._json.Meta.PhysicsSettingCount;
  }
  getTotalInputCount() {
    return this._json.Meta.TotalInputCount;
  }
  getTotalOutputCount() {
    return this._json.Meta.TotalOutputCount;
  }
  getVertexCount() {
    return this._json.Meta.VertexCount;
  }
  getNormalizationPositionMinimumValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Position.Minimum;
  }
  getNormalizationPositionMaximumValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Position.Maximum;
  }
  getNormalizationPositionDefaultValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Position.Default;
  }
  getNormalizationAngleMinimumValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Angle.Minimum;
  }
  getNormalizationAngleMaximumValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Angle.Maximum;
  }
  getNormalizationAngleDefaultValue(e) {
    return this._json.PhysicsSettings[e].Normalization.Angle.Default;
  }
  getInputCount(e) {
    return this._json.PhysicsSettings[e].Input.length;
  }
  getInputWeight(e, r) {
    return this._json.PhysicsSettings[e].Input[r].Weight;
  }
  getInputReflect(e, r) {
    return this._json.PhysicsSettings[e].Input[r].Reflect;
  }
  getInputType(e, r) {
    return this._json.PhysicsSettings[e].Input[r].Type;
  }
  getInputSourceId(e, r) {
    return this._json.PhysicsSettings[e].Input[r].Source.Id;
  }
  getOutputCount(e) {
    return this._json.PhysicsSettings[e].Output.length;
  }
  getOutputVertexIndex(e, r) {
    return this._json.PhysicsSettings[e].Output[r].VertexIndex;
  }
  getOutputAngleScale(e, r) {
    return this._json.PhysicsSettings[e].Output[r].Scale;
  }
  getOutputWeight(e, r) {
    return this._json.PhysicsSettings[e].Output[r].Weight;
  }
  getOutputDestinationId(e, r) {
    return this._json.PhysicsSettings[e].Output[r].Destination.Id;
  }
  getOutputType(e, r) {
    return this._json.PhysicsSettings[e].Output[r].Type;
  }
  getOutputReflect(e, r) {
    return this._json.PhysicsSettings[e].Output[r].Reflect;
  }
  getParticleCount(e) {
    return this._json.PhysicsSettings[e].Vertices.length;
  }
  getParticleMobility(e, r) {
    return this._json.PhysicsSettings[e].Vertices[r].Mobility;
  }
  getParticleDelay(e, r) {
    return this._json.PhysicsSettings[e].Vertices[r].Delay;
  }
  getParticleAcceleration(e, r) {
    return this._json.PhysicsSettings[e].Vertices[r].Acceleration;
  }
  getParticleRadius(e, r) {
    return this._json.PhysicsSettings[e].Vertices[r].Radius;
  }
  getParticlePosition(e, r) {
    const i = new Ge(0, 0);
    return i.x = this._json.PhysicsSettings[e].Vertices[r].Position.X, i.y = this._json.PhysicsSettings[e].Vertices[r].Position.Y, i;
  }
}
const i_ = "X", n_ = "Y", s_ = "Angle", zA = 5, B2 = 100, jA = 1e-3;
class b0 {
  static create(e) {
    const r = new b0();
    return r.parse(e), r._physicsRig.gravity.y = 0, r;
  }
  evaluate(e, r) {
    let i, s, o, h;
    const l = new Ge();
    let c, _, y, w, b, E, T, P;
    b = e.getModel().parameters.values, E = e.getModel().parameters.maximumValues, T = e.getModel().parameters.minimumValues, P = e.getModel().parameters.defaultValues;
    for (let O = 0; O < this._physicsRig.subRigCount; ++O) {
      i = { angle: 0 }, l.x = 0, l.y = 0, c = this._physicsRig.settings[O], _ = this._physicsRig.inputs.slice(c.baseInputIndex), y = this._physicsRig.outputs.slice(c.baseOutputIndex), w = this._physicsRig.particles.slice(c.baseParticleIndex);
      for (let H = 0; H < c.inputCount; ++H)
        s = _[H].weight / B2, _[H].sourceParameterIndex == -1 && (_[H].sourceParameterIndex = e.getParameterIndex(_[H].source.id)), _[H].getNormalizedParameterValue(l, i, b[_[H].sourceParameterIndex], T[_[H].sourceParameterIndex], E[_[H].sourceParameterIndex], P[_[H].sourceParameterIndex], c.normalizationPosition, c.normalizationAngle, _[H].reflect, s);
      o = gr.degreesToRadian(-i.angle), l.x = l.x * gr.cos(o) - l.y * gr.sin(o), l.y = l.x * gr.sin(o) + l.y * gr.cos(o), sw(w, c.particleCount, l, i.angle, this._options.wind, jA * c.normalizationPosition.maximum, r, zA);
      for (let H = 0; H < c.outputCount; ++H) {
        const Y = y[H].vertexIndex;
        if (Y < 1 || Y >= c.particleCount)
          break;
        y[H].destinationParameterIndex == -1 && (y[H].destinationParameterIndex = e.getParameterIndex(y[H].destination.id));
        const J = new Ge();
        J.x = w[Y].position.x - w[Y - 1].position.x, J.y = w[Y].position.y - w[Y - 1].position.y, h = y[H].getValue(J, w, Y, y[H].reflect, this._options.gravity);
        const it = y[H].destinationParameterIndex, st = !Float32Array.prototype.slice && "subarray" in Float32Array.prototype ? JSON.parse(JSON.stringify(b.subarray(it))) : b.slice(it);
        ow(st, T[it], E[it], h, y[H]);
        for (let K = it, At = 0; K < b.length; K++, At++)
          b[K] = st[At];
      }
    }
  }
  setOptions(e) {
    this._options = e;
  }
  getOption() {
    return this._options;
  }
  constructor() {
    this._options = new WA(), this._options.gravity.y = -1, this._options.gravity.x = 0, this._options.wind.x = 0, this._options.wind.y = 0;
  }
  release() {
    this._physicsRig = void 0;
  }
  parse(e) {
    this._physicsRig = new VA();
    let r = new HA(e);
    this._physicsRig.gravity = r.getGravity(), this._physicsRig.wind = r.getWind(), this._physicsRig.subRigCount = r.getSubRigCount();
    let i = 0, s = 0, o = 0;
    for (let h = 0; h < this._physicsRig.subRigCount; ++h) {
      const l = new BA();
      l.normalizationPosition.minimum = r.getNormalizationPositionMinimumValue(h), l.normalizationPosition.maximum = r.getNormalizationPositionMaximumValue(h), l.normalizationPosition.defalut = r.getNormalizationPositionDefaultValue(h), l.normalizationAngle.minimum = r.getNormalizationAngleMinimumValue(h), l.normalizationAngle.maximum = r.getNormalizationAngleMaximumValue(h), l.normalizationAngle.defalut = r.getNormalizationAngleDefaultValue(h), l.inputCount = r.getInputCount(h), l.baseInputIndex = i, i += l.inputCount;
      for (let c = 0; c < l.inputCount; ++c) {
        const _ = new kA();
        switch (_.sourceParameterIndex = -1, _.weight = r.getInputWeight(h, c), _.reflect = r.getInputReflect(h, c), r.getInputType(h, c)) {
          case i_:
            _.type = Jn.CubismPhysicsSource_X, _.getNormalizedParameterValue = YA;
            break;
          case n_:
            _.type = Jn.CubismPhysicsSource_Y, _.getNormalizedParameterValue = qA;
            break;
          case s_:
            _.type = Jn.CubismPhysicsSource_Angle, _.getNormalizedParameterValue = ZA;
            break;
        }
        _.source.targetType = _u.CubismPhysicsTargetType_Parameter, _.source.id = r.getInputSourceId(h, c), this._physicsRig.inputs.push(_);
      }
      l.outputCount = r.getOutputCount(h), l.baseOutputIndex = s, s += l.outputCount;
      for (let c = 0; c < l.outputCount; ++c) {
        const _ = new XA();
        switch (_.destinationParameterIndex = -1, _.vertexIndex = r.getOutputVertexIndex(h, c), _.angleScale = r.getOutputAngleScale(h, c), _.weight = r.getOutputWeight(h, c), _.destination.targetType = _u.CubismPhysicsTargetType_Parameter, _.destination.id = r.getOutputDestinationId(h, c), r.getOutputType(h, c)) {
          case i_:
            _.type = Jn.CubismPhysicsSource_X, _.getValue = JA, _.getScale = rw;
            break;
          case n_:
            _.type = Jn.CubismPhysicsSource_Y, _.getValue = QA, _.getScale = iw;
            break;
          case s_:
            _.type = Jn.CubismPhysicsSource_Angle, _.getValue = KA, _.getScale = nw;
            break;
        }
        _.reflect = r.getOutputReflect(h, c), this._physicsRig.outputs.push(_);
      }
      l.particleCount = r.getParticleCount(h), l.baseParticleIndex = o, o += l.particleCount;
      for (let c = 0; c < l.particleCount; ++c) {
        const _ = new DA();
        _.mobility = r.getParticleMobility(h, c), _.delay = r.getParticleDelay(h, c), _.acceleration = r.getParticleAcceleration(h, c), _.radius = r.getParticleRadius(h, c), _.position = r.getParticlePosition(h, c), this._physicsRig.particles.push(_);
      }
      this._physicsRig.settings.push(l);
    }
    this.initialize(), r.release();
  }
  initialize() {
    let e, r, i;
    for (let s = 0; s < this._physicsRig.subRigCount; ++s) {
      r = this._physicsRig.settings[s], e = this._physicsRig.particles.slice(r.baseParticleIndex), e[0].initialPosition = new Ge(0, 0), e[0].lastPosition = new Ge(e[0].initialPosition.x, e[0].initialPosition.y), e[0].lastGravity = new Ge(0, -1), e[0].lastGravity.y *= -1, e[0].velocity = new Ge(0, 0), e[0].force = new Ge(0, 0);
      for (let o = 1; o < r.particleCount; ++o)
        i = new Ge(0, 0), i.y = e[o].radius, e[o].initialPosition = new Ge(e[o - 1].initialPosition.x + i.x, e[o - 1].initialPosition.y + i.y), e[o].position = new Ge(e[o].initialPosition.x, e[o].initialPosition.y), e[o].lastPosition = new Ge(e[o].initialPosition.x, e[o].initialPosition.y), e[o].lastGravity = new Ge(0, -1), e[o].lastGravity.y *= -1, e[o].velocity = new Ge(0, 0), e[o].force = new Ge(0, 0);
    }
  }
}
class WA {
  constructor() {
    this.gravity = new Ge(0, 0), this.wind = new Ge(0, 0);
  }
}
function YA(t, e, r, i, s, o, h, l, c, _) {
  t.x += x0(r, i, s, o, h.minimum, h.maximum, h.defalut, c) * _;
}
function qA(t, e, r, i, s, o, h, l, c, _) {
  t.y += x0(r, i, s, o, h.minimum, h.maximum, h.defalut, c) * _;
}
function ZA(t, e, r, i, s, o, h, l, c, _) {
  e.angle += x0(r, i, s, o, l.minimum, l.maximum, l.defalut, c) * _;
}
function JA(t, e, r, i, s) {
  let o = t.x;
  return i && (o *= -1), o;
}
function QA(t, e, r, i, s) {
  let o = t.y;
  return i && (o *= -1), o;
}
function KA(t, e, r, i, s) {
  let o;
  return r >= 2 ? s = e[r - 1].position.substract(e[r - 2].position) : s = s.multiplyByScaler(-1), o = gr.directionToRadian(s, t), i && (o *= -1), o;
}
function tw(t, e) {
  return Math.abs(Math.max(t, e) - Math.min(t, e));
}
function ew(t, e) {
  return Math.min(t, e) + tw(t, e) / 2;
}
function rw(t, e) {
  return t.x;
}
function iw(t, e) {
  return t.y;
}
function nw(t, e) {
  return e;
}
function sw(t, e, r, i, s, o, h, l) {
  let c, _, y, w, b = new Ge(0, 0), E = new Ge(0, 0), T = new Ge(0, 0), P = new Ge(0, 0);
  t[0].position = new Ge(r.x, r.y), c = gr.degreesToRadian(i), w = gr.radianToDirection(c), w.normalize();
  for (let O = 1; O < e; ++O)
    t[O].force = w.multiplyByScaler(t[O].acceleration).add(s), t[O].lastPosition = new Ge(t[O].position.x, t[O].position.y), _ = t[O].delay * h * 30, b = t[O].position.substract(t[O - 1].position), y = gr.directionToRadian(t[O].lastGravity, w) / l, b.x = gr.cos(y) * b.x - b.y * gr.sin(y), b.y = gr.sin(y) * b.x + b.y * gr.cos(y), t[O].position = t[O - 1].position.add(b), E = t[O].velocity.multiplyByScaler(_), T = t[O].force.multiplyByScaler(_).multiplyByScaler(_), t[O].position = t[O].position.add(E).add(T), P = t[O].position.substract(t[O - 1].position), P.normalize(), t[O].position = t[O - 1].position.add(P.multiplyByScaler(t[O].radius)), gr.abs(t[O].position.x) < o && (t[O].position.x = 0), _ != 0 && (t[O].velocity = t[O].position.substract(t[O].lastPosition), t[O].velocity = t[O].velocity.divisionByScalar(_), t[O].velocity = t[O].velocity.multiplyByScaler(t[O].mobility)), t[O].force = new Ge(0, 0), t[O].lastGravity = new Ge(w.x, w.y);
}
function ow(t, e, r, i, s) {
  let o, h, l;
  o = s.getScale(s.translationScale, s.angleScale), h = i * o, h < e ? (h < s.valueBelowMinimum && (s.valueBelowMinimum = h), h = e) : h > r && (h > s.valueExceededMaximum && (s.valueExceededMaximum = h), h = r), l = s.weight / B2, l >= 1 || (h = t[0] * (1 - l) + h * l), t[0] = h;
}
function x0(t, e, r, i, s, o, h, l) {
  let c = 0;
  const _ = gr.max(r, e);
  _ < t && (t = _);
  const y = gr.min(r, e);
  y > t && (t = y);
  const w = gr.min(s, o), b = gr.max(s, o), E = h, T = ew(y, _), P = t - T;
  switch (Math.sign(P)) {
    case 1: {
      const O = b - E, H = _ - T;
      H != 0 && (c = P * (O / H), c += E);
      break;
    }
    case -1: {
      const O = w - E, H = y - T;
      H != 0 && (c = P * (O / H), c += E);
      break;
    }
    case 0: {
      c = E;
      break;
    }
  }
  return l ? c : c * -1;
}
Pr.registerRuntime({
  version: 4,
  ready: FA,
  test(t) {
    return t instanceof Cs || Cs.isValidJSON(t);
  },
  isValidMoc(t) {
    if (t.byteLength < 4)
      return !1;
    const e = new Int8Array(t, 0, 4);
    return String.fromCharCode(...e) === "MOC3";
  },
  createModelSettings(t) {
    return new Cs(t);
  },
  createCoreModel(t) {
    const e = y0.create(t);
    try {
      const r = e.createModel();
      return r.__moc = e, r;
    } catch (r) {
      try {
        e.release();
      } catch (i) {
      }
      throw r;
    }
  },
  createInternalModel(t, e, r) {
    const i = new OA(t, e, r), s = t;
    return s.__moc && (i.__moc = s.__moc, delete s.__moc, i.once("destroy", aw)), i;
  },
  createPhysics(t, e) {
    return b0.create(e);
  },
  createPose(t, e) {
    return g0.create(e);
  }
});
function aw() {
  var t;
  (t = this.__moc) == null || t.release();
}
const hw = [
  "",
  "~",
  "",
  "",
  "",
  "~",
  "2023~",
  ""
], lw = {
  daybreak: "",
  morning: "",
  noon: "",
  afternoon: "~",
  dusk: "~",
  night: "",
  lateNight: "~",
  weeHours: ""
}, uw = ["~"], fw = `
.oml-icon {
  width: 1em; 
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}

#oml-stage {
  position: fixed;
  left: 0;
  bottom: 0;
  z-index: 9997;
  transform: translateY(130%);
}

#oml-canvas{
  width: 100%;
  height: 100%;
  position: relative;
  z-index: 9997;
}

#oml-levitated-btn {
  position: fixed;
  transform: translateX(-110%);
  left: 0;
  bottom: 80px;
  padding: 7px 5px;
  z-index: 9998;
  background-color: #58b0fc;
  border-style: solid;
  border-width: 2px 2px 2px 0px;
  border-color: #fff;
  border-radius: 0 5px 5px 0;
  box-shadow: 0 0 5px #999;
  color: #fff;
  writing-mode: vertical-lr;
  display: hidden;
  align-items: center;
  text-align: center;
  align-items: center;
  flex-wrap: wrap;
  font-size: 14px;
}

.oml-loading{
  display: hidden;
  animation-name: oml-loading-rotate;
  animation-duration: 600ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

#oml-tips {
  display: hidden;
  position: absolute;
  top: 0px;
  font-size: 18px;
  border-radius: 10px;
  filter: drop-shadow(0 0 5px #999);
  transform: translate(0%, -40%);
  background-color: #58b0fc;
  border: 2px solid #fff;
  color: #fff;
  padding: 3px 5px;
  opacity: 0;
  visibility: hidden;
  transform: translateX(-50%);
  text-align: center;
  align-items: center;
  justify-content: center;
}


#oml-controls {
  transition: all 500ms;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  right: 0;
  bottom: 10%;
  z-index: 9999;
  font-size: 26px;
}

#oml-stage:hover > #oml-controls {
  visibility: visible;
  opacity: 1;
}

#oml-controls .oml-control-item {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  box-sizing: border-box;
  align-items: center;
  transition: all 300ms;
  color: #58b0fc;
  cursor: pointer;
  background-color: #fff;
}

#oml-controls .oml-control-item:hover {
  background-color: #58b0fc;
  color: #fff;
  box-shadow: 0 0 5px #000;
}

#oml-controls .oml-control-item:not(:last-child) {
  margin-bottom: 10px;
}

@keyframes oml-shake-tooltip{
  0% {
    transform: translate(-50%, 5%) scale(0.99);
  }
  50% {
 
    transform: translate(-50%, 0%) scale(1);
  }
  100% {
    transform: translate(-50%, 5%) scale(0.99);
  }
}

@keyframes oml-stage-slide-in {
  from {
    transform: translateY(130%);
  }
  to {
    transform: translateY(0%);
  }
}

@keyframes oml-stage-slide-out {
  from {
    transform: translateY(0%);
  }
  to {
    transform: translateY(130%);
  }
}

@keyframes oml-loading-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes oml-levitated-btn-hidden {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-120%);
  }
}


@keyframes oml-levitated-btn-display {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(0%);
  }
}

@keyframes oml-display-tooltip {
  0% {
    opacity: 0;
    visibility: hidden;
  }
  100% {
    opacity: 1;
    visibility: visible;
  }
}

@keyframes oml-hidden-tooltip {
  0% {
    opacity: 1;
    visibility: visible;
  }
  100% {
    opacity: 0;
    visibility: hidden;
  }
}

`;
window._iconfont_svg_string_3847283 = '<svg><symbol id="icon-bed1" viewBox="0 0 1280 1024"><path d="M352 512c88.22 0 160-71.78 160-160s-71.78-160-160-160-160 71.78-160 160 71.78 160 160 160z m704-256H608c-17.68 0-32 14.32-32 32v288H128V160c0-17.68-14.32-32-32-32H32C14.32 128 0 142.32 0 160v704c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32v-96h1024v96c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V480c0-123.72-100.28-224-224-224z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-heart-fill" viewBox="0 0 1024 1024"><path d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"  ></path></symbol><symbol id="icon-skin-fill" viewBox="0 0 1024 1024"><path d="M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7c-4.1-17.4-19.5-29.3-37-29.3H154c-24.3 0-44 19.7-44 44v252c0 24.3 19.7 44 44 44h75v388c0 24.3 19.7 44 44 44h478c24.3 0 44-19.7 44-44V466h75c24.3 0 44-19.7 44-44V170c0-24.3-19.7-44-44-44z"  ></path></symbol><symbol id="icon-setting-fill" viewBox="0 0 1024 1024"><path d="M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1-21.2-21.2-49.2-32.8-79.1-32.8z"  ></path><path d="M924.8 626.1l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.4-44.8-96.8-79.6-137.7l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52-9.4-106.8-9.4-158.8 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.3c-35.9 13.6-69.1 32.9-98.9 57.3l-81.8-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.5 87.4-79.6 137.7l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.7 7.1 79.4 7.1 26.7 0 53.4-2.4 79.4-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l0.9-2.6c4.3-12.4 0.6-26.3-9.5-35z m-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"  ></path></symbol><symbol id="icon-a-userswitch-fill" viewBox="0 0 1024 1024"><path d="M512 565c133.7 0 242-108.3 242-242S645.7 81 512 81 270 189.3 270 323s108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 645.3 128 771.7 128 917v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75zM760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m-98.4 136a4 4 0 0 1 4-4h124v-33.4c0-16 20.8-22.1 29.4-8.7l36.9 57.5a16 16 0 0 1-13.5 24.6H665.6a4 4 0 0 1-4-4z m196.8 112a4 4 0 0 1-4 4h-124v33.4c0 16-20.8 22.1-29.4 8.7l-36.9-57.5a16 16 0 0 1 13.5-24.6h176.8a4 4 0 0 1 4 4z"  ></path></symbol><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"  ></path></symbol></svg>', function(t) {
  var r = (r = document.getElementsByTagName("script"))[r.length - 1], e = r.getAttribute("data-injectcss"), r = r.getAttribute("data-disable-injectsvg");
  if (!r) {
    var i, s, o, h, l, c = function(w, b) {
      b.parentNode.insertBefore(w, b);
    };
    if (e && !t.__iconfont__svg__cssinject__) {
      t.__iconfont__svg__cssinject__ = !0;
      try {
        document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>");
      } catch (w) {
        console && console.log(w);
      }
    }
    i = function() {
      var w, b = document.createElement("div");
      b.innerHTML = t._iconfont_svg_string_3847283, (b = b.getElementsByTagName("svg")[0]) && (b.setAttribute("aria-hidden", "true"), b.style.position = "absolute", b.style.width = 0, b.style.height = 0, b.style.overflow = "hidden", b = b, (w = document.body).firstChild ? c(b, w.firstChild) : w.appendChild(b));
    }, document.addEventListener ? ~["complete", "loaded", "interactive"].indexOf(document.readyState) ? setTimeout(i, 0) : (s = function() {
      document.removeEventListener("DOMContentLoaded", s, !1), i();
    }, document.addEventListener("DOMContentLoaded", s, !1)) : document.attachEvent && (o = i, h = t.document, l = !1, y(), h.onreadystatechange = function() {
      h.readyState == "complete" && (h.onreadystatechange = null, _());
    });
  }
  function _() {
    l || (l = !0, o());
  }
  function y() {
    try {
      h.documentElement.doScroll("left");
    } catch (w) {
      return void setTimeout(y, 50);
    }
    _();
  }
}(window);
const cw = "", dw = {
  complete: "",
  cubism2: "",
  cubism4: ""
}, _w = cw, Hn = {
  source: _w,
  sayHello: !0,
  transitionTime: 1e3,
  mobileShow: !1,
  models: {
    path: "",
    x: 0,
    y: 0,
    scale: 1,
    stageStyle: {
      backgroundColor: "rgba(0, 0, 0, 0)",
      width: "auto",
      height: "auto"
    }
  },
  tips: {
    style: {
      width: 230,
      height: 100,
      offsetX: 0,
      offsetY: 0
    },
    idleTips: {
      message: hw,
      persistTime: 5e3,
      interval: 5e3,
      priority: 2,
      remote: !1
    },
    welcomeTips: {
      message: lw,
      persistTime: 5e3,
      priority: 3
    },
    copyTips: {
      message: uw,
      persistTime: 5e3,
      priority: 9
    }
  }
}, La = {
  globalStyle: fw,
  elements: {
    canvasEl: {
      id: "oml-canvas",
      tagName: "canvas"
    },
    stageEl: {
      id: "oml-stage",
      tagName: "div"
    },
    tipsEl: {
      id: "oml-tips",
      tagName: "div"
    },
    levitatedBtnEl: {
      id: "oml-levitated-btn",
      tagName: "div"
    },
    controlsEl: {
      id: "oml-controls",
      tagName: "div"
    }
  },
  controls: [
    // {
    //   id: "SwitchModel",
    //   name: "icon-a-userswitch-fill",
    //   title: ""
    // },
    // {
    //   id: "Setting",
    //   name: "icon-setting-fill",
    //   title: ""
    // },
    // {
    //   id: "About",
    //   name: "icon-info-circle-fill",
    //   title: ""
    // }
  ]
};
var pw = typeof global == "object" && global && global.Object === Object && global;
const k2 = pw;
var vw = typeof self == "object" && self && self.Object === Object && self, mw = k2 || vw || Function("return this")();
const Ki = mw;
var gw = Ki.Symbol;
const Ms = gw;
var X2 = Object.prototype, yw = X2.hasOwnProperty, bw = X2.toString, _o = Ms ? Ms.toStringTag : void 0;
function xw(t) {
  var e = yw.call(t, _o), r = t[_o];
  try {
    t[_o] = void 0;
    var i = !0;
  } catch (o) {
  }
  var s = bw.call(t);
  return i && (e ? t[_o] = r : delete t[_o]), s;
}
var Tw = Object.prototype, Aw = Tw.toString;
function ww(t) {
  return Aw.call(t);
}
var Pw = "[object Null]", Ew = "[object Undefined]", o_ = Ms ? Ms.toStringTag : void 0;
function Xs(t) {
  return t == null ? t === void 0 ? Ew : Pw : o_ && o_ in Object(t) ? xw(t) : ww(t);
}
function fs(t) {
  return t != null && typeof t == "object";
}
var Iw = Array.isArray;
const jo = Iw;
function $n(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
function V2(t) {
  return t;
}
var Cw = "[object AsyncFunction]", $w = "[object Function]", Rw = "[object GeneratorFunction]", Sw = "[object Proxy]";
function T0(t) {
  if (!$n(t))
    return !1;
  var e = Xs(t);
  return e == $w || e == Rw || e == Cw || e == Sw;
}
var Nw = Ki["__core-js_shared__"];
const tl = Nw;
var a_ = function() {
  var t = /[^.]+$/.exec(tl && tl.keys && tl.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function Lw(t) {
  return !!a_ && a_ in t;
}
var Ow = Function.prototype, Fw = Ow.toString;
function cs(t) {
  if (t != null) {
    try {
      return Fw.call(t);
    } catch (e) {
    }
    try {
      return t + "";
    } catch (e) {
    }
  }
  return "";
}
var Mw = /[\\^$.*+?()[\]{}|]/g, Uw = /^\[object .+?Constructor\]$/, Gw = Function.prototype, Dw = Object.prototype, Bw = Gw.toString, kw = Dw.hasOwnProperty, Xw = RegExp(
  "^" + Bw.call(kw).replace(Mw, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Vw(t) {
  if (!$n(t) || Lw(t))
    return !1;
  var e = T0(t) ? Xw : Uw;
  return e.test(cs(t));
}
function Hw(t, e) {
  return t == null ? void 0 : t[e];
}
function ds(t, e) {
  var r = Hw(t, e);
  return Vw(r) ? r : void 0;
}
var zw = ds(Ki, "WeakMap");
const pu = zw;
var h_ = Object.create, jw = function() {
  function t() {
  }
  return function(e) {
    if (!$n(e))
      return {};
    if (h_)
      return h_(e);
    t.prototype = e;
    var r = new t();
    return t.prototype = void 0, r;
  };
}();
const Ww = jw;
function Yw(t, e, r) {
  switch (r.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, r[0]);
    case 2:
      return t.call(e, r[0], r[1]);
    case 3:
      return t.call(e, r[0], r[1], r[2]);
  }
  return t.apply(e, r);
}
function H2(t, e) {
  var r = -1, i = t.length;
  for (e || (e = Array(i)); ++r < i; )
    e[r] = t[r];
  return e;
}
var qw = 800, Zw = 16, Jw = Date.now;
function Qw(t) {
  var e = 0, r = 0;
  return function() {
    var i = Jw(), s = Zw - (i - r);
    if (r = i, s > 0) {
      if (++e >= qw)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function Kw(t) {
  return function() {
    return t;
  };
}
var t4 = function() {
  try {
    var t = ds(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch (e) {
  }
}();
const Ja = t4;
var e4 = Ja ? function(t, e) {
  return Ja(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: Kw(e),
    writable: !0
  });
} : V2;
const r4 = e4;
var i4 = Qw(r4);
const n4 = i4;
function s4(t, e) {
  for (var r = -1, i = t == null ? 0 : t.length; ++r < i && e(t[r], r, t) !== !1; )
    ;
  return t;
}
var o4 = 9007199254740991, a4 = /^(?:0|[1-9]\d*)$/;
function z2(t, e) {
  var r = typeof t;
  return e = e == null ? o4 : e, !!e && (r == "number" || r != "symbol" && a4.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function A0(t, e, r) {
  e == "__proto__" && Ja ? Ja(t, e, {
    configurable: !0,
    enumerable: !0,
    value: r,
    writable: !0
  }) : t[e] = r;
}
function dh(t, e) {
  return t === e || t !== t && e !== e;
}
var h4 = Object.prototype, l4 = h4.hasOwnProperty;
function j2(t, e, r) {
  var i = t[e];
  (!(l4.call(t, e) && dh(i, r)) || r === void 0 && !(e in t)) && A0(t, e, r);
}
function Qo(t, e, r, i) {
  var s = !r;
  r || (r = {});
  for (var o = -1, h = e.length; ++o < h; ) {
    var l = e[o], c = i ? i(r[l], t[l], l, r, t) : void 0;
    c === void 0 && (c = t[l]), s ? A0(r, l, c) : j2(r, l, c);
  }
  return r;
}
var l_ = Math.max;
function u4(t, e, r) {
  return e = l_(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var i = arguments, s = -1, o = l_(i.length - e, 0), h = Array(o); ++s < o; )
      h[s] = i[e + s];
    s = -1;
    for (var l = Array(e + 1); ++s < e; )
      l[s] = i[s];
    return l[e] = r(h), Yw(t, this, l);
  };
}
function f4(t, e) {
  return n4(u4(t, e, V2), t + "");
}
var c4 = 9007199254740991;
function W2(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= c4;
}
function _h(t) {
  return t != null && W2(t.length) && !T0(t);
}
function d4(t, e, r) {
  if (!$n(r))
    return !1;
  var i = typeof e;
  return (i == "number" ? _h(r) && z2(e, r.length) : i == "string" && e in r) ? dh(r[e], t) : !1;
}
function _4(t) {
  return f4(function(e, r) {
    var i = -1, s = r.length, o = s > 1 ? r[s - 1] : void 0, h = s > 2 ? r[2] : void 0;
    for (o = t.length > 3 && typeof o == "function" ? (s--, o) : void 0, h && d4(r[0], r[1], h) && (o = s < 3 ? void 0 : o, s = 1), e = Object(e); ++i < s; ) {
      var l = r[i];
      l && t(e, l, i, o);
    }
    return e;
  });
}
var p4 = Object.prototype;
function w0(t) {
  var e = t && t.constructor, r = typeof e == "function" && e.prototype || p4;
  return t === r;
}
function v4(t, e) {
  for (var r = -1, i = Array(t); ++r < t; )
    i[r] = e(r);
  return i;
}
var m4 = "[object Arguments]";
function u_(t) {
  return fs(t) && Xs(t) == m4;
}
var Y2 = Object.prototype, g4 = Y2.hasOwnProperty, y4 = Y2.propertyIsEnumerable, b4 = u_(function() {
  return arguments;
}()) ? u_ : function(t) {
  return fs(t) && g4.call(t, "callee") && !y4.call(t, "callee");
};
const vu = b4;
function x4() {
  return !1;
}
var q2 = typeof exports == "object" && exports && !exports.nodeType && exports, f_ = q2 && typeof module == "object" && module && !module.nodeType && module, T4 = f_ && f_.exports === q2, c_ = T4 ? Ki.Buffer : void 0, A4 = c_ ? c_.isBuffer : void 0, w4 = A4 || x4;
const P0 = w4;
var P4 = "[object Arguments]", E4 = "[object Array]", I4 = "[object Boolean]", C4 = "[object Date]", $4 = "[object Error]", R4 = "[object Function]", S4 = "[object Map]", N4 = "[object Number]", L4 = "[object Object]", O4 = "[object RegExp]", F4 = "[object Set]", M4 = "[object String]", U4 = "[object WeakMap]", G4 = "[object ArrayBuffer]", D4 = "[object DataView]", B4 = "[object Float32Array]", k4 = "[object Float64Array]", X4 = "[object Int8Array]", V4 = "[object Int16Array]", H4 = "[object Int32Array]", z4 = "[object Uint8Array]", j4 = "[object Uint8ClampedArray]", W4 = "[object Uint16Array]", Y4 = "[object Uint32Array]", Tr = {};
Tr[B4] = Tr[k4] = Tr[X4] = Tr[V4] = Tr[H4] = Tr[z4] = Tr[j4] = Tr[W4] = Tr[Y4] = !0;
Tr[P4] = Tr[E4] = Tr[G4] = Tr[I4] = Tr[D4] = Tr[C4] = Tr[$4] = Tr[R4] = Tr[S4] = Tr[N4] = Tr[L4] = Tr[O4] = Tr[F4] = Tr[M4] = Tr[U4] = !1;
function q4(t) {
  return fs(t) && W2(t.length) && !!Tr[Xs(t)];
}
function E0(t) {
  return function(e) {
    return t(e);
  };
}
var Z2 = typeof exports == "object" && exports && !exports.nodeType && exports, Po = Z2 && typeof module == "object" && module && !module.nodeType && module, Z4 = Po && Po.exports === Z2, el = Z4 && k2.process, J4 = function() {
  try {
    var t = Po && Po.require && Po.require("util").types;
    return t || el && el.binding && el.binding("util");
  } catch (e) {
  }
}();
const Us = J4;
var d_ = Us && Us.isTypedArray, Q4 = d_ ? E0(d_) : q4;
const J2 = Q4;
var K4 = Object.prototype, tP = K4.hasOwnProperty;
function Q2(t, e) {
  var r = jo(t), i = !r && vu(t), s = !r && !i && P0(t), o = !r && !i && !s && J2(t), h = r || i || s || o, l = h ? v4(t.length, String) : [], c = l.length;
  for (var _ in t)
    (e || tP.call(t, _)) && !(h && // Safari 9 has enumerable `arguments.length` in strict mode.
    (_ == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    s && (_ == "offset" || _ == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (_ == "buffer" || _ == "byteLength" || _ == "byteOffset") || // Skip index properties.
    z2(_, c))) && l.push(_);
  return l;
}
function K2(t, e) {
  return function(r) {
    return t(e(r));
  };
}
var eP = K2(Object.keys, Object);
const rP = eP;
var iP = Object.prototype, nP = iP.hasOwnProperty;
function sP(t) {
  if (!w0(t))
    return rP(t);
  var e = [];
  for (var r in Object(t))
    nP.call(t, r) && r != "constructor" && e.push(r);
  return e;
}
function I0(t) {
  return _h(t) ? Q2(t) : sP(t);
}
function oP(t) {
  var e = [];
  if (t != null)
    for (var r in Object(t))
      e.push(r);
  return e;
}
var aP = Object.prototype, hP = aP.hasOwnProperty;
function lP(t) {
  if (!$n(t))
    return oP(t);
  var e = w0(t), r = [];
  for (var i in t)
    i == "constructor" && (e || !hP.call(t, i)) || r.push(i);
  return r;
}
function Ko(t) {
  return _h(t) ? Q2(t, !0) : lP(t);
}
var uP = ds(Object, "create");
const Wo = uP;
function fP() {
  this.__data__ = Wo ? Wo(null) : {}, this.size = 0;
}
function cP(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var dP = "__lodash_hash_undefined__", _P = Object.prototype, pP = _P.hasOwnProperty;
function vP(t) {
  var e = this.__data__;
  if (Wo) {
    var r = e[t];
    return r === dP ? void 0 : r;
  }
  return pP.call(e, t) ? e[t] : void 0;
}
var mP = Object.prototype, gP = mP.hasOwnProperty;
function yP(t) {
  var e = this.__data__;
  return Wo ? e[t] !== void 0 : gP.call(e, t);
}
var bP = "__lodash_hash_undefined__";
function xP(t, e) {
  var r = this.__data__;
  return this.size += this.has(t) ? 0 : 1, r[t] = Wo && e === void 0 ? bP : e, this;
}
function hs(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
hs.prototype.clear = fP;
hs.prototype.delete = cP;
hs.prototype.get = vP;
hs.prototype.has = yP;
hs.prototype.set = xP;
function TP() {
  this.__data__ = [], this.size = 0;
}
function ph(t, e) {
  for (var r = t.length; r--; )
    if (dh(t[r][0], e))
      return r;
  return -1;
}
var AP = Array.prototype, wP = AP.splice;
function PP(t) {
  var e = this.__data__, r = ph(e, t);
  if (r < 0)
    return !1;
  var i = e.length - 1;
  return r == i ? e.pop() : wP.call(e, r, 1), --this.size, !0;
}
function EP(t) {
  var e = this.__data__, r = ph(e, t);
  return r < 0 ? void 0 : e[r][1];
}
function IP(t) {
  return ph(this.__data__, t) > -1;
}
function CP(t, e) {
  var r = this.__data__, i = ph(r, t);
  return i < 0 ? (++this.size, r.push([t, e])) : r[i][1] = e, this;
}
function _n(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
_n.prototype.clear = TP;
_n.prototype.delete = PP;
_n.prototype.get = EP;
_n.prototype.has = IP;
_n.prototype.set = CP;
var $P = ds(Ki, "Map");
const Yo = $P;
function RP() {
  this.size = 0, this.__data__ = {
    hash: new hs(),
    map: new (Yo || _n)(),
    string: new hs()
  };
}
function SP(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function vh(t, e) {
  var r = t.__data__;
  return SP(e) ? r[typeof e == "string" ? "string" : "hash"] : r.map;
}
function NP(t) {
  var e = vh(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function LP(t) {
  return vh(this, t).get(t);
}
function OP(t) {
  return vh(this, t).has(t);
}
function FP(t, e) {
  var r = vh(this, t), i = r.size;
  return r.set(t, e), this.size += r.size == i ? 0 : 1, this;
}
function Vs(t) {
  var e = -1, r = t == null ? 0 : t.length;
  for (this.clear(); ++e < r; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
Vs.prototype.clear = RP;
Vs.prototype.delete = NP;
Vs.prototype.get = LP;
Vs.prototype.has = OP;
Vs.prototype.set = FP;
function tv(t, e) {
  for (var r = -1, i = e.length, s = t.length; ++r < i; )
    t[s + r] = e[r];
  return t;
}
var MP = K2(Object.getPrototypeOf, Object);
const C0 = MP;
var UP = "[object Object]", GP = Function.prototype, DP = Object.prototype, ev = GP.toString, BP = DP.hasOwnProperty, kP = ev.call(Object);
function XP(t) {
  if (!fs(t) || Xs(t) != UP)
    return !1;
  var e = C0(t);
  if (e === null)
    return !0;
  var r = BP.call(e, "constructor") && e.constructor;
  return typeof r == "function" && r instanceof r && ev.call(r) == kP;
}
function VP() {
  this.__data__ = new _n(), this.size = 0;
}
function HP(t) {
  var e = this.__data__, r = e.delete(t);
  return this.size = e.size, r;
}
function zP(t) {
  return this.__data__.get(t);
}
function jP(t) {
  return this.__data__.has(t);
}
var WP = 200;
function YP(t, e) {
  var r = this.__data__;
  if (r instanceof _n) {
    var i = r.__data__;
    if (!Yo || i.length < WP - 1)
      return i.push([t, e]), this.size = ++r.size, this;
    r = this.__data__ = new Vs(i);
  }
  return r.set(t, e), this.size = r.size, this;
}
function _s(t) {
  var e = this.__data__ = new _n(t);
  this.size = e.size;
}
_s.prototype.clear = VP;
_s.prototype.delete = HP;
_s.prototype.get = zP;
_s.prototype.has = jP;
_s.prototype.set = YP;
function qP(t, e) {
  return t && Qo(e, I0(e), t);
}
function ZP(t, e) {
  return t && Qo(e, Ko(e), t);
}
var rv = typeof exports == "object" && exports && !exports.nodeType && exports, __ = rv && typeof module == "object" && module && !module.nodeType && module, JP = __ && __.exports === rv, p_ = JP ? Ki.Buffer : void 0, v_ = p_ ? p_.allocUnsafe : void 0;
function iv(t, e) {
  if (e)
    return t.slice();
  var r = t.length, i = v_ ? v_(r) : new t.constructor(r);
  return t.copy(i), i;
}
function QP(t, e) {
  for (var r = -1, i = t == null ? 0 : t.length, s = 0, o = []; ++r < i; ) {
    var h = t[r];
    e(h, r, t) && (o[s++] = h);
  }
  return o;
}
function nv() {
  return [];
}
var KP = Object.prototype, tE = KP.propertyIsEnumerable, m_ = Object.getOwnPropertySymbols, eE = m_ ? function(t) {
  return t == null ? [] : (t = Object(t), QP(m_(t), function(e) {
    return tE.call(t, e);
  }));
} : nv;
const $0 = eE;
function rE(t, e) {
  return Qo(t, $0(t), e);
}
var iE = Object.getOwnPropertySymbols, nE = iE ? function(t) {
  for (var e = []; t; )
    tv(e, $0(t)), t = C0(t);
  return e;
} : nv;
const sv = nE;
function sE(t, e) {
  return Qo(t, sv(t), e);
}
function ov(t, e, r) {
  var i = e(t);
  return jo(t) ? i : tv(i, r(t));
}
function oE(t) {
  return ov(t, I0, $0);
}
function aE(t) {
  return ov(t, Ko, sv);
}
var hE = ds(Ki, "DataView");
const mu = hE;
var lE = ds(Ki, "Promise");
const gu = lE;
var uE = ds(Ki, "Set");
const yu = uE;
var g_ = "[object Map]", fE = "[object Object]", y_ = "[object Promise]", b_ = "[object Set]", x_ = "[object WeakMap]", T_ = "[object DataView]", cE = cs(mu), dE = cs(Yo), _E = cs(gu), pE = cs(yu), vE = cs(pu), Qn = Xs;
(mu && Qn(new mu(new ArrayBuffer(1))) != T_ || Yo && Qn(new Yo()) != g_ || gu && Qn(gu.resolve()) != y_ || yu && Qn(new yu()) != b_ || pu && Qn(new pu()) != x_) && (Qn = function(t) {
  var e = Xs(t), r = e == fE ? t.constructor : void 0, i = r ? cs(r) : "";
  if (i)
    switch (i) {
      case cE:
        return T_;
      case dE:
        return g_;
      case _E:
        return y_;
      case pE:
        return b_;
      case vE:
        return x_;
    }
  return e;
});
const R0 = Qn;
var mE = Object.prototype, gE = mE.hasOwnProperty;
function yE(t) {
  var e = t.length, r = new t.constructor(e);
  return e && typeof t[0] == "string" && gE.call(t, "index") && (r.index = t.index, r.input = t.input), r;
}
var bE = Ki.Uint8Array;
const A_ = bE;
function S0(t) {
  var e = new t.constructor(t.byteLength);
  return new A_(e).set(new A_(t)), e;
}
function xE(t, e) {
  var r = e ? S0(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.byteLength);
}
var TE = /\w*$/;
function AE(t) {
  var e = new t.constructor(t.source, TE.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var w_ = Ms ? Ms.prototype : void 0, P_ = w_ ? w_.valueOf : void 0;
function wE(t) {
  return P_ ? Object(P_.call(t)) : {};
}
function av(t, e) {
  var r = e ? S0(t.buffer) : t.buffer;
  return new t.constructor(r, t.byteOffset, t.length);
}
var PE = "[object Boolean]", EE = "[object Date]", IE = "[object Map]", CE = "[object Number]", $E = "[object RegExp]", RE = "[object Set]", SE = "[object String]", NE = "[object Symbol]", LE = "[object ArrayBuffer]", OE = "[object DataView]", FE = "[object Float32Array]", ME = "[object Float64Array]", UE = "[object Int8Array]", GE = "[object Int16Array]", DE = "[object Int32Array]", BE = "[object Uint8Array]", kE = "[object Uint8ClampedArray]", XE = "[object Uint16Array]", VE = "[object Uint32Array]";
function HE(t, e, r) {
  var i = t.constructor;
  switch (e) {
    case LE:
      return S0(t);
    case PE:
    case EE:
      return new i(+t);
    case OE:
      return xE(t, r);
    case FE:
    case ME:
    case UE:
    case GE:
    case DE:
    case BE:
    case kE:
    case XE:
    case VE:
      return av(t, r);
    case IE:
      return new i();
    case CE:
    case SE:
      return new i(t);
    case $E:
      return AE(t);
    case RE:
      return new i();
    case NE:
      return wE(t);
  }
}
function hv(t) {
  return typeof t.constructor == "function" && !w0(t) ? Ww(C0(t)) : {};
}
var zE = "[object Map]";
function jE(t) {
  return fs(t) && R0(t) == zE;
}
var E_ = Us && Us.isMap, WE = E_ ? E0(E_) : jE;
const YE = WE;
var qE = "[object Set]";
function ZE(t) {
  return fs(t) && R0(t) == qE;
}
var I_ = Us && Us.isSet, JE = I_ ? E0(I_) : ZE;
const QE = JE;
var KE = 1, tI = 2, eI = 4, lv = "[object Arguments]", rI = "[object Array]", iI = "[object Boolean]", nI = "[object Date]", sI = "[object Error]", uv = "[object Function]", oI = "[object GeneratorFunction]", aI = "[object Map]", hI = "[object Number]", fv = "[object Object]", lI = "[object RegExp]", uI = "[object Set]", fI = "[object String]", cI = "[object Symbol]", dI = "[object WeakMap]", _I = "[object ArrayBuffer]", pI = "[object DataView]", vI = "[object Float32Array]", mI = "[object Float64Array]", gI = "[object Int8Array]", yI = "[object Int16Array]", bI = "[object Int32Array]", xI = "[object Uint8Array]", TI = "[object Uint8ClampedArray]", AI = "[object Uint16Array]", wI = "[object Uint32Array]", mr = {};
mr[lv] = mr[rI] = mr[_I] = mr[pI] = mr[iI] = mr[nI] = mr[vI] = mr[mI] = mr[gI] = mr[yI] = mr[bI] = mr[aI] = mr[hI] = mr[fv] = mr[lI] = mr[uI] = mr[fI] = mr[cI] = mr[xI] = mr[TI] = mr[AI] = mr[wI] = !0;
mr[sI] = mr[uv] = mr[dI] = !1;
function Da(t, e, r, i, s, o) {
  var h, l = e & KE, c = e & tI, _ = e & eI;
  if (r && (h = s ? r(t, i, s, o) : r(t)), h !== void 0)
    return h;
  if (!$n(t))
    return t;
  var y = jo(t);
  if (y) {
    if (h = yE(t), !l)
      return H2(t, h);
  } else {
    var w = R0(t), b = w == uv || w == oI;
    if (P0(t))
      return iv(t, l);
    if (w == fv || w == lv || b && !s) {
      if (h = c || b ? {} : hv(t), !l)
        return c ? sE(t, ZP(h, t)) : rE(t, qP(h, t));
    } else {
      if (!mr[w])
        return s ? t : {};
      h = HE(t, w, l);
    }
  }
  o || (o = new _s());
  var E = o.get(t);
  if (E)
    return E;
  o.set(t, h), QE(t) ? t.forEach(function(O) {
    h.add(Da(O, e, r, O, t, o));
  }) : YE(t) && t.forEach(function(O, H) {
    h.set(H, Da(O, e, r, H, t, o));
  });
  var T = _ ? c ? aE : oE : c ? Ko : I0, P = y ? void 0 : T(t);
  return s4(P || t, function(O, H) {
    P && (H = O, O = t[H]), j2(h, H, Da(O, e, r, H, t, o));
  }), h;
}
var PI = 1, EI = 4;
function rl(t) {
  return Da(t, PI | EI);
}
function II(t) {
  return function(e, r, i) {
    for (var s = -1, o = Object(e), h = i(e), l = h.length; l--; ) {
      var c = h[t ? l : ++s];
      if (r(o[c], c, o) === !1)
        break;
    }
    return e;
  };
}
var CI = II();
const $I = CI;
function bu(t, e, r) {
  (r !== void 0 && !dh(t[e], r) || r === void 0 && !(e in t)) && A0(t, e, r);
}
function RI(t) {
  return fs(t) && _h(t);
}
function xu(t, e) {
  if (!(e === "constructor" && typeof t[e] == "function") && e != "__proto__")
    return t[e];
}
function SI(t) {
  return Qo(t, Ko(t));
}
function NI(t, e, r, i, s, o, h) {
  var l = xu(t, r), c = xu(e, r), _ = h.get(c);
  if (_) {
    bu(t, r, _);
    return;
  }
  var y = o ? o(l, c, r + "", t, e, h) : void 0, w = y === void 0;
  if (w) {
    var b = jo(c), E = !b && P0(c), T = !b && !E && J2(c);
    y = c, b || E || T ? jo(l) ? y = l : RI(l) ? y = H2(l) : E ? (w = !1, y = iv(c, !0)) : T ? (w = !1, y = av(c, !0)) : y = [] : XP(c) || vu(c) ? (y = l, vu(l) ? y = SI(l) : (!$n(l) || T0(l)) && (y = hv(c))) : w = !1;
  }
  w && (h.set(c, y), s(y, c, i, o, h), h.delete(c)), bu(t, r, y);
}
function cv(t, e, r, i, s) {
  t !== e && $I(e, function(o, h) {
    if (s || (s = new _s()), $n(o))
      NI(t, e, h, r, cv, i, s);
    else {
      var l = i ? i(xu(t, h), o, h + "", t, e, s) : void 0;
      l === void 0 && (l = o), bu(t, h, l);
    }
  }, Ko);
}
var LI = _4(function(t, e, r) {
  cv(t, e, r);
});
const C_ = LI, OI = (t, e) => {
  let r = "", i = "";
  return t.endsWith("/") ? r = t : r = t + "/", e[0] !== "/" ? i = e : i = e.slice(1), r + i;
}, FI = (t) => {
//   console.log(...[
//     `
//  %c  %c %c  oh-my-live2d v0.3.0 - https://oml2d.com/  %c %c  
// `,
//     "background: #add7fb; padding:5px 0;",
//     "background: #58b0fc; padding:5px 0;",
//     "color: #fff; background: #030307; padding:5px 0;",
//     "background: #58b0fc; padding:5px 0;",
//     "background: #add7fb; padding:5px 0;"
//   ]);
}, Es = (t, e) => {
  t && Object.assign(t.style, e);
}, MI = (t, e) => {
  const r = rl(t);
  let i = rl(r.models);
  const s = [t.models];
  return C_(t, e), Array.isArray(t.models) && t.models.map((o, h) => {
    i = rl(r.models), s[h] = C_(i, o);
  }), t.models = s, t;
}, UI = (t) => new Promise((e) => setTimeout(e, t)), dv = (t) => {
  const e = document.createElement(t.tagName);
  return e.id = t.id, t.className && (e.className = t.className), t.childrens && t.childrens.forEach((r) => {
    e.appendChild(dv(r));
  }), t.innerHtml && (e.innerHTML = t.innerHtml), e;
}, GI = (t, e, r) => {
  t.innerHTML = e.map((i) => `
    <div title="${i.title}" class="oml-control-item" data-name="${i.id}">
      <svg class="oml-icon">
        <use xlink:href="#${i.name}"></use>
      </svg>
    </div>`).join(""), t.addEventListener("click", (i) => {
    if (i.target === i.currentTarget)
      return;
    let s = i.target;
    for (; s.parentNode !== i.currentTarget; )
      s = s.parentNode;
    r(s.getAttribute("data-name"));
  });
}, DI = () => {
  let t;
  const e = window.matchMedia("screen and (max-width: 768px)"), r = window.matchMedia("screen and (min-width: 768px)");
  return e.matches && (t = "xs"), r.matches && (t = "xl"), t;
};
let $_;
const BI = function(t, e) {
  let r;
  switch (t) {
    case "loading":
      r = `
      <div style="margin-bottom:3px;"></div>
      <svg class="oml-icon oml-loading" aria-hidden="true">
        <use xlink:href="#icon-loading"></use>
      </svg>
    `;
      break;
    case "text":
      r = `<div>${e}</div>`;
      break;
    case "error":
      r = "<div></div>";
      break;
  }
  this.elementList.levitatedBtnEl.innerHTML = r;
}, kI = function(t, e = "", r) {
  return nn(this, null, function* () {
    clearTimeout($_), this.changeLevitatedBtnContent(t, e), this.changeLevitatedBtnStyle({
      animationName: "oml-levitated-btn-display",
      animationDuration: `${this.options.transitionTime}ms`,
      animationFillMode: "forwards"
    }), r && ($_ = setTimeout(() => {
      this.hiddenLevitatedBtn();
    }, r));
  });
}, XI = function() {
  return nn(this, null, function* () {
    this.changeLevitatedBtnStyle({
      animationName: "oml-levitated-btn-hidden",
      animationDuration: `${this.options.transitionTime}ms`,
      animationFillMode: "forwards"
    }), yield UI(this.options.transitionTime);
  });
};
let R_ = 0, il = 0, qo;
const VI = function(t, e) {
  if (!(il > e.priority || !e.message))
    return new Promise((r) => {
      il = e.priority, clearTimeout(R_), R_ = setTimeout(() => {
        Es(t, {
          animationName: "oml-hidden-tooltip,oml-shake-tooltip"
        }), il = 0;
      }, e.persistTime), t.innerHTML = e.message, Es(t, {
        animationName: "oml-display-tooltip,oml-shake-tooltip",
        animationDuration: "1000ms,1000ms",
        animationFillMode: "forwards, none",
        animationIterationCount: "1, infinite"
      }), setTimeout(r, e.persistTime + 1e3);
    });
}, HI = function() {
  this.options.tips && (qo = jI(this.options.tips.idleTips, this));
}, zI = function() {
  qo && qo();
}, jI = function(t, e) {
  const r = setInterval(() => {
    e.onTips("idleTips");
  }, t.persistTime + t.interval);
  return qo = () => clearInterval(r), qo;
}, WI = function(t) {
  return nn(this, null, function* () {
    if (!this.options.tips)
      return;
    const e = yield YI(t, this.options.tips);
    return yield VI(this.elementList.tipsEl, e);
  });
}, YI = function(t, e) {
  return nn(this, null, function* () {
    var h, l, c;
    let r, i;
    switch (t) {
      case "welcomeTips":
        r = qI(e.welcomeTips);
        break;
      case "idleTips":
        (h = e.idleTips) != null && h.remote ? r = (yield (c = (l = e.idleTips).remote) == null ? void 0 : c.call(l)).text : r = S_(e[t].message);
        break;
      default:
        r = S_(e[t].message);
        break;
    }
    const s = e[t].persistTime, o = e[t].priority;
    return t === "idleTips" && (i = e[t].interval), { message: r, persistTime: s, priority: o, interval: i };
  });
}, S_ = function(t) {
  return typeof t == "string" ? t : t.length ? t[Math.floor(Math.random() * t.length)] : void 0;
}, qI = function(t) {
  const { message: e } = t;
  let r = "";
  const i = new Date().getHours().toString(), s = /^[5-7]$/, o = /^(?:[8-9]|1[0-1])$/, h = /^(1[2-3])$/, l = /^1[4-7]$/, c = /^1[8-9]$/, _ = /^2[0-1]$/, y = /^2[2-3]$/;
  return s.test(i) ? r = e.daybreak : o.test(i) ? r = e.morning : h.test(i) ? r = e.noon : l.test(i) ? r = e.afternoon : c.test(i) ? r = e.dusk : _.test(i) ? r = e.night : y.test(i) ? r = e.lateNight : r = e.weeHours, r;
};
class ZI {
  constructor(e, r, i) {
    Zr(this, "options");
    Zr(this, "elementList");
    Zr(this, "currentModelIndex");
    Zr(this, "loadLive2DModel");
    Zr(this, "importType");
    Zr(this, "model");
    Zr(this, "app");
    // method
    Zr(this, "displayLevitatedBtn", kI);
    Zr(this, "hiddenLevitatedBtn", XI);
    Zr(this, "changeLevitatedBtnContent", BI);
    Zr(this, "onTips", WI);
    Zr(this, "startPlayIdleTips", HI);
    Zr(this, "stopPlayIdleTips", zI);
    Zr(this, "_omlScreenSize", "xl");
    Zr(this, "_omlStatus", "hidden");
    this.options = e, this.currentModelIndex = 0, this.loadLive2DModel = r, this.importType = i, this.elementList = this.mountElement(), this.setGlobalStyle(), this.addEventListen(), this.modelLoader(e.models[this.currentModelIndex]), this.options.sayHello && FI();
  }
  set omlStatus(e) {
    this.changeStageStyle({ visibility: "visible" }), this.stageSlideIn().then(() => {
      this.onTips("welcomeTips"), this.startPlayIdleTips(), this.hiddenLevitatedBtn();
    });
  }
  set screenSize(e) {
    this.omlStatus = "display";
  }
  createOmlElements() {
    const e = {};
    return Object.keys(La.elements).forEach((r) => {
      e[r] = dv(La.elements[r]);
    }), e;
  }
  setGlobalStyle() {
    const e = document.createElement("style");
    e.innerHTML = La.globalStyle, document.head.appendChild(e);
  }
  mountElement() {
    const e = new DocumentFragment(), r = this.createOmlElements(), { stageEl: i, canvasEl: s, tipsEl: o, controlsEl: h, levitatedBtnEl: l } = r;
    return i.append(s, o, h), GI(h, La.controls, this.onClickControl.bind(this)), e.append(i, l), document.body.appendChild(e), window.onbeforeunload = () => {
      document.body.removeChild(this.elementList.stageEl), document.body.removeChild(this.elementList.levitatedBtnEl);
    }, r;
  }
  changeStageStyle(e) {
    Es(this.elementList.stageEl, e);
  }
  changeCanvasStyle(e) {
    Es(this.elementList.canvasEl, e);
  }
  changeLevitatedBtnStyle(e) {
    Es(this.elementList.levitatedBtnEl, e);
  }
  changeTipsStyle(e) {
    Es(this.elementList.tipsEl, e);
  }
  reloadStageStyle() {
    let e = this.options.models[this.currentModelIndex].stageStyle.width, r = this.options.models[this.currentModelIndex].stageStyle.height;
    e === "auto" && this.model ? e = this.model.width : this.options.models[this.currentModelIndex].stageStyle.width, r === "auto" && this.model ? r = this.model.height : this.options.models[this.currentModelIndex].stageStyle.height, this.changeStageStyle({
      width: `${e}px`,
      height: `${r}px`,
      backgroundColor: this.options.models[this.currentModelIndex].stageStyle.backgroundColor
    });
  }
  reloadModelTransform() {
    var h;
    const e = this.options.models[this.currentModelIndex].x, r = this.options.models[this.currentModelIndex].y, i = this.options.models[this.currentModelIndex].scale;
    let s, o;
    Array.isArray(i) ? (s = i[0] * 0.1, o = i[1] * 0.1) : s = o = i * 0.1, (h = this.model) == null || h.setTransform(e, r, s, o);
  }
  reloadTipsStyle() {
    !this.options.tips || !this.model || this.changeTipsStyle({
      width: `${this.options.tips.style.width}px`,
      height: `${this.options.tips.style.height}px`,
      top: `${0 - this.options.tips.style.offsetY}px`,
      left: `${this.model.width / 2 + this.model.x + this.options.tips.style.offsetX}px`
    });
  }
  reloadAllTransform() {
    this.reloadModelTransform(), this.reloadStageStyle(), this.reloadTipsStyle();
  }
  /**
   * 
   * @param modelConfig
   */
  modelLoader(e) {
    this.displayLevitatedBtn("loading");
    const r = OI(this.options.source, e.path);
    window.hijackedMode = this.model = this.loadLive2DModel.fromSync(r, {
      onError: () => {
        this.displayLevitatedBtn("error");
      }
    }), this.listenModelEvent();
  }
  /**
   * 
   */
  loadNextModel() {
    return nn(this, null, function* () {
      this.options.models.length > 1 ? (this.stopPlayIdleTips(), yield this.stageSlideOut(), this.currentModelIndex >= this.options.models.length - 1 ? this.currentModelIndex = 0 : this.currentModelIndex++, this.modelLoader(this.options.models[this.currentModelIndex])) : this.displayLevitatedBtn("text", "", 3e3);
    });
  }
  onClickControl(e) {
    return nn(this, null, function* () {
      switch (e) {
        case "SwitchModel":
          yield this.loadNextModel();
          break;
        case "About":
          window.open("");
          break;
        default:
          this.displayLevitatedBtn("text", "", 3e3);
          break;
      }
    });
  }
  listenModelEvent() {
    var e, r, i;
    (e = this.model) == null || e.once("ready", () => {
      this.reloadAllTransform();
    }), (r = this.model) == null || r.once("load", () => nn(this, null, function* () {
      this.displayLevitatedBtn("text", "", 1e3), this.app ? (this.app.stage.removeChildAt(0), this.model && this.app.stage.addChild(this.model)) : (this.app = new u0({
        view: this.elementList.canvasEl,
        resolution: 2,
        autoStart: !0,
        autoDensity: !0,
        backgroundAlpha: 0,
        resizeTo: this.elementList.stageEl
      }), this.model && this.app.stage.addChild(this.model)), this.app.resize(), this.screenSize = DI();
    })), (i = this.model) == null || i.on("hit", (s) => {
      //tapped
      ["Tap", "tap_"].map((o) => {
        var h;
        (h = this.model) == null || h.motion(`${o}${s[0]}`);
      });
    });
  }
  
  addEventListen() {
    const e = window.matchMedia("screen and (max-width: 768px)");
    window.addEventListener("copy", () => {
      this.onTips("copyTips");
    });
  }
  // 
  stageSlideIn() {
    return this.changeStageStyle({
      animationName: "oml-stage-slide-in",
      animationDuration: `${this.options.transitionTime}ms`,
      animationFillMode: "forwards"
    }), new Promise((e) => {
      setTimeout(() => nn(this, null, function* () {
        this._omlStatus = "display", e();
      }), this.options.transitionTime);
    });
  }
}
const JI = (t, e) => {
  let r;
  Hn.models.path = dw[t];
  const i = () => {
    Hn.models = Array.isArray(Hn.models) ? Hn.models : [Hn.models], r = new ZI(Hn, e, t);
  };
  return window.document.addEventListener("DOMContentLoaded", () => {
    r != null || i();
  }), (o) => (MI(Hn, o), i(), {});
}, QI = "complete";
window.PIXI = IT;
k_();
const tC = JI(QI, L2);
export {
  tC as loadOhMyLive2D,
};
